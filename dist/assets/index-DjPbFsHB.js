(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();var XT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ou(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var mp={exports:{}},Us={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y0;function QT(){if(y0)return Us;y0=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,a,s){var u=null;if(s!==void 0&&(u=""+s),a.key!==void 0&&(u=""+a.key),"key"in a){s={};for(var d in a)d!=="key"&&(s[d]=a[d])}else s=a;return a=s.ref,{$$typeof:e,type:i,key:u,ref:a!==void 0?a:null,props:s}}return Us.Fragment=t,Us.jsx=n,Us.jsxs=n,Us}var v0;function WT(){return v0||(v0=1,mp.exports=QT()),mp.exports}var y=WT(),gp={exports:{}},ot={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x0;function ZT(){if(x0)return ot;x0=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),T=Symbol.iterator;function E(z){return z===null||typeof z!="object"?null:(z=T&&z[T]||z["@@iterator"],typeof z=="function"?z:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,D={};function M(z,J,L){this.props=z,this.context=J,this.refs=D,this.updater=L||k}M.prototype.isReactComponent={},M.prototype.setState=function(z,J){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,J,"setState")},M.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function U(){}U.prototype=M.prototype;function O(z,J,L){this.props=z,this.context=J,this.refs=D,this.updater=L||k}var se=O.prototype=new U;se.constructor=O,I(se,M.prototype),se.isPureReactComponent=!0;var Q=Array.isArray;function G(){}var Y={H:null,A:null,T:null,S:null},me=Object.prototype.hasOwnProperty;function j(z,J,L){var Ae=L.ref;return{$$typeof:e,type:z,key:J,ref:Ae!==void 0?Ae:null,props:L}}function B(z,J){return j(z.type,J,z.props)}function K(z){return typeof z=="object"&&z!==null&&z.$$typeof===e}function ce(z){var J={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(L){return J[L]})}var xe=/\/+/g;function _e(z,J){return typeof z=="object"&&z!==null&&z.key!=null?ce(""+z.key):J.toString(36)}function Pe(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(G,G):(z.status="pending",z.then(function(J){z.status==="pending"&&(z.status="fulfilled",z.value=J)},function(J){z.status==="pending"&&(z.status="rejected",z.reason=J)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function ue(z,J,L,Ae,He){var qe=typeof z;(qe==="undefined"||qe==="boolean")&&(z=null);var We=!1;if(z===null)We=!0;else switch(qe){case"bigint":case"string":case"number":We=!0;break;case"object":switch(z.$$typeof){case e:case t:We=!0;break;case g:return We=z._init,ue(We(z._payload),J,L,Ae,He)}}if(We)return He=He(z),We=Ae===""?"."+_e(z,0):Ae,Q(He)?(L="",We!=null&&(L=We.replace(xe,"$&/")+"/"),ue(He,J,L,"",function(Mt){return Mt})):He!=null&&(K(He)&&(He=B(He,L+(He.key==null||z&&z.key===He.key?"":(""+He.key).replace(xe,"$&/")+"/")+We)),J.push(He)),1;We=0;var st=Ae===""?".":Ae+":";if(Q(z))for(var Ne=0;Ne<z.length;Ne++)Ae=z[Ne],qe=st+_e(Ae,Ne),We+=ue(Ae,J,L,qe,He);else if(Ne=E(z),typeof Ne=="function")for(z=Ne.call(z),Ne=0;!(Ae=z.next()).done;)Ae=Ae.value,qe=st+_e(Ae,Ne++),We+=ue(Ae,J,L,qe,He);else if(qe==="object"){if(typeof z.then=="function")return ue(Pe(z),J,L,Ae,He);throw J=String(z),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return We}function Ee(z,J,L){if(z==null)return z;var Ae=[],He=0;return ue(z,Ae,"","",function(qe){return J.call(L,qe,He++)}),Ae}function Me(z){if(z._status===-1){var J=z._result;J=J(),J.then(function(L){(z._status===0||z._status===-1)&&(z._status=1,z._result=L)},function(L){(z._status===0||z._status===-1)&&(z._status=2,z._result=L)}),z._status===-1&&(z._status=0,z._result=J)}if(z._status===1)return z._result.default;throw z._result}var Qe=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},V={map:Ee,forEach:function(z,J,L){Ee(z,function(){J.apply(this,arguments)},L)},count:function(z){var J=0;return Ee(z,function(){J++}),J},toArray:function(z){return Ee(z,function(J){return J})||[]},only:function(z){if(!K(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return ot.Activity=b,ot.Children=V,ot.Component=M,ot.Fragment=n,ot.Profiler=a,ot.PureComponent=O,ot.StrictMode=i,ot.Suspense=p,ot.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,ot.__COMPILER_RUNTIME={__proto__:null,c:function(z){return Y.H.useMemoCache(z)}},ot.cache=function(z){return function(){return z.apply(null,arguments)}},ot.cacheSignal=function(){return null},ot.cloneElement=function(z,J,L){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var Ae=I({},z.props),He=z.key;if(J!=null)for(qe in J.key!==void 0&&(He=""+J.key),J)!me.call(J,qe)||qe==="key"||qe==="__self"||qe==="__source"||qe==="ref"&&J.ref===void 0||(Ae[qe]=J[qe]);var qe=arguments.length-2;if(qe===1)Ae.children=L;else if(1<qe){for(var We=Array(qe),st=0;st<qe;st++)We[st]=arguments[st+2];Ae.children=We}return j(z.type,He,Ae)},ot.createContext=function(z){return z={$$typeof:u,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:s,_context:z},z},ot.createElement=function(z,J,L){var Ae,He={},qe=null;if(J!=null)for(Ae in J.key!==void 0&&(qe=""+J.key),J)me.call(J,Ae)&&Ae!=="key"&&Ae!=="__self"&&Ae!=="__source"&&(He[Ae]=J[Ae]);var We=arguments.length-2;if(We===1)He.children=L;else if(1<We){for(var st=Array(We),Ne=0;Ne<We;Ne++)st[Ne]=arguments[Ne+2];He.children=st}if(z&&z.defaultProps)for(Ae in We=z.defaultProps,We)He[Ae]===void 0&&(He[Ae]=We[Ae]);return j(z,qe,He)},ot.createRef=function(){return{current:null}},ot.forwardRef=function(z){return{$$typeof:d,render:z}},ot.isValidElement=K,ot.lazy=function(z){return{$$typeof:g,_payload:{_status:-1,_result:z},_init:Me}},ot.memo=function(z,J){return{$$typeof:f,type:z,compare:J===void 0?null:J}},ot.startTransition=function(z){var J=Y.T,L={};Y.T=L;try{var Ae=z(),He=Y.S;He!==null&&He(L,Ae),typeof Ae=="object"&&Ae!==null&&typeof Ae.then=="function"&&Ae.then(G,Qe)}catch(qe){Qe(qe)}finally{J!==null&&L.types!==null&&(J.types=L.types),Y.T=J}},ot.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},ot.use=function(z){return Y.H.use(z)},ot.useActionState=function(z,J,L){return Y.H.useActionState(z,J,L)},ot.useCallback=function(z,J){return Y.H.useCallback(z,J)},ot.useContext=function(z){return Y.H.useContext(z)},ot.useDebugValue=function(){},ot.useDeferredValue=function(z,J){return Y.H.useDeferredValue(z,J)},ot.useEffect=function(z,J){return Y.H.useEffect(z,J)},ot.useEffectEvent=function(z){return Y.H.useEffectEvent(z)},ot.useId=function(){return Y.H.useId()},ot.useImperativeHandle=function(z,J,L){return Y.H.useImperativeHandle(z,J,L)},ot.useInsertionEffect=function(z,J){return Y.H.useInsertionEffect(z,J)},ot.useLayoutEffect=function(z,J){return Y.H.useLayoutEffect(z,J)},ot.useMemo=function(z,J){return Y.H.useMemo(z,J)},ot.useOptimistic=function(z,J){return Y.H.useOptimistic(z,J)},ot.useReducer=function(z,J,L){return Y.H.useReducer(z,J,L)},ot.useRef=function(z){return Y.H.useRef(z)},ot.useState=function(z){return Y.H.useState(z)},ot.useSyncExternalStore=function(z,J,L){return Y.H.useSyncExternalStore(z,J,L)},ot.useTransition=function(){return Y.H.useTransition()},ot.version="19.2.0",ot}var b0;function Ch(){return b0||(b0=1,gp.exports=ZT()),gp.exports}var H=Ch();const e1=ou(H);var yp={exports:{}},Os={},vp={exports:{}},xp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w0;function t1(){return w0||(w0=1,(function(e){function t(ue,Ee){var Me=ue.length;ue.push(Ee);e:for(;0<Me;){var Qe=Me-1>>>1,V=ue[Qe];if(0<a(V,Ee))ue[Qe]=Ee,ue[Me]=V,Me=Qe;else break e}}function n(ue){return ue.length===0?null:ue[0]}function i(ue){if(ue.length===0)return null;var Ee=ue[0],Me=ue.pop();if(Me!==Ee){ue[0]=Me;e:for(var Qe=0,V=ue.length,z=V>>>1;Qe<z;){var J=2*(Qe+1)-1,L=ue[J],Ae=J+1,He=ue[Ae];if(0>a(L,Me))Ae<V&&0>a(He,L)?(ue[Qe]=He,ue[Ae]=Me,Qe=Ae):(ue[Qe]=L,ue[J]=Me,Qe=J);else if(Ae<V&&0>a(He,Me))ue[Qe]=He,ue[Ae]=Me,Qe=Ae;else break e}}return Ee}function a(ue,Ee){var Me=ue.sortIndex-Ee.sortIndex;return Me!==0?Me:ue.id-Ee.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var p=[],f=[],g=1,b=null,T=3,E=!1,k=!1,I=!1,D=!1,M=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function se(ue){for(var Ee=n(f);Ee!==null;){if(Ee.callback===null)i(f);else if(Ee.startTime<=ue)i(f),Ee.sortIndex=Ee.expirationTime,t(p,Ee);else break;Ee=n(f)}}function Q(ue){if(I=!1,se(ue),!k)if(n(p)!==null)k=!0,G||(G=!0,ce());else{var Ee=n(f);Ee!==null&&Pe(Q,Ee.startTime-ue)}}var G=!1,Y=-1,me=5,j=-1;function B(){return D?!0:!(e.unstable_now()-j<me)}function K(){if(D=!1,G){var ue=e.unstable_now();j=ue;var Ee=!0;try{e:{k=!1,I&&(I=!1,U(Y),Y=-1),E=!0;var Me=T;try{t:{for(se(ue),b=n(p);b!==null&&!(b.expirationTime>ue&&B());){var Qe=b.callback;if(typeof Qe=="function"){b.callback=null,T=b.priorityLevel;var V=Qe(b.expirationTime<=ue);if(ue=e.unstable_now(),typeof V=="function"){b.callback=V,se(ue),Ee=!0;break t}b===n(p)&&i(p),se(ue)}else i(p);b=n(p)}if(b!==null)Ee=!0;else{var z=n(f);z!==null&&Pe(Q,z.startTime-ue),Ee=!1}}break e}finally{b=null,T=Me,E=!1}Ee=void 0}}finally{Ee?ce():G=!1}}}var ce;if(typeof O=="function")ce=function(){O(K)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,_e=xe.port2;xe.port1.onmessage=K,ce=function(){_e.postMessage(null)}}else ce=function(){M(K,0)};function Pe(ue,Ee){Y=M(function(){ue(e.unstable_now())},Ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ue){ue.callback=null},e.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):me=0<ue?Math.floor(1e3/ue):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_next=function(ue){switch(T){case 1:case 2:case 3:var Ee=3;break;default:Ee=T}var Me=T;T=Ee;try{return ue()}finally{T=Me}},e.unstable_requestPaint=function(){D=!0},e.unstable_runWithPriority=function(ue,Ee){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var Me=T;T=ue;try{return Ee()}finally{T=Me}},e.unstable_scheduleCallback=function(ue,Ee,Me){var Qe=e.unstable_now();switch(typeof Me=="object"&&Me!==null?(Me=Me.delay,Me=typeof Me=="number"&&0<Me?Qe+Me:Qe):Me=Qe,ue){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=Me+V,ue={id:g++,callback:Ee,priorityLevel:ue,startTime:Me,expirationTime:V,sortIndex:-1},Me>Qe?(ue.sortIndex=Me,t(f,ue),n(p)===null&&ue===n(f)&&(I?(U(Y),Y=-1):I=!0,Pe(Q,Me-Qe))):(ue.sortIndex=V,t(p,ue),k||E||(k=!0,G||(G=!0,ce()))),ue},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(ue){var Ee=T;return function(){var Me=T;T=Ee;try{return ue.apply(this,arguments)}finally{T=Me}}}})(xp)),xp}var S0;function n1(){return S0||(S0=1,vp.exports=t1()),vp.exports}var bp={exports:{}},Vn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T0;function r1(){if(T0)return Vn;T0=1;var e=Ch();function t(p){var f="https://react.dev/errors/"+p;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+p+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(p,f,g){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:p,containerInfo:f,implementation:g}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,f){if(p==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Vn.createPortal=function(p,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return s(p,f,null,g)},Vn.flushSync=function(p){var f=u.T,g=i.p;try{if(u.T=null,i.p=2,p)return p()}finally{u.T=f,i.p=g,i.d.f()}},Vn.preconnect=function(p,f){typeof p=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(p,f))},Vn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},Vn.preinit=function(p,f){if(typeof p=="string"&&f&&typeof f.as=="string"){var g=f.as,b=d(g,f.crossOrigin),T=typeof f.integrity=="string"?f.integrity:void 0,E=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?i.d.S(p,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:b,integrity:T,fetchPriority:E}):g==="script"&&i.d.X(p,{crossOrigin:b,integrity:T,fetchPriority:E,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Vn.preinitModule=function(p,f){if(typeof p=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=d(f.as,f.crossOrigin);i.d.M(p,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(p)},Vn.preload=function(p,f){if(typeof p=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,b=d(g,f.crossOrigin);i.d.L(p,g,{crossOrigin:b,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Vn.preloadModule=function(p,f){if(typeof p=="string")if(f){var g=d(f.as,f.crossOrigin);i.d.m(p,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(p)},Vn.requestFormReset=function(p){i.d.r(p)},Vn.unstable_batchedUpdates=function(p,f){return p(f)},Vn.useFormState=function(p,f,g){return u.H.useFormState(p,f,g)},Vn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Vn.version="19.2.0",Vn}var C0;function i1(){if(C0)return bp.exports;C0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),bp.exports=r1(),bp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E0;function o1(){if(E0)return Os;E0=1;var e=n1(),t=Ch(),n=i1();function i(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function s(r){var o=r,l=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(l=o.return),r=o.return;while(r)}return o.tag===3?l:null}function u(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function d(r){if(r.tag===31){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function p(r){if(s(r)!==r)throw Error(i(188))}function f(r){var o=r.alternate;if(!o){if(o=s(r),o===null)throw Error(i(188));return o!==r?null:r}for(var l=r,c=o;;){var x=l.return;if(x===null)break;var S=x.alternate;if(S===null){if(c=x.return,c!==null){l=c;continue}break}if(x.child===S.child){for(S=x.child;S;){if(S===l)return p(x),r;if(S===c)return p(x),o;S=S.sibling}throw Error(i(188))}if(l.return!==c.return)l=x,c=S;else{for(var A=!1,P=x.child;P;){if(P===l){A=!0,l=x,c=S;break}if(P===c){A=!0,c=x,l=S;break}P=P.sibling}if(!A){for(P=S.child;P;){if(P===l){A=!0,l=S,c=x;break}if(P===c){A=!0,c=S,l=x;break}P=P.sibling}if(!A)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:o}function g(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=g(r),o!==null)return o;r=r.sibling}return null}var b=Object.assign,T=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),O=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),me=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function ce(r){return r===null||typeof r!="object"?null:(r=K&&r[K]||r["@@iterator"],typeof r=="function"?r:null)}var xe=Symbol.for("react.client.reference");function _e(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===xe?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case I:return"Fragment";case M:return"Profiler";case D:return"StrictMode";case Q:return"Suspense";case G:return"SuspenseList";case j:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case k:return"Portal";case O:return r.displayName||"Context";case U:return(r._context.displayName||"Context")+".Consumer";case se:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Y:return o=r.displayName||null,o!==null?o:_e(r.type)||"Memo";case me:o=r._payload,r=r._init;try{return _e(r(o))}catch{}}return null}var Pe=Array.isArray,ue=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Me={pending:!1,data:null,method:null,action:null},Qe=[],V=-1;function z(r){return{current:r}}function J(r){0>V||(r.current=Qe[V],Qe[V]=null,V--)}function L(r,o){V++,Qe[V]=r.current,r.current=o}var Ae=z(null),He=z(null),qe=z(null),We=z(null);function st(r,o){switch(L(qe,o),L(He,r),L(Ae,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?qy(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=qy(o),r=jy(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}J(Ae),L(Ae,r)}function Ne(){J(Ae),J(He),J(qe)}function Mt(r){r.memoizedState!==null&&L(We,r);var o=Ae.current,l=jy(o,r.type);o!==l&&(L(He,r),L(Ae,l))}function Tt(r){He.current===r&&(J(Ae),J(He)),We.current===r&&(J(We),Ds._currentValue=Me)}var pt,dr;function tn(r){if(pt===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);pt=o&&o[1]||"",dr=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pt+r+dr}var hn=!1;function Jn(r,o){if(!r||hn)return"";hn=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(o){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(ye){var ge=ye}Reflect.construct(r,[],Ce)}else{try{Ce.call()}catch(ye){ge=ye}r.call(Ce.prototype)}}else{try{throw Error()}catch(ye){ge=ye}(Ce=r())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(ye){if(ye&&ge&&typeof ye.stack=="string")return[ye.stack,ge.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=c.DetermineComponentFrameRoot(),A=S[0],P=S[1];if(A&&P){var $=A.split(`
`),pe=P.split(`
`);for(x=c=0;c<$.length&&!$[c].includes("DetermineComponentFrameRoot");)c++;for(;x<pe.length&&!pe[x].includes("DetermineComponentFrameRoot");)x++;if(c===$.length||x===pe.length)for(c=$.length-1,x=pe.length-1;1<=c&&0<=x&&$[c]!==pe[x];)x--;for(;1<=c&&0<=x;c--,x--)if($[c]!==pe[x]){if(c!==1||x!==1)do if(c--,x--,0>x||$[c]!==pe[x]){var we=`
`+$[c].replace(" at new "," at ");return r.displayName&&we.includes("<anonymous>")&&(we=we.replace("<anonymous>",r.displayName)),we}while(1<=c&&0<=x);break}}}finally{hn=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?tn(l):""}function ei(r,o){switch(r.tag){case 26:case 27:case 5:return tn(r.type);case 16:return tn("Lazy");case 13:return r.child!==o&&o!==null?tn("Suspense Fallback"):tn("Suspense");case 19:return tn("SuspenseList");case 0:case 15:return Jn(r.type,!1);case 11:return Jn(r.type.render,!1);case 1:return Jn(r.type,!0);case 31:return tn("Activity");default:return""}}function Xi(r){try{var o="",l=null;do o+=ei(r,l),l=r,r=r.return;while(r);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var ti=Object.prototype.hasOwnProperty,pr=e.unstable_scheduleCallback,Tn=e.unstable_cancelCallback,Uo=e.unstable_shouldYield,Vr=e.unstable_requestPaint,an=e.unstable_now,Er=e.unstable_getCurrentPriorityLevel,ve=e.unstable_ImmediatePriority,Re=e.unstable_UserBlockingPriority,Je=e.unstable_NormalPriority,rt=e.unstable_LowPriority,dt=e.unstable_IdlePriority,ln=e.log,Cn=e.unstable_setDisableYieldValue,Ht=null,Yt=null;function Bt(r){if(typeof ln=="function"&&Cn(r),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(Ht,r)}catch{}}var Ue=Math.clz32?Math.clz32:Ye,Ft=Math.log,Wt=Math.LN2;function Ye(r){return r>>>=0,r===0?32:31-(Ft(r)/Wt|0)|0}var ke=256,sn=262144,$n=4194304;function En(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function _n(r,o,l){var c=r.pendingLanes;if(c===0)return 0;var x=0,S=r.suspendedLanes,A=r.pingedLanes;r=r.warmLanes;var P=c&134217727;return P!==0?(c=P&~S,c!==0?x=En(c):(A&=P,A!==0?x=En(A):l||(l=P&~r,l!==0&&(x=En(l))))):(P=c&~S,P!==0?x=En(P):A!==0?x=En(A):l||(l=c&~r,l!==0&&(x=En(l)))),x===0?0:o!==0&&o!==x&&(o&S)===0&&(S=x&-x,l=o&-o,S>=l||S===32&&(l&4194048)!==0)?o:x}function _r(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function Ea(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oo(){var r=$n;return $n<<=1,($n&62914560)===0&&($n=4194304),r}function Nn(r){for(var o=[],l=0;31>l;l++)o.push(r);return o}function Ar(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Ll(r,o,l,c,x,S){var A=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var P=r.entanglements,$=r.expirationTimes,pe=r.hiddenUpdates;for(l=A&~l;0<l;){var we=31-Ue(l),Ce=1<<we;P[we]=0,$[we]=-1;var ge=pe[we];if(ge!==null)for(pe[we]=null,we=0;we<ge.length;we++){var ye=ge[we];ye!==null&&(ye.lane&=-536870913)}l&=~Ce}c!==0&&Bo(r,c,0),S!==0&&x===0&&r.tag!==0&&(r.suspendedLanes|=S&~(A&~o))}function Bo(r,o,l){r.pendingLanes|=o,r.suspendedLanes&=~o;var c=31-Ue(o);r.entangledLanes|=o,r.entanglements[c]=r.entanglements[c]|1073741824|l&261930}function zt(r,o){var l=r.entangledLanes|=o;for(r=r.entanglements;l;){var c=31-Ue(l),x=1<<c;x&o|r[c]&o&&(r[c]|=o),l&=~x}}function un(r,o){var l=o&-o;return l=(l&42)!==0?1:Ul(l),(l&(r.suspendedLanes|o))!==0?0:l}function Ul(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Qi(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function zo(){var r=Ee.p;return r!==0?r:(r=window.event,r===void 0?32:c0(r.type))}function qo(r,o){var l=Ee.p;try{return Ee.p=r,o()}finally{Ee.p=l}}var ni=Math.random().toString(36).slice(2),Vt="__reactFiber$"+ni,cn="__reactProps$"+ni,Xn="__reactContainer$"+ni,Wi="__reactEvents$"+ni,Tf="__reactListeners$"+ni,ri="__reactHandles$"+ni,Ol="__reactResources$"+ni,hr="__reactMarker$"+ni;function _a(r){delete r[Vt],delete r[cn],delete r[Wi],delete r[Tf],delete r[ri]}function ii(r){var o=r[Vt];if(o)return o;for(var l=r.parentNode;l;){if(o=l[Xn]||l[Vt]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(r=Jy(r);r!==null;){if(l=r[Vt])return l;r=Jy(r)}return o}r=l,l=r.parentNode}return null}function Pt(r){if(r=r[Vt]||r[Xn]){var o=r.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return r}return null}function mr(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(i(33))}function jn(r){var o=r[Ol];return o||(o=r[Ol]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function fn(r){r[hr]=!0}var xi=new Set,jo={};function Gr(r,o){oi(r,o),oi(r+"Capture",o)}function oi(r,o){for(jo[r]=o,r=0;r<o.length;r++)xi.add(o[r])}var bi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bl={},Ho={};function yu(r){return ti.call(Ho,r)?!0:ti.call(Bl,r)?!1:bi.test(r)?Ho[r]=!0:(Bl[r]=!0,!1)}function ft(r,o,l){if(yu(o))if(l===null)r.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var c=o.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+l)}}function Fo(r,o,l){if(l===null)r.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+l)}}function kr(r,o,l,c){if(c===null)r.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(o,l,""+c)}}function Un(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Zi(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function vu(r,o,l){var c=Object.getOwnPropertyDescriptor(r.constructor.prototype,o);if(!r.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var x=c.get,S=c.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return x.call(this)},set:function(A){l=""+A,S.call(this,A)}}),Object.defineProperty(r,o,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function Aa(r){if(!r._valueTracker){var o=Zi(r)?"checked":"value";r._valueTracker=vu(r,o,""+r[o])}}function zl(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var l=o.getValue(),c="";return r&&(c=Zi(r)?r.checked?"true":"false":r.value),r=c,r!==l?(o.setValue(r),!0):!1}function kt(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Vo=/[\n"\\]/g;function Mn(r){return r.replace(Vo,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function ai(r,o,l,c,x,S,A,P){r.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?r.type=A:r.removeAttribute("type"),o!=null?A==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+Un(o)):r.value!==""+Un(o)&&(r.value=""+Un(o)):A!=="submit"&&A!=="reset"||r.removeAttribute("value"),o!=null?Go(r,A,Un(o)):l!=null?Go(r,A,Un(l)):c!=null&&r.removeAttribute("value"),x==null&&S!=null&&(r.defaultChecked=!!S),x!=null&&(r.checked=x&&typeof x!="function"&&typeof x!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?r.name=""+Un(P):r.removeAttribute("name")}function ka(r,o,l,c,x,S,A,P){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(r.type=S),o!=null||l!=null){if(!(S!=="submit"&&S!=="reset"||o!=null)){Aa(r);return}l=l!=null?""+Un(l):"",o=o!=null?""+Un(o):l,P||o===r.value||(r.value=o),r.defaultValue=o}c=c??x,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=P?r.checked:!!c,r.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(r.name=A),Aa(r)}function Go(r,o,l){o==="number"&&kt(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function Yr(r,o,l,c){if(r=r.options,o){o={};for(var x=0;x<l.length;x++)o["$"+l[x]]=!0;for(l=0;l<r.length;l++)x=o.hasOwnProperty("$"+r[l].value),r[l].selected!==x&&(r[l].selected=x),x&&c&&(r[l].defaultSelected=!0)}else{for(l=""+Un(l),o=null,x=0;x<r.length;x++){if(r[x].value===l){r[x].selected=!0,c&&(r[x].defaultSelected=!0);return}o!==null||r[x].disabled||(o=r[x])}o!==null&&(o.selected=!0)}}function ql(r,o,l){if(o!=null&&(o=""+Un(o),o!==r.value&&(r.value=o),l==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=l!=null?""+Un(l):""}function Yo(r,o,l,c){if(o==null){if(c!=null){if(l!=null)throw Error(i(92));if(Pe(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),o=l}l=Un(o),r.defaultValue=l,c=r.textContent,c===l&&c!==""&&c!==null&&(r.value=c),Aa(r)}function wi(r,o){if(o){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=o;return}}r.textContent=o}var Cf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bt(r,o,l){var c=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":c?r.setProperty(o,l):typeof l!="number"||l===0||Cf.has(o)?o==="float"?r.cssFloat=l:r[o]=(""+l).trim():r[o]=l+"px"}function jl(r,o,l){if(o!=null&&typeof o!="object")throw Error(i(62));if(r=r.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||o!=null&&o.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var x in o)c=o[x],o.hasOwnProperty(x)&&l[x]!==c&&bt(r,x,c)}else for(var S in o)o.hasOwnProperty(S)&&bt(r,S,o[S])}function Hl(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ef=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Kr(r){return Qn.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function nr(){}var Nr=null;function Na(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Si=null,Kt=null;function gr(r){var o=Pt(r);if(o&&(r=o.stateNode)){var l=r[cn]||null;e:switch(r=o.stateNode,o.type){case"input":if(ai(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Mn(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var c=l[o];if(c!==r&&c.form===r.form){var x=c[cn]||null;if(!x)throw Error(i(90));ai(c,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(o=0;o<l.length;o++)c=l[o],c.form===r.form&&zl(c)}break e;case"textarea":ql(r,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&Yr(r,!!l.multiple,o,!1)}}}var Ti=!1;function eo(r,o,l){if(Ti)return r(o,l);Ti=!0;try{var c=r(o);return c}finally{if(Ti=!1,(Si!==null||Kt!==null)&&(lc(),Si&&(o=Si,r=Kt,Kt=Si=null,gr(o),r)))for(o=0;o<r.length;o++)gr(r[o])}}function Ci(r,o){var l=r.stateNode;if(l===null)return null;var c=l[cn]||null;if(c===null)return null;l=c[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,o,typeof l));return l}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fl=!1;if(Rn)try{var Hn={};Object.defineProperty(Hn,"passive",{get:function(){Fl=!0}}),window.addEventListener("test",Hn,Hn),window.removeEventListener("test",Hn,Hn)}catch{Fl=!1}var Mr=null,Ma=null,to=null;function no(){if(to)return to;var r,o=Ma,l=o.length,c,x="value"in Mr?Mr.value:Mr.textContent,S=x.length;for(r=0;r<l&&o[r]===x[r];r++);var A=l-r;for(c=1;c<=A&&o[l-c]===x[S-c];c++);return to=x.slice(r,1<c?1-c:void 0)}function ro(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Ko(){return!0}function xu(){return!1}function mn(r){function o(l,c,x,S,A){this._reactName=l,this._targetInst=x,this.type=c,this.nativeEvent=S,this.target=A,this.currentTarget=null;for(var P in r)r.hasOwnProperty(P)&&(l=r[P],this[P]=l?l(S):S[P]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Ko:xu,this.isPropagationStopped=xu,this}return b(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ko)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ko)},persist:function(){},isPersistent:Ko}),o}var Ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ra=mn(Ei),li=b({},Ei,{view:0,detail:0}),Da=mn(li),Jo,Vl,$o,Ia=b({},li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_i,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==$o&&($o&&r.type==="mousemove"?(Jo=r.screenX-$o.screenX,Vl=r.screenY-$o.screenY):Vl=Jo=0,$o=r),Jo)},movementY:function(r){return"movementY"in r?r.movementY:Vl}}),Pa=mn(Ia),Gl=b({},Ia,{dataTransfer:0}),bu=mn(Gl),La=b({},li,{relatedTarget:0}),io=mn(La),Ua=b({},Ei,{animationName:0,elapsedTime:0,pseudoElement:0}),wu=mn(Ua),_f=b({},Ei,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),oo=mn(_f),Yl=b({},Ei,{data:0}),Oa=mn(Yl),Kl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xo(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=Dn[r])?!!o[r]:!1}function _i(){return Xo}var Su=b({},li,{key:function(r){if(r.key){var o=Kl[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=ro(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Jl[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_i,charCode:function(r){return r.type==="keypress"?ro(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ro(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ba=mn(Su),Tu=b({},Ia,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$l=mn(Tu),za=b({},li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_i}),Xl=mn(za),Ai=b({},Ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ql=mn(Ai),Wl=b({},Ia,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),qa=mn(Wl),Zl=b({},Ei,{newState:0,oldState:0}),Cu=mn(Zl),Af=[9,13,27,32],Qo=Rn&&"CompositionEvent"in window,si=null;Rn&&"documentMode"in document&&(si=document.documentMode);var kf=Rn&&"TextEvent"in window&&!si,ja=Rn&&(!Qo||si&&8<si&&11>=si),Ha=" ",Eu=!1;function es(r,o){switch(r){case"keyup":return Af.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _u(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ki=!1;function Au(r,o){switch(r){case"compositionend":return _u(o);case"keypress":return o.which!==32?null:(Eu=!0,Ha);case"textInput":return r=o.data,r===Ha&&Eu?null:r;default:return null}}function Nf(r,o){if(ki)return r==="compositionend"||!Qo&&es(r,o)?(r=no(),to=Ma=Mr=null,ki=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ja&&o.locale!=="ko"?null:o.data;default:return null}}var ku={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fa(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!ku[r.type]:o==="textarea"}function ts(r,o,l,c){Si?Kt?Kt.push(c):Kt=[c]:Si=c,o=hc(o,"onChange"),0<o.length&&(l=new Ra("onChange","change",null,l,c),r.push({event:l,listeners:o}))}var ao=null,Wo=null;function Mf(r){Py(r,0)}function Va(r){var o=mr(r);if(zl(o))return r}function Zo(r,o){if(r==="change")return o}var Rr=!1;if(Rn){var Jt;if(Rn){var lo="oninput"in document;if(!lo){var Wn=document.createElement("div");Wn.setAttribute("oninput","return;"),lo=typeof Wn.oninput=="function"}Jt=lo}else Jt=!1;Rr=Jt&&(!document.documentMode||9<document.documentMode)}function Nu(){ao&&(ao.detachEvent("onpropertychange",Ga),Wo=ao=null)}function Ga(r){if(r.propertyName==="value"&&Va(Wo)){var o=[];ts(o,Wo,r,Na(r)),eo(Mf,o)}}function Mu(r,o,l){r==="focusin"?(Nu(),ao=o,Wo=l,ao.attachEvent("onpropertychange",Ga)):r==="focusout"&&Nu()}function Ni(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Va(Wo)}function ns(r,o){if(r==="click")return Va(o)}function so(r,o){if(r==="input"||r==="change")return Va(o)}function ui(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var Fn=typeof Object.is=="function"?Object.is:ui;function m(r,o){if(Fn(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var l=Object.keys(r),c=Object.keys(o);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var x=l[c];if(!ti.call(o,x)||!Fn(r[x],o[x]))return!1}return!0}function w(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function C(r,o){var l=w(r);r=0;for(var c;l;){if(l.nodeType===3){if(c=r+l.textContent.length,r<=o&&c>=o)return{node:l,offset:o-r};r=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=w(l)}}function _(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?_(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function N(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=kt(r.document);o instanceof r.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)r=o.contentWindow;else break;o=kt(r.document)}return o}function R(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var q=Rn&&"documentMode"in document&&11>=document.documentMode,F=null,W=null,Z=null,ie=!1;function X(r,o,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ie||F==null||F!==kt(c)||(c=F,"selectionStart"in c&&R(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Z&&m(Z,c)||(Z=c,c=hc(W,"onSelect"),0<c.length&&(o=new Ra("onSelect","select",null,o,l),r.push({event:o,listeners:c}),o.target=F)))}function ae(r,o){var l={};return l[r.toLowerCase()]=o.toLowerCase(),l["Webkit"+r]="webkit"+o,l["Moz"+r]="moz"+o,l}var ee={animationend:ae("Animation","AnimationEnd"),animationiteration:ae("Animation","AnimationIteration"),animationstart:ae("Animation","AnimationStart"),transitionrun:ae("Transition","TransitionRun"),transitionstart:ae("Transition","TransitionStart"),transitioncancel:ae("Transition","TransitionCancel"),transitionend:ae("Transition","TransitionEnd")},ne={},re={};Rn&&(re=document.createElement("div").style,"AnimationEvent"in window||(delete ee.animationend.animation,delete ee.animationiteration.animation,delete ee.animationstart.animation),"TransitionEvent"in window||delete ee.transitionend.transition);function oe(r){if(ne[r])return ne[r];if(!ee[r])return r;var o=ee[r],l;for(l in o)if(o.hasOwnProperty(l)&&l in re)return ne[r]=o[l];return r}var fe=oe("animationend"),he=oe("animationiteration"),be=oe("animationstart"),Te=oe("transitionrun"),Oe=oe("transitionstart"),je=oe("transitioncancel"),De=oe("transitionend"),Be=new Map,ze="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ze.push("scrollEnd");function Ie(r,o){Be.set(r,o),Gr(o,[r])}var Fe=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},$e=[],it=0,at=0;function In(){for(var r=it,o=at=it=0;o<r;){var l=$e[o];$e[o++]=null;var c=$e[o];$e[o++]=null;var x=$e[o];$e[o++]=null;var S=$e[o];if($e[o++]=null,c!==null&&x!==null){var A=c.pending;A===null?x.next=x:(x.next=A.next,A.next=x),c.pending=x}S!==0&&ea(l,x,S)}}function nt(r,o,l,c){$e[it++]=r,$e[it++]=o,$e[it++]=l,$e[it++]=c,at|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function gn(r,o,l,c){return nt(r,o,l,c),yn(r)}function Zt(r,o){return nt(r,null,null,o),yn(r)}function ea(r,o,l){r.lanes|=l;var c=r.alternate;c!==null&&(c.lanes|=l);for(var x=!1,S=r.return;S!==null;)S.childLanes|=l,c=S.alternate,c!==null&&(c.childLanes|=l),S.tag===22&&(r=S.stateNode,r===null||r._visibility&1||(x=!0)),r=S,S=S.return;return r.tag===3?(S=r.stateNode,x&&o!==null&&(x=31-Ue(l),r=S.hiddenUpdates,c=r[x],c===null?r[x]=[o]:c.push(o),o.lane=l|536870912),S):null}function yn(r){if(50<Es)throw Es=0,zd=null,Error(i(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var rr={};function rs(r,o,l,c){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yr(r,o,l,c){return new rs(r,o,l,c)}function Rf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Mi(r,o){var l=r.alternate;return l===null?(l=yr(r.tag,o,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=o,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,o=r.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function gm(r,o){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,o=l.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function Ru(r,o,l,c,x,S){var A=0;if(c=r,typeof r=="function")Rf(r)&&(A=1);else if(typeof r=="string")A=BT(r,l,Ae.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case j:return r=yr(31,l,o,x),r.elementType=j,r.lanes=S,r;case I:return ta(l.children,x,S,o);case D:A=8,x|=24;break;case M:return r=yr(12,l,o,x|2),r.elementType=M,r.lanes=S,r;case Q:return r=yr(13,l,o,x),r.elementType=Q,r.lanes=S,r;case G:return r=yr(19,l,o,x),r.elementType=G,r.lanes=S,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case O:A=10;break e;case U:A=9;break e;case se:A=11;break e;case Y:A=14;break e;case me:A=16,c=null;break e}A=29,l=Error(i(130,r===null?"null":typeof r,"")),c=null}return o=yr(A,l,o,x),o.elementType=r,o.type=c,o.lanes=S,o}function ta(r,o,l,c){return r=yr(7,r,c,o),r.lanes=l,r}function Df(r,o,l){return r=yr(6,r,null,o),r.lanes=l,r}function ym(r){var o=yr(18,null,null,0);return o.stateNode=r,o}function If(r,o,l){return o=yr(4,r.children!==null?r.children:[],r.key,o),o.lanes=l,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var vm=new WeakMap;function Dr(r,o){if(typeof r=="object"&&r!==null){var l=vm.get(r);return l!==void 0?l:(o={value:r,source:o,stack:Xi(o)},vm.set(r,o),o)}return{value:r,source:o,stack:Xi(o)}}var Ya=[],Ka=0,Du=null,is=0,Ir=[],Pr=0,uo=null,ci=1,fi="";function Ri(r,o){Ya[Ka++]=is,Ya[Ka++]=Du,Du=r,is=o}function xm(r,o,l){Ir[Pr++]=ci,Ir[Pr++]=fi,Ir[Pr++]=uo,uo=r;var c=ci;r=fi;var x=32-Ue(c)-1;c&=~(1<<x),l+=1;var S=32-Ue(o)+x;if(30<S){var A=x-x%5;S=(c&(1<<A)-1).toString(32),c>>=A,x-=A,ci=1<<32-Ue(o)+x|l<<x|c,fi=S+r}else ci=1<<S|l<<x|c,fi=r}function Pf(r){r.return!==null&&(Ri(r,1),xm(r,1,0))}function Lf(r){for(;r===Du;)Du=Ya[--Ka],Ya[Ka]=null,is=Ya[--Ka],Ya[Ka]=null;for(;r===uo;)uo=Ir[--Pr],Ir[Pr]=null,fi=Ir[--Pr],Ir[Pr]=null,ci=Ir[--Pr],Ir[Pr]=null}function bm(r,o){Ir[Pr++]=ci,Ir[Pr++]=fi,Ir[Pr++]=uo,ci=o.id,fi=o.overflow,uo=r}var On=null,$t=null,wt=!1,co=null,Lr=!1,Uf=Error(i(519));function fo(r){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw os(Dr(o,r)),Uf}function wm(r){var o=r.stateNode,l=r.type,c=r.memoizedProps;switch(o[Vt]=r,o[cn]=c,l){case"dialog":mt("cancel",o),mt("close",o);break;case"iframe":case"object":case"embed":mt("load",o);break;case"video":case"audio":for(l=0;l<As.length;l++)mt(As[l],o);break;case"source":mt("error",o);break;case"img":case"image":case"link":mt("error",o),mt("load",o);break;case"details":mt("toggle",o);break;case"input":mt("invalid",o),ka(o,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":mt("invalid",o);break;case"textarea":mt("invalid",o),Yo(o,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||c.suppressHydrationWarning===!0||By(o.textContent,l)?(c.popover!=null&&(mt("beforetoggle",o),mt("toggle",o)),c.onScroll!=null&&mt("scroll",o),c.onScrollEnd!=null&&mt("scrollend",o),c.onClick!=null&&(o.onclick=nr),o=!0):o=!1,o||fo(r,!0)}function Sm(r){for(On=r.return;On;)switch(On.tag){case 5:case 31:case 13:Lr=!1;return;case 27:case 3:Lr=!0;return;default:On=On.return}}function Ja(r){if(r!==On)return!1;if(!wt)return Sm(r),wt=!0,!1;var o=r.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||ep(r.type,r.memoizedProps)),l=!l),l&&$t&&fo(r),Sm(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));$t=Ky(r)}else if(o===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));$t=Ky(r)}else o===27?(o=$t,_o(r.type)?(r=op,op=null,$t=r):$t=o):$t=On?Or(r.stateNode.nextSibling):null;return!0}function na(){$t=On=null,wt=!1}function Of(){var r=co;return r!==null&&(lr===null?lr=r:lr.push.apply(lr,r),co=null),r}function os(r){co===null?co=[r]:co.push(r)}var Bf=z(null),ra=null,Di=null;function po(r,o,l){L(Bf,o._currentValue),o._currentValue=l}function Ii(r){r._currentValue=Bf.current,J(Bf)}function zf(r,o,l){for(;r!==null;){var c=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,c!==null&&(c.childLanes|=o)):c!==null&&(c.childLanes&o)!==o&&(c.childLanes|=o),r===l)break;r=r.return}}function qf(r,o,l,c){var x=r.child;for(x!==null&&(x.return=r);x!==null;){var S=x.dependencies;if(S!==null){var A=x.child;S=S.firstContext;e:for(;S!==null;){var P=S;S=x;for(var $=0;$<o.length;$++)if(P.context===o[$]){S.lanes|=l,P=S.alternate,P!==null&&(P.lanes|=l),zf(S.return,l,r),c||(A=null);break e}S=P.next}}else if(x.tag===18){if(A=x.return,A===null)throw Error(i(341));A.lanes|=l,S=A.alternate,S!==null&&(S.lanes|=l),zf(A,l,r),A=null}else A=x.child;if(A!==null)A.return=x;else for(A=x;A!==null;){if(A===r){A=null;break}if(x=A.sibling,x!==null){x.return=A.return,A=x;break}A=A.return}x=A}}function $a(r,o,l,c){r=null;for(var x=o,S=!1;x!==null;){if(!S){if((x.flags&524288)!==0)S=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var A=x.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var P=x.type;Fn(x.pendingProps.value,A.value)||(r!==null?r.push(P):r=[P])}}else if(x===We.current){if(A=x.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(r!==null?r.push(Ds):r=[Ds])}x=x.return}r!==null&&qf(o,r,l,c),o.flags|=262144}function Iu(r){for(r=r.firstContext;r!==null;){if(!Fn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ia(r){ra=r,Di=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Bn(r){return Tm(ra,r)}function Pu(r,o){return ra===null&&ia(r),Tm(r,o)}function Tm(r,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},Di===null){if(r===null)throw Error(i(308));Di=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else Di=Di.next=o;return l}var PS=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(l,c){r.push(c)}};this.abort=function(){o.aborted=!0,r.forEach(function(l){return l()})}},LS=e.unstable_scheduleCallback,US=e.unstable_NormalPriority,vn={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jf(){return{controller:new PS,data:new Map,refCount:0}}function as(r){r.refCount--,r.refCount===0&&LS(US,function(){r.controller.abort()})}var ls=null,Hf=0,Xa=0,Qa=null;function OS(r,o){if(ls===null){var l=ls=[];Hf=0,Xa=Gd(),Qa={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Hf++,o.then(Cm,Cm),o}function Cm(){if(--Hf===0&&ls!==null){Qa!==null&&(Qa.status="fulfilled");var r=ls;ls=null,Xa=0,Qa=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function BS(r,o){var l=[],c={status:"pending",value:null,reason:null,then:function(x){l.push(x)}};return r.then(function(){c.status="fulfilled",c.value=o;for(var x=0;x<l.length;x++)(0,l[x])(o)},function(x){for(c.status="rejected",c.reason=x,x=0;x<l.length;x++)(0,l[x])(void 0)}),c}var Em=ue.S;ue.S=function(r,o){sy=an(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&OS(r,o),Em!==null&&Em(r,o)};var oa=z(null);function Ff(){var r=oa.current;return r!==null?r:qt.pooledCache}function Lu(r,o){o===null?L(oa,oa.current):L(oa,o.pool)}function _m(){var r=Ff();return r===null?null:{parent:vn._currentValue,pool:r}}var Wa=Error(i(460)),Vf=Error(i(474)),Uu=Error(i(542)),Ou={then:function(){}};function Am(r){return r=r.status,r==="fulfilled"||r==="rejected"}function km(r,o,l){switch(l=r[l],l===void 0?r.push(o):l!==o&&(o.then(nr,nr),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,Mm(r),r;default:if(typeof o.status=="string")o.then(nr,nr);else{if(r=qt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=o,r.status="pending",r.then(function(c){if(o.status==="pending"){var x=o;x.status="fulfilled",x.value=c}},function(c){if(o.status==="pending"){var x=o;x.status="rejected",x.reason=c}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,Mm(r),r}throw la=o,Wa}}function aa(r){try{var o=r._init;return o(r._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(la=l,Wa):l}}var la=null;function Nm(){if(la===null)throw Error(i(459));var r=la;return la=null,r}function Mm(r){if(r===Wa||r===Uu)throw Error(i(483))}var Za=null,ss=0;function Bu(r){var o=ss;return ss+=1,Za===null&&(Za=[]),km(Za,r,o)}function us(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function zu(r,o){throw o.$$typeof===T?Error(i(525)):(r=Object.prototype.toString.call(o),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function Rm(r){function o(le,te){if(r){var de=le.deletions;de===null?(le.deletions=[te],le.flags|=16):de.push(te)}}function l(le,te){if(!r)return null;for(;te!==null;)o(le,te),te=te.sibling;return null}function c(le){for(var te=new Map;le!==null;)le.key!==null?te.set(le.key,le):te.set(le.index,le),le=le.sibling;return te}function x(le,te){return le=Mi(le,te),le.index=0,le.sibling=null,le}function S(le,te,de){return le.index=de,r?(de=le.alternate,de!==null?(de=de.index,de<te?(le.flags|=67108866,te):de):(le.flags|=67108866,te)):(le.flags|=1048576,te)}function A(le){return r&&le.alternate===null&&(le.flags|=67108866),le}function P(le,te,de,Se){return te===null||te.tag!==6?(te=Df(de,le.mode,Se),te.return=le,te):(te=x(te,de),te.return=le,te)}function $(le,te,de,Se){var Xe=de.type;return Xe===I?we(le,te,de.props.children,Se,de.key):te!==null&&(te.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===me&&aa(Xe)===te.type)?(te=x(te,de.props),us(te,de),te.return=le,te):(te=Ru(de.type,de.key,de.props,null,le.mode,Se),us(te,de),te.return=le,te)}function pe(le,te,de,Se){return te===null||te.tag!==4||te.stateNode.containerInfo!==de.containerInfo||te.stateNode.implementation!==de.implementation?(te=If(de,le.mode,Se),te.return=le,te):(te=x(te,de.children||[]),te.return=le,te)}function we(le,te,de,Se,Xe){return te===null||te.tag!==7?(te=ta(de,le.mode,Se,Xe),te.return=le,te):(te=x(te,de),te.return=le,te)}function Ce(le,te,de){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return te=Df(""+te,le.mode,de),te.return=le,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case E:return de=Ru(te.type,te.key,te.props,null,le.mode,de),us(de,te),de.return=le,de;case k:return te=If(te,le.mode,de),te.return=le,te;case me:return te=aa(te),Ce(le,te,de)}if(Pe(te)||ce(te))return te=ta(te,le.mode,de,null),te.return=le,te;if(typeof te.then=="function")return Ce(le,Bu(te),de);if(te.$$typeof===O)return Ce(le,Pu(le,te),de);zu(le,te)}return null}function ge(le,te,de,Se){var Xe=te!==null?te.key:null;if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return Xe!==null?null:P(le,te,""+de,Se);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case E:return de.key===Xe?$(le,te,de,Se):null;case k:return de.key===Xe?pe(le,te,de,Se):null;case me:return de=aa(de),ge(le,te,de,Se)}if(Pe(de)||ce(de))return Xe!==null?null:we(le,te,de,Se,null);if(typeof de.then=="function")return ge(le,te,Bu(de),Se);if(de.$$typeof===O)return ge(le,te,Pu(le,de),Se);zu(le,de)}return null}function ye(le,te,de,Se,Xe){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return le=le.get(de)||null,P(te,le,""+Se,Xe);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case E:return le=le.get(Se.key===null?de:Se.key)||null,$(te,le,Se,Xe);case k:return le=le.get(Se.key===null?de:Se.key)||null,pe(te,le,Se,Xe);case me:return Se=aa(Se),ye(le,te,de,Se,Xe)}if(Pe(Se)||ce(Se))return le=le.get(de)||null,we(te,le,Se,Xe,null);if(typeof Se.then=="function")return ye(le,te,de,Bu(Se),Xe);if(Se.$$typeof===O)return ye(le,te,de,Pu(te,Se),Xe);zu(te,Se)}return null}function Ve(le,te,de,Se){for(var Xe=null,Et=null,Ke=te,ut=te=0,vt=null;Ke!==null&&ut<de.length;ut++){Ke.index>ut?(vt=Ke,Ke=null):vt=Ke.sibling;var _t=ge(le,Ke,de[ut],Se);if(_t===null){Ke===null&&(Ke=vt);break}r&&Ke&&_t.alternate===null&&o(le,Ke),te=S(_t,te,ut),Et===null?Xe=_t:Et.sibling=_t,Et=_t,Ke=vt}if(ut===de.length)return l(le,Ke),wt&&Ri(le,ut),Xe;if(Ke===null){for(;ut<de.length;ut++)Ke=Ce(le,de[ut],Se),Ke!==null&&(te=S(Ke,te,ut),Et===null?Xe=Ke:Et.sibling=Ke,Et=Ke);return wt&&Ri(le,ut),Xe}for(Ke=c(Ke);ut<de.length;ut++)vt=ye(Ke,le,ut,de[ut],Se),vt!==null&&(r&&vt.alternate!==null&&Ke.delete(vt.key===null?ut:vt.key),te=S(vt,te,ut),Et===null?Xe=vt:Et.sibling=vt,Et=vt);return r&&Ke.forEach(function(Ro){return o(le,Ro)}),wt&&Ri(le,ut),Xe}function tt(le,te,de,Se){if(de==null)throw Error(i(151));for(var Xe=null,Et=null,Ke=te,ut=te=0,vt=null,_t=de.next();Ke!==null&&!_t.done;ut++,_t=de.next()){Ke.index>ut?(vt=Ke,Ke=null):vt=Ke.sibling;var Ro=ge(le,Ke,_t.value,Se);if(Ro===null){Ke===null&&(Ke=vt);break}r&&Ke&&Ro.alternate===null&&o(le,Ke),te=S(Ro,te,ut),Et===null?Xe=Ro:Et.sibling=Ro,Et=Ro,Ke=vt}if(_t.done)return l(le,Ke),wt&&Ri(le,ut),Xe;if(Ke===null){for(;!_t.done;ut++,_t=de.next())_t=Ce(le,_t.value,Se),_t!==null&&(te=S(_t,te,ut),Et===null?Xe=_t:Et.sibling=_t,Et=_t);return wt&&Ri(le,ut),Xe}for(Ke=c(Ke);!_t.done;ut++,_t=de.next())_t=ye(Ke,le,ut,_t.value,Se),_t!==null&&(r&&_t.alternate!==null&&Ke.delete(_t.key===null?ut:_t.key),te=S(_t,te,ut),Et===null?Xe=_t:Et.sibling=_t,Et=_t);return r&&Ke.forEach(function($T){return o(le,$T)}),wt&&Ri(le,ut),Xe}function Ot(le,te,de,Se){if(typeof de=="object"&&de!==null&&de.type===I&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case E:e:{for(var Xe=de.key;te!==null;){if(te.key===Xe){if(Xe=de.type,Xe===I){if(te.tag===7){l(le,te.sibling),Se=x(te,de.props.children),Se.return=le,le=Se;break e}}else if(te.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===me&&aa(Xe)===te.type){l(le,te.sibling),Se=x(te,de.props),us(Se,de),Se.return=le,le=Se;break e}l(le,te);break}else o(le,te);te=te.sibling}de.type===I?(Se=ta(de.props.children,le.mode,Se,de.key),Se.return=le,le=Se):(Se=Ru(de.type,de.key,de.props,null,le.mode,Se),us(Se,de),Se.return=le,le=Se)}return A(le);case k:e:{for(Xe=de.key;te!==null;){if(te.key===Xe)if(te.tag===4&&te.stateNode.containerInfo===de.containerInfo&&te.stateNode.implementation===de.implementation){l(le,te.sibling),Se=x(te,de.children||[]),Se.return=le,le=Se;break e}else{l(le,te);break}else o(le,te);te=te.sibling}Se=If(de,le.mode,Se),Se.return=le,le=Se}return A(le);case me:return de=aa(de),Ot(le,te,de,Se)}if(Pe(de))return Ve(le,te,de,Se);if(ce(de)){if(Xe=ce(de),typeof Xe!="function")throw Error(i(150));return de=Xe.call(de),tt(le,te,de,Se)}if(typeof de.then=="function")return Ot(le,te,Bu(de),Se);if(de.$$typeof===O)return Ot(le,te,Pu(le,de),Se);zu(le,de)}return typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint"?(de=""+de,te!==null&&te.tag===6?(l(le,te.sibling),Se=x(te,de),Se.return=le,le=Se):(l(le,te),Se=Df(de,le.mode,Se),Se.return=le,le=Se),A(le)):l(le,te)}return function(le,te,de,Se){try{ss=0;var Xe=Ot(le,te,de,Se);return Za=null,Xe}catch(Ke){if(Ke===Wa||Ke===Uu)throw Ke;var Et=yr(29,Ke,null,le.mode);return Et.lanes=Se,Et.return=le,Et}finally{}}}var sa=Rm(!0),Dm=Rm(!1),ho=!1;function Gf(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yf(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function mo(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function go(r,o,l){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(Nt&2)!==0){var x=c.pending;return x===null?o.next=o:(o.next=x.next,x.next=o),c.pending=o,o=yn(r),ea(r,null,l),o}return nt(r,c,o,l),yn(r)}function cs(r,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var c=o.lanes;c&=r.pendingLanes,l|=c,o.lanes=l,zt(r,l)}}function Kf(r,o){var l=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var x=null,S=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};S===null?x=S=A:S=S.next=A,l=l.next}while(l!==null);S===null?x=S=o:S=S.next=o}else x=S=o;l={baseState:c.baseState,firstBaseUpdate:x,lastBaseUpdate:S,shared:c.shared,callbacks:c.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=o:r.next=o,l.lastBaseUpdate=o}var Jf=!1;function fs(){if(Jf){var r=Qa;if(r!==null)throw r}}function ds(r,o,l,c){Jf=!1;var x=r.updateQueue;ho=!1;var S=x.firstBaseUpdate,A=x.lastBaseUpdate,P=x.shared.pending;if(P!==null){x.shared.pending=null;var $=P,pe=$.next;$.next=null,A===null?S=pe:A.next=pe,A=$;var we=r.alternate;we!==null&&(we=we.updateQueue,P=we.lastBaseUpdate,P!==A&&(P===null?we.firstBaseUpdate=pe:P.next=pe,we.lastBaseUpdate=$))}if(S!==null){var Ce=x.baseState;A=0,we=pe=$=null,P=S;do{var ge=P.lane&-536870913,ye=ge!==P.lane;if(ye?(yt&ge)===ge:(c&ge)===ge){ge!==0&&ge===Xa&&(Jf=!0),we!==null&&(we=we.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var Ve=r,tt=P;ge=o;var Ot=l;switch(tt.tag){case 1:if(Ve=tt.payload,typeof Ve=="function"){Ce=Ve.call(Ot,Ce,ge);break e}Ce=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=tt.payload,ge=typeof Ve=="function"?Ve.call(Ot,Ce,ge):Ve,ge==null)break e;Ce=b({},Ce,ge);break e;case 2:ho=!0}}ge=P.callback,ge!==null&&(r.flags|=64,ye&&(r.flags|=8192),ye=x.callbacks,ye===null?x.callbacks=[ge]:ye.push(ge))}else ye={lane:ge,tag:P.tag,payload:P.payload,callback:P.callback,next:null},we===null?(pe=we=ye,$=Ce):we=we.next=ye,A|=ge;if(P=P.next,P===null){if(P=x.shared.pending,P===null)break;ye=P,P=ye.next,ye.next=null,x.lastBaseUpdate=ye,x.shared.pending=null}}while(!0);we===null&&($=Ce),x.baseState=$,x.firstBaseUpdate=pe,x.lastBaseUpdate=we,S===null&&(x.shared.lanes=0),wo|=A,r.lanes=A,r.memoizedState=Ce}}function Im(r,o){if(typeof r!="function")throw Error(i(191,r));r.call(o)}function Pm(r,o){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)Im(l[r],o)}var el=z(null),qu=z(0);function Lm(r,o){r=Hi,L(qu,r),L(el,o),Hi=r|o.baseLanes}function $f(){L(qu,Hi),L(el,el.current)}function Xf(){Hi=qu.current,J(el),J(qu)}var vr=z(null),Ur=null;function yo(r){var o=r.alternate;L(dn,dn.current&1),L(vr,r),Ur===null&&(o===null||el.current!==null||o.memoizedState!==null)&&(Ur=r)}function Qf(r){L(dn,dn.current),L(vr,r),Ur===null&&(Ur=r)}function Um(r){r.tag===22?(L(dn,dn.current),L(vr,r),Ur===null&&(Ur=r)):vo()}function vo(){L(dn,dn.current),L(vr,vr.current)}function xr(r){J(vr),Ur===r&&(Ur=null),J(dn)}var dn=z(0);function ju(r){for(var o=r;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||rp(l)||ip(l)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Pi=0,lt=null,Lt=null,xn=null,Hu=!1,tl=!1,ua=!1,Fu=0,ps=0,nl=null,zS=0;function rn(){throw Error(i(321))}function Wf(r,o){if(o===null)return!1;for(var l=0;l<o.length&&l<r.length;l++)if(!Fn(r[l],o[l]))return!1;return!0}function Zf(r,o,l,c,x,S){return Pi=S,lt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,ue.H=r===null||r.memoizedState===null?xg:hd,ua=!1,S=l(c,x),ua=!1,tl&&(S=Bm(o,l,c,x)),Om(r),S}function Om(r){ue.H=gs;var o=Lt!==null&&Lt.next!==null;if(Pi=0,xn=Lt=lt=null,Hu=!1,ps=0,nl=null,o)throw Error(i(300));r===null||bn||(r=r.dependencies,r!==null&&Iu(r)&&(bn=!0))}function Bm(r,o,l,c){lt=r;var x=0;do{if(tl&&(nl=null),ps=0,tl=!1,25<=x)throw Error(i(301));if(x+=1,xn=Lt=null,r.updateQueue!=null){var S=r.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}ue.H=bg,S=o(l,c)}while(tl);return S}function qS(){var r=ue.H,o=r.useState()[0];return o=typeof o.then=="function"?hs(o):o,r=r.useState()[0],(Lt!==null?Lt.memoizedState:null)!==r&&(lt.flags|=1024),o}function ed(){var r=Fu!==0;return Fu=0,r}function td(r,o,l){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~l}function nd(r){if(Hu){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Hu=!1}Pi=0,xn=Lt=lt=null,tl=!1,ps=Fu=0,nl=null}function Zn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?lt.memoizedState=xn=r:xn=xn.next=r,xn}function pn(){if(Lt===null){var r=lt.alternate;r=r!==null?r.memoizedState:null}else r=Lt.next;var o=xn===null?lt.memoizedState:xn.next;if(o!==null)xn=o,Lt=r;else{if(r===null)throw lt.alternate===null?Error(i(467)):Error(i(310));Lt=r,r={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},xn===null?lt.memoizedState=xn=r:xn=xn.next=r}return xn}function Vu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hs(r){var o=ps;return ps+=1,nl===null&&(nl=[]),r=km(nl,r,o),o=lt,(xn===null?o.memoizedState:xn.next)===null&&(o=o.alternate,ue.H=o===null||o.memoizedState===null?xg:hd),r}function Gu(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return hs(r);if(r.$$typeof===O)return Bn(r)}throw Error(i(438,String(r)))}function rd(r){var o=null,l=lt.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var c=lt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(o={data:c.data.map(function(x){return x.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=Vu(),lt.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(r),c=0;c<r;c++)l[c]=B;return o.index++,l}function Li(r,o){return typeof o=="function"?o(r):o}function Yu(r){var o=pn();return id(o,Lt,r)}function id(r,o,l){var c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var x=r.baseQueue,S=c.pending;if(S!==null){if(x!==null){var A=x.next;x.next=S.next,S.next=A}o.baseQueue=x=S,c.pending=null}if(S=r.baseState,x===null)r.memoizedState=S;else{o=x.next;var P=A=null,$=null,pe=o,we=!1;do{var Ce=pe.lane&-536870913;if(Ce!==pe.lane?(yt&Ce)===Ce:(Pi&Ce)===Ce){var ge=pe.revertLane;if(ge===0)$!==null&&($=$.next={lane:0,revertLane:0,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),Ce===Xa&&(we=!0);else if((Pi&ge)===ge){pe=pe.next,ge===Xa&&(we=!0);continue}else Ce={lane:0,revertLane:pe.revertLane,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},$===null?(P=$=Ce,A=S):$=$.next=Ce,lt.lanes|=ge,wo|=ge;Ce=pe.action,ua&&l(S,Ce),S=pe.hasEagerState?pe.eagerState:l(S,Ce)}else ge={lane:Ce,revertLane:pe.revertLane,gesture:pe.gesture,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},$===null?(P=$=ge,A=S):$=$.next=ge,lt.lanes|=Ce,wo|=Ce;pe=pe.next}while(pe!==null&&pe!==o);if($===null?A=S:$.next=P,!Fn(S,r.memoizedState)&&(bn=!0,we&&(l=Qa,l!==null)))throw l;r.memoizedState=S,r.baseState=A,r.baseQueue=$,c.lastRenderedState=S}return x===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function od(r){var o=pn(),l=o.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var c=l.dispatch,x=l.pending,S=o.memoizedState;if(x!==null){l.pending=null;var A=x=x.next;do S=r(S,A.action),A=A.next;while(A!==x);Fn(S,o.memoizedState)||(bn=!0),o.memoizedState=S,o.baseQueue===null&&(o.baseState=S),l.lastRenderedState=S}return[S,c]}function zm(r,o,l){var c=lt,x=pn(),S=wt;if(S){if(l===void 0)throw Error(i(407));l=l()}else l=o();var A=!Fn((Lt||x).memoizedState,l);if(A&&(x.memoizedState=l,bn=!0),x=x.queue,sd(Hm.bind(null,c,x,r),[r]),x.getSnapshot!==o||A||xn!==null&&xn.memoizedState.tag&1){if(c.flags|=2048,rl(9,{destroy:void 0},jm.bind(null,c,x,l,o),null),qt===null)throw Error(i(349));S||(Pi&127)!==0||qm(c,o,l)}return l}function qm(r,o,l){r.flags|=16384,r={getSnapshot:o,value:l},o=lt.updateQueue,o===null?(o=Vu(),lt.updateQueue=o,o.stores=[r]):(l=o.stores,l===null?o.stores=[r]:l.push(r))}function jm(r,o,l,c){o.value=l,o.getSnapshot=c,Fm(o)&&Vm(r)}function Hm(r,o,l){return l(function(){Fm(o)&&Vm(r)})}function Fm(r){var o=r.getSnapshot;r=r.value;try{var l=o();return!Fn(r,l)}catch{return!0}}function Vm(r){var o=Zt(r,2);o!==null&&sr(o,r,2)}function ad(r){var o=Zn();if(typeof r=="function"){var l=r;if(r=l(),ua){Bt(!0);try{l()}finally{Bt(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:r},o}function Gm(r,o,l,c){return r.baseState=l,id(r,Lt,typeof c=="function"?c:Li)}function jS(r,o,l,c,x){if($u(r))throw Error(i(485));if(r=o.action,r!==null){var S={payload:x,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){S.listeners.push(A)}};ue.T!==null?l(!0):S.isTransition=!1,c(S),l=o.pending,l===null?(S.next=o.pending=S,Ym(o,S)):(S.next=l.next,o.pending=l.next=S)}}function Ym(r,o){var l=o.action,c=o.payload,x=r.state;if(o.isTransition){var S=ue.T,A={};ue.T=A;try{var P=l(x,c),$=ue.S;$!==null&&$(A,P),Km(r,o,P)}catch(pe){ld(r,o,pe)}finally{S!==null&&A.types!==null&&(S.types=A.types),ue.T=S}}else try{S=l(x,c),Km(r,o,S)}catch(pe){ld(r,o,pe)}}function Km(r,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){Jm(r,o,c)},function(c){return ld(r,o,c)}):Jm(r,o,l)}function Jm(r,o,l){o.status="fulfilled",o.value=l,$m(o),r.state=l,o=r.pending,o!==null&&(l=o.next,l===o?r.pending=null:(l=l.next,o.next=l,Ym(r,l)))}function ld(r,o,l){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do o.status="rejected",o.reason=l,$m(o),o=o.next;while(o!==c)}r.action=null}function $m(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function Xm(r,o){return o}function Qm(r,o){if(wt){var l=qt.formState;if(l!==null){e:{var c=lt;if(wt){if($t){t:{for(var x=$t,S=Lr;x.nodeType!==8;){if(!S){x=null;break t}if(x=Or(x.nextSibling),x===null){x=null;break t}}S=x.data,x=S==="F!"||S==="F"?x:null}if(x){$t=Or(x.nextSibling),c=x.data==="F!";break e}}fo(c)}c=!1}c&&(o=l[0])}}return l=Zn(),l.memoizedState=l.baseState=o,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xm,lastRenderedState:o},l.queue=c,l=gg.bind(null,lt,c),c.dispatch=l,c=ad(!1),S=pd.bind(null,lt,!1,c.queue),c=Zn(),x={state:o,dispatch:null,action:r,pending:null},c.queue=x,l=jS.bind(null,lt,x,S,l),x.dispatch=l,c.memoizedState=r,[o,l,!1]}function Wm(r){var o=pn();return Zm(o,Lt,r)}function Zm(r,o,l){if(o=id(r,o,Xm)[0],r=Yu(Li)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var c=hs(o)}catch(A){throw A===Wa?Uu:A}else c=o;o=pn();var x=o.queue,S=x.dispatch;return l!==o.memoizedState&&(lt.flags|=2048,rl(9,{destroy:void 0},HS.bind(null,x,l),null)),[c,S,r]}function HS(r,o){r.action=o}function eg(r){var o=pn(),l=Lt;if(l!==null)return Zm(o,l,r);pn(),o=o.memoizedState,l=pn();var c=l.queue.dispatch;return l.memoizedState=r,[o,c,!1]}function rl(r,o,l,c){return r={tag:r,create:l,deps:c,inst:o,next:null},o=lt.updateQueue,o===null&&(o=Vu(),lt.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=r.next=r:(c=l.next,l.next=r,r.next=c,o.lastEffect=r),r}function tg(){return pn().memoizedState}function Ku(r,o,l,c){var x=Zn();lt.flags|=r,x.memoizedState=rl(1|o,{destroy:void 0},l,c===void 0?null:c)}function Ju(r,o,l,c){var x=pn();c=c===void 0?null:c;var S=x.memoizedState.inst;Lt!==null&&c!==null&&Wf(c,Lt.memoizedState.deps)?x.memoizedState=rl(o,S,l,c):(lt.flags|=r,x.memoizedState=rl(1|o,S,l,c))}function ng(r,o){Ku(8390656,8,r,o)}function sd(r,o){Ju(2048,8,r,o)}function FS(r){lt.flags|=4;var o=lt.updateQueue;if(o===null)o=Vu(),lt.updateQueue=o,o.events=[r];else{var l=o.events;l===null?o.events=[r]:l.push(r)}}function rg(r){var o=pn().memoizedState;return FS({ref:o,nextImpl:r}),function(){if((Nt&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function ig(r,o){return Ju(4,2,r,o)}function og(r,o){return Ju(4,4,r,o)}function ag(r,o){if(typeof o=="function"){r=r();var l=o(r);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function lg(r,o,l){l=l!=null?l.concat([r]):null,Ju(4,4,ag.bind(null,o,r),l)}function ud(){}function sg(r,o){var l=pn();o=o===void 0?null:o;var c=l.memoizedState;return o!==null&&Wf(o,c[1])?c[0]:(l.memoizedState=[r,o],r)}function ug(r,o){var l=pn();o=o===void 0?null:o;var c=l.memoizedState;if(o!==null&&Wf(o,c[1]))return c[0];if(c=r(),ua){Bt(!0);try{r()}finally{Bt(!1)}}return l.memoizedState=[c,o],c}function cd(r,o,l){return l===void 0||(Pi&1073741824)!==0&&(yt&261930)===0?r.memoizedState=o:(r.memoizedState=l,r=cy(),lt.lanes|=r,wo|=r,l)}function cg(r,o,l,c){return Fn(l,o)?l:el.current!==null?(r=cd(r,l,c),Fn(r,o)||(bn=!0),r):(Pi&42)===0||(Pi&1073741824)!==0&&(yt&261930)===0?(bn=!0,r.memoizedState=l):(r=cy(),lt.lanes|=r,wo|=r,o)}function fg(r,o,l,c,x){var S=Ee.p;Ee.p=S!==0&&8>S?S:8;var A=ue.T,P={};ue.T=P,pd(r,!1,o,l);try{var $=x(),pe=ue.S;if(pe!==null&&pe(P,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var we=BS($,c);ms(r,o,we,Sr(r))}else ms(r,o,c,Sr(r))}catch(Ce){ms(r,o,{then:function(){},status:"rejected",reason:Ce},Sr())}finally{Ee.p=S,A!==null&&P.types!==null&&(A.types=P.types),ue.T=A}}function VS(){}function fd(r,o,l,c){if(r.tag!==5)throw Error(i(476));var x=dg(r).queue;fg(r,x,o,Me,l===null?VS:function(){return pg(r),l(c)})}function dg(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:Me,baseState:Me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:Me},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:l},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function pg(r){var o=dg(r);o.next===null&&(o=r.alternate.memoizedState),ms(r,o.next.queue,{},Sr())}function dd(){return Bn(Ds)}function hg(){return pn().memoizedState}function mg(){return pn().memoizedState}function GS(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var l=Sr();r=mo(l);var c=go(o,r,l);c!==null&&(sr(c,o,l),cs(c,o,l)),o={cache:jf()},r.payload=o;return}o=o.return}}function YS(r,o,l){var c=Sr();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},$u(r)?yg(o,l):(l=gn(r,o,l,c),l!==null&&(sr(l,r,c),vg(l,o,c)))}function gg(r,o,l){var c=Sr();ms(r,o,l,c)}function ms(r,o,l,c){var x={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if($u(r))yg(o,x);else{var S=r.alternate;if(r.lanes===0&&(S===null||S.lanes===0)&&(S=o.lastRenderedReducer,S!==null))try{var A=o.lastRenderedState,P=S(A,l);if(x.hasEagerState=!0,x.eagerState=P,Fn(P,A))return nt(r,o,x,0),qt===null&&In(),!1}catch{}finally{}if(l=gn(r,o,x,c),l!==null)return sr(l,r,c),vg(l,o,c),!0}return!1}function pd(r,o,l,c){if(c={lane:2,revertLane:Gd(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},$u(r)){if(o)throw Error(i(479))}else o=gn(r,l,c,2),o!==null&&sr(o,r,2)}function $u(r){var o=r.alternate;return r===lt||o!==null&&o===lt}function yg(r,o){tl=Hu=!0;var l=r.pending;l===null?o.next=o:(o.next=l.next,l.next=o),r.pending=o}function vg(r,o,l){if((l&4194048)!==0){var c=o.lanes;c&=r.pendingLanes,l|=c,o.lanes=l,zt(r,l)}}var gs={readContext:Bn,use:Gu,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useLayoutEffect:rn,useInsertionEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useSyncExternalStore:rn,useId:rn,useHostTransitionStatus:rn,useFormState:rn,useActionState:rn,useOptimistic:rn,useMemoCache:rn,useCacheRefresh:rn};gs.useEffectEvent=rn;var xg={readContext:Bn,use:Gu,useCallback:function(r,o){return Zn().memoizedState=[r,o===void 0?null:o],r},useContext:Bn,useEffect:ng,useImperativeHandle:function(r,o,l){l=l!=null?l.concat([r]):null,Ku(4194308,4,ag.bind(null,o,r),l)},useLayoutEffect:function(r,o){return Ku(4194308,4,r,o)},useInsertionEffect:function(r,o){Ku(4,2,r,o)},useMemo:function(r,o){var l=Zn();o=o===void 0?null:o;var c=r();if(ua){Bt(!0);try{r()}finally{Bt(!1)}}return l.memoizedState=[c,o],c},useReducer:function(r,o,l){var c=Zn();if(l!==void 0){var x=l(o);if(ua){Bt(!0);try{l(o)}finally{Bt(!1)}}}else x=o;return c.memoizedState=c.baseState=x,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:x},c.queue=r,r=r.dispatch=YS.bind(null,lt,r),[c.memoizedState,r]},useRef:function(r){var o=Zn();return r={current:r},o.memoizedState=r},useState:function(r){r=ad(r);var o=r.queue,l=gg.bind(null,lt,o);return o.dispatch=l,[r.memoizedState,l]},useDebugValue:ud,useDeferredValue:function(r,o){var l=Zn();return cd(l,r,o)},useTransition:function(){var r=ad(!1);return r=fg.bind(null,lt,r.queue,!0,!1),Zn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,l){var c=lt,x=Zn();if(wt){if(l===void 0)throw Error(i(407));l=l()}else{if(l=o(),qt===null)throw Error(i(349));(yt&127)!==0||qm(c,o,l)}x.memoizedState=l;var S={value:l,getSnapshot:o};return x.queue=S,ng(Hm.bind(null,c,S,r),[r]),c.flags|=2048,rl(9,{destroy:void 0},jm.bind(null,c,S,l,o),null),l},useId:function(){var r=Zn(),o=qt.identifierPrefix;if(wt){var l=fi,c=ci;l=(c&~(1<<32-Ue(c)-1)).toString(32)+l,o="_"+o+"R_"+l,l=Fu++,0<l&&(o+="H"+l.toString(32)),o+="_"}else l=zS++,o="_"+o+"r_"+l.toString(32)+"_";return r.memoizedState=o},useHostTransitionStatus:dd,useFormState:Qm,useActionState:Qm,useOptimistic:function(r){var o=Zn();o.memoizedState=o.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=pd.bind(null,lt,!0,l),l.dispatch=o,[r,o]},useMemoCache:rd,useCacheRefresh:function(){return Zn().memoizedState=GS.bind(null,lt)},useEffectEvent:function(r){var o=Zn(),l={impl:r};return o.memoizedState=l,function(){if((Nt&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},hd={readContext:Bn,use:Gu,useCallback:sg,useContext:Bn,useEffect:sd,useImperativeHandle:lg,useInsertionEffect:ig,useLayoutEffect:og,useMemo:ug,useReducer:Yu,useRef:tg,useState:function(){return Yu(Li)},useDebugValue:ud,useDeferredValue:function(r,o){var l=pn();return cg(l,Lt.memoizedState,r,o)},useTransition:function(){var r=Yu(Li)[0],o=pn().memoizedState;return[typeof r=="boolean"?r:hs(r),o]},useSyncExternalStore:zm,useId:hg,useHostTransitionStatus:dd,useFormState:Wm,useActionState:Wm,useOptimistic:function(r,o){var l=pn();return Gm(l,Lt,r,o)},useMemoCache:rd,useCacheRefresh:mg};hd.useEffectEvent=rg;var bg={readContext:Bn,use:Gu,useCallback:sg,useContext:Bn,useEffect:sd,useImperativeHandle:lg,useInsertionEffect:ig,useLayoutEffect:og,useMemo:ug,useReducer:od,useRef:tg,useState:function(){return od(Li)},useDebugValue:ud,useDeferredValue:function(r,o){var l=pn();return Lt===null?cd(l,r,o):cg(l,Lt.memoizedState,r,o)},useTransition:function(){var r=od(Li)[0],o=pn().memoizedState;return[typeof r=="boolean"?r:hs(r),o]},useSyncExternalStore:zm,useId:hg,useHostTransitionStatus:dd,useFormState:eg,useActionState:eg,useOptimistic:function(r,o){var l=pn();return Lt!==null?Gm(l,Lt,r,o):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:rd,useCacheRefresh:mg};bg.useEffectEvent=rg;function md(r,o,l,c){o=r.memoizedState,l=l(c,o),l=l==null?o:b({},o,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var gd={enqueueSetState:function(r,o,l){r=r._reactInternals;var c=Sr(),x=mo(c);x.payload=o,l!=null&&(x.callback=l),o=go(r,x,c),o!==null&&(sr(o,r,c),cs(o,r,c))},enqueueReplaceState:function(r,o,l){r=r._reactInternals;var c=Sr(),x=mo(c);x.tag=1,x.payload=o,l!=null&&(x.callback=l),o=go(r,x,c),o!==null&&(sr(o,r,c),cs(o,r,c))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var l=Sr(),c=mo(l);c.tag=2,o!=null&&(c.callback=o),o=go(r,c,l),o!==null&&(sr(o,r,l),cs(o,r,l))}};function wg(r,o,l,c,x,S,A){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,S,A):o.prototype&&o.prototype.isPureReactComponent?!m(l,c)||!m(x,S):!0}function Sg(r,o,l,c){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,c),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,c),o.state!==r&&gd.enqueueReplaceState(o,o.state,null)}function ca(r,o){var l=o;if("ref"in o){l={};for(var c in o)c!=="ref"&&(l[c]=o[c])}if(r=r.defaultProps){l===o&&(l=b({},l));for(var x in r)l[x]===void 0&&(l[x]=r[x])}return l}function Tg(r){Fe(r)}function Cg(r){console.error(r)}function Eg(r){Fe(r)}function Xu(r,o){try{var l=r.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(c){setTimeout(function(){throw c})}}function _g(r,o,l){try{var c=r.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function yd(r,o,l){return l=mo(l),l.tag=3,l.payload={element:null},l.callback=function(){Xu(r,o)},l}function Ag(r){return r=mo(r),r.tag=3,r}function kg(r,o,l,c){var x=l.type.getDerivedStateFromError;if(typeof x=="function"){var S=c.value;r.payload=function(){return x(S)},r.callback=function(){_g(o,l,c)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(r.callback=function(){_g(o,l,c),typeof x!="function"&&(So===null?So=new Set([this]):So.add(this));var P=c.stack;this.componentDidCatch(c.value,{componentStack:P!==null?P:""})})}function KS(r,o,l,c,x){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(o=l.alternate,o!==null&&$a(o,l,x,!0),l=vr.current,l!==null){switch(l.tag){case 31:case 13:return Ur===null?sc():l.alternate===null&&on===0&&(on=3),l.flags&=-257,l.flags|=65536,l.lanes=x,c===Ou?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([c]):o.add(c),Hd(r,c,x)),!1;case 22:return l.flags|=65536,c===Ou?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([c]):l.add(c)),Hd(r,c,x)),!1}throw Error(i(435,l.tag))}return Hd(r,c,x),sc(),!1}if(wt)return o=vr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=x,c!==Uf&&(r=Error(i(422),{cause:c}),os(Dr(r,l)))):(c!==Uf&&(o=Error(i(423),{cause:c}),os(Dr(o,l))),r=r.current.alternate,r.flags|=65536,x&=-x,r.lanes|=x,c=Dr(c,l),x=yd(r.stateNode,c,x),Kf(r,x),on!==4&&(on=2)),!1;var S=Error(i(520),{cause:c});if(S=Dr(S,l),Cs===null?Cs=[S]:Cs.push(S),on!==4&&(on=2),o===null)return!0;c=Dr(c,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,r=x&-x,l.lanes|=r,r=yd(l.stateNode,c,r),Kf(l,r),!1;case 1:if(o=l.type,S=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(So===null||!So.has(S))))return l.flags|=65536,x&=-x,l.lanes|=x,x=Ag(x),kg(x,r,l,c),Kf(l,x),!1}l=l.return}while(l!==null);return!1}var vd=Error(i(461)),bn=!1;function zn(r,o,l,c){o.child=r===null?Dm(o,null,l,c):sa(o,r.child,l,c)}function Ng(r,o,l,c,x){l=l.render;var S=o.ref;if("ref"in c){var A={};for(var P in c)P!=="ref"&&(A[P]=c[P])}else A=c;return ia(o),c=Zf(r,o,l,A,S,x),P=ed(),r!==null&&!bn?(td(r,o,x),Ui(r,o,x)):(wt&&P&&Pf(o),o.flags|=1,zn(r,o,c,x),o.child)}function Mg(r,o,l,c,x){if(r===null){var S=l.type;return typeof S=="function"&&!Rf(S)&&S.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=S,Rg(r,o,S,c,x)):(r=Ru(l.type,null,c,o,o.mode,x),r.ref=o.ref,r.return=o,o.child=r)}if(S=r.child,!_d(r,x)){var A=S.memoizedProps;if(l=l.compare,l=l!==null?l:m,l(A,c)&&r.ref===o.ref)return Ui(r,o,x)}return o.flags|=1,r=Mi(S,c),r.ref=o.ref,r.return=o,o.child=r}function Rg(r,o,l,c,x){if(r!==null){var S=r.memoizedProps;if(m(S,c)&&r.ref===o.ref)if(bn=!1,o.pendingProps=c=S,_d(r,x))(r.flags&131072)!==0&&(bn=!0);else return o.lanes=r.lanes,Ui(r,o,x)}return xd(r,o,l,c,x)}function Dg(r,o,l,c){var x=c.children,S=r!==null?r.memoizedState:null;if(r===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((o.flags&128)!==0){if(S=S!==null?S.baseLanes|l:l,r!==null){for(c=o.child=r.child,x=0;c!==null;)x=x|c.lanes|c.childLanes,c=c.sibling;c=x&~S}else c=0,o.child=null;return Ig(r,o,S,l,c)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&Lu(o,S!==null?S.cachePool:null),S!==null?Lm(o,S):$f(),Um(o);else return c=o.lanes=536870912,Ig(r,o,S!==null?S.baseLanes|l:l,l,c)}else S!==null?(Lu(o,S.cachePool),Lm(o,S),vo(),o.memoizedState=null):(r!==null&&Lu(o,null),$f(),vo());return zn(r,o,x,l),o.child}function ys(r,o){return r!==null&&r.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Ig(r,o,l,c,x){var S=Ff();return S=S===null?null:{parent:vn._currentValue,pool:S},o.memoizedState={baseLanes:l,cachePool:S},r!==null&&Lu(o,null),$f(),Um(o),r!==null&&$a(r,o,c,!0),o.childLanes=x,null}function Qu(r,o){return o=Zu({mode:o.mode,children:o.children},r.mode),o.ref=r.ref,r.child=o,o.return=r,o}function Pg(r,o,l){return sa(o,r.child,null,l),r=Qu(o,o.pendingProps),r.flags|=2,xr(o),o.memoizedState=null,r}function JS(r,o,l){var c=o.pendingProps,x=(o.flags&128)!==0;if(o.flags&=-129,r===null){if(wt){if(c.mode==="hidden")return r=Qu(o,c),o.lanes=536870912,ys(null,r);if(Qf(o),(r=$t)?(r=Yy(r,Lr),r=r!==null&&r.data==="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:uo!==null?{id:ci,overflow:fi}:null,retryLane:536870912,hydrationErrors:null},l=ym(r),l.return=o,o.child=l,On=o,$t=null)):r=null,r===null)throw fo(o);return o.lanes=536870912,null}return Qu(o,c)}var S=r.memoizedState;if(S!==null){var A=S.dehydrated;if(Qf(o),x)if(o.flags&256)o.flags&=-257,o=Pg(r,o,l);else if(o.memoizedState!==null)o.child=r.child,o.flags|=128,o=null;else throw Error(i(558));else if(bn||$a(r,o,l,!1),x=(l&r.childLanes)!==0,bn||x){if(c=qt,c!==null&&(A=un(c,l),A!==0&&A!==S.retryLane))throw S.retryLane=A,Zt(r,A),sr(c,r,A),vd;sc(),o=Pg(r,o,l)}else r=S.treeContext,$t=Or(A.nextSibling),On=o,wt=!0,co=null,Lr=!1,r!==null&&bm(o,r),o=Qu(o,c),o.flags|=4096;return o}return r=Mi(r.child,{mode:c.mode,children:c.children}),r.ref=o.ref,o.child=r,r.return=o,r}function Wu(r,o){var l=o.ref;if(l===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(o.flags|=4194816)}}function xd(r,o,l,c,x){return ia(o),l=Zf(r,o,l,c,void 0,x),c=ed(),r!==null&&!bn?(td(r,o,x),Ui(r,o,x)):(wt&&c&&Pf(o),o.flags|=1,zn(r,o,l,x),o.child)}function Lg(r,o,l,c,x,S){return ia(o),o.updateQueue=null,l=Bm(o,c,l,x),Om(r),c=ed(),r!==null&&!bn?(td(r,o,S),Ui(r,o,S)):(wt&&c&&Pf(o),o.flags|=1,zn(r,o,l,S),o.child)}function Ug(r,o,l,c,x){if(ia(o),o.stateNode===null){var S=rr,A=l.contextType;typeof A=="object"&&A!==null&&(S=Bn(A)),S=new l(c,S),o.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=gd,o.stateNode=S,S._reactInternals=o,S=o.stateNode,S.props=c,S.state=o.memoizedState,S.refs={},Gf(o),A=l.contextType,S.context=typeof A=="object"&&A!==null?Bn(A):rr,S.state=o.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(md(o,l,A,c),S.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(A=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),A!==S.state&&gd.enqueueReplaceState(S,S.state,null),ds(o,c,S,x),fs(),S.state=o.memoizedState),typeof S.componentDidMount=="function"&&(o.flags|=4194308),c=!0}else if(r===null){S=o.stateNode;var P=o.memoizedProps,$=ca(l,P);S.props=$;var pe=S.context,we=l.contextType;A=rr,typeof we=="object"&&we!==null&&(A=Bn(we));var Ce=l.getDerivedStateFromProps;we=typeof Ce=="function"||typeof S.getSnapshotBeforeUpdate=="function",P=o.pendingProps!==P,we||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(P||pe!==A)&&Sg(o,S,c,A),ho=!1;var ge=o.memoizedState;S.state=ge,ds(o,c,S,x),fs(),pe=o.memoizedState,P||ge!==pe||ho?(typeof Ce=="function"&&(md(o,l,Ce,c),pe=o.memoizedState),($=ho||wg(o,l,$,c,ge,pe,A))?(we||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(o.flags|=4194308)):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=c,o.memoizedState=pe),S.props=c,S.state=pe,S.context=A,c=$):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),c=!1)}else{S=o.stateNode,Yf(r,o),A=o.memoizedProps,we=ca(l,A),S.props=we,Ce=o.pendingProps,ge=S.context,pe=l.contextType,$=rr,typeof pe=="object"&&pe!==null&&($=Bn(pe)),P=l.getDerivedStateFromProps,(pe=typeof P=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(A!==Ce||ge!==$)&&Sg(o,S,c,$),ho=!1,ge=o.memoizedState,S.state=ge,ds(o,c,S,x),fs();var ye=o.memoizedState;A!==Ce||ge!==ye||ho||r!==null&&r.dependencies!==null&&Iu(r.dependencies)?(typeof P=="function"&&(md(o,l,P,c),ye=o.memoizedState),(we=ho||wg(o,l,we,c,ge,ye,$)||r!==null&&r.dependencies!==null&&Iu(r.dependencies))?(pe||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(c,ye,$),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(c,ye,$)),typeof S.componentDidUpdate=="function"&&(o.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof S.componentDidUpdate!="function"||A===r.memoizedProps&&ge===r.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&ge===r.memoizedState||(o.flags|=1024),o.memoizedProps=c,o.memoizedState=ye),S.props=c,S.state=ye,S.context=$,c=we):(typeof S.componentDidUpdate!="function"||A===r.memoizedProps&&ge===r.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&ge===r.memoizedState||(o.flags|=1024),c=!1)}return S=c,Wu(r,o),c=(o.flags&128)!==0,S||c?(S=o.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:S.render(),o.flags|=1,r!==null&&c?(o.child=sa(o,r.child,null,x),o.child=sa(o,null,l,x)):zn(r,o,l,x),o.memoizedState=S.state,r=o.child):r=Ui(r,o,x),r}function Og(r,o,l,c){return na(),o.flags|=256,zn(r,o,l,c),o.child}var bd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wd(r){return{baseLanes:r,cachePool:_m()}}function Sd(r,o,l){return r=r!==null?r.childLanes&~l:0,o&&(r|=wr),r}function Bg(r,o,l){var c=o.pendingProps,x=!1,S=(o.flags&128)!==0,A;if((A=S)||(A=r!==null&&r.memoizedState===null?!1:(dn.current&2)!==0),A&&(x=!0,o.flags&=-129),A=(o.flags&32)!==0,o.flags&=-33,r===null){if(wt){if(x?yo(o):vo(),(r=$t)?(r=Yy(r,Lr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:uo!==null?{id:ci,overflow:fi}:null,retryLane:536870912,hydrationErrors:null},l=ym(r),l.return=o,o.child=l,On=o,$t=null)):r=null,r===null)throw fo(o);return ip(r)?o.lanes=32:o.lanes=536870912,null}var P=c.children;return c=c.fallback,x?(vo(),x=o.mode,P=Zu({mode:"hidden",children:P},x),c=ta(c,x,l,null),P.return=o,c.return=o,P.sibling=c,o.child=P,c=o.child,c.memoizedState=wd(l),c.childLanes=Sd(r,A,l),o.memoizedState=bd,ys(null,c)):(yo(o),Td(o,P))}var $=r.memoizedState;if($!==null&&(P=$.dehydrated,P!==null)){if(S)o.flags&256?(yo(o),o.flags&=-257,o=Cd(r,o,l)):o.memoizedState!==null?(vo(),o.child=r.child,o.flags|=128,o=null):(vo(),P=c.fallback,x=o.mode,c=Zu({mode:"visible",children:c.children},x),P=ta(P,x,l,null),P.flags|=2,c.return=o,P.return=o,c.sibling=P,o.child=c,sa(o,r.child,null,l),c=o.child,c.memoizedState=wd(l),c.childLanes=Sd(r,A,l),o.memoizedState=bd,o=ys(null,c));else if(yo(o),ip(P)){if(A=P.nextSibling&&P.nextSibling.dataset,A)var pe=A.dgst;A=pe,c=Error(i(419)),c.stack="",c.digest=A,os({value:c,source:null,stack:null}),o=Cd(r,o,l)}else if(bn||$a(r,o,l,!1),A=(l&r.childLanes)!==0,bn||A){if(A=qt,A!==null&&(c=un(A,l),c!==0&&c!==$.retryLane))throw $.retryLane=c,Zt(r,c),sr(A,r,c),vd;rp(P)||sc(),o=Cd(r,o,l)}else rp(P)?(o.flags|=192,o.child=r.child,o=null):(r=$.treeContext,$t=Or(P.nextSibling),On=o,wt=!0,co=null,Lr=!1,r!==null&&bm(o,r),o=Td(o,c.children),o.flags|=4096);return o}return x?(vo(),P=c.fallback,x=o.mode,$=r.child,pe=$.sibling,c=Mi($,{mode:"hidden",children:c.children}),c.subtreeFlags=$.subtreeFlags&65011712,pe!==null?P=Mi(pe,P):(P=ta(P,x,l,null),P.flags|=2),P.return=o,c.return=o,c.sibling=P,o.child=c,ys(null,c),c=o.child,P=r.child.memoizedState,P===null?P=wd(l):(x=P.cachePool,x!==null?($=vn._currentValue,x=x.parent!==$?{parent:$,pool:$}:x):x=_m(),P={baseLanes:P.baseLanes|l,cachePool:x}),c.memoizedState=P,c.childLanes=Sd(r,A,l),o.memoizedState=bd,ys(r.child,c)):(yo(o),l=r.child,r=l.sibling,l=Mi(l,{mode:"visible",children:c.children}),l.return=o,l.sibling=null,r!==null&&(A=o.deletions,A===null?(o.deletions=[r],o.flags|=16):A.push(r)),o.child=l,o.memoizedState=null,l)}function Td(r,o){return o=Zu({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function Zu(r,o){return r=yr(22,r,null,o),r.lanes=0,r}function Cd(r,o,l){return sa(o,r.child,null,l),r=Td(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function zg(r,o,l){r.lanes|=o;var c=r.alternate;c!==null&&(c.lanes|=o),zf(r.return,o,l)}function Ed(r,o,l,c,x,S){var A=r.memoizedState;A===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:x,treeForkCount:S}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=l,A.tailMode=x,A.treeForkCount=S)}function qg(r,o,l){var c=o.pendingProps,x=c.revealOrder,S=c.tail;c=c.children;var A=dn.current,P=(A&2)!==0;if(P?(A=A&1|2,o.flags|=128):A&=1,L(dn,A),zn(r,o,c,l),c=wt?is:0,!P&&r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&zg(r,l,o);else if(r.tag===19)zg(r,l,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(x){case"forwards":for(l=o.child,x=null;l!==null;)r=l.alternate,r!==null&&ju(r)===null&&(x=l),l=l.sibling;l=x,l===null?(x=o.child,o.child=null):(x=l.sibling,l.sibling=null),Ed(o,!1,x,l,S,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,x=o.child,o.child=null;x!==null;){if(r=x.alternate,r!==null&&ju(r)===null){o.child=x;break}r=x.sibling,x.sibling=l,l=x,x=r}Ed(o,!0,l,null,S,c);break;case"together":Ed(o,!1,null,null,void 0,c);break;default:o.memoizedState=null}return o.child}function Ui(r,o,l){if(r!==null&&(o.dependencies=r.dependencies),wo|=o.lanes,(l&o.childLanes)===0)if(r!==null){if($a(r,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(i(153));if(o.child!==null){for(r=o.child,l=Mi(r,r.pendingProps),o.child=l,l.return=o;r.sibling!==null;)r=r.sibling,l=l.sibling=Mi(r,r.pendingProps),l.return=o;l.sibling=null}return o.child}function _d(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&Iu(r)))}function $S(r,o,l){switch(o.tag){case 3:st(o,o.stateNode.containerInfo),po(o,vn,r.memoizedState.cache),na();break;case 27:case 5:Mt(o);break;case 4:st(o,o.stateNode.containerInfo);break;case 10:po(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Qf(o),null;break;case 13:var c=o.memoizedState;if(c!==null)return c.dehydrated!==null?(yo(o),o.flags|=128,null):(l&o.child.childLanes)!==0?Bg(r,o,l):(yo(o),r=Ui(r,o,l),r!==null?r.sibling:null);yo(o);break;case 19:var x=(r.flags&128)!==0;if(c=(l&o.childLanes)!==0,c||($a(r,o,l,!1),c=(l&o.childLanes)!==0),x){if(c)return qg(r,o,l);o.flags|=128}if(x=o.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),L(dn,dn.current),c)break;return null;case 22:return o.lanes=0,Dg(r,o,l,o.pendingProps);case 24:po(o,vn,r.memoizedState.cache)}return Ui(r,o,l)}function jg(r,o,l){if(r!==null)if(r.memoizedProps!==o.pendingProps)bn=!0;else{if(!_d(r,l)&&(o.flags&128)===0)return bn=!1,$S(r,o,l);bn=(r.flags&131072)!==0}else bn=!1,wt&&(o.flags&1048576)!==0&&xm(o,is,o.index);switch(o.lanes=0,o.tag){case 16:e:{var c=o.pendingProps;if(r=aa(o.elementType),o.type=r,typeof r=="function")Rf(r)?(c=ca(r,c),o.tag=1,o=Ug(null,o,r,c,l)):(o.tag=0,o=xd(null,o,r,c,l));else{if(r!=null){var x=r.$$typeof;if(x===se){o.tag=11,o=Ng(null,o,r,c,l);break e}else if(x===Y){o.tag=14,o=Mg(null,o,r,c,l);break e}}throw o=_e(r)||r,Error(i(306,o,""))}}return o;case 0:return xd(r,o,o.type,o.pendingProps,l);case 1:return c=o.type,x=ca(c,o.pendingProps),Ug(r,o,c,x,l);case 3:e:{if(st(o,o.stateNode.containerInfo),r===null)throw Error(i(387));c=o.pendingProps;var S=o.memoizedState;x=S.element,Yf(r,o),ds(o,c,null,l);var A=o.memoizedState;if(c=A.cache,po(o,vn,c),c!==S.cache&&qf(o,[vn],l,!0),fs(),c=A.element,S.isDehydrated)if(S={element:c,isDehydrated:!1,cache:A.cache},o.updateQueue.baseState=S,o.memoizedState=S,o.flags&256){o=Og(r,o,c,l);break e}else if(c!==x){x=Dr(Error(i(424)),o),os(x),o=Og(r,o,c,l);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for($t=Or(r.firstChild),On=o,wt=!0,co=null,Lr=!0,l=Dm(o,null,c,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(na(),c===x){o=Ui(r,o,l);break e}zn(r,o,c,l)}o=o.child}return o;case 26:return Wu(r,o),r===null?(l=Wy(o.type,null,o.pendingProps,null))?o.memoizedState=l:wt||(l=o.type,r=o.pendingProps,c=mc(qe.current).createElement(l),c[Vt]=o,c[cn]=r,qn(c,l,r),fn(c),o.stateNode=c):o.memoizedState=Wy(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return Mt(o),r===null&&wt&&(c=o.stateNode=$y(o.type,o.pendingProps,qe.current),On=o,Lr=!0,x=$t,_o(o.type)?(op=x,$t=Or(c.firstChild)):$t=x),zn(r,o,o.pendingProps.children,l),Wu(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&wt&&((x=c=$t)&&(c=ET(c,o.type,o.pendingProps,Lr),c!==null?(o.stateNode=c,On=o,$t=Or(c.firstChild),Lr=!1,x=!0):x=!1),x||fo(o)),Mt(o),x=o.type,S=o.pendingProps,A=r!==null?r.memoizedProps:null,c=S.children,ep(x,S)?c=null:A!==null&&ep(x,A)&&(o.flags|=32),o.memoizedState!==null&&(x=Zf(r,o,qS,null,null,l),Ds._currentValue=x),Wu(r,o),zn(r,o,c,l),o.child;case 6:return r===null&&wt&&((r=l=$t)&&(l=_T(l,o.pendingProps,Lr),l!==null?(o.stateNode=l,On=o,$t=null,r=!0):r=!1),r||fo(o)),null;case 13:return Bg(r,o,l);case 4:return st(o,o.stateNode.containerInfo),c=o.pendingProps,r===null?o.child=sa(o,null,c,l):zn(r,o,c,l),o.child;case 11:return Ng(r,o,o.type,o.pendingProps,l);case 7:return zn(r,o,o.pendingProps,l),o.child;case 8:return zn(r,o,o.pendingProps.children,l),o.child;case 12:return zn(r,o,o.pendingProps.children,l),o.child;case 10:return c=o.pendingProps,po(o,o.type,c.value),zn(r,o,c.children,l),o.child;case 9:return x=o.type._context,c=o.pendingProps.children,ia(o),x=Bn(x),c=c(x),o.flags|=1,zn(r,o,c,l),o.child;case 14:return Mg(r,o,o.type,o.pendingProps,l);case 15:return Rg(r,o,o.type,o.pendingProps,l);case 19:return qg(r,o,l);case 31:return JS(r,o,l);case 22:return Dg(r,o,l,o.pendingProps);case 24:return ia(o),c=Bn(vn),r===null?(x=Ff(),x===null&&(x=qt,S=jf(),x.pooledCache=S,S.refCount++,S!==null&&(x.pooledCacheLanes|=l),x=S),o.memoizedState={parent:c,cache:x},Gf(o),po(o,vn,x)):((r.lanes&l)!==0&&(Yf(r,o),ds(o,null,null,l),fs()),x=r.memoizedState,S=o.memoizedState,x.parent!==c?(x={parent:c,cache:c},o.memoizedState=x,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=x),po(o,vn,c)):(c=S.cache,po(o,vn,c),c!==x.cache&&qf(o,[vn],l,!0))),zn(r,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function Oi(r){r.flags|=4}function Ad(r,o,l,c,x){if((o=(r.mode&32)!==0)&&(o=!1),o){if(r.flags|=16777216,(x&335544128)===x)if(r.stateNode.complete)r.flags|=8192;else if(hy())r.flags|=8192;else throw la=Ou,Vf}else r.flags&=-16777217}function Hg(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!r0(o))if(hy())r.flags|=8192;else throw la=Ou,Vf}function ec(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?Oo():536870912,r.lanes|=o,ll|=o)}function vs(r,o){if(!wt)switch(r.tailMode){case"hidden":o=r.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function Xt(r){var o=r.alternate!==null&&r.alternate.child===r.child,l=0,c=0;if(o)for(var x=r.child;x!==null;)l|=x.lanes|x.childLanes,c|=x.subtreeFlags&65011712,c|=x.flags&65011712,x.return=r,x=x.sibling;else for(x=r.child;x!==null;)l|=x.lanes|x.childLanes,c|=x.subtreeFlags,c|=x.flags,x.return=r,x=x.sibling;return r.subtreeFlags|=c,r.childLanes=l,o}function XS(r,o,l){var c=o.pendingProps;switch(Lf(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(o),null;case 1:return Xt(o),null;case 3:return l=o.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Ii(vn),Ne(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(Ja(o)?Oi(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Of())),Xt(o),null;case 26:var x=o.type,S=o.memoizedState;return r===null?(Oi(o),S!==null?(Xt(o),Hg(o,S)):(Xt(o),Ad(o,x,null,c,l))):S?S!==r.memoizedState?(Oi(o),Xt(o),Hg(o,S)):(Xt(o),o.flags&=-16777217):(r=r.memoizedProps,r!==c&&Oi(o),Xt(o),Ad(o,x,r,c,l)),null;case 27:if(Tt(o),l=qe.current,x=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==c&&Oi(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return Xt(o),null}r=Ae.current,Ja(o)?wm(o):(r=$y(x,c,l),o.stateNode=r,Oi(o))}return Xt(o),null;case 5:if(Tt(o),x=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==c&&Oi(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return Xt(o),null}if(S=Ae.current,Ja(o))wm(o);else{var A=mc(qe.current);switch(S){case 1:S=A.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:S=A.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":S=A.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":S=A.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":S=A.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?S.multiple=!0:c.size&&(S.size=c.size);break;default:S=typeof c.is=="string"?A.createElement(x,{is:c.is}):A.createElement(x)}}S[Vt]=o,S[cn]=c;e:for(A=o.child;A!==null;){if(A.tag===5||A.tag===6)S.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===o)break e;for(;A.sibling===null;){if(A.return===null||A.return===o)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}o.stateNode=S;e:switch(qn(S,x,c),x){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Oi(o)}}return Xt(o),Ad(o,o.type,r===null?null:r.memoizedProps,o.pendingProps,l),null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==c&&Oi(o);else{if(typeof c!="string"&&o.stateNode===null)throw Error(i(166));if(r=qe.current,Ja(o)){if(r=o.stateNode,l=o.memoizedProps,c=null,x=On,x!==null)switch(x.tag){case 27:case 5:c=x.memoizedProps}r[Vt]=o,r=!!(r.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||By(r.nodeValue,l)),r||fo(o,!0)}else r=mc(r).createTextNode(c),r[Vt]=o,o.stateNode=r}return Xt(o),null;case 31:if(l=o.memoizedState,r===null||r.memoizedState!==null){if(c=Ja(o),l!==null){if(r===null){if(!c)throw Error(i(318));if(r=o.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[Vt]=o}else na(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Xt(o),r=!1}else l=Of(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=l),r=!0;if(!r)return o.flags&256?(xr(o),o):(xr(o),null);if((o.flags&128)!==0)throw Error(i(558))}return Xt(o),null;case 13:if(c=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(x=Ja(o),c!==null&&c.dehydrated!==null){if(r===null){if(!x)throw Error(i(318));if(x=o.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(i(317));x[Vt]=o}else na(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Xt(o),x=!1}else x=Of(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=x),x=!0;if(!x)return o.flags&256?(xr(o),o):(xr(o),null)}return xr(o),(o.flags&128)!==0?(o.lanes=l,o):(l=c!==null,r=r!==null&&r.memoizedState!==null,l&&(c=o.child,x=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(x=c.alternate.memoizedState.cachePool.pool),S=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(S=c.memoizedState.cachePool.pool),S!==x&&(c.flags|=2048)),l!==r&&l&&(o.child.flags|=8192),ec(o,o.updateQueue),Xt(o),null);case 4:return Ne(),r===null&&$d(o.stateNode.containerInfo),Xt(o),null;case 10:return Ii(o.type),Xt(o),null;case 19:if(J(dn),c=o.memoizedState,c===null)return Xt(o),null;if(x=(o.flags&128)!==0,S=c.rendering,S===null)if(x)vs(c,!1);else{if(on!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(S=ju(r),S!==null){for(o.flags|=128,vs(c,!1),r=S.updateQueue,o.updateQueue=r,ec(o,r),o.subtreeFlags=0,r=l,l=o.child;l!==null;)gm(l,r),l=l.sibling;return L(dn,dn.current&1|2),wt&&Ri(o,c.treeForkCount),o.child}r=r.sibling}c.tail!==null&&an()>oc&&(o.flags|=128,x=!0,vs(c,!1),o.lanes=4194304)}else{if(!x)if(r=ju(S),r!==null){if(o.flags|=128,x=!0,r=r.updateQueue,o.updateQueue=r,ec(o,r),vs(c,!0),c.tail===null&&c.tailMode==="hidden"&&!S.alternate&&!wt)return Xt(o),null}else 2*an()-c.renderingStartTime>oc&&l!==536870912&&(o.flags|=128,x=!0,vs(c,!1),o.lanes=4194304);c.isBackwards?(S.sibling=o.child,o.child=S):(r=c.last,r!==null?r.sibling=S:o.child=S,c.last=S)}return c.tail!==null?(r=c.tail,c.rendering=r,c.tail=r.sibling,c.renderingStartTime=an(),r.sibling=null,l=dn.current,L(dn,x?l&1|2:l&1),wt&&Ri(o,c.treeForkCount),r):(Xt(o),null);case 22:case 23:return xr(o),Xf(),c=o.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(o.flags|=8192):c&&(o.flags|=8192),c?(l&536870912)!==0&&(o.flags&128)===0&&(Xt(o),o.subtreeFlags&6&&(o.flags|=8192)):Xt(o),l=o.updateQueue,l!==null&&ec(o,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),c=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),c!==l&&(o.flags|=2048),r!==null&&J(oa),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),Ii(vn),Xt(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function QS(r,o){switch(Lf(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return Ii(vn),Ne(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return Tt(o),null;case 31:if(o.memoizedState!==null){if(xr(o),o.alternate===null)throw Error(i(340));na()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 13:if(xr(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(i(340));na()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return J(dn),null;case 4:return Ne(),null;case 10:return Ii(o.type),null;case 22:case 23:return xr(o),Xf(),r!==null&&J(oa),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return Ii(vn),null;case 25:return null;default:return null}}function Fg(r,o){switch(Lf(o),o.tag){case 3:Ii(vn),Ne();break;case 26:case 27:case 5:Tt(o);break;case 4:Ne();break;case 31:o.memoizedState!==null&&xr(o);break;case 13:xr(o);break;case 19:J(dn);break;case 10:Ii(o.type);break;case 22:case 23:xr(o),Xf(),r!==null&&J(oa);break;case 24:Ii(vn)}}function xs(r,o){try{var l=o.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var x=c.next;l=x;do{if((l.tag&r)===r){c=void 0;var S=l.create,A=l.inst;c=S(),A.destroy=c}l=l.next}while(l!==x)}}catch(P){Dt(o,o.return,P)}}function xo(r,o,l){try{var c=o.updateQueue,x=c!==null?c.lastEffect:null;if(x!==null){var S=x.next;c=S;do{if((c.tag&r)===r){var A=c.inst,P=A.destroy;if(P!==void 0){A.destroy=void 0,x=o;var $=l,pe=P;try{pe()}catch(we){Dt(x,$,we)}}}c=c.next}while(c!==S)}}catch(we){Dt(o,o.return,we)}}function Vg(r){var o=r.updateQueue;if(o!==null){var l=r.stateNode;try{Pm(o,l)}catch(c){Dt(r,r.return,c)}}}function Gg(r,o,l){l.props=ca(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(c){Dt(r,o,c)}}function bs(r,o){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var c=r.stateNode;break;case 30:c=r.stateNode;break;default:c=r.stateNode}typeof l=="function"?r.refCleanup=l(c):l.current=c}}catch(x){Dt(r,o,x)}}function di(r,o){var l=r.ref,c=r.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(x){Dt(r,o,x)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(x){Dt(r,o,x)}else l.current=null}function Yg(r){var o=r.type,l=r.memoizedProps,c=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(x){Dt(r,r.return,x)}}function kd(r,o,l){try{var c=r.stateNode;xT(c,r.type,l,o),c[cn]=o}catch(x){Dt(r,r.return,x)}}function Kg(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&_o(r.type)||r.tag===4}function Nd(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Kg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&_o(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Md(r,o,l){var c=r.tag;if(c===5||c===6)r=r.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(r),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=nr));else if(c!==4&&(c===27&&_o(r.type)&&(l=r.stateNode,o=null),r=r.child,r!==null))for(Md(r,o,l),r=r.sibling;r!==null;)Md(r,o,l),r=r.sibling}function tc(r,o,l){var c=r.tag;if(c===5||c===6)r=r.stateNode,o?l.insertBefore(r,o):l.appendChild(r);else if(c!==4&&(c===27&&_o(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(tc(r,o,l),r=r.sibling;r!==null;)tc(r,o,l),r=r.sibling}function Jg(r){var o=r.stateNode,l=r.memoizedProps;try{for(var c=r.type,x=o.attributes;x.length;)o.removeAttributeNode(x[0]);qn(o,c,l),o[Vt]=r,o[cn]=l}catch(S){Dt(r,r.return,S)}}var Bi=!1,wn=!1,Rd=!1,$g=typeof WeakSet=="function"?WeakSet:Set,Pn=null;function WS(r,o){if(r=r.containerInfo,Wd=Sc,r=N(r),R(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var x=c.anchorOffset,S=c.focusNode;c=c.focusOffset;try{l.nodeType,S.nodeType}catch{l=null;break e}var A=0,P=-1,$=-1,pe=0,we=0,Ce=r,ge=null;t:for(;;){for(var ye;Ce!==l||x!==0&&Ce.nodeType!==3||(P=A+x),Ce!==S||c!==0&&Ce.nodeType!==3||($=A+c),Ce.nodeType===3&&(A+=Ce.nodeValue.length),(ye=Ce.firstChild)!==null;)ge=Ce,Ce=ye;for(;;){if(Ce===r)break t;if(ge===l&&++pe===x&&(P=A),ge===S&&++we===c&&($=A),(ye=Ce.nextSibling)!==null)break;Ce=ge,ge=Ce.parentNode}Ce=ye}l=P===-1||$===-1?null:{start:P,end:$}}else l=null}l=l||{start:0,end:0}}else l=null;for(Zd={focusedElem:r,selectionRange:l},Sc=!1,Pn=o;Pn!==null;)if(o=Pn,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,Pn=r;else for(;Pn!==null;){switch(o=Pn,S=o.alternate,r=o.flags,o.tag){case 0:if((r&4)!==0&&(r=o.updateQueue,r=r!==null?r.events:null,r!==null))for(l=0;l<r.length;l++)x=r[l],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&S!==null){r=void 0,l=o,x=S.memoizedProps,S=S.memoizedState,c=l.stateNode;try{var Ve=ca(l.type,x);r=c.getSnapshotBeforeUpdate(Ve,S),c.__reactInternalSnapshotBeforeUpdate=r}catch(tt){Dt(l,l.return,tt)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,l=r.nodeType,l===9)np(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":np(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=o.sibling,r!==null){r.return=o.return,Pn=r;break}Pn=o.return}}function Xg(r,o,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:qi(r,l),c&4&&xs(5,l);break;case 1:if(qi(r,l),c&4)if(r=l.stateNode,o===null)try{r.componentDidMount()}catch(A){Dt(l,l.return,A)}else{var x=ca(l.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(x,o,r.__reactInternalSnapshotBeforeUpdate)}catch(A){Dt(l,l.return,A)}}c&64&&Vg(l),c&512&&bs(l,l.return);break;case 3:if(qi(r,l),c&64&&(r=l.updateQueue,r!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{Pm(r,o)}catch(A){Dt(l,l.return,A)}}break;case 27:o===null&&c&4&&Jg(l);case 26:case 5:qi(r,l),o===null&&c&4&&Yg(l),c&512&&bs(l,l.return);break;case 12:qi(r,l);break;case 31:qi(r,l),c&4&&Zg(r,l);break;case 13:qi(r,l),c&4&&ey(r,l),c&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=lT.bind(null,l),AT(r,l))));break;case 22:if(c=l.memoizedState!==null||Bi,!c){o=o!==null&&o.memoizedState!==null||wn,x=Bi;var S=wn;Bi=c,(wn=o)&&!S?ji(r,l,(l.subtreeFlags&8772)!==0):qi(r,l),Bi=x,wn=S}break;case 30:break;default:qi(r,l)}}function Qg(r){var o=r.alternate;o!==null&&(r.alternate=null,Qg(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&_a(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var en=null,ir=!1;function zi(r,o,l){for(l=l.child;l!==null;)Wg(r,o,l),l=l.sibling}function Wg(r,o,l){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(Ht,l)}catch{}switch(l.tag){case 26:wn||di(l,o),zi(r,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:wn||di(l,o);var c=en,x=ir;_o(l.type)&&(en=l.stateNode,ir=!1),zi(r,o,l),Ns(l.stateNode),en=c,ir=x;break;case 5:wn||di(l,o);case 6:if(c=en,x=ir,en=null,zi(r,o,l),en=c,ir=x,en!==null)if(ir)try{(en.nodeType===9?en.body:en.nodeName==="HTML"?en.ownerDocument.body:en).removeChild(l.stateNode)}catch(S){Dt(l,o,S)}else try{en.removeChild(l.stateNode)}catch(S){Dt(l,o,S)}break;case 18:en!==null&&(ir?(r=en,Vy(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),ml(r)):Vy(en,l.stateNode));break;case 4:c=en,x=ir,en=l.stateNode.containerInfo,ir=!0,zi(r,o,l),en=c,ir=x;break;case 0:case 11:case 14:case 15:xo(2,l,o),wn||xo(4,l,o),zi(r,o,l);break;case 1:wn||(di(l,o),c=l.stateNode,typeof c.componentWillUnmount=="function"&&Gg(l,o,c)),zi(r,o,l);break;case 21:zi(r,o,l);break;case 22:wn=(c=wn)||l.memoizedState!==null,zi(r,o,l),wn=c;break;default:zi(r,o,l)}}function Zg(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{ml(r)}catch(l){Dt(o,o.return,l)}}}function ey(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{ml(r)}catch(l){Dt(o,o.return,l)}}function ZS(r){switch(r.tag){case 31:case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new $g),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new $g),o;default:throw Error(i(435,r.tag))}}function nc(r,o){var l=ZS(r);o.forEach(function(c){if(!l.has(c)){l.add(c);var x=sT.bind(null,r,c);c.then(x,x)}})}function or(r,o){var l=o.deletions;if(l!==null)for(var c=0;c<l.length;c++){var x=l[c],S=r,A=o,P=A;e:for(;P!==null;){switch(P.tag){case 27:if(_o(P.type)){en=P.stateNode,ir=!1;break e}break;case 5:en=P.stateNode,ir=!1;break e;case 3:case 4:en=P.stateNode.containerInfo,ir=!0;break e}P=P.return}if(en===null)throw Error(i(160));Wg(S,A,x),en=null,ir=!1,S=x.alternate,S!==null&&(S.return=null),x.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)ty(o,r),o=o.sibling}var Jr=null;function ty(r,o){var l=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:or(o,r),ar(r),c&4&&(xo(3,r,r.return),xs(3,r),xo(5,r,r.return));break;case 1:or(o,r),ar(r),c&512&&(wn||l===null||di(l,l.return)),c&64&&Bi&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var x=Jr;if(or(o,r),ar(r),c&512&&(wn||l===null||di(l,l.return)),c&4){var S=l!==null?l.memoizedState:null;if(c=r.memoizedState,l===null)if(c===null)if(r.stateNode===null){e:{c=r.type,l=r.memoizedProps,x=x.ownerDocument||x;t:switch(c){case"title":S=x.getElementsByTagName("title")[0],(!S||S[hr]||S[Vt]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=x.createElement(c),x.head.insertBefore(S,x.querySelector("head > title"))),qn(S,c,l),S[Vt]=r,fn(S),c=S;break e;case"link":var A=t0("link","href",x).get(c+(l.href||""));if(A){for(var P=0;P<A.length;P++)if(S=A[P],S.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&S.getAttribute("rel")===(l.rel==null?null:l.rel)&&S.getAttribute("title")===(l.title==null?null:l.title)&&S.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(P,1);break t}}S=x.createElement(c),qn(S,c,l),x.head.appendChild(S);break;case"meta":if(A=t0("meta","content",x).get(c+(l.content||""))){for(P=0;P<A.length;P++)if(S=A[P],S.getAttribute("content")===(l.content==null?null:""+l.content)&&S.getAttribute("name")===(l.name==null?null:l.name)&&S.getAttribute("property")===(l.property==null?null:l.property)&&S.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&S.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(P,1);break t}}S=x.createElement(c),qn(S,c,l),x.head.appendChild(S);break;default:throw Error(i(468,c))}S[Vt]=r,fn(S),c=S}r.stateNode=c}else n0(x,r.type,r.stateNode);else r.stateNode=e0(x,c,r.memoizedProps);else S!==c?(S===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):S.count--,c===null?n0(x,r.type,r.stateNode):e0(x,c,r.memoizedProps)):c===null&&r.stateNode!==null&&kd(r,r.memoizedProps,l.memoizedProps)}break;case 27:or(o,r),ar(r),c&512&&(wn||l===null||di(l,l.return)),l!==null&&c&4&&kd(r,r.memoizedProps,l.memoizedProps);break;case 5:if(or(o,r),ar(r),c&512&&(wn||l===null||di(l,l.return)),r.flags&32){x=r.stateNode;try{wi(x,"")}catch(Ve){Dt(r,r.return,Ve)}}c&4&&r.stateNode!=null&&(x=r.memoizedProps,kd(r,x,l!==null?l.memoizedProps:x)),c&1024&&(Rd=!0);break;case 6:if(or(o,r),ar(r),c&4){if(r.stateNode===null)throw Error(i(162));c=r.memoizedProps,l=r.stateNode;try{l.nodeValue=c}catch(Ve){Dt(r,r.return,Ve)}}break;case 3:if(vc=null,x=Jr,Jr=gc(o.containerInfo),or(o,r),Jr=x,ar(r),c&4&&l!==null&&l.memoizedState.isDehydrated)try{ml(o.containerInfo)}catch(Ve){Dt(r,r.return,Ve)}Rd&&(Rd=!1,ny(r));break;case 4:c=Jr,Jr=gc(r.stateNode.containerInfo),or(o,r),ar(r),Jr=c;break;case 12:or(o,r),ar(r);break;case 31:or(o,r),ar(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,nc(r,c)));break;case 13:or(o,r),ar(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(ic=an()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,nc(r,c)));break;case 22:x=r.memoizedState!==null;var $=l!==null&&l.memoizedState!==null,pe=Bi,we=wn;if(Bi=pe||x,wn=we||$,or(o,r),wn=we,Bi=pe,ar(r),c&8192)e:for(o=r.stateNode,o._visibility=x?o._visibility&-2:o._visibility|1,x&&(l===null||$||Bi||wn||fa(r)),l=null,o=r;;){if(o.tag===5||o.tag===26){if(l===null){$=l=o;try{if(S=$.stateNode,x)A=S.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{P=$.stateNode;var Ce=$.memoizedProps.style,ge=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;P.style.display=ge==null||typeof ge=="boolean"?"":(""+ge).trim()}}catch(Ve){Dt($,$.return,Ve)}}}else if(o.tag===6){if(l===null){$=o;try{$.stateNode.nodeValue=x?"":$.memoizedProps}catch(Ve){Dt($,$.return,Ve)}}}else if(o.tag===18){if(l===null){$=o;try{var ye=$.stateNode;x?Gy(ye,!0):Gy($.stateNode,!1)}catch(Ve){Dt($,$.return,Ve)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}c&4&&(c=r.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,nc(r,l))));break;case 19:or(o,r),ar(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,nc(r,c)));break;case 30:break;case 21:break;default:or(o,r),ar(r)}}function ar(r){var o=r.flags;if(o&2){try{for(var l,c=r.return;c!==null;){if(Kg(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var x=l.stateNode,S=Nd(r);tc(r,S,x);break;case 5:var A=l.stateNode;l.flags&32&&(wi(A,""),l.flags&=-33);var P=Nd(r);tc(r,P,A);break;case 3:case 4:var $=l.stateNode.containerInfo,pe=Nd(r);Md(r,pe,$);break;default:throw Error(i(161))}}catch(we){Dt(r,r.return,we)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function ny(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;ny(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function qi(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Xg(r,o.alternate,o),o=o.sibling}function fa(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:xo(4,o,o.return),fa(o);break;case 1:di(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&Gg(o,o.return,l),fa(o);break;case 27:Ns(o.stateNode);case 26:case 5:di(o,o.return),fa(o);break;case 22:o.memoizedState===null&&fa(o);break;case 30:fa(o);break;default:fa(o)}r=r.sibling}}function ji(r,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var c=o.alternate,x=r,S=o,A=S.flags;switch(S.tag){case 0:case 11:case 15:ji(x,S,l),xs(4,S);break;case 1:if(ji(x,S,l),c=S,x=c.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(pe){Dt(c,c.return,pe)}if(c=S,x=c.updateQueue,x!==null){var P=c.stateNode;try{var $=x.shared.hiddenCallbacks;if($!==null)for(x.shared.hiddenCallbacks=null,x=0;x<$.length;x++)Im($[x],P)}catch(pe){Dt(c,c.return,pe)}}l&&A&64&&Vg(S),bs(S,S.return);break;case 27:Jg(S);case 26:case 5:ji(x,S,l),l&&c===null&&A&4&&Yg(S),bs(S,S.return);break;case 12:ji(x,S,l);break;case 31:ji(x,S,l),l&&A&4&&Zg(x,S);break;case 13:ji(x,S,l),l&&A&4&&ey(x,S);break;case 22:S.memoizedState===null&&ji(x,S,l),bs(S,S.return);break;case 30:break;default:ji(x,S,l)}o=o.sibling}}function Dd(r,o){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&as(l))}function Id(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&as(r))}function $r(r,o,l,c){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)ry(r,o,l,c),o=o.sibling}function ry(r,o,l,c){var x=o.flags;switch(o.tag){case 0:case 11:case 15:$r(r,o,l,c),x&2048&&xs(9,o);break;case 1:$r(r,o,l,c);break;case 3:$r(r,o,l,c),x&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&as(r)));break;case 12:if(x&2048){$r(r,o,l,c),r=o.stateNode;try{var S=o.memoizedProps,A=S.id,P=S.onPostCommit;typeof P=="function"&&P(A,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch($){Dt(o,o.return,$)}}else $r(r,o,l,c);break;case 31:$r(r,o,l,c);break;case 13:$r(r,o,l,c);break;case 23:break;case 22:S=o.stateNode,A=o.alternate,o.memoizedState!==null?S._visibility&2?$r(r,o,l,c):ws(r,o):S._visibility&2?$r(r,o,l,c):(S._visibility|=2,il(r,o,l,c,(o.subtreeFlags&10256)!==0||!1)),x&2048&&Dd(A,o);break;case 24:$r(r,o,l,c),x&2048&&Id(o.alternate,o);break;default:$r(r,o,l,c)}}function il(r,o,l,c,x){for(x=x&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var S=r,A=o,P=l,$=c,pe=A.flags;switch(A.tag){case 0:case 11:case 15:il(S,A,P,$,x),xs(8,A);break;case 23:break;case 22:var we=A.stateNode;A.memoizedState!==null?we._visibility&2?il(S,A,P,$,x):ws(S,A):(we._visibility|=2,il(S,A,P,$,x)),x&&pe&2048&&Dd(A.alternate,A);break;case 24:il(S,A,P,$,x),x&&pe&2048&&Id(A.alternate,A);break;default:il(S,A,P,$,x)}o=o.sibling}}function ws(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=r,c=o,x=c.flags;switch(c.tag){case 22:ws(l,c),x&2048&&Dd(c.alternate,c);break;case 24:ws(l,c),x&2048&&Id(c.alternate,c);break;default:ws(l,c)}o=o.sibling}}var Ss=8192;function ol(r,o,l){if(r.subtreeFlags&Ss)for(r=r.child;r!==null;)iy(r,o,l),r=r.sibling}function iy(r,o,l){switch(r.tag){case 26:ol(r,o,l),r.flags&Ss&&r.memoizedState!==null&&zT(l,Jr,r.memoizedState,r.memoizedProps);break;case 5:ol(r,o,l);break;case 3:case 4:var c=Jr;Jr=gc(r.stateNode.containerInfo),ol(r,o,l),Jr=c;break;case 22:r.memoizedState===null&&(c=r.alternate,c!==null&&c.memoizedState!==null?(c=Ss,Ss=16777216,ol(r,o,l),Ss=c):ol(r,o,l));break;default:ol(r,o,l)}}function oy(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function Ts(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var c=o[l];Pn=c,ly(c,r)}oy(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)ay(r),r=r.sibling}function ay(r){switch(r.tag){case 0:case 11:case 15:Ts(r),r.flags&2048&&xo(9,r,r.return);break;case 3:Ts(r);break;case 12:Ts(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,rc(r)):Ts(r);break;default:Ts(r)}}function rc(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var c=o[l];Pn=c,ly(c,r)}oy(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:xo(8,o,o.return),rc(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,rc(o));break;default:rc(o)}r=r.sibling}}function ly(r,o){for(;Pn!==null;){var l=Pn;switch(l.tag){case 0:case 11:case 15:xo(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:as(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Pn=c;else e:for(l=r;Pn!==null;){c=Pn;var x=c.sibling,S=c.return;if(Qg(c),c===l){Pn=null;break e}if(x!==null){x.return=S,Pn=x;break e}Pn=S}}}var eT={getCacheForType:function(r){var o=Bn(vn),l=o.data.get(r);return l===void 0&&(l=r(),o.data.set(r,l)),l},cacheSignal:function(){return Bn(vn).controller.signal}},tT=typeof WeakMap=="function"?WeakMap:Map,Nt=0,qt=null,ht=null,yt=0,Rt=0,br=null,bo=!1,al=!1,Pd=!1,Hi=0,on=0,wo=0,da=0,Ld=0,wr=0,ll=0,Cs=null,lr=null,Ud=!1,ic=0,sy=0,oc=1/0,ac=null,So=null,An=0,To=null,sl=null,Fi=0,Od=0,Bd=null,uy=null,Es=0,zd=null;function Sr(){return(Nt&2)!==0&&yt!==0?yt&-yt:ue.T!==null?Gd():zo()}function cy(){if(wr===0)if((yt&536870912)===0||wt){var r=sn;sn<<=1,(sn&3932160)===0&&(sn=262144),wr=r}else wr=536870912;return r=vr.current,r!==null&&(r.flags|=32),wr}function sr(r,o,l){(r===qt&&(Rt===2||Rt===9)||r.cancelPendingCommit!==null)&&(ul(r,0),Co(r,yt,wr,!1)),Ar(r,l),((Nt&2)===0||r!==qt)&&(r===qt&&((Nt&2)===0&&(da|=l),on===4&&Co(r,yt,wr,!1)),pi(r))}function fy(r,o,l){if((Nt&6)!==0)throw Error(i(327));var c=!l&&(o&127)===0&&(o&r.expiredLanes)===0||_r(r,o),x=c?iT(r,o):jd(r,o,!0),S=c;do{if(x===0){al&&!c&&Co(r,o,0,!1);break}else{if(l=r.current.alternate,S&&!nT(l)){x=jd(r,o,!1),S=!1;continue}if(x===2){if(S=o,r.errorRecoveryDisabledLanes&S)var A=0;else A=r.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){o=A;e:{var P=r;x=Cs;var $=P.current.memoizedState.isDehydrated;if($&&(ul(P,A).flags|=256),A=jd(P,A,!1),A!==2){if(Pd&&!$){P.errorRecoveryDisabledLanes|=S,da|=S,x=4;break e}S=lr,lr=x,S!==null&&(lr===null?lr=S:lr.push.apply(lr,S))}x=A}if(S=!1,x!==2)continue}}if(x===1){ul(r,0),Co(r,o,0,!0);break}e:{switch(c=r,S=x,S){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:Co(c,o,wr,!bo);break e;case 2:lr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(x=ic+300-an(),10<x)){if(Co(c,o,wr,!bo),_n(c,0,!0)!==0)break e;Fi=o,c.timeoutHandle=Hy(dy.bind(null,c,l,lr,ac,Ud,o,wr,da,ll,bo,S,"Throttled",-0,0),x);break e}dy(c,l,lr,ac,Ud,o,wr,da,ll,bo,S,null,-0,0)}}break}while(!0);pi(r)}function dy(r,o,l,c,x,S,A,P,$,pe,we,Ce,ge,ye){if(r.timeoutHandle=-1,Ce=o.subtreeFlags,Ce&8192||(Ce&16785408)===16785408){Ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:nr},iy(o,S,Ce);var Ve=(S&62914560)===S?ic-an():(S&4194048)===S?sy-an():0;if(Ve=qT(Ce,Ve),Ve!==null){Fi=S,r.cancelPendingCommit=Ve(by.bind(null,r,o,S,l,c,x,A,P,$,we,Ce,null,ge,ye)),Co(r,S,A,!pe);return}}by(r,o,S,l,c,x,A,P,$)}function nT(r){for(var o=r;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var x=l[c],S=x.getSnapshot;x=x.value;try{if(!Fn(S(),x))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Co(r,o,l,c){o&=~Ld,o&=~da,r.suspendedLanes|=o,r.pingedLanes&=~o,c&&(r.warmLanes|=o),c=r.expirationTimes;for(var x=o;0<x;){var S=31-Ue(x),A=1<<S;c[S]=-1,x&=~A}l!==0&&Bo(r,l,o)}function lc(){return(Nt&6)===0?(_s(0),!1):!0}function qd(){if(ht!==null){if(Rt===0)var r=ht.return;else r=ht,Di=ra=null,nd(r),Za=null,ss=0,r=ht;for(;r!==null;)Fg(r.alternate,r),r=r.return;ht=null}}function ul(r,o){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,ST(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),Fi=0,qd(),qt=r,ht=l=Mi(r.current,null),yt=o,Rt=0,br=null,bo=!1,al=_r(r,o),Pd=!1,ll=wr=Ld=da=wo=on=0,lr=Cs=null,Ud=!1,(o&8)!==0&&(o|=o&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=o;0<c;){var x=31-Ue(c),S=1<<x;o|=r[x],c&=~S}return Hi=o,In(),l}function py(r,o){lt=null,ue.H=gs,o===Wa||o===Uu?(o=Nm(),Rt=3):o===Vf?(o=Nm(),Rt=4):Rt=o===vd?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,br=o,ht===null&&(on=1,Xu(r,Dr(o,r.current)))}function hy(){var r=vr.current;return r===null?!0:(yt&4194048)===yt?Ur===null:(yt&62914560)===yt||(yt&536870912)!==0?r===Ur:!1}function my(){var r=ue.H;return ue.H=gs,r===null?gs:r}function gy(){var r=ue.A;return ue.A=eT,r}function sc(){on=4,bo||(yt&4194048)!==yt&&vr.current!==null||(al=!0),(wo&134217727)===0&&(da&134217727)===0||qt===null||Co(qt,yt,wr,!1)}function jd(r,o,l){var c=Nt;Nt|=2;var x=my(),S=gy();(qt!==r||yt!==o)&&(ac=null,ul(r,o)),o=!1;var A=on;e:do try{if(Rt!==0&&ht!==null){var P=ht,$=br;switch(Rt){case 8:qd(),A=6;break e;case 3:case 2:case 9:case 6:vr.current===null&&(o=!0);var pe=Rt;if(Rt=0,br=null,cl(r,P,$,pe),l&&al){A=0;break e}break;default:pe=Rt,Rt=0,br=null,cl(r,P,$,pe)}}rT(),A=on;break}catch(we){py(r,we)}while(!0);return o&&r.shellSuspendCounter++,Di=ra=null,Nt=c,ue.H=x,ue.A=S,ht===null&&(qt=null,yt=0,In()),A}function rT(){for(;ht!==null;)yy(ht)}function iT(r,o){var l=Nt;Nt|=2;var c=my(),x=gy();qt!==r||yt!==o?(ac=null,oc=an()+500,ul(r,o)):al=_r(r,o);e:do try{if(Rt!==0&&ht!==null){o=ht;var S=br;t:switch(Rt){case 1:Rt=0,br=null,cl(r,o,S,1);break;case 2:case 9:if(Am(S)){Rt=0,br=null,vy(o);break}o=function(){Rt!==2&&Rt!==9||qt!==r||(Rt=7),pi(r)},S.then(o,o);break e;case 3:Rt=7;break e;case 4:Rt=5;break e;case 7:Am(S)?(Rt=0,br=null,vy(o)):(Rt=0,br=null,cl(r,o,S,7));break;case 5:var A=null;switch(ht.tag){case 26:A=ht.memoizedState;case 5:case 27:var P=ht;if(A?r0(A):P.stateNode.complete){Rt=0,br=null;var $=P.sibling;if($!==null)ht=$;else{var pe=P.return;pe!==null?(ht=pe,uc(pe)):ht=null}break t}}Rt=0,br=null,cl(r,o,S,5);break;case 6:Rt=0,br=null,cl(r,o,S,6);break;case 8:qd(),on=6;break e;default:throw Error(i(462))}}oT();break}catch(we){py(r,we)}while(!0);return Di=ra=null,ue.H=c,ue.A=x,Nt=l,ht!==null?0:(qt=null,yt=0,In(),on)}function oT(){for(;ht!==null&&!Uo();)yy(ht)}function yy(r){var o=jg(r.alternate,r,Hi);r.memoizedProps=r.pendingProps,o===null?uc(r):ht=o}function vy(r){var o=r,l=o.alternate;switch(o.tag){case 15:case 0:o=Lg(l,o,o.pendingProps,o.type,void 0,yt);break;case 11:o=Lg(l,o,o.pendingProps,o.type.render,o.ref,yt);break;case 5:nd(o);default:Fg(l,o),o=ht=gm(o,Hi),o=jg(l,o,Hi)}r.memoizedProps=r.pendingProps,o===null?uc(r):ht=o}function cl(r,o,l,c){Di=ra=null,nd(o),Za=null,ss=0;var x=o.return;try{if(KS(r,x,o,l,yt)){on=1,Xu(r,Dr(l,r.current)),ht=null;return}}catch(S){if(x!==null)throw ht=x,S;on=1,Xu(r,Dr(l,r.current)),ht=null;return}o.flags&32768?(wt||c===1?r=!0:al||(yt&536870912)!==0?r=!1:(bo=r=!0,(c===2||c===9||c===3||c===6)&&(c=vr.current,c!==null&&c.tag===13&&(c.flags|=16384))),xy(o,r)):uc(o)}function uc(r){var o=r;do{if((o.flags&32768)!==0){xy(o,bo);return}r=o.return;var l=XS(o.alternate,o,Hi);if(l!==null){ht=l;return}if(o=o.sibling,o!==null){ht=o;return}ht=o=r}while(o!==null);on===0&&(on=5)}function xy(r,o){do{var l=QS(r.alternate,r);if(l!==null){l.flags&=32767,ht=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(r=r.sibling,r!==null)){ht=r;return}ht=r=l}while(r!==null);on=6,ht=null}function by(r,o,l,c,x,S,A,P,$){r.cancelPendingCommit=null;do cc();while(An!==0);if((Nt&6)!==0)throw Error(i(327));if(o!==null){if(o===r.current)throw Error(i(177));if(S=o.lanes|o.childLanes,S|=at,Ll(r,l,S,A,P,$),r===qt&&(ht=qt=null,yt=0),sl=o,To=r,Fi=l,Od=S,Bd=x,uy=c,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,uT(Je,function(){return Ey(),null})):(r.callbackNode=null,r.callbackPriority=0),c=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||c){c=ue.T,ue.T=null,x=Ee.p,Ee.p=2,A=Nt,Nt|=4;try{WS(r,o,l)}finally{Nt=A,Ee.p=x,ue.T=c}}An=1,wy(),Sy(),Ty()}}function wy(){if(An===1){An=0;var r=To,o=sl,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=ue.T,ue.T=null;var c=Ee.p;Ee.p=2;var x=Nt;Nt|=4;try{ty(o,r);var S=Zd,A=N(r.containerInfo),P=S.focusedElem,$=S.selectionRange;if(A!==P&&P&&P.ownerDocument&&_(P.ownerDocument.documentElement,P)){if($!==null&&R(P)){var pe=$.start,we=$.end;if(we===void 0&&(we=pe),"selectionStart"in P)P.selectionStart=pe,P.selectionEnd=Math.min(we,P.value.length);else{var Ce=P.ownerDocument||document,ge=Ce&&Ce.defaultView||window;if(ge.getSelection){var ye=ge.getSelection(),Ve=P.textContent.length,tt=Math.min($.start,Ve),Ot=$.end===void 0?tt:Math.min($.end,Ve);!ye.extend&&tt>Ot&&(A=Ot,Ot=tt,tt=A);var le=C(P,tt),te=C(P,Ot);if(le&&te&&(ye.rangeCount!==1||ye.anchorNode!==le.node||ye.anchorOffset!==le.offset||ye.focusNode!==te.node||ye.focusOffset!==te.offset)){var de=Ce.createRange();de.setStart(le.node,le.offset),ye.removeAllRanges(),tt>Ot?(ye.addRange(de),ye.extend(te.node,te.offset)):(de.setEnd(te.node,te.offset),ye.addRange(de))}}}}for(Ce=[],ye=P;ye=ye.parentNode;)ye.nodeType===1&&Ce.push({element:ye,left:ye.scrollLeft,top:ye.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<Ce.length;P++){var Se=Ce[P];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}Sc=!!Wd,Zd=Wd=null}finally{Nt=x,Ee.p=c,ue.T=l}}r.current=o,An=2}}function Sy(){if(An===2){An=0;var r=To,o=sl,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=ue.T,ue.T=null;var c=Ee.p;Ee.p=2;var x=Nt;Nt|=4;try{Xg(r,o.alternate,o)}finally{Nt=x,Ee.p=c,ue.T=l}}An=3}}function Ty(){if(An===4||An===3){An=0,Vr();var r=To,o=sl,l=Fi,c=uy;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?An=5:(An=0,sl=To=null,Cy(r,r.pendingLanes));var x=r.pendingLanes;if(x===0&&(So=null),Qi(l),o=o.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(Ht,o,void 0,(o.current.flags&128)===128)}catch{}if(c!==null){o=ue.T,x=Ee.p,Ee.p=2,ue.T=null;try{for(var S=r.onRecoverableError,A=0;A<c.length;A++){var P=c[A];S(P.value,{componentStack:P.stack})}}finally{ue.T=o,Ee.p=x}}(Fi&3)!==0&&cc(),pi(r),x=r.pendingLanes,(l&261930)!==0&&(x&42)!==0?r===zd?Es++:(Es=0,zd=r):Es=0,_s(0)}}function Cy(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,as(o)))}function cc(){return wy(),Sy(),Ty(),Ey()}function Ey(){if(An!==5)return!1;var r=To,o=Od;Od=0;var l=Qi(Fi),c=ue.T,x=Ee.p;try{Ee.p=32>l?32:l,ue.T=null,l=Bd,Bd=null;var S=To,A=Fi;if(An=0,sl=To=null,Fi=0,(Nt&6)!==0)throw Error(i(331));var P=Nt;if(Nt|=4,ay(S.current),ry(S,S.current,A,l),Nt=P,_s(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(Ht,S)}catch{}return!0}finally{Ee.p=x,ue.T=c,Cy(r,o)}}function _y(r,o,l){o=Dr(l,o),o=yd(r.stateNode,o,2),r=go(r,o,2),r!==null&&(Ar(r,2),pi(r))}function Dt(r,o,l){if(r.tag===3)_y(r,r,l);else for(;o!==null;){if(o.tag===3){_y(o,r,l);break}else if(o.tag===1){var c=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(So===null||!So.has(c))){r=Dr(l,r),l=Ag(2),c=go(o,l,2),c!==null&&(kg(l,c,o,r),Ar(c,2),pi(c));break}}o=o.return}}function Hd(r,o,l){var c=r.pingCache;if(c===null){c=r.pingCache=new tT;var x=new Set;c.set(o,x)}else x=c.get(o),x===void 0&&(x=new Set,c.set(o,x));x.has(l)||(Pd=!0,x.add(l),r=aT.bind(null,r,o,l),o.then(r,r))}function aT(r,o,l){var c=r.pingCache;c!==null&&c.delete(o),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,qt===r&&(yt&l)===l&&(on===4||on===3&&(yt&62914560)===yt&&300>an()-ic?(Nt&2)===0&&ul(r,0):Ld|=l,ll===yt&&(ll=0)),pi(r)}function Ay(r,o){o===0&&(o=Oo()),r=Zt(r,o),r!==null&&(Ar(r,o),pi(r))}function lT(r){var o=r.memoizedState,l=0;o!==null&&(l=o.retryLane),Ay(r,l)}function sT(r,o){var l=0;switch(r.tag){case 31:case 13:var c=r.stateNode,x=r.memoizedState;x!==null&&(l=x.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(o),Ay(r,l)}function uT(r,o){return pr(r,o)}var fc=null,fl=null,Fd=!1,dc=!1,Vd=!1,Eo=0;function pi(r){r!==fl&&r.next===null&&(fl===null?fc=fl=r:fl=fl.next=r),dc=!0,Fd||(Fd=!0,fT())}function _s(r,o){if(!Vd&&dc){Vd=!0;do for(var l=!1,c=fc;c!==null;){if(r!==0){var x=c.pendingLanes;if(x===0)var S=0;else{var A=c.suspendedLanes,P=c.pingedLanes;S=(1<<31-Ue(42|r)+1)-1,S&=x&~(A&~P),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(l=!0,Ry(c,S))}else S=yt,S=_n(c,c===qt?S:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(S&3)===0||_r(c,S)||(l=!0,Ry(c,S));c=c.next}while(l);Vd=!1}}function cT(){ky()}function ky(){dc=Fd=!1;var r=0;Eo!==0&&wT()&&(r=Eo);for(var o=an(),l=null,c=fc;c!==null;){var x=c.next,S=Ny(c,o);S===0?(c.next=null,l===null?fc=x:l.next=x,x===null&&(fl=l)):(l=c,(r!==0||(S&3)!==0)&&(dc=!0)),c=x}An!==0&&An!==5||_s(r),Eo!==0&&(Eo=0)}function Ny(r,o){for(var l=r.suspendedLanes,c=r.pingedLanes,x=r.expirationTimes,S=r.pendingLanes&-62914561;0<S;){var A=31-Ue(S),P=1<<A,$=x[A];$===-1?((P&l)===0||(P&c)!==0)&&(x[A]=Ea(P,o)):$<=o&&(r.expiredLanes|=P),S&=~P}if(o=qt,l=yt,l=_n(r,r===o?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c=r.callbackNode,l===0||r===o&&(Rt===2||Rt===9)||r.cancelPendingCommit!==null)return c!==null&&c!==null&&Tn(c),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||_r(r,l)){if(o=l&-l,o===r.callbackPriority)return o;switch(c!==null&&Tn(c),Qi(l)){case 2:case 8:l=Re;break;case 32:l=Je;break;case 268435456:l=dt;break;default:l=Je}return c=My.bind(null,r),l=pr(l,c),r.callbackPriority=o,r.callbackNode=l,o}return c!==null&&c!==null&&Tn(c),r.callbackPriority=2,r.callbackNode=null,2}function My(r,o){if(An!==0&&An!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(cc()&&r.callbackNode!==l)return null;var c=yt;return c=_n(r,r===qt?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c===0?null:(fy(r,c,o),Ny(r,an()),r.callbackNode!=null&&r.callbackNode===l?My.bind(null,r):null)}function Ry(r,o){if(cc())return null;fy(r,o,!0)}function fT(){TT(function(){(Nt&6)!==0?pr(ve,cT):ky()})}function Gd(){if(Eo===0){var r=Xa;r===0&&(r=ke,ke<<=1,(ke&261888)===0&&(ke=256)),Eo=r}return Eo}function Dy(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Kr(""+r)}function Iy(r,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,r.id&&l.setAttribute("form",r.id),o.parentNode.insertBefore(l,o),r=new FormData(r),l.parentNode.removeChild(l),r}function dT(r,o,l,c,x){if(o==="submit"&&l&&l.stateNode===x){var S=Dy((x[cn]||null).action),A=c.submitter;A&&(o=(o=A[cn]||null)?Dy(o.formAction):A.getAttribute("formAction"),o!==null&&(S=o,A=null));var P=new Ra("action","action",null,c,x);r.push({event:P,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Eo!==0){var $=A?Iy(x,A):new FormData(x);fd(l,{pending:!0,data:$,method:x.method,action:S},null,$)}}else typeof S=="function"&&(P.preventDefault(),$=A?Iy(x,A):new FormData(x),fd(l,{pending:!0,data:$,method:x.method,action:S},S,$))},currentTarget:x}]})}}for(var Yd=0;Yd<ze.length;Yd++){var Kd=ze[Yd],pT=Kd.toLowerCase(),hT=Kd[0].toUpperCase()+Kd.slice(1);Ie(pT,"on"+hT)}Ie(fe,"onAnimationEnd"),Ie(he,"onAnimationIteration"),Ie(be,"onAnimationStart"),Ie("dblclick","onDoubleClick"),Ie("focusin","onFocus"),Ie("focusout","onBlur"),Ie(Te,"onTransitionRun"),Ie(Oe,"onTransitionStart"),Ie(je,"onTransitionCancel"),Ie(De,"onTransitionEnd"),oi("onMouseEnter",["mouseout","mouseover"]),oi("onMouseLeave",["mouseout","mouseover"]),oi("onPointerEnter",["pointerout","pointerover"]),oi("onPointerLeave",["pointerout","pointerover"]),Gr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var As="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(As));function Py(r,o){o=(o&4)!==0;for(var l=0;l<r.length;l++){var c=r[l],x=c.event;c=c.listeners;e:{var S=void 0;if(o)for(var A=c.length-1;0<=A;A--){var P=c[A],$=P.instance,pe=P.currentTarget;if(P=P.listener,$!==S&&x.isPropagationStopped())break e;S=P,x.currentTarget=pe;try{S(x)}catch(we){Fe(we)}x.currentTarget=null,S=$}else for(A=0;A<c.length;A++){if(P=c[A],$=P.instance,pe=P.currentTarget,P=P.listener,$!==S&&x.isPropagationStopped())break e;S=P,x.currentTarget=pe;try{S(x)}catch(we){Fe(we)}x.currentTarget=null,S=$}}}}function mt(r,o){var l=o[Wi];l===void 0&&(l=o[Wi]=new Set);var c=r+"__bubble";l.has(c)||(Ly(o,r,2,!1),l.add(c))}function Jd(r,o,l){var c=0;o&&(c|=4),Ly(l,r,c,o)}var pc="_reactListening"+Math.random().toString(36).slice(2);function $d(r){if(!r[pc]){r[pc]=!0,xi.forEach(function(l){l!=="selectionchange"&&(mT.has(l)||Jd(l,!1,r),Jd(l,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[pc]||(o[pc]=!0,Jd("selectionchange",!1,o))}}function Ly(r,o,l,c){switch(c0(o)){case 2:var x=FT;break;case 8:x=VT;break;default:x=cp}l=x.bind(null,o,l,r),x=void 0,!Fl||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(x=!0),c?x!==void 0?r.addEventListener(o,l,{capture:!0,passive:x}):r.addEventListener(o,l,!0):x!==void 0?r.addEventListener(o,l,{passive:x}):r.addEventListener(o,l,!1)}function Xd(r,o,l,c,x){var S=c;if((o&1)===0&&(o&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var P=c.stateNode.containerInfo;if(P===x)break;if(A===4)for(A=c.return;A!==null;){var $=A.tag;if(($===3||$===4)&&A.stateNode.containerInfo===x)return;A=A.return}for(;P!==null;){if(A=ii(P),A===null)return;if($=A.tag,$===5||$===6||$===26||$===27){c=S=A;continue e}P=P.parentNode}}c=c.return}eo(function(){var pe=S,we=Na(l),Ce=[];e:{var ge=Be.get(r);if(ge!==void 0){var ye=Ra,Ve=r;switch(r){case"keypress":if(ro(l)===0)break e;case"keydown":case"keyup":ye=Ba;break;case"focusin":Ve="focus",ye=io;break;case"focusout":Ve="blur",ye=io;break;case"beforeblur":case"afterblur":ye=io;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=Pa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=bu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=Xl;break;case fe:case he:case be:ye=wu;break;case De:ye=Ql;break;case"scroll":case"scrollend":ye=Da;break;case"wheel":ye=qa;break;case"copy":case"cut":case"paste":ye=oo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=$l;break;case"toggle":case"beforetoggle":ye=Cu}var tt=(o&4)!==0,Ot=!tt&&(r==="scroll"||r==="scrollend"),le=tt?ge!==null?ge+"Capture":null:ge;tt=[];for(var te=pe,de;te!==null;){var Se=te;if(de=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||de===null||le===null||(Se=Ci(te,le),Se!=null&&tt.push(ks(te,Se,de))),Ot)break;te=te.return}0<tt.length&&(ge=new ye(ge,Ve,null,l,we),Ce.push({event:ge,listeners:tt}))}}if((o&7)===0){e:{if(ge=r==="mouseover"||r==="pointerover",ye=r==="mouseout"||r==="pointerout",ge&&l!==Nr&&(Ve=l.relatedTarget||l.fromElement)&&(ii(Ve)||Ve[Xn]))break e;if((ye||ge)&&(ge=we.window===we?we:(ge=we.ownerDocument)?ge.defaultView||ge.parentWindow:window,ye?(Ve=l.relatedTarget||l.toElement,ye=pe,Ve=Ve?ii(Ve):null,Ve!==null&&(Ot=s(Ve),tt=Ve.tag,Ve!==Ot||tt!==5&&tt!==27&&tt!==6)&&(Ve=null)):(ye=null,Ve=pe),ye!==Ve)){if(tt=Pa,Se="onMouseLeave",le="onMouseEnter",te="mouse",(r==="pointerout"||r==="pointerover")&&(tt=$l,Se="onPointerLeave",le="onPointerEnter",te="pointer"),Ot=ye==null?ge:mr(ye),de=Ve==null?ge:mr(Ve),ge=new tt(Se,te+"leave",ye,l,we),ge.target=Ot,ge.relatedTarget=de,Se=null,ii(we)===pe&&(tt=new tt(le,te+"enter",Ve,l,we),tt.target=de,tt.relatedTarget=Ot,Se=tt),Ot=Se,ye&&Ve)t:{for(tt=gT,le=ye,te=Ve,de=0,Se=le;Se;Se=tt(Se))de++;Se=0;for(var Xe=te;Xe;Xe=tt(Xe))Se++;for(;0<de-Se;)le=tt(le),de--;for(;0<Se-de;)te=tt(te),Se--;for(;de--;){if(le===te||te!==null&&le===te.alternate){tt=le;break t}le=tt(le),te=tt(te)}tt=null}else tt=null;ye!==null&&Uy(Ce,ge,ye,tt,!1),Ve!==null&&Ot!==null&&Uy(Ce,Ot,Ve,tt,!0)}}e:{if(ge=pe?mr(pe):window,ye=ge.nodeName&&ge.nodeName.toLowerCase(),ye==="select"||ye==="input"&&ge.type==="file")var Et=Zo;else if(Fa(ge))if(Rr)Et=so;else{Et=Ni;var Ke=Mu}else ye=ge.nodeName,!ye||ye.toLowerCase()!=="input"||ge.type!=="checkbox"&&ge.type!=="radio"?pe&&Hl(pe.elementType)&&(Et=Zo):Et=ns;if(Et&&(Et=Et(r,pe))){ts(Ce,Et,l,we);break e}Ke&&Ke(r,ge,pe),r==="focusout"&&pe&&ge.type==="number"&&pe.memoizedProps.value!=null&&Go(ge,"number",ge.value)}switch(Ke=pe?mr(pe):window,r){case"focusin":(Fa(Ke)||Ke.contentEditable==="true")&&(F=Ke,W=pe,Z=null);break;case"focusout":Z=W=F=null;break;case"mousedown":ie=!0;break;case"contextmenu":case"mouseup":case"dragend":ie=!1,X(Ce,l,we);break;case"selectionchange":if(q)break;case"keydown":case"keyup":X(Ce,l,we)}var ut;if(Qo)e:{switch(r){case"compositionstart":var vt="onCompositionStart";break e;case"compositionend":vt="onCompositionEnd";break e;case"compositionupdate":vt="onCompositionUpdate";break e}vt=void 0}else ki?es(r,l)&&(vt="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(vt="onCompositionStart");vt&&(ja&&l.locale!=="ko"&&(ki||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&ki&&(ut=no()):(Mr=we,Ma="value"in Mr?Mr.value:Mr.textContent,ki=!0)),Ke=hc(pe,vt),0<Ke.length&&(vt=new Oa(vt,r,null,l,we),Ce.push({event:vt,listeners:Ke}),ut?vt.data=ut:(ut=_u(l),ut!==null&&(vt.data=ut)))),(ut=kf?Au(r,l):Nf(r,l))&&(vt=hc(pe,"onBeforeInput"),0<vt.length&&(Ke=new Oa("onBeforeInput","beforeinput",null,l,we),Ce.push({event:Ke,listeners:vt}),Ke.data=ut)),dT(Ce,r,pe,l,we)}Py(Ce,o)})}function ks(r,o,l){return{instance:r,listener:o,currentTarget:l}}function hc(r,o){for(var l=o+"Capture",c=[];r!==null;){var x=r,S=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||S===null||(x=Ci(r,l),x!=null&&c.unshift(ks(r,x,S)),x=Ci(r,o),x!=null&&c.push(ks(r,x,S))),r.tag===3)return c;r=r.return}return[]}function gT(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Uy(r,o,l,c,x){for(var S=o._reactName,A=[];l!==null&&l!==c;){var P=l,$=P.alternate,pe=P.stateNode;if(P=P.tag,$!==null&&$===c)break;P!==5&&P!==26&&P!==27||pe===null||($=pe,x?(pe=Ci(l,S),pe!=null&&A.unshift(ks(l,pe,$))):x||(pe=Ci(l,S),pe!=null&&A.push(ks(l,pe,$)))),l=l.return}A.length!==0&&r.push({event:o,listeners:A})}var yT=/\r\n?/g,vT=/\u0000|\uFFFD/g;function Oy(r){return(typeof r=="string"?r:""+r).replace(yT,`
`).replace(vT,"")}function By(r,o){return o=Oy(o),Oy(r)===o}function Ut(r,o,l,c,x,S){switch(l){case"children":typeof c=="string"?o==="body"||o==="textarea"&&c===""||wi(r,c):(typeof c=="number"||typeof c=="bigint")&&o!=="body"&&wi(r,""+c);break;case"className":Fo(r,"class",c);break;case"tabIndex":Fo(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Fo(r,l,c);break;case"style":jl(r,c,S);break;case"data":if(o!=="object"){Fo(r,"data",c);break}case"src":case"href":if(c===""&&(o!=="a"||l!=="href")){r.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(l);break}c=Kr(""+c),r.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(l==="formAction"?(o!=="input"&&Ut(r,o,"name",x.name,x,null),Ut(r,o,"formEncType",x.formEncType,x,null),Ut(r,o,"formMethod",x.formMethod,x,null),Ut(r,o,"formTarget",x.formTarget,x,null)):(Ut(r,o,"encType",x.encType,x,null),Ut(r,o,"method",x.method,x,null),Ut(r,o,"target",x.target,x,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(l);break}c=Kr(""+c),r.setAttribute(l,c);break;case"onClick":c!=null&&(r.onclick=nr);break;case"onScroll":c!=null&&mt("scroll",r);break;case"onScrollEnd":c!=null&&mt("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(x.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}l=Kr(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,""+c):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":c===!0?r.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,c):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(l,c):r.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(l):r.setAttribute(l,c);break;case"popover":mt("beforetoggle",r),mt("toggle",r),ft(r,"popover",c);break;case"xlinkActuate":kr(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":kr(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":kr(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":kr(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":kr(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":kr(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":kr(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":kr(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":kr(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ft(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Ef.get(l)||l,ft(r,l,c))}}function Qd(r,o,l,c,x,S){switch(l){case"style":jl(r,c,S);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(x.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof c=="string"?wi(r,c):(typeof c=="number"||typeof c=="bigint")&&wi(r,""+c);break;case"onScroll":c!=null&&mt("scroll",r);break;case"onScrollEnd":c!=null&&mt("scrollend",r);break;case"onClick":c!=null&&(r.onclick=nr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jo.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(x=l.endsWith("Capture"),o=l.slice(2,x?l.length-7:void 0),S=r[cn]||null,S=S!=null?S[l]:null,typeof S=="function"&&r.removeEventListener(o,S,x),typeof c=="function")){typeof S!="function"&&S!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(o,c,x);break e}l in r?r[l]=c:c===!0?r.setAttribute(l,""):ft(r,l,c)}}}function qn(r,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":mt("error",r),mt("load",r);var c=!1,x=!1,S;for(S in l)if(l.hasOwnProperty(S)){var A=l[S];if(A!=null)switch(S){case"src":c=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Ut(r,o,S,A,l,null)}}x&&Ut(r,o,"srcSet",l.srcSet,l,null),c&&Ut(r,o,"src",l.src,l,null);return;case"input":mt("invalid",r);var P=S=A=x=null,$=null,pe=null;for(c in l)if(l.hasOwnProperty(c)){var we=l[c];if(we!=null)switch(c){case"name":x=we;break;case"type":A=we;break;case"checked":$=we;break;case"defaultChecked":pe=we;break;case"value":S=we;break;case"defaultValue":P=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(i(137,o));break;default:Ut(r,o,c,we,l,null)}}ka(r,S,P,$,pe,A,x,!1);return;case"select":mt("invalid",r),c=A=S=null;for(x in l)if(l.hasOwnProperty(x)&&(P=l[x],P!=null))switch(x){case"value":S=P;break;case"defaultValue":A=P;break;case"multiple":c=P;default:Ut(r,o,x,P,l,null)}o=S,l=A,r.multiple=!!c,o!=null?Yr(r,!!c,o,!1):l!=null&&Yr(r,!!c,l,!0);return;case"textarea":mt("invalid",r),S=x=c=null;for(A in l)if(l.hasOwnProperty(A)&&(P=l[A],P!=null))switch(A){case"value":c=P;break;case"defaultValue":x=P;break;case"children":S=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(i(91));break;default:Ut(r,o,A,P,l,null)}Yo(r,c,x,S);return;case"option":for($ in l)if(l.hasOwnProperty($)&&(c=l[$],c!=null))switch($){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Ut(r,o,$,c,l,null)}return;case"dialog":mt("beforetoggle",r),mt("toggle",r),mt("cancel",r),mt("close",r);break;case"iframe":case"object":mt("load",r);break;case"video":case"audio":for(c=0;c<As.length;c++)mt(As[c],r);break;case"image":mt("error",r),mt("load",r);break;case"details":mt("toggle",r);break;case"embed":case"source":case"link":mt("error",r),mt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(pe in l)if(l.hasOwnProperty(pe)&&(c=l[pe],c!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Ut(r,o,pe,c,l,null)}return;default:if(Hl(o)){for(we in l)l.hasOwnProperty(we)&&(c=l[we],c!==void 0&&Qd(r,o,we,c,l,void 0));return}}for(P in l)l.hasOwnProperty(P)&&(c=l[P],c!=null&&Ut(r,o,P,c,l,null))}function xT(r,o,l,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,S=null,A=null,P=null,$=null,pe=null,we=null;for(ye in l){var Ce=l[ye];if(l.hasOwnProperty(ye)&&Ce!=null)switch(ye){case"checked":break;case"value":break;case"defaultValue":$=Ce;default:c.hasOwnProperty(ye)||Ut(r,o,ye,null,c,Ce)}}for(var ge in c){var ye=c[ge];if(Ce=l[ge],c.hasOwnProperty(ge)&&(ye!=null||Ce!=null))switch(ge){case"type":S=ye;break;case"name":x=ye;break;case"checked":pe=ye;break;case"defaultChecked":we=ye;break;case"value":A=ye;break;case"defaultValue":P=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(i(137,o));break;default:ye!==Ce&&Ut(r,o,ge,ye,c,Ce)}}ai(r,A,P,$,pe,we,S,x);return;case"select":ye=A=P=ge=null;for(S in l)if($=l[S],l.hasOwnProperty(S)&&$!=null)switch(S){case"value":break;case"multiple":ye=$;default:c.hasOwnProperty(S)||Ut(r,o,S,null,c,$)}for(x in c)if(S=c[x],$=l[x],c.hasOwnProperty(x)&&(S!=null||$!=null))switch(x){case"value":ge=S;break;case"defaultValue":P=S;break;case"multiple":A=S;default:S!==$&&Ut(r,o,x,S,c,$)}o=P,l=A,c=ye,ge!=null?Yr(r,!!l,ge,!1):!!c!=!!l&&(o!=null?Yr(r,!!l,o,!0):Yr(r,!!l,l?[]:"",!1));return;case"textarea":ye=ge=null;for(P in l)if(x=l[P],l.hasOwnProperty(P)&&x!=null&&!c.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:Ut(r,o,P,null,c,x)}for(A in c)if(x=c[A],S=l[A],c.hasOwnProperty(A)&&(x!=null||S!=null))switch(A){case"value":ge=x;break;case"defaultValue":ye=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:x!==S&&Ut(r,o,A,x,c,S)}ql(r,ge,ye);return;case"option":for(var Ve in l)if(ge=l[Ve],l.hasOwnProperty(Ve)&&ge!=null&&!c.hasOwnProperty(Ve))switch(Ve){case"selected":r.selected=!1;break;default:Ut(r,o,Ve,null,c,ge)}for($ in c)if(ge=c[$],ye=l[$],c.hasOwnProperty($)&&ge!==ye&&(ge!=null||ye!=null))switch($){case"selected":r.selected=ge&&typeof ge!="function"&&typeof ge!="symbol";break;default:Ut(r,o,$,ge,c,ye)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var tt in l)ge=l[tt],l.hasOwnProperty(tt)&&ge!=null&&!c.hasOwnProperty(tt)&&Ut(r,o,tt,null,c,ge);for(pe in c)if(ge=c[pe],ye=l[pe],c.hasOwnProperty(pe)&&ge!==ye&&(ge!=null||ye!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(i(137,o));break;default:Ut(r,o,pe,ge,c,ye)}return;default:if(Hl(o)){for(var Ot in l)ge=l[Ot],l.hasOwnProperty(Ot)&&ge!==void 0&&!c.hasOwnProperty(Ot)&&Qd(r,o,Ot,void 0,c,ge);for(we in c)ge=c[we],ye=l[we],!c.hasOwnProperty(we)||ge===ye||ge===void 0&&ye===void 0||Qd(r,o,we,ge,c,ye);return}}for(var le in l)ge=l[le],l.hasOwnProperty(le)&&ge!=null&&!c.hasOwnProperty(le)&&Ut(r,o,le,null,c,ge);for(Ce in c)ge=c[Ce],ye=l[Ce],!c.hasOwnProperty(Ce)||ge===ye||ge==null&&ye==null||Ut(r,o,Ce,ge,c,ye)}function zy(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function bT(){if(typeof performance.getEntriesByType=="function"){for(var r=0,o=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var x=l[c],S=x.transferSize,A=x.initiatorType,P=x.duration;if(S&&P&&zy(A)){for(A=0,P=x.responseEnd,c+=1;c<l.length;c++){var $=l[c],pe=$.startTime;if(pe>P)break;var we=$.transferSize,Ce=$.initiatorType;we&&zy(Ce)&&($=$.responseEnd,A+=we*($<P?1:(P-pe)/($-pe)))}if(--c,o+=8*(S+A)/(x.duration/1e3),r++,10<r)break}}if(0<r)return o/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Wd=null,Zd=null;function mc(r){return r.nodeType===9?r:r.ownerDocument}function qy(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jy(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function ep(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var tp=null;function wT(){var r=window.event;return r&&r.type==="popstate"?r===tp?!1:(tp=r,!0):(tp=null,!1)}var Hy=typeof setTimeout=="function"?setTimeout:void 0,ST=typeof clearTimeout=="function"?clearTimeout:void 0,Fy=typeof Promise=="function"?Promise:void 0,TT=typeof queueMicrotask=="function"?queueMicrotask:typeof Fy<"u"?function(r){return Fy.resolve(null).then(r).catch(CT)}:Hy;function CT(r){setTimeout(function(){throw r})}function _o(r){return r==="head"}function Vy(r,o){var l=o,c=0;do{var x=l.nextSibling;if(r.removeChild(l),x&&x.nodeType===8)if(l=x.data,l==="/$"||l==="/&"){if(c===0){r.removeChild(x),ml(o);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")Ns(r.ownerDocument.documentElement);else if(l==="head"){l=r.ownerDocument.head,Ns(l);for(var S=l.firstChild;S;){var A=S.nextSibling,P=S.nodeName;S[hr]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&S.rel.toLowerCase()==="stylesheet"||l.removeChild(S),S=A}}else l==="body"&&Ns(r.ownerDocument.body);l=x}while(l);ml(o)}function Gy(r,o){var l=r;r=0;do{var c=l.nextSibling;if(l.nodeType===1?o?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(o?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(r===0)break;r--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||r++;l=c}while(l)}function np(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":np(l),_a(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function ET(r,o,l,c){for(;r.nodeType===1;){var x=l;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[hr])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(S=r.getAttribute("rel"),S==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(S!==x.rel||r.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||r.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||r.getAttribute("title")!==(x.title==null?null:x.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(S=r.getAttribute("src"),(S!==(x.src==null?null:x.src)||r.getAttribute("type")!==(x.type==null?null:x.type)||r.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&S&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var S=x.name==null?null:""+x.name;if(x.type==="hidden"&&r.getAttribute("name")===S)return r}else return r;if(r=Or(r.nextSibling),r===null)break}return null}function _T(r,o,l){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=Or(r.nextSibling),r===null))return null;return r}function Yy(r,o){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Or(r.nextSibling),r===null))return null;return r}function rp(r){return r.data==="$?"||r.data==="$~"}function ip(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function AT(r,o){var l=r.ownerDocument;if(r.data==="$~")r._reactRetry=o;else if(r.data!=="$?"||l.readyState!=="loading")o();else{var c=function(){o(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),r._reactRetry=c}}function Or(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return r}var op=null;function Ky(r){r=r.nextSibling;for(var o=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"||l==="/&"){if(o===0)return Or(r.nextSibling);o--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||o++}r=r.nextSibling}return null}function Jy(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(o===0)return r;o--}else l!=="/$"&&l!=="/&"||o++}r=r.previousSibling}return null}function $y(r,o,l){switch(o=mc(l),r){case"html":if(r=o.documentElement,!r)throw Error(i(452));return r;case"head":if(r=o.head,!r)throw Error(i(453));return r;case"body":if(r=o.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Ns(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);_a(r)}var Br=new Map,Xy=new Set;function gc(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Vi=Ee.d;Ee.d={f:kT,r:NT,D:MT,C:RT,L:DT,m:IT,X:LT,S:PT,M:UT};function kT(){var r=Vi.f(),o=lc();return r||o}function NT(r){var o=Pt(r);o!==null&&o.tag===5&&o.type==="form"?pg(o):Vi.r(r)}var dl=typeof document>"u"?null:document;function Qy(r,o,l){var c=dl;if(c&&typeof o=="string"&&o){var x=Mn(o);x='link[rel="'+r+'"][href="'+x+'"]',typeof l=="string"&&(x+='[crossorigin="'+l+'"]'),Xy.has(x)||(Xy.add(x),r={rel:r,crossOrigin:l,href:o},c.querySelector(x)===null&&(o=c.createElement("link"),qn(o,"link",r),fn(o),c.head.appendChild(o)))}}function MT(r){Vi.D(r),Qy("dns-prefetch",r,null)}function RT(r,o){Vi.C(r,o),Qy("preconnect",r,o)}function DT(r,o,l){Vi.L(r,o,l);var c=dl;if(c&&r&&o){var x='link[rel="preload"][as="'+Mn(o)+'"]';o==="image"&&l&&l.imageSrcSet?(x+='[imagesrcset="'+Mn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(x+='[imagesizes="'+Mn(l.imageSizes)+'"]')):x+='[href="'+Mn(r)+'"]';var S=x;switch(o){case"style":S=pl(r);break;case"script":S=hl(r)}Br.has(S)||(r=b({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:r,as:o},l),Br.set(S,r),c.querySelector(x)!==null||o==="style"&&c.querySelector(Ms(S))||o==="script"&&c.querySelector(Rs(S))||(o=c.createElement("link"),qn(o,"link",r),fn(o),c.head.appendChild(o)))}}function IT(r,o){Vi.m(r,o);var l=dl;if(l&&r){var c=o&&typeof o.as=="string"?o.as:"script",x='link[rel="modulepreload"][as="'+Mn(c)+'"][href="'+Mn(r)+'"]',S=x;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=hl(r)}if(!Br.has(S)&&(r=b({rel:"modulepreload",href:r},o),Br.set(S,r),l.querySelector(x)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Rs(S)))return}c=l.createElement("link"),qn(c,"link",r),fn(c),l.head.appendChild(c)}}}function PT(r,o,l){Vi.S(r,o,l);var c=dl;if(c&&r){var x=jn(c).hoistableStyles,S=pl(r);o=o||"default";var A=x.get(S);if(!A){var P={loading:0,preload:null};if(A=c.querySelector(Ms(S)))P.loading=5;else{r=b({rel:"stylesheet",href:r,"data-precedence":o},l),(l=Br.get(S))&&ap(r,l);var $=A=c.createElement("link");fn($),qn($,"link",r),$._p=new Promise(function(pe,we){$.onload=pe,$.onerror=we}),$.addEventListener("load",function(){P.loading|=1}),$.addEventListener("error",function(){P.loading|=2}),P.loading|=4,yc(A,o,c)}A={type:"stylesheet",instance:A,count:1,state:P},x.set(S,A)}}}function LT(r,o){Vi.X(r,o);var l=dl;if(l&&r){var c=jn(l).hoistableScripts,x=hl(r),S=c.get(x);S||(S=l.querySelector(Rs(x)),S||(r=b({src:r,async:!0},o),(o=Br.get(x))&&lp(r,o),S=l.createElement("script"),fn(S),qn(S,"link",r),l.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},c.set(x,S))}}function UT(r,o){Vi.M(r,o);var l=dl;if(l&&r){var c=jn(l).hoistableScripts,x=hl(r),S=c.get(x);S||(S=l.querySelector(Rs(x)),S||(r=b({src:r,async:!0,type:"module"},o),(o=Br.get(x))&&lp(r,o),S=l.createElement("script"),fn(S),qn(S,"link",r),l.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},c.set(x,S))}}function Wy(r,o,l,c){var x=(x=qe.current)?gc(x):null;if(!x)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=pl(l.href),l=jn(x).hoistableStyles,c=l.get(o),c||(c={type:"style",instance:null,count:0,state:null},l.set(o,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=pl(l.href);var S=jn(x).hoistableStyles,A=S.get(r);if(A||(x=x.ownerDocument||x,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(r,A),(S=x.querySelector(Ms(r)))&&!S._p&&(A.instance=S,A.state.loading=5),Br.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Br.set(r,l),S||OT(x,r,l,A.state))),o&&c===null)throw Error(i(528,""));return A}if(o&&c!==null)throw Error(i(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=hl(l),l=jn(x).hoistableScripts,c=l.get(o),c||(c={type:"script",instance:null,count:0,state:null},l.set(o,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function pl(r){return'href="'+Mn(r)+'"'}function Ms(r){return'link[rel="stylesheet"]['+r+"]"}function Zy(r){return b({},r,{"data-precedence":r.precedence,precedence:null})}function OT(r,o,l,c){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?c.loading=1:(o=r.createElement("link"),c.preload=o,o.addEventListener("load",function(){return c.loading|=1}),o.addEventListener("error",function(){return c.loading|=2}),qn(o,"link",l),fn(o),r.head.appendChild(o))}function hl(r){return'[src="'+Mn(r)+'"]'}function Rs(r){return"script[async]"+r}function e0(r,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var c=r.querySelector('style[data-href~="'+Mn(l.href)+'"]');if(c)return o.instance=c,fn(c),c;var x=b({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),fn(c),qn(c,"style",x),yc(c,l.precedence,r),o.instance=c;case"stylesheet":x=pl(l.href);var S=r.querySelector(Ms(x));if(S)return o.state.loading|=4,o.instance=S,fn(S),S;c=Zy(l),(x=Br.get(x))&&ap(c,x),S=(r.ownerDocument||r).createElement("link"),fn(S);var A=S;return A._p=new Promise(function(P,$){A.onload=P,A.onerror=$}),qn(S,"link",c),o.state.loading|=4,yc(S,l.precedence,r),o.instance=S;case"script":return S=hl(l.src),(x=r.querySelector(Rs(S)))?(o.instance=x,fn(x),x):(c=l,(x=Br.get(S))&&(c=b({},l),lp(c,x)),r=r.ownerDocument||r,x=r.createElement("script"),fn(x),qn(x,"link",c),r.head.appendChild(x),o.instance=x);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(c=o.instance,o.state.loading|=4,yc(c,l.precedence,r));return o.instance}function yc(r,o,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=c.length?c[c.length-1]:null,S=x,A=0;A<c.length;A++){var P=c[A];if(P.dataset.precedence===o)S=P;else if(S!==x)break}S?S.parentNode.insertBefore(r,S.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(r,o.firstChild))}function ap(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function lp(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var vc=null;function t0(r,o,l){if(vc===null){var c=new Map,x=vc=new Map;x.set(l,c)}else x=vc,c=x.get(l),c||(c=new Map,x.set(l,c));if(c.has(r))return c;for(c.set(r,null),l=l.getElementsByTagName(r),x=0;x<l.length;x++){var S=l[x];if(!(S[hr]||S[Vt]||r==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var A=S.getAttribute(o)||"";A=r+A;var P=c.get(A);P?P.push(S):c.set(A,[S])}}return c}function n0(r,o,l){r=r.ownerDocument||r,r.head.insertBefore(l,o==="title"?r.querySelector("head > title"):null)}function BT(r,o,l){if(l===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function r0(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function zT(r,o,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var x=pl(c.href),S=o.querySelector(Ms(x));if(S){o=S._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(r.count++,r=xc.bind(r),o.then(r,r)),l.state.loading|=4,l.instance=S,fn(S);return}S=o.ownerDocument||o,c=Zy(c),(x=Br.get(x))&&ap(c,x),S=S.createElement("link"),fn(S);var A=S;A._p=new Promise(function(P,$){A.onload=P,A.onerror=$}),qn(S,"link",c),l.instance=S}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(r.count++,l=xc.bind(r),o.addEventListener("load",l),o.addEventListener("error",l))}}var sp=0;function qT(r,o){return r.stylesheets&&r.count===0&&wc(r,r.stylesheets),0<r.count||0<r.imgCount?function(l){var c=setTimeout(function(){if(r.stylesheets&&wc(r,r.stylesheets),r.unsuspend){var S=r.unsuspend;r.unsuspend=null,S()}},6e4+o);0<r.imgBytes&&sp===0&&(sp=62500*bT());var x=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&wc(r,r.stylesheets),r.unsuspend)){var S=r.unsuspend;r.unsuspend=null,S()}},(r.imgBytes>sp?50:800)+o);return r.unsuspend=l,function(){r.unsuspend=null,clearTimeout(c),clearTimeout(x)}}:null}function xc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wc(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var bc=null;function wc(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,bc=new Map,o.forEach(jT,r),bc=null,xc.call(r))}function jT(r,o){if(!(o.state.loading&4)){var l=bc.get(r);if(l)var c=l.get(null);else{l=new Map,bc.set(r,l);for(var x=r.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<x.length;S++){var A=x[S];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),c=A)}c&&l.set(null,c)}x=o.instance,A=x.getAttribute("data-precedence"),S=l.get(A)||c,S===c&&l.set(null,x),l.set(A,x),this.count++,c=xc.bind(this),x.addEventListener("load",c),x.addEventListener("error",c),S?S.parentNode.insertBefore(x,S.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(x,r.firstChild)),o.state.loading|=4}}var Ds={$$typeof:O,Provider:null,Consumer:null,_currentValue:Me,_currentValue2:Me,_threadCount:0};function HT(r,o,l,c,x,S,A,P,$){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nn(0),this.hiddenUpdates=Nn(null),this.identifierPrefix=c,this.onUncaughtError=x,this.onCaughtError=S,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function i0(r,o,l,c,x,S,A,P,$,pe,we,Ce){return r=new HT(r,o,l,A,$,pe,we,Ce,P),o=1,S===!0&&(o|=24),S=yr(3,null,null,o),r.current=S,S.stateNode=r,o=jf(),o.refCount++,r.pooledCache=o,o.refCount++,S.memoizedState={element:c,isDehydrated:l,cache:o},Gf(S),r}function o0(r){return r?(r=rr,r):rr}function a0(r,o,l,c,x,S){x=o0(x),c.context===null?c.context=x:c.pendingContext=x,c=mo(o),c.payload={element:l},S=S===void 0?null:S,S!==null&&(c.callback=S),l=go(r,c,o),l!==null&&(sr(l,r,o),cs(l,r,o))}function l0(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<o?l:o}}function up(r,o){l0(r,o),(r=r.alternate)&&l0(r,o)}function s0(r){if(r.tag===13||r.tag===31){var o=Zt(r,67108864);o!==null&&sr(o,r,67108864),up(r,67108864)}}function u0(r){if(r.tag===13||r.tag===31){var o=Sr();o=Ul(o);var l=Zt(r,o);l!==null&&sr(l,r,o),up(r,o)}}var Sc=!0;function FT(r,o,l,c){var x=ue.T;ue.T=null;var S=Ee.p;try{Ee.p=2,cp(r,o,l,c)}finally{Ee.p=S,ue.T=x}}function VT(r,o,l,c){var x=ue.T;ue.T=null;var S=Ee.p;try{Ee.p=8,cp(r,o,l,c)}finally{Ee.p=S,ue.T=x}}function cp(r,o,l,c){if(Sc){var x=fp(c);if(x===null)Xd(r,o,c,Tc,l),f0(r,c);else if(YT(x,r,o,l,c))c.stopPropagation();else if(f0(r,c),o&4&&-1<GT.indexOf(r)){for(;x!==null;){var S=Pt(x);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var A=En(S.pendingLanes);if(A!==0){var P=S;for(P.pendingLanes|=2,P.entangledLanes|=2;A;){var $=1<<31-Ue(A);P.entanglements[1]|=$,A&=~$}pi(S),(Nt&6)===0&&(oc=an()+500,_s(0))}}break;case 31:case 13:P=Zt(S,2),P!==null&&sr(P,S,2),lc(),up(S,2)}if(S=fp(c),S===null&&Xd(r,o,c,Tc,l),S===x)break;x=S}x!==null&&c.stopPropagation()}else Xd(r,o,c,null,l)}}function fp(r){return r=Na(r),dp(r)}var Tc=null;function dp(r){if(Tc=null,r=ii(r),r!==null){var o=s(r);if(o===null)r=null;else{var l=o.tag;if(l===13){if(r=u(o),r!==null)return r;r=null}else if(l===31){if(r=d(o),r!==null)return r;r=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return Tc=r,null}function c0(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Er()){case ve:return 2;case Re:return 8;case Je:case rt:return 32;case dt:return 268435456;default:return 32}default:return 32}}var pp=!1,Ao=null,ko=null,No=null,Is=new Map,Ps=new Map,Mo=[],GT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function f0(r,o){switch(r){case"focusin":case"focusout":Ao=null;break;case"dragenter":case"dragleave":ko=null;break;case"mouseover":case"mouseout":No=null;break;case"pointerover":case"pointerout":Is.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ps.delete(o.pointerId)}}function Ls(r,o,l,c,x,S){return r===null||r.nativeEvent!==S?(r={blockedOn:o,domEventName:l,eventSystemFlags:c,nativeEvent:S,targetContainers:[x]},o!==null&&(o=Pt(o),o!==null&&s0(o)),r):(r.eventSystemFlags|=c,o=r.targetContainers,x!==null&&o.indexOf(x)===-1&&o.push(x),r)}function YT(r,o,l,c,x){switch(o){case"focusin":return Ao=Ls(Ao,r,o,l,c,x),!0;case"dragenter":return ko=Ls(ko,r,o,l,c,x),!0;case"mouseover":return No=Ls(No,r,o,l,c,x),!0;case"pointerover":var S=x.pointerId;return Is.set(S,Ls(Is.get(S)||null,r,o,l,c,x)),!0;case"gotpointercapture":return S=x.pointerId,Ps.set(S,Ls(Ps.get(S)||null,r,o,l,c,x)),!0}return!1}function d0(r){var o=ii(r.target);if(o!==null){var l=s(o);if(l!==null){if(o=l.tag,o===13){if(o=u(l),o!==null){r.blockedOn=o,qo(r.priority,function(){u0(l)});return}}else if(o===31){if(o=d(l),o!==null){r.blockedOn=o,qo(r.priority,function(){u0(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Cc(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var l=fp(r.nativeEvent);if(l===null){l=r.nativeEvent;var c=new l.constructor(l.type,l);Nr=c,l.target.dispatchEvent(c),Nr=null}else return o=Pt(l),o!==null&&s0(o),r.blockedOn=l,!1;o.shift()}return!0}function p0(r,o,l){Cc(r)&&l.delete(o)}function KT(){pp=!1,Ao!==null&&Cc(Ao)&&(Ao=null),ko!==null&&Cc(ko)&&(ko=null),No!==null&&Cc(No)&&(No=null),Is.forEach(p0),Ps.forEach(p0)}function Ec(r,o){r.blockedOn===o&&(r.blockedOn=null,pp||(pp=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,KT)))}var _c=null;function h0(r){_c!==r&&(_c=r,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){_c===r&&(_c=null);for(var o=0;o<r.length;o+=3){var l=r[o],c=r[o+1],x=r[o+2];if(typeof c!="function"){if(dp(c||l)===null)continue;break}var S=Pt(l);S!==null&&(r.splice(o,3),o-=3,fd(S,{pending:!0,data:x,method:l.method,action:c},c,x))}}))}function ml(r){function o($){return Ec($,r)}Ao!==null&&Ec(Ao,r),ko!==null&&Ec(ko,r),No!==null&&Ec(No,r),Is.forEach(o),Ps.forEach(o);for(var l=0;l<Mo.length;l++){var c=Mo[l];c.blockedOn===r&&(c.blockedOn=null)}for(;0<Mo.length&&(l=Mo[0],l.blockedOn===null);)d0(l),l.blockedOn===null&&Mo.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var x=l[c],S=l[c+1],A=x[cn]||null;if(typeof S=="function")A||h0(l);else if(A){var P=null;if(S&&S.hasAttribute("formAction")){if(x=S,A=S[cn]||null)P=A.formAction;else if(dp(x)!==null)continue}else P=A.action;typeof P=="function"?l[c+1]=P:(l.splice(c,3),c-=3),h0(l)}}}function m0(){function r(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(A){return x=A})},focusReset:"manual",scroll:"manual"})}function o(){x!==null&&(x(),x=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,x=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),x!==null&&(x(),x=null)}}}function hp(r){this._internalRoot=r}Ac.prototype.render=hp.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(i(409));var l=o.current,c=Sr();a0(l,c,r,o,null,null)},Ac.prototype.unmount=hp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;a0(r.current,2,null,r,null,null),lc(),o[Xn]=null}};function Ac(r){this._internalRoot=r}Ac.prototype.unstable_scheduleHydration=function(r){if(r){var o=zo();r={blockedOn:null,target:r,priority:o};for(var l=0;l<Mo.length&&o!==0&&o<Mo[l].priority;l++);Mo.splice(l,0,r),l===0&&d0(r)}};var g0=t.version;if(g0!=="19.2.0")throw Error(i(527,g0,"19.2.0"));Ee.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(o),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var JT={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ue,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kc.isDisabled&&kc.supportsFiber)try{Ht=kc.inject(JT),Yt=kc}catch{}}return Os.createRoot=function(r,o){if(!a(r))throw Error(i(299));var l=!1,c="",x=Tg,S=Cg,A=Eg;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onUncaughtError!==void 0&&(x=o.onUncaughtError),o.onCaughtError!==void 0&&(S=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError)),o=i0(r,1,!1,null,null,l,c,null,x,S,A,m0),r[Xn]=o.current,$d(r),new hp(o)},Os.hydrateRoot=function(r,o,l){if(!a(r))throw Error(i(299));var c=!1,x="",S=Tg,A=Cg,P=Eg,$=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(x=l.identifierPrefix),l.onUncaughtError!==void 0&&(S=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(P=l.onRecoverableError),l.formState!==void 0&&($=l.formState)),o=i0(r,1,!0,o,l??null,c,x,$,S,A,P,m0),o.context=o0(null),l=o.current,c=Sr(),c=Ul(c),x=mo(c),x.callback=null,go(l,x,c),l=c,o.current.lanes=l,Ar(o,l),pi(o),r[Xn]=o.current,$d(r),new Ac(o)},Os.version="19.2.0",Os}var _0;function a1(){if(_0)return yp.exports;_0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),yp.exports=o1(),yp.exports}var l1=a1();const s1=ou(l1);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var A0="popstate";function u1(e={}){function t(a,s){let{pathname:u="/",search:d="",hash:p=""}=xa(a.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),$p("",{pathname:u,search:d,hash:p},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(a,s){let u=a.document.querySelector("base"),d="";if(u&&u.getAttribute("href")){let p=a.location.href,f=p.indexOf("#");d=f===-1?p:p.slice(0,f)}return d+"#"+(typeof s=="string"?s:eu(s))}function i(a,s){Qr(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return f1(t,n,i,e)}function nn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Qr(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function c1(){return Math.random().toString(36).substring(2,10)}function k0(e,t){return{usr:e.state,key:e.key,idx:t}}function $p(e,t,n=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?xa(t):t,state:n,key:t&&t.key||i||c1()}}function eu({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function xa(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function f1(e,t,n,i={}){let{window:a=document.defaultView,v5Compat:s=!1}=i,u=a.history,d="POP",p=null,f=g();f==null&&(f=0,u.replaceState({...u.state,idx:f},""));function g(){return(u.state||{idx:null}).idx}function b(){d="POP";let D=g(),M=D==null?null:D-f;f=D,p&&p({action:d,location:I.location,delta:M})}function T(D,M){d="PUSH";let U=$p(I.location,D,M);n&&n(U,D),f=g()+1;let O=k0(U,f),se=I.createHref(U);try{u.pushState(O,"",se)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;a.location.assign(se)}s&&p&&p({action:d,location:I.location,delta:1})}function E(D,M){d="REPLACE";let U=$p(I.location,D,M);n&&n(U,D),f=g();let O=k0(U,f),se=I.createHref(U);u.replaceState(O,"",se),s&&p&&p({action:d,location:I.location,delta:0})}function k(D){return d1(D)}let I={get action(){return d},get location(){return e(a,u)},listen(D){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(A0,b),p=D,()=>{a.removeEventListener(A0,b),p=null}},createHref(D){return t(a,D)},createURL:k,encodeLocation(D){let M=k(D);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:T,replace:E,go(D){return u.go(D)}};return I}function d1(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),nn(n,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:eu(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function ob(e,t,n="/"){return p1(e,t,n,!1)}function p1(e,t,n,i){let a=typeof t=="string"?xa(t):t,s=Yi(a.pathname||"/",n);if(s==null)return null;let u=ab(e);h1(u);let d=null;for(let p=0;d==null&&p<u.length;++p){let f=E1(s);d=T1(u[p],f,i)}return d}function ab(e,t=[],n=[],i="",a=!1){let s=(u,d,p=a,f)=>{let g={relativePath:f===void 0?u.path||"":f,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(i)&&p)return;nn(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length)}let b=Gi([i,g.relativePath]),T=n.concat(g);u.children&&u.children.length>0&&(nn(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),ab(u.children,t,T,b,p)),!(u.path==null&&!u.index)&&t.push({path:b,score:w1(b,u.index),routesMeta:T})};return e.forEach((u,d)=>{var p;if(u.path===""||!((p=u.path)!=null&&p.includes("?")))s(u,d);else for(let f of lb(u.path))s(u,d,!0,f)}),t}function lb(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,a=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return a?[s,""]:[s];let u=lb(i.join("/")),d=[];return d.push(...u.map(p=>p===""?s:[s,p].join("/"))),a&&d.push(...u),d.map(p=>e.startsWith("/")&&p===""?"/":p)}function h1(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:S1(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var m1=/^:[\w-]+$/,g1=3,y1=2,v1=1,x1=10,b1=-2,N0=e=>e==="*";function w1(e,t){let n=e.split("/"),i=n.length;return n.some(N0)&&(i+=b1),t&&(i+=y1),n.filter(a=>!N0(a)).reduce((a,s)=>a+(m1.test(s)?g1:s===""?v1:x1),i)}function S1(e,t){return e.length===t.length&&e.slice(0,-1).every((i,a)=>i===t[a])?e[e.length-1]-t[t.length-1]:0}function T1(e,t,n=!1){let{routesMeta:i}=e,a={},s="/",u=[];for(let d=0;d<i.length;++d){let p=i[d],f=d===i.length-1,g=s==="/"?t:t.slice(s.length)||"/",b=Vc({path:p.relativePath,caseSensitive:p.caseSensitive,end:f},g),T=p.route;if(!b&&f&&n&&!i[i.length-1].route.index&&(b=Vc({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},g)),!b)return null;Object.assign(a,b.params),u.push({params:a,pathname:Gi([s,b.pathname]),pathnameBase:N1(Gi([s,b.pathnameBase])),route:T}),b.pathnameBase!=="/"&&(s=Gi([s,b.pathnameBase]))}return u}function Vc(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=C1(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let s=a[0],u=s.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:i.reduce((f,{paramName:g,isOptional:b},T)=>{if(g==="*"){let k=d[T]||"";u=s.slice(0,s.length-k.length).replace(/(.)\/+$/,"$1")}const E=d[T];return b&&!E?f[g]=void 0:f[g]=(E||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:u,pattern:e}}function C1(e,t=!1,n=!0){Qr(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,p)=>(i.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(i.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function E1(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Qr(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Yi(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}function _1(e,t="/"){let{pathname:n,search:i="",hash:a=""}=typeof e=="string"?xa(e):e;return{pathname:n?n.startsWith("/")?n:A1(n,t):t,search:M1(i),hash:R1(a)}}function A1(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function wp(e,t,n,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function k1(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function sb(e){let t=k1(e);return t.map((n,i)=>i===t.length-1?n.pathname:n.pathnameBase)}function ub(e,t,n,i=!1){let a;typeof e=="string"?a=xa(e):(a={...e},nn(!a.pathname||!a.pathname.includes("?"),wp("?","pathname","search",a)),nn(!a.pathname||!a.pathname.includes("#"),wp("#","pathname","hash",a)),nn(!a.search||!a.search.includes("#"),wp("#","search","hash",a)));let s=e===""||a.pathname==="",u=s?"/":a.pathname,d;if(u==null)d=n;else{let b=t.length-1;if(!i&&u.startsWith("..")){let T=u.split("/");for(;T[0]==="..";)T.shift(),b-=1;a.pathname=T.join("/")}d=b>=0?t[b]:"/"}let p=_1(a,d),f=u&&u!=="/"&&u.endsWith("/"),g=(s||u===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(f||g)&&(p.pathname+="/"),p}var Gi=e=>e.join("/").replace(/\/\/+/g,"/"),N1=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),M1=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,R1=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function D1(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var cb=["POST","PUT","PATCH","DELETE"];new Set(cb);var I1=["GET",...cb];new Set(I1);var kl=H.createContext(null);kl.displayName="DataRouter";var af=H.createContext(null);af.displayName="DataRouterState";H.createContext(!1);var fb=H.createContext({isTransitioning:!1});fb.displayName="ViewTransition";var P1=H.createContext(new Map);P1.displayName="Fetchers";var L1=H.createContext(null);L1.displayName="Await";var yi=H.createContext(null);yi.displayName="Navigation";var au=H.createContext(null);au.displayName="Location";var Ki=H.createContext({outlet:null,matches:[],isDataRoute:!1});Ki.displayName="Route";var Eh=H.createContext(null);Eh.displayName="RouteError";function U1(e,{relative:t}={}){nn(lu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=H.useContext(yi),{hash:a,pathname:s,search:u}=su(e,{relative:t}),d=s;return n!=="/"&&(d=s==="/"?n:Gi([n,s])),i.createHref({pathname:d,search:u,hash:a})}function lu(){return H.useContext(au)!=null}function ba(){return nn(lu(),"useLocation() may be used only in the context of a <Router> component."),H.useContext(au).location}var db="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function pb(e){H.useContext(yi).static||H.useLayoutEffect(e)}function O1(){let{isDataRoute:e}=H.useContext(Ki);return e?X1():B1()}function B1(){nn(lu(),"useNavigate() may be used only in the context of a <Router> component.");let e=H.useContext(kl),{basename:t,navigator:n}=H.useContext(yi),{matches:i}=H.useContext(Ki),{pathname:a}=ba(),s=JSON.stringify(sb(i)),u=H.useRef(!1);return pb(()=>{u.current=!0}),H.useCallback((p,f={})=>{if(Qr(u.current,db),!u.current)return;if(typeof p=="number"){n.go(p);return}let g=ub(p,JSON.parse(s),a,f.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:Gi([t,g.pathname])),(f.replace?n.replace:n.push)(g,f.state,f)},[t,n,s,a,e])}H.createContext(null);function su(e,{relative:t}={}){let{matches:n}=H.useContext(Ki),{pathname:i}=ba(),a=JSON.stringify(sb(n));return H.useMemo(()=>ub(e,JSON.parse(a),i,t==="path"),[e,a,i,t])}function z1(e,t){return hb(e,t)}function hb(e,t,n,i,a){var U;nn(lu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=H.useContext(yi),{matches:u}=H.useContext(Ki),d=u[u.length-1],p=d?d.params:{},f=d?d.pathname:"/",g=d?d.pathnameBase:"/",b=d&&d.route;{let O=b&&b.path||"";mb(f,!b||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let T=ba(),E;if(t){let O=typeof t=="string"?xa(t):t;nn(g==="/"||((U=O.pathname)==null?void 0:U.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${O.pathname}" was given in the \`location\` prop.`),E=O}else E=T;let k=E.pathname||"/",I=k;if(g!=="/"){let O=g.replace(/^\//,"").split("/");I="/"+k.replace(/^\//,"").split("/").slice(O.length).join("/")}let D=ob(e,{pathname:I});Qr(b||D!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Qr(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let M=V1(D&&D.map(O=>Object.assign({},O,{params:Object.assign({},p,O.params),pathname:Gi([g,s.encodeLocation?s.encodeLocation(O.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?g:Gi([g,s.encodeLocation?s.encodeLocation(O.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathnameBase])})),u,n,i,a);return t&&M?H.createElement(au.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},M):M}function q1(){let e=$1(),t=D1(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",e),u=H.createElement(H.Fragment,null,H.createElement("p",null," Hey developer "),H.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",H.createElement("code",{style:s},"ErrorBoundary")," or"," ",H.createElement("code",{style:s},"errorElement")," prop on your route.")),H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},t),n?H.createElement("pre",{style:a},n):null,u)}var j1=H.createElement(q1,null),H1=class extends H.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?H.createElement(Ki.Provider,{value:this.props.routeContext},H.createElement(Eh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function F1({routeContext:e,match:t,children:n}){let i=H.useContext(kl);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),H.createElement(Ki.Provider,{value:e},n)}function V1(e,t=[],n=null,i=null,a=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,u=n==null?void 0:n.errors;if(u!=null){let f=s.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);nn(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),s=s.slice(0,Math.min(s.length,f+1))}let d=!1,p=-1;if(n)for(let f=0;f<s.length;f++){let g=s[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(p=f),g.route.id){let{loaderData:b,errors:T}=n,E=g.route.loader&&!b.hasOwnProperty(g.route.id)&&(!T||T[g.route.id]===void 0);if(g.route.lazy||E){d=!0,p>=0?s=s.slice(0,p+1):s=[s[0]];break}}}return s.reduceRight((f,g,b)=>{let T,E=!1,k=null,I=null;n&&(T=u&&g.route.id?u[g.route.id]:void 0,k=g.route.errorElement||j1,d&&(p<0&&b===0?(mb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,I=null):p===b&&(E=!0,I=g.route.hydrateFallbackElement||null)));let D=t.concat(s.slice(0,b+1)),M=()=>{let U;return T?U=k:E?U=I:g.route.Component?U=H.createElement(g.route.Component,null):g.route.element?U=g.route.element:U=f,H.createElement(F1,{match:g,routeContext:{outlet:f,matches:D,isDataRoute:n!=null},children:U})};return n&&(g.route.ErrorBoundary||g.route.errorElement||b===0)?H.createElement(H1,{location:n.location,revalidation:n.revalidation,component:k,error:T,children:M(),routeContext:{outlet:null,matches:D,isDataRoute:!0},unstable_onError:i}):M()},null)}function _h(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function G1(e){let t=H.useContext(kl);return nn(t,_h(e)),t}function Y1(e){let t=H.useContext(af);return nn(t,_h(e)),t}function K1(e){let t=H.useContext(Ki);return nn(t,_h(e)),t}function Ah(e){let t=K1(e),n=t.matches[t.matches.length-1];return nn(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function J1(){return Ah("useRouteId")}function $1(){var i;let e=H.useContext(Eh),t=Y1("useRouteError"),n=Ah("useRouteError");return e!==void 0?e:(i=t.errors)==null?void 0:i[n]}function X1(){let{router:e}=G1("useNavigate"),t=Ah("useNavigate"),n=H.useRef(!1);return pb(()=>{n.current=!0}),H.useCallback(async(a,s={})=>{Qr(n.current,db),n.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...s}))},[e,t])}var M0={};function mb(e,t,n){!t&&!M0[e]&&(M0[e]=!0,Qr(!1,n))}H.memo(Q1);function Q1({routes:e,future:t,state:n,unstable_onError:i}){return hb(e,void 0,n,i,t)}function zr(e){nn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function W1({basename:e="/",children:t=null,location:n,navigationType:i="POP",navigator:a,static:s=!1}){nn(!lu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),d=H.useMemo(()=>({basename:u,navigator:a,static:s,future:{}}),[u,a,s]);typeof n=="string"&&(n=xa(n));let{pathname:p="/",search:f="",hash:g="",state:b=null,key:T="default"}=n,E=H.useMemo(()=>{let k=Yi(p,u);return k==null?null:{location:{pathname:k,search:f,hash:g,state:b,key:T},navigationType:i}},[u,p,f,g,b,T,i]);return Qr(E!=null,`<Router basename="${u}"> is not able to match the URL "${p}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:H.createElement(yi.Provider,{value:d},H.createElement(au.Provider,{children:t,value:E}))}function Z1({children:e,location:t}){return z1(Xp(e),t)}function Xp(e,t=[]){let n=[];return H.Children.forEach(e,(i,a)=>{if(!H.isValidElement(i))return;let s=[...t,a];if(i.type===H.Fragment){n.push.apply(n,Xp(i.props.children,s));return}nn(i.type===zr,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),nn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Xp(i.props.children,s)),n.push(u)}),n}var Oc="get",Bc="application/x-www-form-urlencoded";function lf(e){return e!=null&&typeof e.tagName=="string"}function eC(e){return lf(e)&&e.tagName.toLowerCase()==="button"}function tC(e){return lf(e)&&e.tagName.toLowerCase()==="form"}function nC(e){return lf(e)&&e.tagName.toLowerCase()==="input"}function rC(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function iC(e,t){return e.button===0&&(!t||t==="_self")&&!rC(e)}var Nc=null;function oC(){if(Nc===null)try{new FormData(document.createElement("form"),0),Nc=!1}catch{Nc=!0}return Nc}var aC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Sp(e){return e!=null&&!aC.has(e)?(Qr(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Bc}"`),null):e}function lC(e,t){let n,i,a,s,u;if(tC(e)){let d=e.getAttribute("action");i=d?Yi(d,t):null,n=e.getAttribute("method")||Oc,a=Sp(e.getAttribute("enctype"))||Bc,s=new FormData(e)}else if(eC(e)||nC(e)&&(e.type==="submit"||e.type==="image")){let d=e.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=e.getAttribute("formaction")||d.getAttribute("action");if(i=p?Yi(p,t):null,n=e.getAttribute("formmethod")||d.getAttribute("method")||Oc,a=Sp(e.getAttribute("formenctype"))||Sp(d.getAttribute("enctype"))||Bc,s=new FormData(d,e),!oC()){let{name:f,type:g,value:b}=e;if(g==="image"){let T=f?`${f}.`:"";s.append(`${T}x`,"0"),s.append(`${T}y`,"0")}else f&&s.append(f,b)}}else{if(lf(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Oc,i=null,a=Bc,u=e}return s&&a==="text/plain"&&(u=s,s=void 0),{action:i,method:n.toLowerCase(),encType:a,formData:s,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function kh(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function sC(e,t,n){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return i.pathname==="/"?i.pathname=`_root.${n}`:t&&Yi(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function uC(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cC(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function fC(e,t,n){let i=await Promise.all(e.map(async a=>{let s=t.routes[a.route.id];if(s){let u=await uC(s,n);return u.links?u.links():[]}return[]}));return mC(i.flat(1).filter(cC).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function R0(e,t,n,i,a,s){let u=(p,f)=>n[f]?p.route.id!==n[f].route.id:!0,d=(p,f)=>{var g;return n[f].pathname!==p.pathname||((g=n[f].route.path)==null?void 0:g.endsWith("*"))&&n[f].params["*"]!==p.params["*"]};return s==="assets"?t.filter((p,f)=>u(p,f)||d(p,f)):s==="data"?t.filter((p,f)=>{var b;let g=i.routes[p.route.id];if(!g||!g.hasLoader)return!1;if(u(p,f)||d(p,f))return!0;if(p.route.shouldRevalidate){let T=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((b=n[0])==null?void 0:b.params)||{},nextUrl:new URL(e,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function dC(e,t,{includeHydrateFallback:n}={}){return pC(e.map(i=>{let a=t.routes[i.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function pC(e){return[...new Set(e)]}function hC(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}function mC(e,t){let n=new Set;return new Set(t),e.reduce((i,a)=>{let s=JSON.stringify(hC(a));return n.has(s)||(n.add(s),i.push({key:s,link:a})),i},[])}function gb(){let e=H.useContext(kl);return kh(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function gC(){let e=H.useContext(af);return kh(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Nh=H.createContext(void 0);Nh.displayName="FrameworkContext";function yb(){let e=H.useContext(Nh);return kh(e,"You must render this element inside a <HydratedRouter> element"),e}function yC(e,t){let n=H.useContext(Nh),[i,a]=H.useState(!1),[s,u]=H.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:f,onMouseLeave:g,onTouchStart:b}=t,T=H.useRef(null);H.useEffect(()=>{if(e==="render"&&u(!0),e==="viewport"){let I=M=>{M.forEach(U=>{u(U.isIntersecting)})},D=new IntersectionObserver(I,{threshold:.5});return T.current&&D.observe(T.current),()=>{D.disconnect()}}},[e]),H.useEffect(()=>{if(i){let I=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(I)}}},[i]);let E=()=>{a(!0)},k=()=>{a(!1),u(!1)};return n?e!=="intent"?[s,T,{}]:[s,T,{onFocus:Bs(d,E),onBlur:Bs(p,k),onMouseEnter:Bs(f,E),onMouseLeave:Bs(g,k),onTouchStart:Bs(b,E)}]:[!1,T,{}]}function Bs(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function vC({page:e,...t}){let{router:n}=gb(),i=H.useMemo(()=>ob(n.routes,e,n.basename),[n.routes,e,n.basename]);return i?H.createElement(bC,{page:e,matches:i,...t}):null}function xC(e){let{manifest:t,routeModules:n}=yb(),[i,a]=H.useState([]);return H.useEffect(()=>{let s=!1;return fC(e,t,n).then(u=>{s||a(u)}),()=>{s=!0}},[e,t,n]),i}function bC({page:e,matches:t,...n}){let i=ba(),{manifest:a,routeModules:s}=yb(),{basename:u}=gb(),{loaderData:d,matches:p}=gC(),f=H.useMemo(()=>R0(e,t,p,a,i,"data"),[e,t,p,a,i]),g=H.useMemo(()=>R0(e,t,p,a,i,"assets"),[e,t,p,a,i]),b=H.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let k=new Set,I=!1;if(t.forEach(M=>{var O;let U=a.routes[M.route.id];!U||!U.hasLoader||(!f.some(se=>se.route.id===M.route.id)&&M.route.id in d&&((O=s[M.route.id])!=null&&O.shouldRevalidate)||U.hasClientLoader?I=!0:k.add(M.route.id))}),k.size===0)return[];let D=sC(e,u,"data");return I&&k.size>0&&D.searchParams.set("_routes",t.filter(M=>k.has(M.route.id)).map(M=>M.route.id).join(",")),[D.pathname+D.search]},[u,d,i,a,f,t,e,s]),T=H.useMemo(()=>dC(g,a),[g,a]),E=xC(g);return H.createElement(H.Fragment,null,b.map(k=>H.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...n})),T.map(k=>H.createElement("link",{key:k,rel:"modulepreload",href:k,...n})),E.map(({key:k,link:I})=>H.createElement("link",{key:k,nonce:n.nonce,...I})))}function wC(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var vb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{vb&&(window.__reactRouterVersion="7.9.4")}catch{}function SC({basename:e,children:t,window:n}){let i=H.useRef();i.current==null&&(i.current=u1({window:n,v5Compat:!0}));let a=i.current,[s,u]=H.useState({action:a.action,location:a.location}),d=H.useCallback(p=>{H.startTransition(()=>u(p))},[u]);return H.useLayoutEffect(()=>a.listen(d),[a,d]),H.createElement(W1,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:a})}var xb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bb=H.forwardRef(function({onClick:t,discover:n="render",prefetch:i="none",relative:a,reloadDocument:s,replace:u,state:d,target:p,to:f,preventScrollReset:g,viewTransition:b,...T},E){let{basename:k}=H.useContext(yi),I=typeof f=="string"&&xb.test(f),D,M=!1;if(typeof f=="string"&&I&&(D=f,vb))try{let j=new URL(window.location.href),B=f.startsWith("//")?new URL(j.protocol+f):new URL(f),K=Yi(B.pathname,k);B.origin===j.origin&&K!=null?f=K+B.search+B.hash:M=!0}catch{Qr(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let U=U1(f,{relative:a}),[O,se,Q]=yC(i,T),G=EC(f,{replace:u,state:d,target:p,preventScrollReset:g,relative:a,viewTransition:b});function Y(j){t&&t(j),j.defaultPrevented||G(j)}let me=H.createElement("a",{...T,...Q,href:D||U,onClick:M||s?t:Y,ref:wC(E,se),target:p,"data-discover":!I&&n==="render"?"true":void 0});return O&&!I?H.createElement(H.Fragment,null,me,H.createElement(vC,{page:U})):me});bb.displayName="Link";var qr=H.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:i="",end:a=!1,style:s,to:u,viewTransition:d,children:p,...f},g){let b=su(u,{relative:f.relative}),T=ba(),E=H.useContext(af),{navigator:k,basename:I}=H.useContext(yi),D=E!=null&&MC(b)&&d===!0,M=k.encodeLocation?k.encodeLocation(b).pathname:b.pathname,U=T.pathname,O=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;n||(U=U.toLowerCase(),O=O?O.toLowerCase():null,M=M.toLowerCase()),O&&I&&(O=Yi(O,I)||O);const se=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let Q=U===M||!a&&U.startsWith(M)&&U.charAt(se)==="/",G=O!=null&&(O===M||!a&&O.startsWith(M)&&O.charAt(M.length)==="/"),Y={isActive:Q,isPending:G,isTransitioning:D},me=Q?t:void 0,j;typeof i=="function"?j=i(Y):j=[i,Q?"active":null,G?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let B=typeof s=="function"?s(Y):s;return H.createElement(bb,{...f,"aria-current":me,className:j,ref:g,style:B,to:u,viewTransition:d},typeof p=="function"?p(Y):p)});qr.displayName="NavLink";var TC=H.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:i,replace:a,state:s,method:u=Oc,action:d,onSubmit:p,relative:f,preventScrollReset:g,viewTransition:b,...T},E)=>{let k=kC(),I=NC(d,{relative:f}),D=u.toLowerCase()==="get"?"get":"post",M=typeof d=="string"&&xb.test(d),U=O=>{if(p&&p(O),O.defaultPrevented)return;O.preventDefault();let se=O.nativeEvent.submitter,Q=(se==null?void 0:se.getAttribute("formmethod"))||u;k(se||O.currentTarget,{fetcherKey:t,method:Q,navigate:n,replace:a,state:s,relative:f,preventScrollReset:g,viewTransition:b})};return H.createElement("form",{ref:E,method:D,action:I,onSubmit:i?p:U,...T,"data-discover":!M&&e==="render"?"true":void 0})});TC.displayName="Form";function CC(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wb(e){let t=H.useContext(kl);return nn(t,CC(e)),t}function EC(e,{target:t,replace:n,state:i,preventScrollReset:a,relative:s,viewTransition:u}={}){let d=O1(),p=ba(),f=su(e,{relative:s});return H.useCallback(g=>{if(iC(g,t)){g.preventDefault();let b=n!==void 0?n:eu(p)===eu(f);d(e,{replace:b,state:i,preventScrollReset:a,relative:s,viewTransition:u})}},[p,d,f,n,i,t,e,a,s,u])}var _C=0,AC=()=>`__${String(++_C)}__`;function kC(){let{router:e}=wb("useSubmit"),{basename:t}=H.useContext(yi),n=J1();return H.useCallback(async(i,a={})=>{let{action:s,method:u,encType:d,formData:p,body:f}=lC(i,t);if(a.navigate===!1){let g=a.fetcherKey||AC();await e.fetch(g,n,a.action||s,{preventScrollReset:a.preventScrollReset,formData:p,body:f,formMethod:a.method||u,formEncType:a.encType||d,flushSync:a.flushSync})}else await e.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:p,body:f,formMethod:a.method||u,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,n])}function NC(e,{relative:t}={}){let{basename:n}=H.useContext(yi),i=H.useContext(Ki);nn(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),s={...su(e||".",{relative:t})},u=ba();if(e==null){s.search=u.search;let d=new URLSearchParams(s.search),p=d.getAll("index");if(p.some(g=>g==="")){d.delete("index"),p.filter(b=>b).forEach(b=>d.append("index",b));let g=d.toString();s.search=g?`?${g}`:""}}return(!e||e===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Gi([n,s.pathname])),eu(s)}function MC(e,{relative:t}={}){let n=H.useContext(fb);nn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=wb("useViewTransitionState"),a=su(e,{relative:t});if(!n.isTransitioning)return!1;let s=Yi(n.currentLocation.pathname,i)||n.currentLocation.pathname,u=Yi(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Vc(a.pathname,u)!=null||Vc(a.pathname,s)!=null}const RC=e=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e,children:[y.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),y.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),DC=e=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e,children:[y.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),y.jsx("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14"}),y.jsx("path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07"})]}),Mh=e=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.6,strokeLinecap:"round",strokeLinejoin:"round",...e,children:[y.jsx("path",{d:"M4 19c2-1.5 4.2-3.5 5.5-5.7 1.8-3 3.7-3.1 4.9-3 1.6.2 2.9-.5 3.9-1.4.2-.2.6 0 .5.3-.3 1.4-1.1 2.8-2.3 3.8-.5.4-.5 1.1 0 1.5.5.4.6 1.1.2 1.6-1.4 1.7-3.4 2.9-5.5 3.4-1.9.4-3.9.2-5.7-.5-.4-.2-.9.1-.9.5Z"}),y.jsx("path",{d:"M8.5 10.5c1.4-1.2 3.9-4.3 3-6.5-.7-1.6-2.7-1.4-3.6.2-.8 1.3-.9 3.3.6 4.8Z"})]}),IC=e=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...e,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),Sb=e=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...e,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),PC=e=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...e,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),El=e=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e,children:[y.jsx("rect",{x:"3",y:"5",width:"18",height:"6",rx:"1"}),y.jsx("path",{d:"M5 11v8m14-8v8"}),y.jsx("path",{d:"M9 19h6"})]}),LC=e=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e,children:[y.jsx("path",{d:"M12 11a4 4 0 1 0-4-4 4 4 0 0 0 4 4z"}),y.jsx("path",{d:"M6 21v-2a4 4 0 0 1 4-4h0"}),y.jsx("path",{d:"M18 21v-2a4 4 0 0 0-4-4h0"}),y.jsx("path",{d:"M18 8a3 3 0 1 1-3-3"}),y.jsx("path",{d:"M6 8a3 3 0 1 0 3-3"})]}),Gc=e=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e,children:[y.jsx("path",{d:"M12 20c4.418 0 8-2.91 8-6.5S16.418 7 12 7s-8 2.91-8 6.5c0 1.98 1.21 3.74 3.1 4.87L6 21l3.4-1.67c.82.17 1.67.26 2.6.26Z"}),y.jsx("path",{d:"M9 11h6"}),y.jsx("path",{d:"M9 14h3"})]}),UC=e=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e,children:[y.jsx("rect",{x:"3",y:"4",width:"18",height:"4",rx:"1",ry:"1"}),y.jsx("path",{d:"M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V8"}),y.jsx("path",{d:"M10 12h4"})]}),OC=e=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e,children:[y.jsx("path",{d:"M8 2v4"}),y.jsx("path",{d:"M16 2v4"}),y.jsx("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2"}),y.jsx("path",{d:"M3 11h18"}),y.jsx("path",{d:"M10 16l1 1 3-3"}),y.jsx("path",{d:"M4 2h4"}),y.jsx("path",{d:"M16 2h4"}),y.jsx("path",{d:"M18 4l2 2"})]}),BC=e=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...e,children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924-1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),zC=e=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...e,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 19.5l-3.5-3.5m0 0l3.5-3.5m-3.5 3.5h10M13 4.5l3.5 3.5m0 0l-3.5 3.5m3.5-3.5h-10"})}),qC=e=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...e,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),Tb=e=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...e,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Cb=e=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...e,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),jC=e=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e,children:[y.jsx("path",{d:"M12 20a8 8 0 1 0-8-8 8 8 0 0 0 8 8z"}),y.jsx("path",{d:"M15.5 11.5v.01"}),y.jsx("path",{d:"M8.5 11.5v.01"}),y.jsx("path",{d:"M9 16c.8-1 2.2-1 3 0s2.2 1 3 0"})]}),sf=e=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e,children:[y.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3.77 2.83 6.68 6.61 6.97V21l4.39-4.39A7 7 0 0 0 12 2z"}),y.jsx("path",{d:"M9.5 9h.01"}),y.jsx("path",{d:"M14.5 9h.01"})]}),uf=e=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e,children:[y.jsx("path",{d:"M3 3h6l3 7-2 2a3 3 0 1 0 4 4l2-2 7 3v6"}),y.jsx("path",{d:"M3 21v-4l8-8"})]}),Rh=e=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e,children:[y.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1"}),y.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1"}),y.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1"}),y.jsx("path",{d:"M14 17h7"}),y.jsx("path",{d:"M17.5 14v6"})]}),Dh=e=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e,children:[y.jsx("circle",{cx:"12",cy:"12",r:"9"}),y.jsx("path",{d:"M12 7v5l3 3"})]}),Ih=e=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e,children:[y.jsx("path",{d:"M3 12h18"}),y.jsx("path",{d:"M6 5l6 14"}),y.jsx("path",{d:"M12 5l6 14"})]}),Ph=e=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e,children:[y.jsx("path",{d:"M3 3v6h6"}),y.jsx("path",{d:"M3 9a9 9 0 1 0 3-6.7"}),y.jsx("path",{d:"M12 7v5l3 3"})]}),uu=e=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e,children:[y.jsx("path",{d:"M4 4h16v16H4z"}),y.jsx("path",{d:"M8 15l2.5-6L13 15"}),y.jsx("path",{d:"M9 13h3"}),y.jsx("path",{d:"M15 9h4"}),y.jsx("path",{d:"M17 9v6"})]}),Eb=e=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...e,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),HC=e=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...e,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),cf=e=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...e,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),FC=e=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...e,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),VC=e=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,...e,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),GC=e=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...e,children:y.jsx("circle",{cx:"12",cy:"12",r:"9"})}),YC=e=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...e,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),KC=e=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...e,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})}),JC=e=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...e,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),$C=e=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 24 24",fill:"currentColor",...e,children:[y.jsx("path",{d:"M12,2A10,10,0,0,0,2,12A10,10,0,0,0,12,22A10,10,0,0,0,22,12A10,10,0,0,0,12,2ZM16.2,16.2A7,7,0,0,1,7.8,7.8A7,7,0,0,1,16.2,16.2Z"}),y.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"white"})]}),Lh=e=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...e,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),ff=e=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e,children:[y.jsx("polyline",{points:"3 6 5 6 21 6"}),y.jsx("path",{d:"M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"}),y.jsx("path",{d:"M10 11v6"}),y.jsx("path",{d:"M14 11v6"}),y.jsx("path",{d:"M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2"})]}),XC=e=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e,children:[y.jsx("path",{d:"M12 20h9"}),y.jsx("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"})]}),QC=e=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e,children:[y.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2Z"}),y.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),y.jsx("polyline",{points:"7 3 7 8 15 8"})]}),WC=e=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e,children:[y.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),y.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),ZC=e=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e,children:[y.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),y.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),tu=e=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e,children:[y.jsx("path",{d:"M21 2v6h-6"}),y.jsx("path",{d:"M3 12a9 9 0 0 1 15.14-6.36L21 8"}),y.jsx("path",{d:"M3 22v-6h6"}),y.jsx("path",{d:"M21 12a9 9 0 0 1-15.14 6.36L3 16"})]}),eE=()=>{const e=({isActive:t})=>`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${t?"bg-gray-700 text-white":"text-gray-400 hover:bg-gray-700/50 hover:text-white"}`;return y.jsxs("div",{className:"w-64 bg-[#202123] p-4 flex flex-col border-r border-black/20",children:[y.jsx("div",{className:"mb-8",children:y.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-200",children:[y.jsx(Mh,{className:"w-7 h-7"}),y.jsx("h1",{className:"text-2xl font-bold",children:"Sylvia"})]})}),y.jsxs("nav",{className:"flex flex-col gap-2",children:[y.jsxs(qr,{to:"/",className:e,children:[y.jsx(IC,{}),y.jsx("span",{children:"Chat"})]}),y.jsxs(qr,{to:"/memory",className:e,children:[y.jsx(Sb,{}),y.jsx("span",{children:"Memory"})]}),y.jsxs(qr,{to:"/journal",className:e,children:[y.jsx(PC,{}),y.jsx("span",{children:"Journal"})]}),y.jsxs(qr,{to:"/threads",className:e,children:[y.jsx(UC,{className:"h-6 w-6"}),y.jsx("span",{children:"Threads"})]}),y.jsxs(qr,{to:"/hrmr",className:e,children:[y.jsx(uu,{className:"h-6 w-6"}),y.jsx("span",{children:"HRMR"})]}),y.jsxs(qr,{to:"/performers",className:e,children:[y.jsx(El,{className:"h-6 w-6"}),y.jsx("span",{children:"Performers"})]}),y.jsxs(qr,{to:"/team",className:e,children:[y.jsx(LC,{className:"h-6 w-6"}),y.jsx("span",{children:"Team Interactions"})]}),y.jsxs(qr,{to:"/performance",className:e,children:[y.jsx(uf,{className:"h-6 w-6"}),y.jsx("span",{children:"Performance Studio"})]}),y.jsxs(qr,{to:"/memory-onboarding",className:e,children:[y.jsx(ZC,{className:"h-6 w-6"}),y.jsx("span",{children:"Onboarding"})]}),y.jsxs(qr,{to:"/graph",className:e,children:[y.jsx(zC,{}),y.jsx("span",{children:"Graph"})]})]}),y.jsx("div",{className:"mt-auto",children:y.jsxs(qr,{to:"/settings",className:e,children:[y.jsx(BC,{}),y.jsx("span",{children:"Settings"})]})})]})},tE={stage:El,monologue:Gc,spatial:Rh,temporal:Dh,bias:Ih,history:Ph,insight:sf,reasoning:uf,evaluator:uu},nE={usePreflection:!0,useMemory:!0,useTaskList:!1,useAudit:!1,useStageDirections:!1,useMonologue:!1,usePromptRewrite:!1},hi=({isActive:e,onClick:t,disabled:n=!1,children:i,tooltip:a,badge:s=null,emphasis:u="primary"})=>y.jsxs("div",{className:"relative group",children:[y.jsxs("button",{onClick:t,disabled:n,className:`p-2 rounded-md transition-colors relative ${e?u==="warning"?"bg-amber-500 text-black":"bg-blue-600 text-white":"text-gray-400 hover:bg-gray-700/50 hover:text-white"} ${n?"opacity-50 cursor-not-allowed":""}`,children:[i,s&&y.jsx("span",{className:"absolute -top-1 -right-1 min-w-[1.1rem] h-[1.1rem] px-1 text-[10px] rounded-full bg-blue-500 text-white flex items-center justify-center",children:s})]}),y.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded-md opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:a})]}),rE=({onSendMessage:e,isLoading:t,performers:n,activePerformerIds:i,onTogglePerformer:a,isCoreAgentMuted:s,onToggleCoreAgent:u})=>{var j;const[d,p]=H.useState(""),[f,g]=H.useState(null),[b,T]=H.useState(!1),[E,k]=H.useState(nE),[I,D]=H.useState(null);H.useEffect(()=>{!E.useTaskList&&E.useAudit&&k(B=>({...B,useAudit:!1}))},[E.useTaskList,E.useAudit]),H.useEffect(()=>{I&&!n.find(B=>B.id===I)&&D(null)},[I,n]);const M=H.useMemo(()=>[{id:null,label:"You"},...n.map(B=>({id:B.id,label:B.name}))],[n]),U=()=>{(d.trim()||f)&&!t&&(e(d.trim(),E,(f==null?void 0:f.file)||null,I),p(""),g(null))},O=B=>{B.key==="Enter"&&!B.shiftKey&&(B.preventDefault(),U())},se=B=>{k(K=>({...K,[B]:!K[B]}))},Q=B=>{B.preventDefault(),T(!1);const K=B.dataTransfer.files[0];if(K){if(K.type.startsWith("image/")){const ce=new FileReader;ce.onloadend=()=>g({file:K,preview:ce.result}),ce.readAsDataURL(K);return}if(K.type==="text/plain"||K.type==="text/markdown"){const ce=new FileReader;ce.onload=xe=>p(_e=>{var Pe;return _e+((Pe=xe.target)==null?void 0:Pe.result)}),ce.readAsText(K);return}alert("Unsupported file type. Please upload an image or a text/markdown file.")}},G=(B,K)=>{B.preventDefault(),T(K)},Y=()=>{if(!M.length)return;const K=(M.findIndex(ce=>ce.id===I)+1)%M.length;D(M[K].id)},me=((j=M.find(B=>B.id===I))==null?void 0:j.label)??"You";return y.jsxs("div",{className:`bg-[#1e1f20] p-4 border-t transition-colors ${b?"border-blue-500":"border-gray-700"}`,onDrop:Q,onDragEnter:B=>G(B,!0),onDragOver:B=>G(B,!0),onDragLeave:B=>G(B,!1),children:[y.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[y.jsx(hi,{isActive:E.usePreflection,onClick:()=>se("usePreflection"),tooltip:"Preflection",children:y.jsx(Tb,{className:"w-5 h-5"})}),y.jsx(hi,{isActive:E.useMemory,onClick:()=>se("useMemory"),tooltip:"Save Memory",children:y.jsx(Sb,{className:"w-5 h-5"})}),y.jsx(hi,{isActive:E.usePromptRewrite,onClick:()=>se("usePromptRewrite"),tooltip:"Rewrite Prompt",children:y.jsx(tu,{className:"w-5 h-5"})}),y.jsx(hi,{isActive:E.useStageDirections,onClick:()=>se("useStageDirections"),tooltip:"Stage Directions",children:y.jsx(El,{className:"w-5 h-5"})}),y.jsx(hi,{isActive:E.useMonologue,onClick:()=>se("useMonologue"),tooltip:"Internal Monologue",children:y.jsx(Gc,{className:"w-5 h-5"})}),y.jsx(hi,{isActive:E.useTaskList,onClick:()=>se("useTaskList"),tooltip:"Task List",children:y.jsx(Cb,{className:"w-5 h-5"})}),y.jsx(hi,{isActive:E.useAudit,onClick:()=>se("useAudit"),disabled:!E.useTaskList,tooltip:"Audit (Requires Task List)",children:y.jsx(Eb,{className:"w-5 h-5"})}),y.jsx(hi,{isActive:s,onClick:u,tooltip:s?"Performer Solo Mode":"Boardroom Collaboration",emphasis:s?"warning":"primary",children:y.jsx(Mh,{className:`w-5 h-5 ${s?"opacity-60":""}`})}),y.jsx(hi,{isActive:I!==null,onClick:Y,tooltip:`Speak as ${me}`,children:y.jsx(Gc,{className:"w-5 h-5"})}),y.jsxs("div",{className:"text-xs text-gray-400 ml-2",children:["Voice: ",y.jsx("span",{className:"text-blue-300",children:me})]})]}),y.jsx("div",{className:"flex items-center gap-2 mb-3 flex-wrap",children:n.map(B=>{const K=tE[B.icon||"stage"]||El,ce=i.includes(B.id),xe=ce?String(i.indexOf(B.id)+1):null;return y.jsx(hi,{isActive:ce,onClick:()=>a(B.id),disabled:t,tooltip:B.name,badge:xe,children:y.jsx(K,{className:"w-5 h-5"})},B.id)})}),y.jsxs("div",{className:"relative",children:[f&&y.jsxs("div",{className:"relative w-24 h-24 mb-2 p-1 border border-gray-600 rounded-lg",children:[y.jsx("img",{src:f.preview,alt:"upload preview",className:"w-full h-full object-cover rounded"}),y.jsx("button",{onClick:()=>g(null),className:"absolute -top-2 -right-2 bg-gray-800 text-white rounded-full w-6 h-6 flex items-center justify-center border-2 border-[#1e1f20] hover:bg-red-500","aria-label":"Remove image",children:""})]}),y.jsx("textarea",{value:d,onChange:B=>p(B.target.value),onKeyDown:O,placeholder:b?"Drop file here":"Type or drop a file...",className:"w-full bg-[#2a2b2c] text-gray-300 rounded-lg p-3 pr-12 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:1,disabled:t}),y.jsx("button",{onClick:U,disabled:t||!d.trim()&&!f,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white disabled:text-gray-600 disabled:cursor-not-allowed transition-colors",children:y.jsx(qC,{})})]})]})};function iE(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const oE=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,aE=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,lE={};function D0(e,t){return(lE.jsx?aE:oE).test(e)}const sE=/[ \t\n\f\r]/g;function uE(e){return typeof e=="object"?e.type==="text"?I0(e.value):!1:I0(e)}function I0(e){return e.replace(sE,"")===""}class cu{constructor(t,n,i){this.normal=n,this.property=t,i&&(this.space=i)}}cu.prototype.normal={};cu.prototype.property={};cu.prototype.space=void 0;function _b(e,t){const n={},i={};for(const a of e)Object.assign(n,a.property),Object.assign(i,a.normal);return new cu(n,i,t)}function Qp(e){return e.toLowerCase()}class fr{constructor(t,n){this.attribute=n,this.property=t}}fr.prototype.attribute="";fr.prototype.booleanish=!1;fr.prototype.boolean=!1;fr.prototype.commaOrSpaceSeparated=!1;fr.prototype.commaSeparated=!1;fr.prototype.defined=!1;fr.prototype.mustUseProperty=!1;fr.prototype.number=!1;fr.prototype.overloadedBoolean=!1;fr.prototype.property="";fr.prototype.spaceSeparated=!1;fr.prototype.space=void 0;let cE=0;const ct=wa(),Sn=wa(),Wp=wa(),Le=wa(),Gt=wa(),wl=wa(),Tr=wa();function wa(){return 2**++cE}const Zp=Object.freeze(Object.defineProperty({__proto__:null,boolean:ct,booleanish:Sn,commaOrSpaceSeparated:Tr,commaSeparated:wl,number:Le,overloadedBoolean:Wp,spaceSeparated:Gt},Symbol.toStringTag,{value:"Module"})),Tp=Object.keys(Zp);class Uh extends fr{constructor(t,n,i,a){let s=-1;if(super(t,n),P0(this,"space",a),typeof i=="number")for(;++s<Tp.length;){const u=Tp[s];P0(this,Tp[s],(i&Zp[u])===Zp[u])}}}Uh.prototype.defined=!0;function P0(e,t,n){n&&(e[t]=n)}function Nl(e){const t={},n={};for(const[i,a]of Object.entries(e.properties)){const s=new Uh(i,e.transform(e.attributes||{},i),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(i)&&(s.mustUseProperty=!0),t[i]=s,n[Qp(i)]=i,n[Qp(s.attribute)]=i}return new cu(t,n,e.space)}const Ab=Nl({properties:{ariaActiveDescendant:null,ariaAtomic:Sn,ariaAutoComplete:null,ariaBusy:Sn,ariaChecked:Sn,ariaColCount:Le,ariaColIndex:Le,ariaColSpan:Le,ariaControls:Gt,ariaCurrent:null,ariaDescribedBy:Gt,ariaDetails:null,ariaDisabled:Sn,ariaDropEffect:Gt,ariaErrorMessage:null,ariaExpanded:Sn,ariaFlowTo:Gt,ariaGrabbed:Sn,ariaHasPopup:null,ariaHidden:Sn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Gt,ariaLevel:Le,ariaLive:null,ariaModal:Sn,ariaMultiLine:Sn,ariaMultiSelectable:Sn,ariaOrientation:null,ariaOwns:Gt,ariaPlaceholder:null,ariaPosInSet:Le,ariaPressed:Sn,ariaReadOnly:Sn,ariaRelevant:null,ariaRequired:Sn,ariaRoleDescription:Gt,ariaRowCount:Le,ariaRowIndex:Le,ariaRowSpan:Le,ariaSelected:Sn,ariaSetSize:Le,ariaSort:null,ariaValueMax:Le,ariaValueMin:Le,ariaValueNow:Le,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function kb(e,t){return t in e?e[t]:t}function Nb(e,t){return kb(e,t.toLowerCase())}const fE=Nl({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:wl,acceptCharset:Gt,accessKey:Gt,action:null,allow:null,allowFullScreen:ct,allowPaymentRequest:ct,allowUserMedia:ct,alt:null,as:null,async:ct,autoCapitalize:null,autoComplete:Gt,autoFocus:ct,autoPlay:ct,blocking:Gt,capture:null,charSet:null,checked:ct,cite:null,className:Gt,cols:Le,colSpan:null,content:null,contentEditable:Sn,controls:ct,controlsList:Gt,coords:Le|wl,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ct,defer:ct,dir:null,dirName:null,disabled:ct,download:Wp,draggable:Sn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ct,formTarget:null,headers:Gt,height:Le,hidden:Wp,high:Le,href:null,hrefLang:null,htmlFor:Gt,httpEquiv:Gt,id:null,imageSizes:null,imageSrcSet:null,inert:ct,inputMode:null,integrity:null,is:null,isMap:ct,itemId:null,itemProp:Gt,itemRef:Gt,itemScope:ct,itemType:Gt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ct,low:Le,manifest:null,max:null,maxLength:Le,media:null,method:null,min:null,minLength:Le,multiple:ct,muted:ct,name:null,nonce:null,noModule:ct,noValidate:ct,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ct,optimum:Le,pattern:null,ping:Gt,placeholder:null,playsInline:ct,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ct,referrerPolicy:null,rel:Gt,required:ct,reversed:ct,rows:Le,rowSpan:Le,sandbox:Gt,scope:null,scoped:ct,seamless:ct,selected:ct,shadowRootClonable:ct,shadowRootDelegatesFocus:ct,shadowRootMode:null,shape:null,size:Le,sizes:null,slot:null,span:Le,spellCheck:Sn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Le,step:null,style:null,tabIndex:Le,target:null,title:null,translate:null,type:null,typeMustMatch:ct,useMap:null,value:Sn,width:Le,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Gt,axis:null,background:null,bgColor:null,border:Le,borderColor:null,bottomMargin:Le,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ct,declare:ct,event:null,face:null,frame:null,frameBorder:null,hSpace:Le,leftMargin:Le,link:null,longDesc:null,lowSrc:null,marginHeight:Le,marginWidth:Le,noResize:ct,noHref:ct,noShade:ct,noWrap:ct,object:null,profile:null,prompt:null,rev:null,rightMargin:Le,rules:null,scheme:null,scrolling:Sn,standby:null,summary:null,text:null,topMargin:Le,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Le,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ct,disableRemotePlayback:ct,prefix:null,property:null,results:Le,security:null,unselectable:null},space:"html",transform:Nb}),dE=Nl({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Tr,accentHeight:Le,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Le,amplitude:Le,arabicForm:null,ascent:Le,attributeName:null,attributeType:null,azimuth:Le,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Le,by:null,calcMode:null,capHeight:Le,className:Gt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Le,diffuseConstant:Le,direction:null,display:null,dur:null,divisor:Le,dominantBaseline:null,download:ct,dx:null,dy:null,edgeMode:null,editable:null,elevation:Le,enableBackground:null,end:null,event:null,exponent:Le,externalResourcesRequired:null,fill:null,fillOpacity:Le,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:wl,g2:wl,glyphName:wl,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Le,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Le,horizOriginX:Le,horizOriginY:Le,id:null,ideographic:Le,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Le,k:Le,k1:Le,k2:Le,k3:Le,k4:Le,kernelMatrix:Tr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Le,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Le,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Le,overlineThickness:Le,paintOrder:null,panose1:null,path:null,pathLength:Le,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Gt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Le,pointsAtY:Le,pointsAtZ:Le,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Tr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Tr,rev:Tr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Tr,requiredFeatures:Tr,requiredFonts:Tr,requiredFormats:Tr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Le,specularExponent:Le,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Le,strikethroughThickness:Le,string:null,stroke:null,strokeDashArray:Tr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Le,strokeOpacity:Le,strokeWidth:null,style:null,surfaceScale:Le,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Tr,tabIndex:Le,tableValues:null,target:null,targetX:Le,targetY:Le,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Tr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Le,underlineThickness:Le,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Le,values:null,vAlphabetic:Le,vMathematical:Le,vectorEffect:null,vHanging:Le,vIdeographic:Le,version:null,vertAdvY:Le,vertOriginX:Le,vertOriginY:Le,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Le,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:kb}),Mb=Nl({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Rb=Nl({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Nb}),Db=Nl({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),pE={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},hE=/[A-Z]/g,L0=/-[a-z]/g,mE=/^data[-\w.:]+$/i;function gE(e,t){const n=Qp(t);let i=t,a=fr;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&mE.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(L0,vE);i="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!L0.test(s)){let u=s.replace(hE,yE);u.charAt(0)!=="-"&&(u="-"+u),t="data"+u}}a=Uh}return new a(i,t)}function yE(e){return"-"+e.toLowerCase()}function vE(e){return e.charAt(1).toUpperCase()}const xE=_b([Ab,fE,Mb,Rb,Db],"html"),Oh=_b([Ab,dE,Mb,Rb,Db],"svg");function bE(e){return e.join(" ").trim()}var gl={},Cp,U0;function wE(){if(U0)return Cp;U0=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,a=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,u=/^[;\s]*/,d=/^\s+|\s+$/g,p=`
`,f="/",g="*",b="",T="comment",E="declaration";Cp=function(I,D){if(typeof I!="string")throw new TypeError("First argument must be a string");if(!I)return[];D=D||{};var M=1,U=1;function O(xe){var _e=xe.match(t);_e&&(M+=_e.length);var Pe=xe.lastIndexOf(p);U=~Pe?xe.length-Pe:U+xe.length}function se(){var xe={line:M,column:U};return function(_e){return _e.position=new Q(xe),me(),_e}}function Q(xe){this.start=xe,this.end={line:M,column:U},this.source=D.source}Q.prototype.content=I;function G(xe){var _e=new Error(D.source+":"+M+":"+U+": "+xe);if(_e.reason=xe,_e.filename=D.source,_e.line=M,_e.column=U,_e.source=I,!D.silent)throw _e}function Y(xe){var _e=xe.exec(I);if(_e){var Pe=_e[0];return O(Pe),I=I.slice(Pe.length),_e}}function me(){Y(n)}function j(xe){var _e;for(xe=xe||[];_e=B();)_e!==!1&&xe.push(_e);return xe}function B(){var xe=se();if(!(f!=I.charAt(0)||g!=I.charAt(1))){for(var _e=2;b!=I.charAt(_e)&&(g!=I.charAt(_e)||f!=I.charAt(_e+1));)++_e;if(_e+=2,b===I.charAt(_e-1))return G("End of comment missing");var Pe=I.slice(2,_e-2);return U+=2,O(Pe),I=I.slice(_e),U+=2,xe({type:T,comment:Pe})}}function K(){var xe=se(),_e=Y(i);if(_e){if(B(),!Y(a))return G("property missing ':'");var Pe=Y(s),ue=xe({type:E,property:k(_e[0].replace(e,b)),value:Pe?k(Pe[0].replace(e,b)):b});return Y(u),ue}}function ce(){var xe=[];j(xe);for(var _e;_e=K();)_e!==!1&&(xe.push(_e),j(xe));return xe}return me(),ce()};function k(I){return I?I.replace(d,b):b}return Cp}var O0;function SE(){if(O0)return gl;O0=1;var e=gl&&gl.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(gl,"__esModule",{value:!0}),gl.default=n;const t=e(wE());function n(i,a){let s=null;if(!i||typeof i!="string")return s;const u=(0,t.default)(i),d=typeof a=="function";return u.forEach(p=>{if(p.type!=="declaration")return;const{property:f,value:g}=p;d?a(f,g,p):g&&(s=s||{},s[f]=g)}),s}return gl}var zs={},B0;function TE(){if(B0)return zs;B0=1,Object.defineProperty(zs,"__esModule",{value:!0}),zs.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,s=function(f){return!f||n.test(f)||e.test(f)},u=function(f,g){return g.toUpperCase()},d=function(f,g){return"".concat(g,"-")},p=function(f,g){return g===void 0&&(g={}),s(f)?f:(f=f.toLowerCase(),g.reactCompat?f=f.replace(a,d):f=f.replace(i,d),f.replace(t,u))};return zs.camelCase=p,zs}var qs,z0;function CE(){if(z0)return qs;z0=1;var e=qs&&qs.__importDefault||function(a){return a&&a.__esModule?a:{default:a}},t=e(SE()),n=TE();function i(a,s){var u={};return!a||typeof a!="string"||(0,t.default)(a,function(d,p){d&&p&&(u[(0,n.camelCase)(d,s)]=p)}),u}return i.default=i,qs=i,qs}var EE=CE();const _E=ou(EE),Ib=Pb("end"),Bh=Pb("start");function Pb(e){return t;function t(n){const i=n&&n.position&&n.position[e]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function AE(e){const t=Bh(e),n=Ib(e);if(t&&n)return{start:t,end:n}}function Xs(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?q0(e.position):"start"in e||"end"in e?q0(e):"line"in e||"column"in e?eh(e):""}function eh(e){return j0(e&&e.line)+":"+j0(e&&e.column)}function q0(e){return eh(e&&e.start)+"-"+eh(e&&e.end)}function j0(e){return e&&typeof e=="number"?e:1}class Kn extends Error{constructor(t,n,i){super(),typeof n=="string"&&(i=n,n=void 0);let a="",s={},u=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?a=t:!s.cause&&t&&(u=!0,a=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof i=="string"){const p=i.indexOf(":");p===-1?s.ruleId=i:(s.source=i.slice(0,p),s.ruleId=i.slice(p+1))}if(!s.place&&s.ancestors&&s.ancestors){const p=s.ancestors[s.ancestors.length-1];p&&(s.place=p.position)}const d=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=d?d.column:void 0,this.fatal=void 0,this.file="",this.message=a,this.line=d?d.line:void 0,this.name=Xs(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=u&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Kn.prototype.file="";Kn.prototype.name="";Kn.prototype.reason="";Kn.prototype.message="";Kn.prototype.stack="";Kn.prototype.column=void 0;Kn.prototype.line=void 0;Kn.prototype.ancestors=void 0;Kn.prototype.cause=void 0;Kn.prototype.fatal=void 0;Kn.prototype.place=void 0;Kn.prototype.ruleId=void 0;Kn.prototype.source=void 0;const zh={}.hasOwnProperty,kE=new Map,NE=/[A-Z]/g,ME=new Set(["table","tbody","thead","tfoot","tr"]),RE=new Set(["td","th"]),Lb="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function DE(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let i;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=qE(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=zE(n,t.jsx,t.jsxs)}const a={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:i,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Oh:xE,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=Ub(a,e,void 0);return s&&typeof s!="string"?s:a.create(e,a.Fragment,{children:s||void 0},void 0)}function Ub(e,t,n){if(t.type==="element")return IE(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return PE(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return UE(e,t,n);if(t.type==="mdxjsEsm")return LE(e,t);if(t.type==="root")return OE(e,t,n);if(t.type==="text")return BE(e,t)}function IE(e,t,n){const i=e.schema;let a=i;t.tagName.toLowerCase()==="svg"&&i.space==="html"&&(a=Oh,e.schema=a),e.ancestors.push(t);const s=Bb(e,t.tagName,!1),u=jE(e,t);let d=jh(e,t);return ME.has(t.tagName)&&(d=d.filter(function(p){return typeof p=="string"?!uE(p):!0})),Ob(e,u,s,t),qh(u,d),e.ancestors.pop(),e.schema=i,e.create(t,s,u,n)}function PE(e,t){if(t.data&&t.data.estree&&e.evaluater){const i=t.data.estree.body[0];return i.type,e.evaluater.evaluateExpression(i.expression)}nu(e,t.position)}function LE(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);nu(e,t.position)}function UE(e,t,n){const i=e.schema;let a=i;t.name==="svg"&&i.space==="html"&&(a=Oh,e.schema=a),e.ancestors.push(t);const s=t.name===null?e.Fragment:Bb(e,t.name,!0),u=HE(e,t),d=jh(e,t);return Ob(e,u,s,t),qh(u,d),e.ancestors.pop(),e.schema=i,e.create(t,s,u,n)}function OE(e,t,n){const i={};return qh(i,jh(e,t)),e.create(t,e.Fragment,i,n)}function BE(e,t){return t.value}function Ob(e,t,n,i){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=i)}function qh(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function zE(e,t,n){return i;function i(a,s,u,d){const f=Array.isArray(u.children)?n:t;return d?f(s,u,d):f(s,u)}}function qE(e,t){return n;function n(i,a,s,u){const d=Array.isArray(s.children),p=Bh(i);return t(a,s,u,d,{columnNumber:p?p.column-1:void 0,fileName:e,lineNumber:p?p.line:void 0},void 0)}}function jE(e,t){const n={};let i,a;for(a in t.properties)if(a!=="children"&&zh.call(t.properties,a)){const s=FE(e,a,t.properties[a]);if(s){const[u,d]=s;e.tableCellAlignToStyle&&u==="align"&&typeof d=="string"&&RE.has(t.tagName)?i=d:n[u]=d}}if(i){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return n}function HE(e,t){const n={};for(const i of t.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&e.evaluater){const s=i.data.estree.body[0];s.type;const u=s.expression;u.type;const d=u.properties[0];d.type,Object.assign(n,e.evaluater.evaluateExpression(d.argument))}else nu(e,t.position);else{const a=i.name;let s;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&e.evaluater){const d=i.value.data.estree.body[0];d.type,s=e.evaluater.evaluateExpression(d.expression)}else nu(e,t.position);else s=i.value===null?!0:i.value;n[a]=s}return n}function jh(e,t){const n=[];let i=-1;const a=e.passKeys?new Map:kE;for(;++i<t.children.length;){const s=t.children[i];let u;if(e.passKeys){const p=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(p){const f=a.get(p)||0;u=p+"-"+f,a.set(p,f+1)}}const d=Ub(e,s,u);d!==void 0&&n.push(d)}return n}function FE(e,t,n){const i=gE(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?iE(n):bE(n)),i.property==="style"){let a=typeof n=="object"?n:VE(e,String(n));return e.stylePropertyNameCase==="css"&&(a=GE(a)),["style",a]}return[e.elementAttributeNameCase==="react"&&i.space?pE[i.property]||i.property:i.attribute,n]}}function VE(e,t){try{return _E(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const i=n,a=new Kn("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw a.file=e.filePath||void 0,a.url=Lb+"#cannot-parse-style-attribute",a}}function Bb(e,t,n){let i;if(!n)i={type:"Literal",value:t};else if(t.includes(".")){const a=t.split(".");let s=-1,u;for(;++s<a.length;){const d=D0(a[s])?{type:"Identifier",name:a[s]}:{type:"Literal",value:a[s]};u=u?{type:"MemberExpression",object:u,property:d,computed:!!(s&&d.type==="Literal"),optional:!1}:d}i=u}else i=D0(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(i.type==="Literal"){const a=i.value;return zh.call(e.components,a)?e.components[a]:a}if(e.evaluater)return e.evaluater.evaluateExpression(i);nu(e)}function nu(e,t){const n=new Kn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Lb+"#cannot-handle-mdx-estrees-without-createevaluater",n}function GE(e){const t={};let n;for(n in e)zh.call(e,n)&&(t[YE(n)]=e[n]);return t}function YE(e){let t=e.replace(NE,KE);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function KE(e){return"-"+e.toLowerCase()}const Ep={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},JE={};function Hh(e,t){const n=JE,i=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,a=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return zb(e,i,a)}function zb(e,t,n){if($E(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return H0(e.children,t,n)}return Array.isArray(e)?H0(e,t,n):""}function H0(e,t,n){const i=[];let a=-1;for(;++a<e.length;)i[a]=zb(e[a],t,n);return i.join("")}function $E(e){return!!(e&&typeof e=="object")}const F0=document.createElement("i");function Fh(e){const t="&"+e+";";F0.innerHTML=t;const n=F0.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Cr(e,t,n,i){const a=e.length;let s=0,u;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,n=n>0?n:0,i.length<1e4)u=Array.from(i),u.unshift(t,n),e.splice(...u);else for(n&&e.splice(t,n);s<i.length;)u=i.slice(s,s+1e4),u.unshift(t,0),e.splice(...u),s+=1e4,t+=1e4}function jr(e,t){return e.length>0?(Cr(e,e.length,0,t),e):t}const V0={}.hasOwnProperty;function qb(e){const t={};let n=-1;for(;++n<e.length;)XE(t,e[n]);return t}function XE(e,t){let n;for(n in t){const a=(V0.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let u;if(s)for(u in s){V0.call(a,u)||(a[u]=[]);const d=s[u];QE(a[u],Array.isArray(d)?d:d?[d]:[])}}}function QE(e,t){let n=-1;const i=[];for(;++n<t.length;)(t[n].add==="after"?e:i).push(t[n]);Cr(e,0,0,i)}function jb(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Xr(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const tr=Po(/[A-Za-z]/),Gn=Po(/[\dA-Za-z]/),WE=Po(/[#-'*+\--9=?A-Z^-~]/);function Yc(e){return e!==null&&(e<32||e===127)}const th=Po(/\d/),ZE=Po(/[\dA-Fa-f]/),e_=Po(/[!-/:-@[-`{-~]/);function et(e){return e!==null&&e<-2}function jt(e){return e!==null&&(e<0||e===32)}function gt(e){return e===-2||e===-1||e===32}const df=Po(new RegExp("\\p{P}|\\p{S}","u")),ya=Po(/\s/);function Po(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Ml(e){const t=[];let n=-1,i=0,a=0;for(;++n<e.length;){const s=e.charCodeAt(n);let u="";if(s===37&&Gn(e.charCodeAt(n+1))&&Gn(e.charCodeAt(n+2)))a=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(u=String.fromCharCode(s));else if(s>55295&&s<57344){const d=e.charCodeAt(n+1);s<56320&&d>56319&&d<57344?(u=String.fromCharCode(s,d),a=1):u=""}else u=String.fromCharCode(s);u&&(t.push(e.slice(i,n),encodeURIComponent(u)),i=n+a+1,u=""),a&&(n+=a,a=0)}return t.join("")+e.slice(i)}function St(e,t,n,i){const a=i?i-1:Number.POSITIVE_INFINITY;let s=0;return u;function u(p){return gt(p)?(e.enter(n),d(p)):t(p)}function d(p){return gt(p)&&s++<a?(e.consume(p),d):(e.exit(n),t(p))}}const t_={tokenize:n_};function n_(e){const t=e.attempt(this.parser.constructs.contentInitial,i,a);let n;return t;function i(d){if(d===null){e.consume(d);return}return e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),St(e,t,"linePrefix")}function a(d){return e.enter("paragraph"),s(d)}function s(d){const p=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=p),n=p,u(d)}function u(d){if(d===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(d);return}return et(d)?(e.consume(d),e.exit("chunkText"),s):(e.consume(d),u)}}const r_={tokenize:i_},G0={tokenize:o_};function i_(e){const t=this,n=[];let i=0,a,s,u;return d;function d(O){if(i<n.length){const se=n[i];return t.containerState=se[1],e.attempt(se[0].continuation,p,f)(O)}return f(O)}function p(O){if(i++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&U();const se=t.events.length;let Q=se,G;for(;Q--;)if(t.events[Q][0]==="exit"&&t.events[Q][1].type==="chunkFlow"){G=t.events[Q][1].end;break}M(i);let Y=se;for(;Y<t.events.length;)t.events[Y][1].end={...G},Y++;return Cr(t.events,Q+1,0,t.events.slice(se)),t.events.length=Y,f(O)}return d(O)}function f(O){if(i===n.length){if(!a)return T(O);if(a.currentConstruct&&a.currentConstruct.concrete)return k(O);t.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(G0,g,b)(O)}function g(O){return a&&U(),M(i),T(O)}function b(O){return t.parser.lazy[t.now().line]=i!==n.length,u=t.now().offset,k(O)}function T(O){return t.containerState={},e.attempt(G0,E,k)(O)}function E(O){return i++,n.push([t.currentConstruct,t.containerState]),T(O)}function k(O){if(O===null){a&&U(),M(0),e.consume(O);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:s}),I(O)}function I(O){if(O===null){D(e.exit("chunkFlow"),!0),M(0),e.consume(O);return}return et(O)?(e.consume(O),D(e.exit("chunkFlow")),i=0,t.interrupt=void 0,d):(e.consume(O),I)}function D(O,se){const Q=t.sliceStream(O);if(se&&Q.push(null),O.previous=s,s&&(s.next=O),s=O,a.defineSkip(O.start),a.write(Q),t.parser.lazy[O.start.line]){let G=a.events.length;for(;G--;)if(a.events[G][1].start.offset<u&&(!a.events[G][1].end||a.events[G][1].end.offset>u))return;const Y=t.events.length;let me=Y,j,B;for(;me--;)if(t.events[me][0]==="exit"&&t.events[me][1].type==="chunkFlow"){if(j){B=t.events[me][1].end;break}j=!0}for(M(i),G=Y;G<t.events.length;)t.events[G][1].end={...B},G++;Cr(t.events,me+1,0,t.events.slice(Y)),t.events.length=G}}function M(O){let se=n.length;for(;se-- >O;){const Q=n[se];t.containerState=Q[1],Q[0].exit.call(t,e)}n.length=O}function U(){a.write([null]),s=void 0,a=void 0,t.containerState._closeFlow=void 0}}function o_(e,t,n){return St(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function _l(e){if(e===null||jt(e)||ya(e))return 1;if(df(e))return 2}function pf(e,t,n){const i=[];let a=-1;for(;++a<e.length;){const s=e[a].resolveAll;s&&!i.includes(s)&&(t=s(t,n),i.push(s))}return t}const nh={name:"attention",resolveAll:a_,tokenize:l_};function a_(e,t){let n=-1,i,a,s,u,d,p,f,g;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(i=n;i--;)if(e[i][0]==="exit"&&e[i][1].type==="attentionSequence"&&e[i][1]._open&&t.sliceSerialize(e[i][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[i][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[i][1].end.offset-e[i][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;p=e[i][1].end.offset-e[i][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const b={...e[i][1].end},T={...e[n][1].start};Y0(b,-p),Y0(T,p),u={type:p>1?"strongSequence":"emphasisSequence",start:b,end:{...e[i][1].end}},d={type:p>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:T},s={type:p>1?"strongText":"emphasisText",start:{...e[i][1].end},end:{...e[n][1].start}},a={type:p>1?"strong":"emphasis",start:{...u.start},end:{...d.end}},e[i][1].end={...u.start},e[n][1].start={...d.end},f=[],e[i][1].end.offset-e[i][1].start.offset&&(f=jr(f,[["enter",e[i][1],t],["exit",e[i][1],t]])),f=jr(f,[["enter",a,t],["enter",u,t],["exit",u,t],["enter",s,t]]),f=jr(f,pf(t.parser.constructs.insideSpan.null,e.slice(i+1,n),t)),f=jr(f,[["exit",s,t],["enter",d,t],["exit",d,t],["exit",a,t]]),e[n][1].end.offset-e[n][1].start.offset?(g=2,f=jr(f,[["enter",e[n][1],t],["exit",e[n][1],t]])):g=0,Cr(e,i-1,n-i+3,f),n=i+f.length-g-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function l_(e,t){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,a=_l(i);let s;return u;function u(p){return s=p,e.enter("attentionSequence"),d(p)}function d(p){if(p===s)return e.consume(p),d;const f=e.exit("attentionSequence"),g=_l(p),b=!g||g===2&&a||n.includes(p),T=!a||a===2&&g||n.includes(i);return f._open=!!(s===42?b:b&&(a||!T)),f._close=!!(s===42?T:T&&(g||!b)),t(p)}}function Y0(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const s_={name:"autolink",tokenize:u_};function u_(e,t,n){let i=0;return a;function a(E){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(E),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(E){return tr(E)?(e.consume(E),u):E===64?n(E):f(E)}function u(E){return E===43||E===45||E===46||Gn(E)?(i=1,d(E)):f(E)}function d(E){return E===58?(e.consume(E),i=0,p):(E===43||E===45||E===46||Gn(E))&&i++<32?(e.consume(E),d):(i=0,f(E))}function p(E){return E===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(E),e.exit("autolinkMarker"),e.exit("autolink"),t):E===null||E===32||E===60||Yc(E)?n(E):(e.consume(E),p)}function f(E){return E===64?(e.consume(E),g):WE(E)?(e.consume(E),f):n(E)}function g(E){return Gn(E)?b(E):n(E)}function b(E){return E===46?(e.consume(E),i=0,g):E===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(E),e.exit("autolinkMarker"),e.exit("autolink"),t):T(E)}function T(E){if((E===45||Gn(E))&&i++<63){const k=E===45?T:b;return e.consume(E),k}return n(E)}}const fu={partial:!0,tokenize:c_};function c_(e,t,n){return i;function i(s){return gt(s)?St(e,a,"linePrefix")(s):a(s)}function a(s){return s===null||et(s)?t(s):n(s)}}const Hb={continuation:{tokenize:d_},exit:p_,name:"blockQuote",tokenize:f_};function f_(e,t,n){const i=this;return a;function a(u){if(u===62){const d=i.containerState;return d.open||(e.enter("blockQuote",{_container:!0}),d.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(u),e.exit("blockQuoteMarker"),s}return n(u)}function s(u){return gt(u)?(e.enter("blockQuotePrefixWhitespace"),e.consume(u),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(u))}}function d_(e,t,n){const i=this;return a;function a(u){return gt(u)?St(e,s,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u):s(u)}function s(u){return e.attempt(Hb,t,n)(u)}}function p_(e){e.exit("blockQuote")}const Fb={name:"characterEscape",tokenize:h_};function h_(e,t,n){return i;function i(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),a}function a(s){return e_(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const Vb={name:"characterReference",tokenize:m_};function m_(e,t,n){const i=this;let a=0,s,u;return d;function d(b){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(b),e.exit("characterReferenceMarker"),p}function p(b){return b===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(b),e.exit("characterReferenceMarkerNumeric"),f):(e.enter("characterReferenceValue"),s=31,u=Gn,g(b))}function f(b){return b===88||b===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(b),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,u=ZE,g):(e.enter("characterReferenceValue"),s=7,u=th,g(b))}function g(b){if(b===59&&a){const T=e.exit("characterReferenceValue");return u===Gn&&!Fh(i.sliceSerialize(T))?n(b):(e.enter("characterReferenceMarker"),e.consume(b),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return u(b)&&a++<s?(e.consume(b),g):n(b)}}const K0={partial:!0,tokenize:y_},J0={concrete:!0,name:"codeFenced",tokenize:g_};function g_(e,t,n){const i=this,a={partial:!0,tokenize:Q};let s=0,u=0,d;return p;function p(G){return f(G)}function f(G){const Y=i.events[i.events.length-1];return s=Y&&Y[1].type==="linePrefix"?Y[2].sliceSerialize(Y[1],!0).length:0,d=G,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),g(G)}function g(G){return G===d?(u++,e.consume(G),g):u<3?n(G):(e.exit("codeFencedFenceSequence"),gt(G)?St(e,b,"whitespace")(G):b(G))}function b(G){return G===null||et(G)?(e.exit("codeFencedFence"),i.interrupt?t(G):e.check(K0,I,se)(G)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),T(G))}function T(G){return G===null||et(G)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),b(G)):gt(G)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),St(e,E,"whitespace")(G)):G===96&&G===d?n(G):(e.consume(G),T)}function E(G){return G===null||et(G)?b(G):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),k(G))}function k(G){return G===null||et(G)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),b(G)):G===96&&G===d?n(G):(e.consume(G),k)}function I(G){return e.attempt(a,se,D)(G)}function D(G){return e.enter("lineEnding"),e.consume(G),e.exit("lineEnding"),M}function M(G){return s>0&&gt(G)?St(e,U,"linePrefix",s+1)(G):U(G)}function U(G){return G===null||et(G)?e.check(K0,I,se)(G):(e.enter("codeFlowValue"),O(G))}function O(G){return G===null||et(G)?(e.exit("codeFlowValue"),U(G)):(e.consume(G),O)}function se(G){return e.exit("codeFenced"),t(G)}function Q(G,Y,me){let j=0;return B;function B(Pe){return G.enter("lineEnding"),G.consume(Pe),G.exit("lineEnding"),K}function K(Pe){return G.enter("codeFencedFence"),gt(Pe)?St(G,ce,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Pe):ce(Pe)}function ce(Pe){return Pe===d?(G.enter("codeFencedFenceSequence"),xe(Pe)):me(Pe)}function xe(Pe){return Pe===d?(j++,G.consume(Pe),xe):j>=u?(G.exit("codeFencedFenceSequence"),gt(Pe)?St(G,_e,"whitespace")(Pe):_e(Pe)):me(Pe)}function _e(Pe){return Pe===null||et(Pe)?(G.exit("codeFencedFence"),Y(Pe)):me(Pe)}}}function y_(e,t,n){const i=this;return a;function a(u){return u===null?n(u):(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),s)}function s(u){return i.parser.lazy[i.now().line]?n(u):t(u)}}const _p={name:"codeIndented",tokenize:x_},v_={partial:!0,tokenize:b_};function x_(e,t,n){const i=this;return a;function a(f){return e.enter("codeIndented"),St(e,s,"linePrefix",5)(f)}function s(f){const g=i.events[i.events.length-1];return g&&g[1].type==="linePrefix"&&g[2].sliceSerialize(g[1],!0).length>=4?u(f):n(f)}function u(f){return f===null?p(f):et(f)?e.attempt(v_,u,p)(f):(e.enter("codeFlowValue"),d(f))}function d(f){return f===null||et(f)?(e.exit("codeFlowValue"),u(f)):(e.consume(f),d)}function p(f){return e.exit("codeIndented"),t(f)}}function b_(e,t,n){const i=this;return a;function a(u){return i.parser.lazy[i.now().line]?n(u):et(u)?(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),a):St(e,s,"linePrefix",5)(u)}function s(u){const d=i.events[i.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?t(u):et(u)?a(u):n(u)}}const w_={name:"codeText",previous:T_,resolve:S_,tokenize:C_};function S_(e){let t=e.length-4,n=3,i,a;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(i=n;++i<t;)if(e[i][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(i=n-1,t++;++i<=t;)a===void 0?i!==t&&e[i][1].type!=="lineEnding"&&(a=i):(i===t||e[i][1].type==="lineEnding")&&(e[a][1].type="codeTextData",i!==a+2&&(e[a][1].end=e[i-1][1].end,e.splice(a+2,i-a-2),t-=i-a-2,i=a+2),a=void 0);return e}function T_(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function C_(e,t,n){let i=0,a,s;return u;function u(b){return e.enter("codeText"),e.enter("codeTextSequence"),d(b)}function d(b){return b===96?(e.consume(b),i++,d):(e.exit("codeTextSequence"),p(b))}function p(b){return b===null?n(b):b===32?(e.enter("space"),e.consume(b),e.exit("space"),p):b===96?(s=e.enter("codeTextSequence"),a=0,g(b)):et(b)?(e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),p):(e.enter("codeTextData"),f(b))}function f(b){return b===null||b===32||b===96||et(b)?(e.exit("codeTextData"),p(b)):(e.consume(b),f)}function g(b){return b===96?(e.consume(b),a++,g):a===i?(e.exit("codeTextSequence"),e.exit("codeText"),t(b)):(s.type="codeTextData",f(b))}}class E_{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const i=n??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(t,i):t>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(t,n,i){const a=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return i&&js(this.left,i),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),js(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),js(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);js(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);js(this.left,n.reverse())}}}function js(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Gb(e){const t={};let n=-1,i,a,s,u,d,p,f;const g=new E_(e);for(;++n<g.length;){for(;n in t;)n=t[n];if(i=g.get(n),n&&i[1].type==="chunkFlow"&&g.get(n-1)[1].type==="listItemPrefix"&&(p=i[1]._tokenizer.events,s=0,s<p.length&&p[s][1].type==="lineEndingBlank"&&(s+=2),s<p.length&&p[s][1].type==="content"))for(;++s<p.length&&p[s][1].type!=="content";)p[s][1].type==="chunkText"&&(p[s][1]._isInFirstContentOfListItem=!0,s++);if(i[0]==="enter")i[1].contentType&&(Object.assign(t,__(g,n)),n=t[n],f=!0);else if(i[1]._container){for(s=n,a=void 0;s--;)if(u=g.get(s),u[1].type==="lineEnding"||u[1].type==="lineEndingBlank")u[0]==="enter"&&(a&&(g.get(a)[1].type="lineEndingBlank"),u[1].type="lineEnding",a=s);else if(!(u[1].type==="linePrefix"||u[1].type==="listItemIndent"))break;a&&(i[1].end={...g.get(a)[1].start},d=g.slice(a,n),d.unshift(i),g.splice(a,n-a+1,d))}}return Cr(e,0,Number.POSITIVE_INFINITY,g.slice(0)),!f}function __(e,t){const n=e.get(t)[1],i=e.get(t)[2];let a=t-1;const s=[];let u=n._tokenizer;u||(u=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(u._contentTypeTextTrailing=!0));const d=u.events,p=[],f={};let g,b,T=-1,E=n,k=0,I=0;const D=[I];for(;E;){for(;e.get(++a)[1]!==E;);s.push(a),E._tokenizer||(g=i.sliceStream(E),E.next||g.push(null),b&&u.defineSkip(E.start),E._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=!0),u.write(g),E._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=void 0)),b=E,E=E.next}for(E=n;++T<d.length;)d[T][0]==="exit"&&d[T-1][0]==="enter"&&d[T][1].type===d[T-1][1].type&&d[T][1].start.line!==d[T][1].end.line&&(I=T+1,D.push(I),E._tokenizer=void 0,E.previous=void 0,E=E.next);for(u.events=[],E?(E._tokenizer=void 0,E.previous=void 0):D.pop(),T=D.length;T--;){const M=d.slice(D[T],D[T+1]),U=s.pop();p.push([U,U+M.length-1]),e.splice(U,2,M)}for(p.reverse(),T=-1;++T<p.length;)f[k+p[T][0]]=k+p[T][1],k+=p[T][1]-p[T][0]-1;return f}const A_={resolve:N_,tokenize:M_},k_={partial:!0,tokenize:R_};function N_(e){return Gb(e),e}function M_(e,t){let n;return i;function i(d){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),a(d)}function a(d){return d===null?s(d):et(d)?e.check(k_,u,s)(d):(e.consume(d),a)}function s(d){return e.exit("chunkContent"),e.exit("content"),t(d)}function u(d){return e.consume(d),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function R_(e,t,n){const i=this;return a;function a(u){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),St(e,s,"linePrefix")}function s(u){if(u===null||et(u))return n(u);const d=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?t(u):e.interrupt(i.parser.constructs.flow,n,t)(u)}}function Yb(e,t,n,i,a,s,u,d,p){const f=p||Number.POSITIVE_INFINITY;let g=0;return b;function b(M){return M===60?(e.enter(i),e.enter(a),e.enter(s),e.consume(M),e.exit(s),T):M===null||M===32||M===41||Yc(M)?n(M):(e.enter(i),e.enter(u),e.enter(d),e.enter("chunkString",{contentType:"string"}),I(M))}function T(M){return M===62?(e.enter(s),e.consume(M),e.exit(s),e.exit(a),e.exit(i),t):(e.enter(d),e.enter("chunkString",{contentType:"string"}),E(M))}function E(M){return M===62?(e.exit("chunkString"),e.exit(d),T(M)):M===null||M===60||et(M)?n(M):(e.consume(M),M===92?k:E)}function k(M){return M===60||M===62||M===92?(e.consume(M),E):E(M)}function I(M){return!g&&(M===null||M===41||jt(M))?(e.exit("chunkString"),e.exit(d),e.exit(u),e.exit(i),t(M)):g<f&&M===40?(e.consume(M),g++,I):M===41?(e.consume(M),g--,I):M===null||M===32||M===40||Yc(M)?n(M):(e.consume(M),M===92?D:I)}function D(M){return M===40||M===41||M===92?(e.consume(M),I):I(M)}}function Kb(e,t,n,i,a,s){const u=this;let d=0,p;return f;function f(E){return e.enter(i),e.enter(a),e.consume(E),e.exit(a),e.enter(s),g}function g(E){return d>999||E===null||E===91||E===93&&!p||E===94&&!d&&"_hiddenFootnoteSupport"in u.parser.constructs?n(E):E===93?(e.exit(s),e.enter(a),e.consume(E),e.exit(a),e.exit(i),t):et(E)?(e.enter("lineEnding"),e.consume(E),e.exit("lineEnding"),g):(e.enter("chunkString",{contentType:"string"}),b(E))}function b(E){return E===null||E===91||E===93||et(E)||d++>999?(e.exit("chunkString"),g(E)):(e.consume(E),p||(p=!gt(E)),E===92?T:b)}function T(E){return E===91||E===92||E===93?(e.consume(E),d++,b):b(E)}}function Jb(e,t,n,i,a,s){let u;return d;function d(T){return T===34||T===39||T===40?(e.enter(i),e.enter(a),e.consume(T),e.exit(a),u=T===40?41:T,p):n(T)}function p(T){return T===u?(e.enter(a),e.consume(T),e.exit(a),e.exit(i),t):(e.enter(s),f(T))}function f(T){return T===u?(e.exit(s),p(u)):T===null?n(T):et(T)?(e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),St(e,f,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),g(T))}function g(T){return T===u||T===null||et(T)?(e.exit("chunkString"),f(T)):(e.consume(T),T===92?b:g)}function b(T){return T===u||T===92?(e.consume(T),g):g(T)}}function Qs(e,t){let n;return i;function i(a){return et(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n=!0,i):gt(a)?St(e,i,n?"linePrefix":"lineSuffix")(a):t(a)}}const D_={name:"definition",tokenize:P_},I_={partial:!0,tokenize:L_};function P_(e,t,n){const i=this;let a;return s;function s(E){return e.enter("definition"),u(E)}function u(E){return Kb.call(i,e,d,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(E)}function d(E){return a=Xr(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),E===58?(e.enter("definitionMarker"),e.consume(E),e.exit("definitionMarker"),p):n(E)}function p(E){return jt(E)?Qs(e,f)(E):f(E)}function f(E){return Yb(e,g,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(E)}function g(E){return e.attempt(I_,b,b)(E)}function b(E){return gt(E)?St(e,T,"whitespace")(E):T(E)}function T(E){return E===null||et(E)?(e.exit("definition"),i.parser.defined.push(a),t(E)):n(E)}}function L_(e,t,n){return i;function i(d){return jt(d)?Qs(e,a)(d):n(d)}function a(d){return Jb(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(d)}function s(d){return gt(d)?St(e,u,"whitespace")(d):u(d)}function u(d){return d===null||et(d)?t(d):n(d)}}const U_={name:"hardBreakEscape",tokenize:O_};function O_(e,t,n){return i;function i(s){return e.enter("hardBreakEscape"),e.consume(s),a}function a(s){return et(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const B_={name:"headingAtx",resolve:z_,tokenize:q_};function z_(e,t){let n=e.length-2,i=3,a,s;return e[i][1].type==="whitespace"&&(i+=2),n-2>i&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&e[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(a={type:"atxHeadingText",start:e[i][1].start,end:e[n][1].end},s={type:"chunkText",start:e[i][1].start,end:e[n][1].end,contentType:"text"},Cr(e,i,n-i+1,[["enter",a,t],["enter",s,t],["exit",s,t],["exit",a,t]])),e}function q_(e,t,n){let i=0;return a;function a(g){return e.enter("atxHeading"),s(g)}function s(g){return e.enter("atxHeadingSequence"),u(g)}function u(g){return g===35&&i++<6?(e.consume(g),u):g===null||jt(g)?(e.exit("atxHeadingSequence"),d(g)):n(g)}function d(g){return g===35?(e.enter("atxHeadingSequence"),p(g)):g===null||et(g)?(e.exit("atxHeading"),t(g)):gt(g)?St(e,d,"whitespace")(g):(e.enter("atxHeadingText"),f(g))}function p(g){return g===35?(e.consume(g),p):(e.exit("atxHeadingSequence"),d(g))}function f(g){return g===null||g===35||jt(g)?(e.exit("atxHeadingText"),d(g)):(e.consume(g),f)}}const j_=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],$0=["pre","script","style","textarea"],H_={concrete:!0,name:"htmlFlow",resolveTo:G_,tokenize:Y_},F_={partial:!0,tokenize:J_},V_={partial:!0,tokenize:K_};function G_(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Y_(e,t,n){const i=this;let a,s,u,d,p;return f;function f(L){return g(L)}function g(L){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(L),b}function b(L){return L===33?(e.consume(L),T):L===47?(e.consume(L),s=!0,I):L===63?(e.consume(L),a=3,i.interrupt?t:V):tr(L)?(e.consume(L),u=String.fromCharCode(L),D):n(L)}function T(L){return L===45?(e.consume(L),a=2,E):L===91?(e.consume(L),a=5,d=0,k):tr(L)?(e.consume(L),a=4,i.interrupt?t:V):n(L)}function E(L){return L===45?(e.consume(L),i.interrupt?t:V):n(L)}function k(L){const Ae="CDATA[";return L===Ae.charCodeAt(d++)?(e.consume(L),d===Ae.length?i.interrupt?t:ce:k):n(L)}function I(L){return tr(L)?(e.consume(L),u=String.fromCharCode(L),D):n(L)}function D(L){if(L===null||L===47||L===62||jt(L)){const Ae=L===47,He=u.toLowerCase();return!Ae&&!s&&$0.includes(He)?(a=1,i.interrupt?t(L):ce(L)):j_.includes(u.toLowerCase())?(a=6,Ae?(e.consume(L),M):i.interrupt?t(L):ce(L)):(a=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(L):s?U(L):O(L))}return L===45||Gn(L)?(e.consume(L),u+=String.fromCharCode(L),D):n(L)}function M(L){return L===62?(e.consume(L),i.interrupt?t:ce):n(L)}function U(L){return gt(L)?(e.consume(L),U):B(L)}function O(L){return L===47?(e.consume(L),B):L===58||L===95||tr(L)?(e.consume(L),se):gt(L)?(e.consume(L),O):B(L)}function se(L){return L===45||L===46||L===58||L===95||Gn(L)?(e.consume(L),se):Q(L)}function Q(L){return L===61?(e.consume(L),G):gt(L)?(e.consume(L),Q):O(L)}function G(L){return L===null||L===60||L===61||L===62||L===96?n(L):L===34||L===39?(e.consume(L),p=L,Y):gt(L)?(e.consume(L),G):me(L)}function Y(L){return L===p?(e.consume(L),p=null,j):L===null||et(L)?n(L):(e.consume(L),Y)}function me(L){return L===null||L===34||L===39||L===47||L===60||L===61||L===62||L===96||jt(L)?Q(L):(e.consume(L),me)}function j(L){return L===47||L===62||gt(L)?O(L):n(L)}function B(L){return L===62?(e.consume(L),K):n(L)}function K(L){return L===null||et(L)?ce(L):gt(L)?(e.consume(L),K):n(L)}function ce(L){return L===45&&a===2?(e.consume(L),ue):L===60&&a===1?(e.consume(L),Ee):L===62&&a===4?(e.consume(L),z):L===63&&a===3?(e.consume(L),V):L===93&&a===5?(e.consume(L),Qe):et(L)&&(a===6||a===7)?(e.exit("htmlFlowData"),e.check(F_,J,xe)(L)):L===null||et(L)?(e.exit("htmlFlowData"),xe(L)):(e.consume(L),ce)}function xe(L){return e.check(V_,_e,J)(L)}function _e(L){return e.enter("lineEnding"),e.consume(L),e.exit("lineEnding"),Pe}function Pe(L){return L===null||et(L)?xe(L):(e.enter("htmlFlowData"),ce(L))}function ue(L){return L===45?(e.consume(L),V):ce(L)}function Ee(L){return L===47?(e.consume(L),u="",Me):ce(L)}function Me(L){if(L===62){const Ae=u.toLowerCase();return $0.includes(Ae)?(e.consume(L),z):ce(L)}return tr(L)&&u.length<8?(e.consume(L),u+=String.fromCharCode(L),Me):ce(L)}function Qe(L){return L===93?(e.consume(L),V):ce(L)}function V(L){return L===62?(e.consume(L),z):L===45&&a===2?(e.consume(L),V):ce(L)}function z(L){return L===null||et(L)?(e.exit("htmlFlowData"),J(L)):(e.consume(L),z)}function J(L){return e.exit("htmlFlow"),t(L)}}function K_(e,t,n){const i=this;return a;function a(u){return et(u)?(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),s):n(u)}function s(u){return i.parser.lazy[i.now().line]?n(u):t(u)}}function J_(e,t,n){return i;function i(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),e.attempt(fu,t,n)}}const $_={name:"htmlText",tokenize:X_};function X_(e,t,n){const i=this;let a,s,u;return d;function d(V){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(V),p}function p(V){return V===33?(e.consume(V),f):V===47?(e.consume(V),Q):V===63?(e.consume(V),O):tr(V)?(e.consume(V),me):n(V)}function f(V){return V===45?(e.consume(V),g):V===91?(e.consume(V),s=0,k):tr(V)?(e.consume(V),U):n(V)}function g(V){return V===45?(e.consume(V),E):n(V)}function b(V){return V===null?n(V):V===45?(e.consume(V),T):et(V)?(u=b,Ee(V)):(e.consume(V),b)}function T(V){return V===45?(e.consume(V),E):b(V)}function E(V){return V===62?ue(V):V===45?T(V):b(V)}function k(V){const z="CDATA[";return V===z.charCodeAt(s++)?(e.consume(V),s===z.length?I:k):n(V)}function I(V){return V===null?n(V):V===93?(e.consume(V),D):et(V)?(u=I,Ee(V)):(e.consume(V),I)}function D(V){return V===93?(e.consume(V),M):I(V)}function M(V){return V===62?ue(V):V===93?(e.consume(V),M):I(V)}function U(V){return V===null||V===62?ue(V):et(V)?(u=U,Ee(V)):(e.consume(V),U)}function O(V){return V===null?n(V):V===63?(e.consume(V),se):et(V)?(u=O,Ee(V)):(e.consume(V),O)}function se(V){return V===62?ue(V):O(V)}function Q(V){return tr(V)?(e.consume(V),G):n(V)}function G(V){return V===45||Gn(V)?(e.consume(V),G):Y(V)}function Y(V){return et(V)?(u=Y,Ee(V)):gt(V)?(e.consume(V),Y):ue(V)}function me(V){return V===45||Gn(V)?(e.consume(V),me):V===47||V===62||jt(V)?j(V):n(V)}function j(V){return V===47?(e.consume(V),ue):V===58||V===95||tr(V)?(e.consume(V),B):et(V)?(u=j,Ee(V)):gt(V)?(e.consume(V),j):ue(V)}function B(V){return V===45||V===46||V===58||V===95||Gn(V)?(e.consume(V),B):K(V)}function K(V){return V===61?(e.consume(V),ce):et(V)?(u=K,Ee(V)):gt(V)?(e.consume(V),K):j(V)}function ce(V){return V===null||V===60||V===61||V===62||V===96?n(V):V===34||V===39?(e.consume(V),a=V,xe):et(V)?(u=ce,Ee(V)):gt(V)?(e.consume(V),ce):(e.consume(V),_e)}function xe(V){return V===a?(e.consume(V),a=void 0,Pe):V===null?n(V):et(V)?(u=xe,Ee(V)):(e.consume(V),xe)}function _e(V){return V===null||V===34||V===39||V===60||V===61||V===96?n(V):V===47||V===62||jt(V)?j(V):(e.consume(V),_e)}function Pe(V){return V===47||V===62||jt(V)?j(V):n(V)}function ue(V){return V===62?(e.consume(V),e.exit("htmlTextData"),e.exit("htmlText"),t):n(V)}function Ee(V){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(V),e.exit("lineEnding"),Me}function Me(V){return gt(V)?St(e,Qe,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(V):Qe(V)}function Qe(V){return e.enter("htmlTextData"),u(V)}}const Vh={name:"labelEnd",resolveAll:eA,resolveTo:tA,tokenize:nA},Q_={tokenize:rA},W_={tokenize:iA},Z_={tokenize:oA};function eA(e){let t=-1;const n=[];for(;++t<e.length;){const i=e[t][1];if(n.push(e[t]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const a=i.type==="labelImage"?4:2;i.type="data",t+=a}}return e.length!==n.length&&Cr(e,0,e.length,n),e}function tA(e,t){let n=e.length,i=0,a,s,u,d;for(;n--;)if(a=e[n][1],s){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(u){if(e[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(s=n,a.type!=="labelLink")){i=2;break}}else a.type==="labelEnd"&&(u=n);const p={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},f={type:"label",start:{...e[s][1].start},end:{...e[u][1].end}},g={type:"labelText",start:{...e[s+i+2][1].end},end:{...e[u-2][1].start}};return d=[["enter",p,t],["enter",f,t]],d=jr(d,e.slice(s+1,s+i+3)),d=jr(d,[["enter",g,t]]),d=jr(d,pf(t.parser.constructs.insideSpan.null,e.slice(s+i+4,u-3),t)),d=jr(d,[["exit",g,t],e[u-2],e[u-1],["exit",f,t]]),d=jr(d,e.slice(u+1)),d=jr(d,[["exit",p,t]]),Cr(e,s,e.length,d),e}function nA(e,t,n){const i=this;let a=i.events.length,s,u;for(;a--;)if((i.events[a][1].type==="labelImage"||i.events[a][1].type==="labelLink")&&!i.events[a][1]._balanced){s=i.events[a][1];break}return d;function d(T){return s?s._inactive?b(T):(u=i.parser.defined.includes(Xr(i.sliceSerialize({start:s.end,end:i.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(T),e.exit("labelMarker"),e.exit("labelEnd"),p):n(T)}function p(T){return T===40?e.attempt(Q_,g,u?g:b)(T):T===91?e.attempt(W_,g,u?f:b)(T):u?g(T):b(T)}function f(T){return e.attempt(Z_,g,b)(T)}function g(T){return t(T)}function b(T){return s._balanced=!0,n(T)}}function rA(e,t,n){return i;function i(b){return e.enter("resource"),e.enter("resourceMarker"),e.consume(b),e.exit("resourceMarker"),a}function a(b){return jt(b)?Qs(e,s)(b):s(b)}function s(b){return b===41?g(b):Yb(e,u,d,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(b)}function u(b){return jt(b)?Qs(e,p)(b):g(b)}function d(b){return n(b)}function p(b){return b===34||b===39||b===40?Jb(e,f,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(b):g(b)}function f(b){return jt(b)?Qs(e,g)(b):g(b)}function g(b){return b===41?(e.enter("resourceMarker"),e.consume(b),e.exit("resourceMarker"),e.exit("resource"),t):n(b)}}function iA(e,t,n){const i=this;return a;function a(d){return Kb.call(i,e,s,u,"reference","referenceMarker","referenceString")(d)}function s(d){return i.parser.defined.includes(Xr(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?t(d):n(d)}function u(d){return n(d)}}function oA(e,t,n){return i;function i(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),a}function a(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const aA={name:"labelStartImage",resolveAll:Vh.resolveAll,tokenize:lA};function lA(e,t,n){const i=this;return a;function a(d){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(d),e.exit("labelImageMarker"),s}function s(d){return d===91?(e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelImage"),u):n(d)}function u(d){return d===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(d):t(d)}}const sA={name:"labelStartLink",resolveAll:Vh.resolveAll,tokenize:uA};function uA(e,t,n){const i=this;return a;function a(u){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(u),e.exit("labelMarker"),e.exit("labelLink"),s}function s(u){return u===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(u):t(u)}}const Ap={name:"lineEnding",tokenize:cA};function cA(e,t){return n;function n(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),St(e,t,"linePrefix")}}const zc={name:"thematicBreak",tokenize:fA};function fA(e,t,n){let i=0,a;return s;function s(f){return e.enter("thematicBreak"),u(f)}function u(f){return a=f,d(f)}function d(f){return f===a?(e.enter("thematicBreakSequence"),p(f)):i>=3&&(f===null||et(f))?(e.exit("thematicBreak"),t(f)):n(f)}function p(f){return f===a?(e.consume(f),i++,p):(e.exit("thematicBreakSequence"),gt(f)?St(e,d,"whitespace")(f):d(f))}}const ur={continuation:{tokenize:mA},exit:yA,name:"list",tokenize:hA},dA={partial:!0,tokenize:vA},pA={partial:!0,tokenize:gA};function hA(e,t,n){const i=this,a=i.events[i.events.length-1];let s=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,u=0;return d;function d(E){const k=i.containerState.type||(E===42||E===43||E===45?"listUnordered":"listOrdered");if(k==="listUnordered"?!i.containerState.marker||E===i.containerState.marker:th(E)){if(i.containerState.type||(i.containerState.type=k,e.enter(k,{_container:!0})),k==="listUnordered")return e.enter("listItemPrefix"),E===42||E===45?e.check(zc,n,f)(E):f(E);if(!i.interrupt||E===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),p(E)}return n(E)}function p(E){return th(E)&&++u<10?(e.consume(E),p):(!i.interrupt||u<2)&&(i.containerState.marker?E===i.containerState.marker:E===41||E===46)?(e.exit("listItemValue"),f(E)):n(E)}function f(E){return e.enter("listItemMarker"),e.consume(E),e.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||E,e.check(fu,i.interrupt?n:g,e.attempt(dA,T,b))}function g(E){return i.containerState.initialBlankLine=!0,s++,T(E)}function b(E){return gt(E)?(e.enter("listItemPrefixWhitespace"),e.consume(E),e.exit("listItemPrefixWhitespace"),T):n(E)}function T(E){return i.containerState.size=s+i.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(E)}}function mA(e,t,n){const i=this;return i.containerState._closeFlow=void 0,e.check(fu,a,s);function a(d){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,St(e,t,"listItemIndent",i.containerState.size+1)(d)}function s(d){return i.containerState.furtherBlankLines||!gt(d)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,u(d)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,e.attempt(pA,t,u)(d))}function u(d){return i.containerState._closeFlow=!0,i.interrupt=void 0,St(e,e.attempt(ur,t,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(d)}}function gA(e,t,n){const i=this;return St(e,a,"listItemIndent",i.containerState.size+1);function a(s){const u=i.events[i.events.length-1];return u&&u[1].type==="listItemIndent"&&u[2].sliceSerialize(u[1],!0).length===i.containerState.size?t(s):n(s)}}function yA(e){e.exit(this.containerState.type)}function vA(e,t,n){const i=this;return St(e,a,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(s){const u=i.events[i.events.length-1];return!gt(s)&&u&&u[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const X0={name:"setextUnderline",resolveTo:xA,tokenize:bA};function xA(e,t){let n=e.length,i,a,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){i=n;break}e[n][1].type==="paragraph"&&(a=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const u={type:"setextHeading",start:{...e[i][1].start},end:{...e[e.length-1][1].end}};return e[a][1].type="setextHeadingText",s?(e.splice(a,0,["enter",u,t]),e.splice(s+1,0,["exit",e[i][1],t]),e[i][1].end={...e[s][1].end}):e[i][1]=u,e.push(["exit",u,t]),e}function bA(e,t,n){const i=this;let a;return s;function s(f){let g=i.events.length,b;for(;g--;)if(i.events[g][1].type!=="lineEnding"&&i.events[g][1].type!=="linePrefix"&&i.events[g][1].type!=="content"){b=i.events[g][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||b)?(e.enter("setextHeadingLine"),a=f,u(f)):n(f)}function u(f){return e.enter("setextHeadingLineSequence"),d(f)}function d(f){return f===a?(e.consume(f),d):(e.exit("setextHeadingLineSequence"),gt(f)?St(e,p,"lineSuffix")(f):p(f))}function p(f){return f===null||et(f)?(e.exit("setextHeadingLine"),t(f)):n(f)}}const wA={tokenize:SA};function SA(e){const t=this,n=e.attempt(fu,i,e.attempt(this.parser.constructs.flowInitial,a,St(e,e.attempt(this.parser.constructs.flow,a,e.attempt(A_,a)),"linePrefix")));return n;function i(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function a(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const TA={resolveAll:Xb()},CA=$b("string"),EA=$b("text");function $b(e){return{resolveAll:Xb(e==="text"?_A:void 0),tokenize:t};function t(n){const i=this,a=this.parser.constructs[e],s=n.attempt(a,u,d);return u;function u(g){return f(g)?s(g):d(g)}function d(g){if(g===null){n.consume(g);return}return n.enter("data"),n.consume(g),p}function p(g){return f(g)?(n.exit("data"),s(g)):(n.consume(g),p)}function f(g){if(g===null)return!0;const b=a[g];let T=-1;if(b)for(;++T<b.length;){const E=b[T];if(!E.previous||E.previous.call(i,i.previous))return!0}return!1}}}function Xb(e){return t;function t(n,i){let a=-1,s;for(;++a<=n.length;)s===void 0?n[a]&&n[a][1].type==="data"&&(s=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==s+2&&(n[s][1].end=n[a-1][1].end,n.splice(s+2,a-s-2),a=s+2),s=void 0);return e?e(n,i):n}}function _A(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const i=e[n-1][1],a=t.sliceStream(i);let s=a.length,u=-1,d=0,p;for(;s--;){const f=a[s];if(typeof f=="string"){for(u=f.length;f.charCodeAt(u-1)===32;)d++,u--;if(u)break;u=-1}else if(f===-2)p=!0,d++;else if(f!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(d=0),d){const f={type:n===e.length||p||d<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?u:i.start._bufferIndex+u,_index:i.start._index+s,line:i.end.line,column:i.end.column-d,offset:i.end.offset-d},end:{...i.end}};i.end={...f.start},i.start.offset===i.end.offset?Object.assign(i,f):(e.splice(n,0,["enter",f,t],["exit",f,t]),n+=2)}n++}return e}const AA={42:ur,43:ur,45:ur,48:ur,49:ur,50:ur,51:ur,52:ur,53:ur,54:ur,55:ur,56:ur,57:ur,62:Hb},kA={91:D_},NA={[-2]:_p,[-1]:_p,32:_p},MA={35:B_,42:zc,45:[X0,zc],60:H_,61:X0,95:zc,96:J0,126:J0},RA={38:Vb,92:Fb},DA={[-5]:Ap,[-4]:Ap,[-3]:Ap,33:aA,38:Vb,42:nh,60:[s_,$_],91:sA,92:[U_,Fb],93:Vh,95:nh,96:w_},IA={null:[nh,TA]},PA={null:[42,95]},LA={null:[]},UA=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:PA,contentInitial:kA,disable:LA,document:AA,flow:MA,flowInitial:NA,insideSpan:IA,string:RA,text:DA},Symbol.toStringTag,{value:"Module"}));function OA(e,t,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const a={},s=[];let u=[],d=[];const p={attempt:Y(Q),check:Y(G),consume:U,enter:O,exit:se,interrupt:Y(G,{interrupt:!0})},f={code:null,containerState:{},defineSkip:I,events:[],now:k,parser:e,previous:null,sliceSerialize:T,sliceStream:E,write:b};let g=t.tokenize.call(f,p);return t.resolveAll&&s.push(t),f;function b(K){return u=jr(u,K),D(),u[u.length-1]!==null?[]:(me(t,0),f.events=pf(s,f.events,f),f.events)}function T(K,ce){return zA(E(K),ce)}function E(K){return BA(u,K)}function k(){const{_bufferIndex:K,_index:ce,line:xe,column:_e,offset:Pe}=i;return{_bufferIndex:K,_index:ce,line:xe,column:_e,offset:Pe}}function I(K){a[K.line]=K.column,B()}function D(){let K;for(;i._index<u.length;){const ce=u[i._index];if(typeof ce=="string")for(K=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===K&&i._bufferIndex<ce.length;)M(ce.charCodeAt(i._bufferIndex));else M(ce)}}function M(K){g=g(K)}function U(K){et(K)?(i.line++,i.column=1,i.offset+=K===-3?2:1,B()):K!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===u[i._index].length&&(i._bufferIndex=-1,i._index++)),f.previous=K}function O(K,ce){const xe=ce||{};return xe.type=K,xe.start=k(),f.events.push(["enter",xe,f]),d.push(xe),xe}function se(K){const ce=d.pop();return ce.end=k(),f.events.push(["exit",ce,f]),ce}function Q(K,ce){me(K,ce.from)}function G(K,ce){ce.restore()}function Y(K,ce){return xe;function xe(_e,Pe,ue){let Ee,Me,Qe,V;return Array.isArray(_e)?J(_e):"tokenize"in _e?J([_e]):z(_e);function z(qe){return We;function We(st){const Ne=st!==null&&qe[st],Mt=st!==null&&qe.null,Tt=[...Array.isArray(Ne)?Ne:Ne?[Ne]:[],...Array.isArray(Mt)?Mt:Mt?[Mt]:[]];return J(Tt)(st)}}function J(qe){return Ee=qe,Me=0,qe.length===0?ue:L(qe[Me])}function L(qe){return We;function We(st){return V=j(),Qe=qe,qe.partial||(f.currentConstruct=qe),qe.name&&f.parser.constructs.disable.null.includes(qe.name)?He():qe.tokenize.call(ce?Object.assign(Object.create(f),ce):f,p,Ae,He)(st)}}function Ae(qe){return K(Qe,V),Pe}function He(qe){return V.restore(),++Me<Ee.length?L(Ee[Me]):ue}}}function me(K,ce){K.resolveAll&&!s.includes(K)&&s.push(K),K.resolve&&Cr(f.events,ce,f.events.length-ce,K.resolve(f.events.slice(ce),f)),K.resolveTo&&(f.events=K.resolveTo(f.events,f))}function j(){const K=k(),ce=f.previous,xe=f.currentConstruct,_e=f.events.length,Pe=Array.from(d);return{from:_e,restore:ue};function ue(){i=K,f.previous=ce,f.currentConstruct=xe,f.events.length=_e,d=Pe,B()}}function B(){i.line in a&&i.column<2&&(i.column=a[i.line],i.offset+=a[i.line]-1)}}function BA(e,t){const n=t.start._index,i=t.start._bufferIndex,a=t.end._index,s=t.end._bufferIndex;let u;if(n===a)u=[e[n].slice(i,s)];else{if(u=e.slice(n,a),i>-1){const d=u[0];typeof d=="string"?u[0]=d.slice(i):u.shift()}s>0&&u.push(e[a].slice(0,s))}return u}function zA(e,t){let n=-1;const i=[];let a;for(;++n<e.length;){const s=e[n];let u;if(typeof s=="string")u=s;else switch(s){case-5:{u="\r";break}case-4:{u=`
`;break}case-3:{u=`\r
`;break}case-2:{u=t?" ":"	";break}case-1:{if(!t&&a)continue;u=" ";break}default:u=String.fromCharCode(s)}a=s===-2,i.push(u)}return i.join("")}function qA(e){const i={constructs:qb([UA,...(e||{}).extensions||[]]),content:a(t_),defined:[],document:a(r_),flow:a(wA),lazy:{},string:a(CA),text:a(EA)};return i;function a(s){return u;function u(d){return OA(i,s,d)}}}function jA(e){for(;!Gb(e););return e}const Q0=/[\0\t\n\r]/g;function HA(){let e=1,t="",n=!0,i;return a;function a(s,u,d){const p=[];let f,g,b,T,E;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(u||void 0).decode(s)),b=0,t="",n&&(s.charCodeAt(0)===65279&&b++,n=void 0);b<s.length;){if(Q0.lastIndex=b,f=Q0.exec(s),T=f&&f.index!==void 0?f.index:s.length,E=s.charCodeAt(T),!f){t=s.slice(b);break}if(E===10&&b===T&&i)p.push(-3),i=void 0;else switch(i&&(p.push(-5),i=void 0),b<T&&(p.push(s.slice(b,T)),e+=T-b),E){case 0:{p.push(65533),e++;break}case 9:{for(g=Math.ceil(e/4)*4,p.push(-2);e++<g;)p.push(-1);break}case 10:{p.push(-4),e=1;break}default:i=!0,e=1}b=T+1}return d&&(i&&p.push(-5),t&&p.push(t),p.push(null)),p}}const FA=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function VA(e){return e.replace(FA,GA)}function GA(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const a=n.charCodeAt(1),s=a===120||a===88;return jb(n.slice(s?2:1),s?16:10)}return Fh(n)||e}const Qb={}.hasOwnProperty;function YA(e,t,n){return typeof t!="string"&&(n=t,t=void 0),KA(n)(jA(qA(n).document().write(HA()(e,t,!0))))}function KA(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ti),autolinkProtocol:j,autolinkEmail:j,atxHeading:s(hn),blockQuote:s(Mt),characterEscape:j,characterReference:j,codeFenced:s(Tt),codeFencedFenceInfo:u,codeFencedFenceMeta:u,codeIndented:s(Tt,u),codeText:s(pt,u),codeTextData:j,data:j,codeFlowValue:j,definition:s(dr),definitionDestinationString:u,definitionLabelString:u,definitionTitleString:u,emphasis:s(tn),hardBreakEscape:s(Jn),hardBreakTrailing:s(Jn),htmlFlow:s(ei,u),htmlFlowData:j,htmlText:s(ei,u),htmlTextData:j,image:s(Xi),label:u,link:s(ti),listItem:s(Tn),listItemValue:T,listOrdered:s(pr,b),listUnordered:s(pr),paragraph:s(Uo),reference:L,referenceString:u,resourceDestinationString:u,resourceTitleString:u,setextHeading:s(hn),strong:s(Vr),thematicBreak:s(Er)},exit:{atxHeading:p(),atxHeadingSequence:Q,autolink:p(),autolinkEmail:Ne,autolinkProtocol:st,blockQuote:p(),characterEscapeValue:B,characterReferenceMarkerHexadecimal:He,characterReferenceMarkerNumeric:He,characterReferenceValue:qe,characterReference:We,codeFenced:p(D),codeFencedFence:I,codeFencedFenceInfo:E,codeFencedFenceMeta:k,codeFlowValue:B,codeIndented:p(M),codeText:p(Pe),codeTextData:B,data:B,definition:p(),definitionDestinationString:se,definitionLabelString:U,definitionTitleString:O,emphasis:p(),hardBreakEscape:p(ce),hardBreakTrailing:p(ce),htmlFlow:p(xe),htmlFlowData:B,htmlText:p(_e),htmlTextData:B,image:p(Ee),label:Qe,labelText:Me,lineEnding:K,link:p(ue),listItem:p(),listOrdered:p(),listUnordered:p(),paragraph:p(),referenceString:Ae,resourceDestinationString:V,resourceTitleString:z,resource:J,setextHeading:p(me),setextHeadingLineSequence:Y,setextHeadingText:G,strong:p(),thematicBreak:p()}};Wb(t,(e||{}).mdastExtensions||[]);const n={};return i;function i(ve){let Re={type:"root",children:[]};const Je={stack:[Re],tokenStack:[],config:t,enter:d,exit:f,buffer:u,resume:g,data:n},rt=[];let dt=-1;for(;++dt<ve.length;)if(ve[dt][1].type==="listOrdered"||ve[dt][1].type==="listUnordered")if(ve[dt][0]==="enter")rt.push(dt);else{const ln=rt.pop();dt=a(ve,ln,dt)}for(dt=-1;++dt<ve.length;){const ln=t[ve[dt][0]];Qb.call(ln,ve[dt][1].type)&&ln[ve[dt][1].type].call(Object.assign({sliceSerialize:ve[dt][2].sliceSerialize},Je),ve[dt][1])}if(Je.tokenStack.length>0){const ln=Je.tokenStack[Je.tokenStack.length-1];(ln[1]||W0).call(Je,void 0,ln[0])}for(Re.position={start:Do(ve.length>0?ve[0][1].start:{line:1,column:1,offset:0}),end:Do(ve.length>0?ve[ve.length-2][1].end:{line:1,column:1,offset:0})},dt=-1;++dt<t.transforms.length;)Re=t.transforms[dt](Re)||Re;return Re}function a(ve,Re,Je){let rt=Re-1,dt=-1,ln=!1,Cn,Ht,Yt,Bt;for(;++rt<=Je;){const Ue=ve[rt];switch(Ue[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ue[0]==="enter"?dt++:dt--,Bt=void 0;break}case"lineEndingBlank":{Ue[0]==="enter"&&(Cn&&!Bt&&!dt&&!Yt&&(Yt=rt),Bt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Bt=void 0}if(!dt&&Ue[0]==="enter"&&Ue[1].type==="listItemPrefix"||dt===-1&&Ue[0]==="exit"&&(Ue[1].type==="listUnordered"||Ue[1].type==="listOrdered")){if(Cn){let Ft=rt;for(Ht=void 0;Ft--;){const Wt=ve[Ft];if(Wt[1].type==="lineEnding"||Wt[1].type==="lineEndingBlank"){if(Wt[0]==="exit")continue;Ht&&(ve[Ht][1].type="lineEndingBlank",ln=!0),Wt[1].type="lineEnding",Ht=Ft}else if(!(Wt[1].type==="linePrefix"||Wt[1].type==="blockQuotePrefix"||Wt[1].type==="blockQuotePrefixWhitespace"||Wt[1].type==="blockQuoteMarker"||Wt[1].type==="listItemIndent"))break}Yt&&(!Ht||Yt<Ht)&&(Cn._spread=!0),Cn.end=Object.assign({},Ht?ve[Ht][1].start:Ue[1].end),ve.splice(Ht||rt,0,["exit",Cn,Ue[2]]),rt++,Je++}if(Ue[1].type==="listItemPrefix"){const Ft={type:"listItem",_spread:!1,start:Object.assign({},Ue[1].start),end:void 0};Cn=Ft,ve.splice(rt,0,["enter",Ft,Ue[2]]),rt++,Je++,Yt=void 0,Bt=!0}}}return ve[Re][1]._spread=ln,Je}function s(ve,Re){return Je;function Je(rt){d.call(this,ve(rt),rt),Re&&Re.call(this,rt)}}function u(){this.stack.push({type:"fragment",children:[]})}function d(ve,Re,Je){this.stack[this.stack.length-1].children.push(ve),this.stack.push(ve),this.tokenStack.push([Re,Je||void 0]),ve.position={start:Do(Re.start),end:void 0}}function p(ve){return Re;function Re(Je){ve&&ve.call(this,Je),f.call(this,Je)}}function f(ve,Re){const Je=this.stack.pop(),rt=this.tokenStack.pop();if(rt)rt[0].type!==ve.type&&(Re?Re.call(this,ve,rt[0]):(rt[1]||W0).call(this,ve,rt[0]));else throw new Error("Cannot close `"+ve.type+"` ("+Xs({start:ve.start,end:ve.end})+"): its not open");Je.position.end=Do(ve.end)}function g(){return Hh(this.stack.pop())}function b(){this.data.expectingFirstListItemValue=!0}function T(ve){if(this.data.expectingFirstListItemValue){const Re=this.stack[this.stack.length-2];Re.start=Number.parseInt(this.sliceSerialize(ve),10),this.data.expectingFirstListItemValue=void 0}}function E(){const ve=this.resume(),Re=this.stack[this.stack.length-1];Re.lang=ve}function k(){const ve=this.resume(),Re=this.stack[this.stack.length-1];Re.meta=ve}function I(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function D(){const ve=this.resume(),Re=this.stack[this.stack.length-1];Re.value=ve.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function M(){const ve=this.resume(),Re=this.stack[this.stack.length-1];Re.value=ve.replace(/(\r?\n|\r)$/g,"")}function U(ve){const Re=this.resume(),Je=this.stack[this.stack.length-1];Je.label=Re,Je.identifier=Xr(this.sliceSerialize(ve)).toLowerCase()}function O(){const ve=this.resume(),Re=this.stack[this.stack.length-1];Re.title=ve}function se(){const ve=this.resume(),Re=this.stack[this.stack.length-1];Re.url=ve}function Q(ve){const Re=this.stack[this.stack.length-1];if(!Re.depth){const Je=this.sliceSerialize(ve).length;Re.depth=Je}}function G(){this.data.setextHeadingSlurpLineEnding=!0}function Y(ve){const Re=this.stack[this.stack.length-1];Re.depth=this.sliceSerialize(ve).codePointAt(0)===61?1:2}function me(){this.data.setextHeadingSlurpLineEnding=void 0}function j(ve){const Je=this.stack[this.stack.length-1].children;let rt=Je[Je.length-1];(!rt||rt.type!=="text")&&(rt=an(),rt.position={start:Do(ve.start),end:void 0},Je.push(rt)),this.stack.push(rt)}function B(ve){const Re=this.stack.pop();Re.value+=this.sliceSerialize(ve),Re.position.end=Do(ve.end)}function K(ve){const Re=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Je=Re.children[Re.children.length-1];Je.position.end=Do(ve.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Re.type)&&(j.call(this,ve),B.call(this,ve))}function ce(){this.data.atHardBreak=!0}function xe(){const ve=this.resume(),Re=this.stack[this.stack.length-1];Re.value=ve}function _e(){const ve=this.resume(),Re=this.stack[this.stack.length-1];Re.value=ve}function Pe(){const ve=this.resume(),Re=this.stack[this.stack.length-1];Re.value=ve}function ue(){const ve=this.stack[this.stack.length-1];if(this.data.inReference){const Re=this.data.referenceType||"shortcut";ve.type+="Reference",ve.referenceType=Re,delete ve.url,delete ve.title}else delete ve.identifier,delete ve.label;this.data.referenceType=void 0}function Ee(){const ve=this.stack[this.stack.length-1];if(this.data.inReference){const Re=this.data.referenceType||"shortcut";ve.type+="Reference",ve.referenceType=Re,delete ve.url,delete ve.title}else delete ve.identifier,delete ve.label;this.data.referenceType=void 0}function Me(ve){const Re=this.sliceSerialize(ve),Je=this.stack[this.stack.length-2];Je.label=VA(Re),Je.identifier=Xr(Re).toLowerCase()}function Qe(){const ve=this.stack[this.stack.length-1],Re=this.resume(),Je=this.stack[this.stack.length-1];if(this.data.inReference=!0,Je.type==="link"){const rt=ve.children;Je.children=rt}else Je.alt=Re}function V(){const ve=this.resume(),Re=this.stack[this.stack.length-1];Re.url=ve}function z(){const ve=this.resume(),Re=this.stack[this.stack.length-1];Re.title=ve}function J(){this.data.inReference=void 0}function L(){this.data.referenceType="collapsed"}function Ae(ve){const Re=this.resume(),Je=this.stack[this.stack.length-1];Je.label=Re,Je.identifier=Xr(this.sliceSerialize(ve)).toLowerCase(),this.data.referenceType="full"}function He(ve){this.data.characterReferenceType=ve.type}function qe(ve){const Re=this.sliceSerialize(ve),Je=this.data.characterReferenceType;let rt;Je?(rt=jb(Re,Je==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):rt=Fh(Re);const dt=this.stack[this.stack.length-1];dt.value+=rt}function We(ve){const Re=this.stack.pop();Re.position.end=Do(ve.end)}function st(ve){B.call(this,ve);const Re=this.stack[this.stack.length-1];Re.url=this.sliceSerialize(ve)}function Ne(ve){B.call(this,ve);const Re=this.stack[this.stack.length-1];Re.url="mailto:"+this.sliceSerialize(ve)}function Mt(){return{type:"blockquote",children:[]}}function Tt(){return{type:"code",lang:null,meta:null,value:""}}function pt(){return{type:"inlineCode",value:""}}function dr(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function tn(){return{type:"emphasis",children:[]}}function hn(){return{type:"heading",depth:0,children:[]}}function Jn(){return{type:"break"}}function ei(){return{type:"html",value:""}}function Xi(){return{type:"image",title:null,url:"",alt:null}}function ti(){return{type:"link",title:null,url:"",children:[]}}function pr(ve){return{type:"list",ordered:ve.type==="listOrdered",start:null,spread:ve._spread,children:[]}}function Tn(ve){return{type:"listItem",spread:ve._spread,checked:null,children:[]}}function Uo(){return{type:"paragraph",children:[]}}function Vr(){return{type:"strong",children:[]}}function an(){return{type:"text",value:""}}function Er(){return{type:"thematicBreak"}}}function Do(e){return{line:e.line,column:e.column,offset:e.offset}}function Wb(e,t){let n=-1;for(;++n<t.length;){const i=t[n];Array.isArray(i)?Wb(e,i):JA(e,i)}}function JA(e,t){let n;for(n in t)if(Qb.call(t,n))switch(n){case"canContainEols":{const i=t[n];i&&e[n].push(...i);break}case"transforms":{const i=t[n];i&&e[n].push(...i);break}case"enter":case"exit":{const i=t[n];i&&Object.assign(e[n],i);break}}}function W0(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Xs({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Xs({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Xs({start:t.start,end:t.end})+") is still open")}function $A(e){const t=this;t.parser=n;function n(i){return YA(i,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function XA(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function QA(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function WA(e,t){const n=t.value?t.value+`
`:"",i={};t.lang&&(i.className=["language-"+t.lang]);let a={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a}function ZA(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ek(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function tk(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",i=String(t.identifier).toUpperCase(),a=Ml(i.toLowerCase()),s=e.footnoteOrder.indexOf(i);let u,d=e.footnoteCounts.get(i);d===void 0?(d=0,e.footnoteOrder.push(i),u=e.footnoteOrder.length):u=s+1,d+=1,e.footnoteCounts.set(i,d);const p={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+a,id:n+"fnref-"+a+(d>1?"-"+d:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(u)}]};e.patch(t,p);const f={type:"element",tagName:"sup",properties:{},children:[p]};return e.patch(t,f),e.applyData(t,f)}function nk(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function rk(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Zb(e,t){const n=t.referenceType;let i="]";if(n==="collapsed"?i+="[]":n==="full"&&(i+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+i}];const a=e.all(t),s=a[0];s&&s.type==="text"?s.value="["+s.value:a.unshift({type:"text",value:"["});const u=a[a.length-1];return u&&u.type==="text"?u.value+=i:a.push({type:"text",value:i}),a}function ik(e,t){const n=String(t.identifier).toUpperCase(),i=e.definitionById.get(n);if(!i)return Zb(e,t);const a={src:Ml(i.url||""),alt:t.alt};i.title!==null&&i.title!==void 0&&(a.title=i.title);const s={type:"element",tagName:"img",properties:a,children:[]};return e.patch(t,s),e.applyData(t,s)}function ok(e,t){const n={src:Ml(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const i={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,i),e.applyData(t,i)}function ak(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,i),e.applyData(t,i)}function lk(e,t){const n=String(t.identifier).toUpperCase(),i=e.definitionById.get(n);if(!i)return Zb(e,t);const a={href:Ml(i.url||"")};i.title!==null&&i.title!==void 0&&(a.title=i.title);const s={type:"element",tagName:"a",properties:a,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function sk(e,t){const n={href:Ml(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const i={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function uk(e,t,n){const i=e.all(t),a=n?ck(n):ew(t),s={},u=[];if(typeof t.checked=="boolean"){const g=i[0];let b;g&&g.type==="element"&&g.tagName==="p"?b=g:(b={type:"element",tagName:"p",properties:{},children:[]},i.unshift(b)),b.children.length>0&&b.children.unshift({type:"text",value:" "}),b.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let d=-1;for(;++d<i.length;){const g=i[d];(a||d!==0||g.type!=="element"||g.tagName!=="p")&&u.push({type:"text",value:`
`}),g.type==="element"&&g.tagName==="p"&&!a?u.push(...g.children):u.push(g)}const p=i[i.length-1];p&&(a||p.type!=="element"||p.tagName!=="p")&&u.push({type:"text",value:`
`});const f={type:"element",tagName:"li",properties:s,children:u};return e.patch(t,f),e.applyData(t,f)}function ck(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let i=-1;for(;!t&&++i<n.length;)t=ew(n[i])}return t}function ew(e){const t=e.spread;return t??e.children.length>1}function fk(e,t){const n={},i=e.all(t);let a=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++a<i.length;){const u=i[a];if(u.type==="element"&&u.tagName==="li"&&u.properties&&Array.isArray(u.properties.className)&&u.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function dk(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function pk(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function hk(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function mk(e,t){const n=e.all(t),i=n.shift(),a=[];if(i){const u={type:"element",tagName:"thead",properties:{},children:e.wrap([i],!0)};e.patch(t.children[0],u),a.push(u)}if(n.length>0){const u={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},d=Bh(t.children[1]),p=Ib(t.children[t.children.length-1]);d&&p&&(u.position={start:d,end:p}),a.push(u)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(a,!0)};return e.patch(t,s),e.applyData(t,s)}function gk(e,t,n){const i=n?n.children:void 0,s=(i?i.indexOf(t):1)===0?"th":"td",u=n&&n.type==="table"?n.align:void 0,d=u?u.length:t.children.length;let p=-1;const f=[];for(;++p<d;){const b=t.children[p],T={},E=u?u[p]:void 0;E&&(T.align=E);let k={type:"element",tagName:s,properties:T,children:[]};b&&(k.children=e.all(b),e.patch(b,k),k=e.applyData(b,k)),f.push(k)}const g={type:"element",tagName:"tr",properties:{},children:e.wrap(f,!0)};return e.patch(t,g),e.applyData(t,g)}function yk(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Z0=9,ev=32;function vk(e){const t=String(e),n=/\r?\n|\r/g;let i=n.exec(t),a=0;const s=[];for(;i;)s.push(tv(t.slice(a,i.index),a>0,!0),i[0]),a=i.index+i[0].length,i=n.exec(t);return s.push(tv(t.slice(a),a>0,!1)),s.join("")}function tv(e,t,n){let i=0,a=e.length;if(t){let s=e.codePointAt(i);for(;s===Z0||s===ev;)i++,s=e.codePointAt(i)}if(n){let s=e.codePointAt(a-1);for(;s===Z0||s===ev;)a--,s=e.codePointAt(a-1)}return a>i?e.slice(i,a):""}function xk(e,t){const n={type:"text",value:vk(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function bk(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const wk={blockquote:XA,break:QA,code:WA,delete:ZA,emphasis:ek,footnoteReference:tk,heading:nk,html:rk,imageReference:ik,image:ok,inlineCode:ak,linkReference:lk,link:sk,listItem:uk,list:fk,paragraph:dk,root:pk,strong:hk,table:mk,tableCell:yk,tableRow:gk,text:xk,thematicBreak:bk,toml:Mc,yaml:Mc,definition:Mc,footnoteDefinition:Mc};function Mc(){}const tw=-1,hf=0,Ws=1,Kc=2,Gh=3,Yh=4,Kh=5,Jh=6,nw=7,rw=8,nv=typeof self=="object"?self:globalThis,Sk=(e,t)=>{const n=(a,s)=>(e.set(s,a),a),i=a=>{if(e.has(a))return e.get(a);const[s,u]=t[a];switch(s){case hf:case tw:return n(u,a);case Ws:{const d=n([],a);for(const p of u)d.push(i(p));return d}case Kc:{const d=n({},a);for(const[p,f]of u)d[i(p)]=i(f);return d}case Gh:return n(new Date(u),a);case Yh:{const{source:d,flags:p}=u;return n(new RegExp(d,p),a)}case Kh:{const d=n(new Map,a);for(const[p,f]of u)d.set(i(p),i(f));return d}case Jh:{const d=n(new Set,a);for(const p of u)d.add(i(p));return d}case nw:{const{name:d,message:p}=u;return n(new nv[d](p),a)}case rw:return n(BigInt(u),a);case"BigInt":return n(Object(BigInt(u)),a);case"ArrayBuffer":return n(new Uint8Array(u).buffer,u);case"DataView":{const{buffer:d}=new Uint8Array(u);return n(new DataView(d),u)}}return n(new nv[s](u),a)};return i},rv=e=>Sk(new Map,e)(0),yl="",{toString:Tk}={},{keys:Ck}=Object,Hs=e=>{const t=typeof e;if(t!=="object"||!e)return[hf,t];const n=Tk.call(e).slice(8,-1);switch(n){case"Array":return[Ws,yl];case"Object":return[Kc,yl];case"Date":return[Gh,yl];case"RegExp":return[Yh,yl];case"Map":return[Kh,yl];case"Set":return[Jh,yl];case"DataView":return[Ws,n]}return n.includes("Array")?[Ws,n]:n.includes("Error")?[nw,n]:[Kc,n]},Rc=([e,t])=>e===hf&&(t==="function"||t==="symbol"),Ek=(e,t,n,i)=>{const a=(u,d)=>{const p=i.push(u)-1;return n.set(d,p),p},s=u=>{if(n.has(u))return n.get(u);let[d,p]=Hs(u);switch(d){case hf:{let g=u;switch(p){case"bigint":d=rw,g=u.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+p);g=null;break;case"undefined":return a([tw],u)}return a([d,g],u)}case Ws:{if(p){let T=u;return p==="DataView"?T=new Uint8Array(u.buffer):p==="ArrayBuffer"&&(T=new Uint8Array(u)),a([p,[...T]],u)}const g=[],b=a([d,g],u);for(const T of u)g.push(s(T));return b}case Kc:{if(p)switch(p){case"BigInt":return a([p,u.toString()],u);case"Boolean":case"Number":case"String":return a([p,u.valueOf()],u)}if(t&&"toJSON"in u)return s(u.toJSON());const g=[],b=a([d,g],u);for(const T of Ck(u))(e||!Rc(Hs(u[T])))&&g.push([s(T),s(u[T])]);return b}case Gh:return a([d,u.toISOString()],u);case Yh:{const{source:g,flags:b}=u;return a([d,{source:g,flags:b}],u)}case Kh:{const g=[],b=a([d,g],u);for(const[T,E]of u)(e||!(Rc(Hs(T))||Rc(Hs(E))))&&g.push([s(T),s(E)]);return b}case Jh:{const g=[],b=a([d,g],u);for(const T of u)(e||!Rc(Hs(T)))&&g.push(s(T));return b}}const{message:f}=u;return a([d,{name:p,message:f}],u)};return s},iv=(e,{json:t,lossy:n}={})=>{const i=[];return Ek(!(t||n),!!t,new Map,i)(e),i},Jc=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?rv(iv(e,t)):structuredClone(e):(e,t)=>rv(iv(e,t));function _k(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Ak(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function kk(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||_k,i=e.options.footnoteBackLabel||Ak,a=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",u=e.options.footnoteLabelProperties||{className:["sr-only"]},d=[];let p=-1;for(;++p<e.footnoteOrder.length;){const f=e.footnoteById.get(e.footnoteOrder[p]);if(!f)continue;const g=e.all(f),b=String(f.identifier).toUpperCase(),T=Ml(b.toLowerCase());let E=0;const k=[],I=e.footnoteCounts.get(b);for(;I!==void 0&&++E<=I;){k.length>0&&k.push({type:"text",value:" "});let U=typeof n=="string"?n:n(p,E);typeof U=="string"&&(U={type:"text",value:U}),k.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+T+(E>1?"-"+E:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(p,E),className:["data-footnote-backref"]},children:Array.isArray(U)?U:[U]})}const D=g[g.length-1];if(D&&D.type==="element"&&D.tagName==="p"){const U=D.children[D.children.length-1];U&&U.type==="text"?U.value+=" ":D.children.push({type:"text",value:" "}),D.children.push(...k)}else g.push(...k);const M={type:"element",tagName:"li",properties:{id:t+"fn-"+T},children:e.wrap(g,!0)};e.patch(f,M),d.push(M)}if(d.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Jc(u),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(d,!0)},{type:"text",value:`
`}]}}const mf=(function(e){if(e==null)return Dk;if(typeof e=="function")return gf(e);if(typeof e=="object")return Array.isArray(e)?Nk(e):Mk(e);if(typeof e=="string")return Rk(e);throw new Error("Expected function, string, or object as test")});function Nk(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=mf(e[n]);return gf(i);function i(...a){let s=-1;for(;++s<t.length;)if(t[s].apply(this,a))return!0;return!1}}function Mk(e){const t=e;return gf(n);function n(i){const a=i;let s;for(s in e)if(a[s]!==t[s])return!1;return!0}}function Rk(e){return gf(t);function t(n){return n&&n.type===e}}function gf(e){return t;function t(n,i,a){return!!(Ik(n)&&e.call(this,n,typeof i=="number"?i:void 0,a||void 0))}}function Dk(){return!0}function Ik(e){return e!==null&&typeof e=="object"&&"type"in e}const iw=[],Pk=!0,rh=!1,Lk="skip";function ow(e,t,n,i){let a;typeof t=="function"&&typeof n!="function"?(i=n,n=t):a=t;const s=mf(a),u=i?-1:1;d(e,void 0,[])();function d(p,f,g){const b=p&&typeof p=="object"?p:{};if(typeof b.type=="string"){const E=typeof b.tagName=="string"?b.tagName:typeof b.name=="string"?b.name:void 0;Object.defineProperty(T,"name",{value:"node ("+(p.type+(E?"<"+E+">":""))+")"})}return T;function T(){let E=iw,k,I,D;if((!t||s(p,f,g[g.length-1]||void 0))&&(E=Uk(n(p,g)),E[0]===rh))return E;if("children"in p&&p.children){const M=p;if(M.children&&E[0]!==Lk)for(I=(i?M.children.length:-1)+u,D=g.concat(M);I>-1&&I<M.children.length;){const U=M.children[I];if(k=d(U,I,D)(),k[0]===rh)return k;I=typeof k[1]=="number"?k[1]:I+u}}return E}}}function Uk(e){return Array.isArray(e)?e:typeof e=="number"?[Pk,e]:e==null?iw:[e]}function $h(e,t,n,i){let a,s,u;typeof t=="function"&&typeof n!="function"?(s=void 0,u=t,a=n):(s=t,u=n,a=i),ow(e,s,d,a);function d(p,f){const g=f[f.length-1],b=g?g.children.indexOf(p):void 0;return u(p,b,g)}}const ih={}.hasOwnProperty,Ok={};function Bk(e,t){const n=t||Ok,i=new Map,a=new Map,s=new Map,u={...wk,...n.handlers},d={all:f,applyData:qk,definitionById:i,footnoteById:a,footnoteCounts:s,footnoteOrder:[],handlers:u,one:p,options:n,patch:zk,wrap:Hk};return $h(e,function(g){if(g.type==="definition"||g.type==="footnoteDefinition"){const b=g.type==="definition"?i:a,T=String(g.identifier).toUpperCase();b.has(T)||b.set(T,g)}}),d;function p(g,b){const T=g.type,E=d.handlers[T];if(ih.call(d.handlers,T)&&E)return E(d,g,b);if(d.options.passThrough&&d.options.passThrough.includes(T)){if("children"in g){const{children:I,...D}=g,M=Jc(D);return M.children=d.all(g),M}return Jc(g)}return(d.options.unknownHandler||jk)(d,g,b)}function f(g){const b=[];if("children"in g){const T=g.children;let E=-1;for(;++E<T.length;){const k=d.one(T[E],g);if(k){if(E&&T[E-1].type==="break"&&(!Array.isArray(k)&&k.type==="text"&&(k.value=ov(k.value)),!Array.isArray(k)&&k.type==="element")){const I=k.children[0];I&&I.type==="text"&&(I.value=ov(I.value))}Array.isArray(k)?b.push(...k):b.push(k)}}}return b}}function zk(e,t){e.position&&(t.position=AE(e))}function qk(e,t){let n=t;if(e&&e.data){const i=e.data.hName,a=e.data.hChildren,s=e.data.hProperties;if(typeof i=="string")if(n.type==="element")n.tagName=i;else{const u="children"in n?n.children:[n];n={type:"element",tagName:i,properties:{},children:u}}n.type==="element"&&s&&Object.assign(n.properties,Jc(s)),"children"in n&&n.children&&a!==null&&a!==void 0&&(n.children=a)}return n}function jk(e,t){const n=t.data||{},i="value"in t&&!(ih.call(n,"hProperties")||ih.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function Hk(e,t){const n=[];let i=-1;for(t&&n.push({type:"text",value:`
`});++i<e.length;)i&&n.push({type:"text",value:`
`}),n.push(e[i]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function ov(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function av(e,t){const n=Bk(e,t),i=n.one(e,void 0),a=kk(n),s=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return a&&s.children.push({type:"text",value:`
`},a),s}function Fk(e,t){return e&&"run"in e?async function(n,i){const a=av(n,{file:i,...t});await e.run(a,i)}:function(n,i){return av(n,{file:i,...e||t})}}function lv(e){if(e)throw e}var kp,sv;function Vk(){if(sv)return kp;sv=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=function(f){return typeof Array.isArray=="function"?Array.isArray(f):t.call(f)==="[object Array]"},s=function(f){if(!f||t.call(f)!=="[object Object]")return!1;var g=e.call(f,"constructor"),b=f.constructor&&f.constructor.prototype&&e.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!g&&!b)return!1;var T;for(T in f);return typeof T>"u"||e.call(f,T)},u=function(f,g){n&&g.name==="__proto__"?n(f,g.name,{enumerable:!0,configurable:!0,value:g.newValue,writable:!0}):f[g.name]=g.newValue},d=function(f,g){if(g==="__proto__")if(e.call(f,g)){if(i)return i(f,g).value}else return;return f[g]};return kp=function p(){var f,g,b,T,E,k,I=arguments[0],D=1,M=arguments.length,U=!1;for(typeof I=="boolean"&&(U=I,I=arguments[1]||{},D=2),(I==null||typeof I!="object"&&typeof I!="function")&&(I={});D<M;++D)if(f=arguments[D],f!=null)for(g in f)b=d(I,g),T=d(f,g),I!==T&&(U&&T&&(s(T)||(E=a(T)))?(E?(E=!1,k=b&&a(b)?b:[]):k=b&&s(b)?b:{},u(I,{name:g,newValue:p(U,k,T)})):typeof T<"u"&&u(I,{name:g,newValue:T}));return I},kp}var Gk=Vk();const Np=ou(Gk);function oh(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Yk(){const e=[],t={run:n,use:i};return t;function n(...a){let s=-1;const u=a.pop();if(typeof u!="function")throw new TypeError("Expected function as last argument, not "+u);d(null,...a);function d(p,...f){const g=e[++s];let b=-1;if(p){u(p);return}for(;++b<a.length;)(f[b]===null||f[b]===void 0)&&(f[b]=a[b]);a=f,g?Kk(g,d)(...f):u(null,...f)}}function i(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),t}}function Kk(e,t){let n;return i;function i(...u){const d=e.length>u.length;let p;d&&u.push(a);try{p=e.apply(this,u)}catch(f){const g=f;if(d&&n)throw g;return a(g)}d||(p&&p.then&&typeof p.then=="function"?p.then(s,a):p instanceof Error?a(p):s(p))}function a(u,...d){n||(n=!0,t(u,...d))}function s(u){a(null,u)}}const mi={basename:Jk,dirname:$k,extname:Xk,join:Qk,sep:"/"};function Jk(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');du(e);let n=0,i=-1,a=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;a--;)if(e.codePointAt(a)===47){if(s){n=a+1;break}}else i<0&&(s=!0,i=a+1);return i<0?"":e.slice(n,i)}if(t===e)return"";let u=-1,d=t.length-1;for(;a--;)if(e.codePointAt(a)===47){if(s){n=a+1;break}}else u<0&&(s=!0,u=a+1),d>-1&&(e.codePointAt(a)===t.codePointAt(d--)?d<0&&(i=a):(d=-1,i=u));return n===i?i=u:i<0&&(i=e.length),e.slice(n,i)}function $k(e){if(du(e),e.length===0)return".";let t=-1,n=e.length,i;for(;--n;)if(e.codePointAt(n)===47){if(i){t=n;break}}else i||(i=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Xk(e){du(e);let t=e.length,n=-1,i=0,a=-1,s=0,u;for(;t--;){const d=e.codePointAt(t);if(d===47){if(u){i=t+1;break}continue}n<0&&(u=!0,n=t+1),d===46?a<0?a=t:s!==1&&(s=1):a>-1&&(s=-1)}return a<0||n<0||s===0||s===1&&a===n-1&&a===i+1?"":e.slice(a,n)}function Qk(...e){let t=-1,n;for(;++t<e.length;)du(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Wk(n)}function Wk(e){du(e);const t=e.codePointAt(0)===47;let n=Zk(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Zk(e,t){let n="",i=0,a=-1,s=0,u=-1,d,p;for(;++u<=e.length;){if(u<e.length)d=e.codePointAt(u);else{if(d===47)break;d=47}if(d===47){if(!(a===u-1||s===1))if(a!==u-1&&s===2){if(n.length<2||i!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(p=n.lastIndexOf("/"),p!==n.length-1){p<0?(n="",i=0):(n=n.slice(0,p),i=n.length-1-n.lastIndexOf("/")),a=u,s=0;continue}}else if(n.length>0){n="",i=0,a=u,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+e.slice(a+1,u):n=e.slice(a+1,u),i=u-a-1;a=u,s=0}else d===46&&s>-1?s++:s=-1}return n}function du(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const eN={cwd:tN};function tN(){return"/"}function ah(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function nN(e){if(typeof e=="string")e=new URL(e);else if(!ah(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return rN(e)}function rN(e){if(e.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const i=t.codePointAt(n+2);if(i===70||i===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(t)}const Mp=["history","path","basename","stem","extname","dirname"];class aw{constructor(t){let n;t?ah(t)?n={path:t}:typeof t=="string"||iN(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":eN.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<Mp.length;){const s=Mp[i];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let a;for(a in n)Mp.includes(a)||(this[a]=n[a])}get basename(){return typeof this.path=="string"?mi.basename(this.path):void 0}set basename(t){Dp(t,"basename"),Rp(t,"basename"),this.path=mi.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?mi.dirname(this.path):void 0}set dirname(t){uv(this.basename,"dirname"),this.path=mi.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?mi.extname(this.path):void 0}set extname(t){if(Rp(t,"extname"),uv(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=mi.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){ah(t)&&(t=nN(t)),Dp(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?mi.basename(this.path,this.extname):void 0}set stem(t){Dp(t,"stem"),Rp(t,"stem"),this.path=mi.join(this.dirname||"",t+(this.extname||""))}fail(t,n,i){const a=this.message(t,n,i);throw a.fatal=!0,a}info(t,n,i){const a=this.message(t,n,i);return a.fatal=void 0,a}message(t,n,i){const a=new Kn(t,n,i);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Rp(e,t){if(e&&e.includes(mi.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+mi.sep+"`")}function Dp(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function uv(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function iN(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const oN=(function(e){const i=this.constructor.prototype,a=i[e],s=function(){return a.apply(s,arguments)};return Object.setPrototypeOf(s,i),s}),aN={}.hasOwnProperty;class Xh extends oN{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Yk()}copy(){const t=new Xh;let n=-1;for(;++n<this.attachers.length;){const i=this.attachers[n];t.use(...i)}return t.data(Np(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Lp("data",this.frozen),this.namespace[t]=n,this):aN.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Lp("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const a=n.call(t,...i);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Dc(t),i=this.parser||this.Parser;return Ip("parse",i),i(String(n),n)}process(t,n){const i=this;return this.freeze(),Ip("process",this.parser||this.Parser),Pp("process",this.compiler||this.Compiler),n?a(void 0,n):new Promise(a);function a(s,u){const d=Dc(t),p=i.parse(d);i.run(p,d,function(g,b,T){if(g||!b||!T)return f(g);const E=b,k=i.stringify(E,T);uN(k)?T.value=k:T.result=k,f(g,T)});function f(g,b){g||!b?u(g):s?s(b):n(void 0,b)}}}processSync(t){let n=!1,i;return this.freeze(),Ip("processSync",this.parser||this.Parser),Pp("processSync",this.compiler||this.Compiler),this.process(t,a),fv("processSync","process",n),i;function a(s,u){n=!0,lv(s),i=u}}run(t,n,i){cv(t),this.freeze();const a=this.transformers;return!i&&typeof n=="function"&&(i=n,n=void 0),i?s(void 0,i):new Promise(s);function s(u,d){const p=Dc(n);a.run(t,p,f);function f(g,b,T){const E=b||t;g?d(g):u?u(E):i(void 0,E,T)}}}runSync(t,n){let i=!1,a;return this.run(t,n,s),fv("runSync","run",i),a;function s(u,d){lv(u),a=d,i=!0}}stringify(t,n){this.freeze();const i=Dc(n),a=this.compiler||this.Compiler;return Pp("stringify",a),cv(t),a(t,i)}use(t,...n){const i=this.attachers,a=this.namespace;if(Lp("use",this.frozen),t!=null)if(typeof t=="function")p(t,n);else if(typeof t=="object")Array.isArray(t)?d(t):u(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(f){if(typeof f=="function")p(f,[]);else if(typeof f=="object")if(Array.isArray(f)){const[g,...b]=f;p(g,b)}else u(f);else throw new TypeError("Expected usable value, not `"+f+"`")}function u(f){if(!("plugins"in f)&&!("settings"in f))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");d(f.plugins),f.settings&&(a.settings=Np(!0,a.settings,f.settings))}function d(f){let g=-1;if(f!=null)if(Array.isArray(f))for(;++g<f.length;){const b=f[g];s(b)}else throw new TypeError("Expected a list of plugins, not `"+f+"`")}function p(f,g){let b=-1,T=-1;for(;++b<i.length;)if(i[b][0]===f){T=b;break}if(T===-1)i.push([f,...g]);else if(g.length>0){let[E,...k]=g;const I=i[T][1];oh(I)&&oh(E)&&(E=Np(!0,I,E)),i[T]=[f,E,...k]}}}}const lN=new Xh().freeze();function Ip(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Pp(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Lp(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function cv(e){if(!oh(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function fv(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Dc(e){return sN(e)?e:new aw(e)}function sN(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function uN(e){return typeof e=="string"||cN(e)}function cN(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const fN="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",dv=[],pv={allowDangerousHtml:!0},dN=/^(https?|ircs?|mailto|xmpp)$/i,pN=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function ma(e){const t=hN(e),n=mN(e);return gN(t.runSync(t.parse(n),n),e)}function hN(e){const t=e.rehypePlugins||dv,n=e.remarkPlugins||dv,i=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...pv}:pv;return lN().use($A).use(n).use(Fk,i).use(t)}function mN(e){const t=e.children||"",n=new aw;return typeof t=="string"&&(n.value=t),n}function gN(e,t){const n=t.allowedElements,i=t.allowElement,a=t.components,s=t.disallowedElements,u=t.skipHtml,d=t.unwrapDisallowed,p=t.urlTransform||yN;for(const g of pN)Object.hasOwn(t,g.from)&&(""+g.from+(g.to?"use `"+g.to+"` instead":"remove it")+fN+g.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),$h(e,f),DE(e,{Fragment:y.Fragment,components:a,ignoreInvalidStyle:!0,jsx:y.jsx,jsxs:y.jsxs,passKeys:!0,passNode:!0});function f(g,b,T){if(g.type==="raw"&&T&&typeof b=="number")return u?T.children.splice(b,1):T.children[b]={type:"text",value:g.value},b;if(g.type==="element"){let E;for(E in Ep)if(Object.hasOwn(Ep,E)&&Object.hasOwn(g.properties,E)){const k=g.properties[E],I=Ep[E];(I===null||I.includes(g.tagName))&&(g.properties[E]=p(String(k||""),E,g))}}if(g.type==="element"){let E=n?!n.includes(g.tagName):s?s.includes(g.tagName):!1;if(!E&&i&&typeof b=="number"&&(E=!i(g,b,T)),E&&T&&typeof b=="number")return d&&g.children?T.children.splice(b,1,...g.children):T.children.splice(b,1),b}}}function yN(e){const t=e.indexOf(":"),n=e.indexOf("?"),i=e.indexOf("#"),a=e.indexOf("/");return t===-1||a!==-1&&t>a||n!==-1&&t>n||i!==-1&&t>i||dN.test(e.slice(0,t))?e:""}function hv(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let i=0,a=n.indexOf(t);for(;a!==-1;)i++,a=n.indexOf(t,a+t.length);return i}function vN(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function xN(e,t,n){const a=mf((n||{}).ignore||[]),s=bN(t);let u=-1;for(;++u<s.length;)ow(e,"text",d);function d(f,g){let b=-1,T;for(;++b<g.length;){const E=g[b],k=T?T.children:void 0;if(a(E,k?k.indexOf(E):void 0,T))return;T=E}if(T)return p(f,g)}function p(f,g){const b=g[g.length-1],T=s[u][0],E=s[u][1];let k=0;const D=b.children.indexOf(f);let M=!1,U=[];T.lastIndex=0;let O=T.exec(f.value);for(;O;){const se=O.index,Q={index:O.index,input:O.input,stack:[...g,f]};let G=E(...O,Q);if(typeof G=="string"&&(G=G.length>0?{type:"text",value:G}:void 0),G===!1?T.lastIndex=se+1:(k!==se&&U.push({type:"text",value:f.value.slice(k,se)}),Array.isArray(G)?U.push(...G):G&&U.push(G),k=se+O[0].length,M=!0),!T.global)break;O=T.exec(f.value)}return M?(k<f.value.length&&U.push({type:"text",value:f.value.slice(k)}),b.children.splice(D,1,...U)):U=[f],D+U.length}}function bN(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let i=-1;for(;++i<n.length;){const a=n[i];t.push([wN(a[0]),SN(a[1])])}return t}function wN(e){return typeof e=="string"?new RegExp(vN(e),"g"):e}function SN(e){return typeof e=="function"?e:function(){return e}}const Up="phrasing",Op=["autolink","link","image","label"];function TN(){return{transforms:[MN],enter:{literalAutolink:EN,literalAutolinkEmail:Bp,literalAutolinkHttp:Bp,literalAutolinkWww:Bp},exit:{literalAutolink:NN,literalAutolinkEmail:kN,literalAutolinkHttp:_N,literalAutolinkWww:AN}}}function CN(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Up,notInConstruct:Op},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Up,notInConstruct:Op},{character:":",before:"[ps]",after:"\\/",inConstruct:Up,notInConstruct:Op}]}}function EN(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Bp(e){this.config.enter.autolinkProtocol.call(this,e)}function _N(e){this.config.exit.autolinkProtocol.call(this,e)}function AN(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function kN(e){this.config.exit.autolinkEmail.call(this,e)}function NN(e){this.exit(e)}function MN(e){xN(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,RN],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),DN]],{ignore:["link","linkReference"]})}function RN(e,t,n,i,a){let s="";if(!lw(a)||(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!IN(n)))return!1;const u=PN(n+i);if(!u[0])return!1;const d={type:"link",title:null,url:s+t+u[0],children:[{type:"text",value:t+u[0]}]};return u[1]?[d,{type:"text",value:u[1]}]:d}function DN(e,t,n,i){return!lw(i,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function IN(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function PN(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],i=n.indexOf(")");const a=hv(e,"(");let s=hv(e,")");for(;i!==-1&&a>s;)e+=n.slice(0,i+1),n=n.slice(i+1),i=n.indexOf(")"),s++;return[e,n]}function lw(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||ya(n)||df(n))&&(!t||n!==47)}sw.peek=FN;function LN(){this.buffer()}function UN(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function ON(){this.buffer()}function BN(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function zN(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Xr(this.sliceSerialize(e)).toLowerCase(),n.label=t}function qN(e){this.exit(e)}function jN(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Xr(this.sliceSerialize(e)).toLowerCase(),n.label=t}function HN(e){this.exit(e)}function FN(){return"["}function sw(e,t,n,i){const a=n.createTracker(i);let s=a.move("[^");const u=n.enter("footnoteReference"),d=n.enter("reference");return s+=a.move(n.safe(n.associationId(e),{after:"]",before:s})),d(),u(),s+=a.move("]"),s}function VN(){return{enter:{gfmFootnoteCallString:LN,gfmFootnoteCall:UN,gfmFootnoteDefinitionLabelString:ON,gfmFootnoteDefinition:BN},exit:{gfmFootnoteCallString:zN,gfmFootnoteCall:qN,gfmFootnoteDefinitionLabelString:jN,gfmFootnoteDefinition:HN}}}function GN(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:sw},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(i,a,s,u){const d=s.createTracker(u);let p=d.move("[^");const f=s.enter("footnoteDefinition"),g=s.enter("label");return p+=d.move(s.safe(s.associationId(i),{before:p,after:"]"})),g(),p+=d.move("]:"),i.children&&i.children.length>0&&(d.shift(4),p+=d.move((t?`
`:" ")+s.indentLines(s.containerFlow(i,d.current()),t?uw:YN))),f(),p}}function YN(e,t,n){return t===0?e:uw(e,t,n)}function uw(e,t,n){return(n?"":"    ")+e}const KN=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];cw.peek=WN;function JN(){return{canContainEols:["delete"],enter:{strikethrough:XN},exit:{strikethrough:QN}}}function $N(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:KN}],handlers:{delete:cw}}}function XN(e){this.enter({type:"delete",children:[]},e)}function QN(e){this.exit(e)}function cw(e,t,n,i){const a=n.createTracker(i),s=n.enter("strikethrough");let u=a.move("~~");return u+=n.containerPhrasing(e,{...a.current(),before:u,after:"~"}),u+=a.move("~~"),s(),u}function WN(){return"~"}function ZN(e){return e.length}function eM(e,t){const n=t||{},i=(n.align||[]).concat(),a=n.stringLength||ZN,s=[],u=[],d=[],p=[];let f=0,g=-1;for(;++g<e.length;){const I=[],D=[];let M=-1;for(e[g].length>f&&(f=e[g].length);++M<e[g].length;){const U=tM(e[g][M]);if(n.alignDelimiters!==!1){const O=a(U);D[M]=O,(p[M]===void 0||O>p[M])&&(p[M]=O)}I.push(U)}u[g]=I,d[g]=D}let b=-1;if(typeof i=="object"&&"length"in i)for(;++b<f;)s[b]=mv(i[b]);else{const I=mv(i);for(;++b<f;)s[b]=I}b=-1;const T=[],E=[];for(;++b<f;){const I=s[b];let D="",M="";I===99?(D=":",M=":"):I===108?D=":":I===114&&(M=":");let U=n.alignDelimiters===!1?1:Math.max(1,p[b]-D.length-M.length);const O=D+"-".repeat(U)+M;n.alignDelimiters!==!1&&(U=D.length+U+M.length,U>p[b]&&(p[b]=U),E[b]=U),T[b]=O}u.splice(1,0,T),d.splice(1,0,E),g=-1;const k=[];for(;++g<u.length;){const I=u[g],D=d[g];b=-1;const M=[];for(;++b<f;){const U=I[b]||"";let O="",se="";if(n.alignDelimiters!==!1){const Q=p[b]-(D[b]||0),G=s[b];G===114?O=" ".repeat(Q):G===99?Q%2?(O=" ".repeat(Q/2+.5),se=" ".repeat(Q/2-.5)):(O=" ".repeat(Q/2),se=O):se=" ".repeat(Q)}n.delimiterStart!==!1&&!b&&M.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&U==="")&&(n.delimiterStart!==!1||b)&&M.push(" "),n.alignDelimiters!==!1&&M.push(O),M.push(U),n.alignDelimiters!==!1&&M.push(se),n.padding!==!1&&M.push(" "),(n.delimiterEnd!==!1||b!==f-1)&&M.push("|")}k.push(n.delimiterEnd===!1?M.join("").replace(/ +$/,""):M.join(""))}return k.join(`
`)}function tM(e){return e==null?"":String(e)}function mv(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function nM(e,t,n,i){const a=n.enter("blockquote"),s=n.createTracker(i);s.move("> "),s.shift(2);const u=n.indentLines(n.containerFlow(e,s.current()),rM);return a(),u}function rM(e,t,n){return">"+(n?"":" ")+e}function iM(e,t){return gv(e,t.inConstruct,!0)&&!gv(e,t.notInConstruct,!1)}function gv(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let i=-1;for(;++i<t.length;)if(e.includes(t[i]))return!0;return!1}function yv(e,t,n,i){let a=-1;for(;++a<n.unsafe.length;)if(n.unsafe[a].character===`
`&&iM(n.stack,n.unsafe[a]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function oM(e,t){const n=String(e);let i=n.indexOf(t),a=i,s=0,u=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===a?++s>u&&(u=s):s=1,a=i+t.length,i=n.indexOf(t,a);return u}function aM(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function lM(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function sM(e,t,n,i){const a=lM(n),s=e.value||"",u=a==="`"?"GraveAccent":"Tilde";if(aM(e,n)){const b=n.enter("codeIndented"),T=n.indentLines(s,uM);return b(),T}const d=n.createTracker(i),p=a.repeat(Math.max(oM(s,a)+1,3)),f=n.enter("codeFenced");let g=d.move(p);if(e.lang){const b=n.enter(`codeFencedLang${u}`);g+=d.move(n.safe(e.lang,{before:g,after:" ",encode:["`"],...d.current()})),b()}if(e.lang&&e.meta){const b=n.enter(`codeFencedMeta${u}`);g+=d.move(" "),g+=d.move(n.safe(e.meta,{before:g,after:`
`,encode:["`"],...d.current()})),b()}return g+=d.move(`
`),s&&(g+=d.move(s+`
`)),g+=d.move(p),f(),g}function uM(e,t,n){return(n?"":"    ")+e}function Qh(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function cM(e,t,n,i){const a=Qh(n),s=a==='"'?"Quote":"Apostrophe",u=n.enter("definition");let d=n.enter("label");const p=n.createTracker(i);let f=p.move("[");return f+=p.move(n.safe(n.associationId(e),{before:f,after:"]",...p.current()})),f+=p.move("]: "),d(),!e.url||/[\0- \u007F]/.test(e.url)?(d=n.enter("destinationLiteral"),f+=p.move("<"),f+=p.move(n.safe(e.url,{before:f,after:">",...p.current()})),f+=p.move(">")):(d=n.enter("destinationRaw"),f+=p.move(n.safe(e.url,{before:f,after:e.title?" ":`
`,...p.current()}))),d(),e.title&&(d=n.enter(`title${s}`),f+=p.move(" "+a),f+=p.move(n.safe(e.title,{before:f,after:a,...p.current()})),f+=p.move(a),d()),u(),f}function fM(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function ru(e){return"&#x"+e.toString(16).toUpperCase()+";"}function $c(e,t,n){const i=_l(e),a=_l(t);return i===void 0?a===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}fw.peek=dM;function fw(e,t,n,i){const a=fM(n),s=n.enter("emphasis"),u=n.createTracker(i),d=u.move(a);let p=u.move(n.containerPhrasing(e,{after:a,before:d,...u.current()}));const f=p.charCodeAt(0),g=$c(i.before.charCodeAt(i.before.length-1),f,a);g.inside&&(p=ru(f)+p.slice(1));const b=p.charCodeAt(p.length-1),T=$c(i.after.charCodeAt(0),b,a);T.inside&&(p=p.slice(0,-1)+ru(b));const E=u.move(a);return s(),n.attentionEncodeSurroundingInfo={after:T.outside,before:g.outside},d+p+E}function dM(e,t,n){return n.options.emphasis||"*"}function pM(e,t){let n=!1;return $h(e,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return n=!0,rh}),!!((!e.depth||e.depth<3)&&Hh(e)&&(t.options.setext||n))}function hM(e,t,n,i){const a=Math.max(Math.min(6,e.depth||1),1),s=n.createTracker(i);if(pM(e,n)){const g=n.enter("headingSetext"),b=n.enter("phrasing"),T=n.containerPhrasing(e,{...s.current(),before:`
`,after:`
`});return b(),g(),T+`
`+(a===1?"=":"-").repeat(T.length-(Math.max(T.lastIndexOf("\r"),T.lastIndexOf(`
`))+1))}const u="#".repeat(a),d=n.enter("headingAtx"),p=n.enter("phrasing");s.move(u+" ");let f=n.containerPhrasing(e,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(f)&&(f=ru(f.charCodeAt(0))+f.slice(1)),f=f?u+" "+f:u,n.options.closeAtx&&(f+=" "+u),p(),d(),f}dw.peek=mM;function dw(e){return e.value||""}function mM(){return"<"}pw.peek=gM;function pw(e,t,n,i){const a=Qh(n),s=a==='"'?"Quote":"Apostrophe",u=n.enter("image");let d=n.enter("label");const p=n.createTracker(i);let f=p.move("![");return f+=p.move(n.safe(e.alt,{before:f,after:"]",...p.current()})),f+=p.move("]("),d(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(d=n.enter("destinationLiteral"),f+=p.move("<"),f+=p.move(n.safe(e.url,{before:f,after:">",...p.current()})),f+=p.move(">")):(d=n.enter("destinationRaw"),f+=p.move(n.safe(e.url,{before:f,after:e.title?" ":")",...p.current()}))),d(),e.title&&(d=n.enter(`title${s}`),f+=p.move(" "+a),f+=p.move(n.safe(e.title,{before:f,after:a,...p.current()})),f+=p.move(a),d()),f+=p.move(")"),u(),f}function gM(){return"!"}hw.peek=yM;function hw(e,t,n,i){const a=e.referenceType,s=n.enter("imageReference");let u=n.enter("label");const d=n.createTracker(i);let p=d.move("![");const f=n.safe(e.alt,{before:p,after:"]",...d.current()});p+=d.move(f+"]["),u();const g=n.stack;n.stack=[],u=n.enter("reference");const b=n.safe(n.associationId(e),{before:p,after:"]",...d.current()});return u(),n.stack=g,s(),a==="full"||!f||f!==b?p+=d.move(b+"]"):a==="shortcut"?p=p.slice(0,-1):p+=d.move("]"),p}function yM(){return"!"}mw.peek=vM;function mw(e,t,n){let i=e.value||"",a="`",s=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(i);)a+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++s<n.unsafe.length;){const u=n.unsafe[s],d=n.compilePattern(u);let p;if(u.atBreak)for(;p=d.exec(i);){let f=p.index;i.charCodeAt(f)===10&&i.charCodeAt(f-1)===13&&f--,i=i.slice(0,f)+" "+i.slice(p.index+1)}}return a+i+a}function vM(){return"`"}function gw(e,t){const n=Hh(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}yw.peek=xM;function yw(e,t,n,i){const a=Qh(n),s=a==='"'?"Quote":"Apostrophe",u=n.createTracker(i);let d,p;if(gw(e,n)){const g=n.stack;n.stack=[],d=n.enter("autolink");let b=u.move("<");return b+=u.move(n.containerPhrasing(e,{before:b,after:">",...u.current()})),b+=u.move(">"),d(),n.stack=g,b}d=n.enter("link"),p=n.enter("label");let f=u.move("[");return f+=u.move(n.containerPhrasing(e,{before:f,after:"](",...u.current()})),f+=u.move("]("),p(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(p=n.enter("destinationLiteral"),f+=u.move("<"),f+=u.move(n.safe(e.url,{before:f,after:">",...u.current()})),f+=u.move(">")):(p=n.enter("destinationRaw"),f+=u.move(n.safe(e.url,{before:f,after:e.title?" ":")",...u.current()}))),p(),e.title&&(p=n.enter(`title${s}`),f+=u.move(" "+a),f+=u.move(n.safe(e.title,{before:f,after:a,...u.current()})),f+=u.move(a),p()),f+=u.move(")"),d(),f}function xM(e,t,n){return gw(e,n)?"<":"["}vw.peek=bM;function vw(e,t,n,i){const a=e.referenceType,s=n.enter("linkReference");let u=n.enter("label");const d=n.createTracker(i);let p=d.move("[");const f=n.containerPhrasing(e,{before:p,after:"]",...d.current()});p+=d.move(f+"]["),u();const g=n.stack;n.stack=[],u=n.enter("reference");const b=n.safe(n.associationId(e),{before:p,after:"]",...d.current()});return u(),n.stack=g,s(),a==="full"||!f||f!==b?p+=d.move(b+"]"):a==="shortcut"?p=p.slice(0,-1):p+=d.move("]"),p}function bM(){return"["}function Wh(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function wM(e){const t=Wh(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function SM(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function xw(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function TM(e,t,n,i){const a=n.enter("list"),s=n.bulletCurrent;let u=e.ordered?SM(n):Wh(n);const d=e.ordered?u==="."?")":".":wM(n);let p=t&&n.bulletLastUsed?u===n.bulletLastUsed:!1;if(!e.ordered){const g=e.children?e.children[0]:void 0;if((u==="*"||u==="-")&&g&&(!g.children||!g.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(p=!0),xw(n)===u&&g){let b=-1;for(;++b<e.children.length;){const T=e.children[b];if(T&&T.type==="listItem"&&T.children&&T.children[0]&&T.children[0].type==="thematicBreak"){p=!0;break}}}}p&&(u=d),n.bulletCurrent=u;const f=n.containerFlow(e,i);return n.bulletLastUsed=u,n.bulletCurrent=s,a(),f}function CM(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function EM(e,t,n,i){const a=CM(n);let s=n.bulletCurrent||Wh(n);t&&t.type==="list"&&t.ordered&&(s=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+s);let u=s.length+1;(a==="tab"||a==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(u=Math.ceil(u/4)*4);const d=n.createTracker(i);d.move(s+" ".repeat(u-s.length)),d.shift(u);const p=n.enter("listItem"),f=n.indentLines(n.containerFlow(e,d.current()),g);return p(),f;function g(b,T,E){return T?(E?"":" ".repeat(u))+b:(E?s:s+" ".repeat(u-s.length))+b}}function _M(e,t,n,i){const a=n.enter("paragraph"),s=n.enter("phrasing"),u=n.containerPhrasing(e,i);return s(),a(),u}const AM=mf(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function kM(e,t,n,i){return(e.children.some(function(u){return AM(u)})?n.containerPhrasing:n.containerFlow).call(n,e,i)}function NM(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}bw.peek=MM;function bw(e,t,n,i){const a=NM(n),s=n.enter("strong"),u=n.createTracker(i),d=u.move(a+a);let p=u.move(n.containerPhrasing(e,{after:a,before:d,...u.current()}));const f=p.charCodeAt(0),g=$c(i.before.charCodeAt(i.before.length-1),f,a);g.inside&&(p=ru(f)+p.slice(1));const b=p.charCodeAt(p.length-1),T=$c(i.after.charCodeAt(0),b,a);T.inside&&(p=p.slice(0,-1)+ru(b));const E=u.move(a+a);return s(),n.attentionEncodeSurroundingInfo={after:T.outside,before:g.outside},d+p+E}function MM(e,t,n){return n.options.strong||"*"}function RM(e,t,n,i){return n.safe(e.value,i)}function DM(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function IM(e,t,n){const i=(xw(n)+(n.options.ruleSpaces?" ":"")).repeat(DM(n));return n.options.ruleSpaces?i.slice(0,-1):i}const ww={blockquote:nM,break:yv,code:sM,definition:cM,emphasis:fw,hardBreak:yv,heading:hM,html:dw,image:pw,imageReference:hw,inlineCode:mw,link:yw,linkReference:vw,list:TM,listItem:EM,paragraph:_M,root:kM,strong:bw,text:RM,thematicBreak:IM};function PM(){return{enter:{table:LM,tableData:vv,tableHeader:vv,tableRow:OM},exit:{codeText:BM,table:UM,tableData:zp,tableHeader:zp,tableRow:zp}}}function LM(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function UM(e){this.exit(e),this.data.inTable=void 0}function OM(e){this.enter({type:"tableRow",children:[]},e)}function zp(e){this.exit(e)}function vv(e){this.enter({type:"tableCell",children:[]},e)}function BM(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,zM));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function zM(e,t){return t==="|"?t:e}function qM(e){const t=e||{},n=t.tableCellPadding,i=t.tablePipeAlign,a=t.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:T,table:u,tableCell:p,tableRow:d}};function u(E,k,I,D){return f(g(E,I,D),E.align)}function d(E,k,I,D){const M=b(E,I,D),U=f([M]);return U.slice(0,U.indexOf(`
`))}function p(E,k,I,D){const M=I.enter("tableCell"),U=I.enter("phrasing"),O=I.containerPhrasing(E,{...D,before:s,after:s});return U(),M(),O}function f(E,k){return eM(E,{align:k,alignDelimiters:i,padding:n,stringLength:a})}function g(E,k,I){const D=E.children;let M=-1;const U=[],O=k.enter("table");for(;++M<D.length;)U[M]=b(D[M],k,I);return O(),U}function b(E,k,I){const D=E.children;let M=-1;const U=[],O=k.enter("tableRow");for(;++M<D.length;)U[M]=p(D[M],E,k,I);return O(),U}function T(E,k,I){let D=ww.inlineCode(E,k,I);return I.stack.includes("tableCell")&&(D=D.replace(/\|/g,"\\$&")),D}}function jM(){return{exit:{taskListCheckValueChecked:xv,taskListCheckValueUnchecked:xv,paragraph:FM}}}function HM(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:VM}}}function xv(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function FM(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const i=n.children[0];if(i&&i.type==="text"){const a=t.children;let s=-1,u;for(;++s<a.length;){const d=a[s];if(d.type==="paragraph"){u=d;break}}u===n&&(i.value=i.value.slice(1),i.value.length===0?n.children.shift():n.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,n.position.start=Object.assign({},i.position.start)))}}this.exit(e)}function VM(e,t,n,i){const a=e.children[0],s=typeof e.checked=="boolean"&&a&&a.type==="paragraph",u="["+(e.checked?"x":" ")+"] ",d=n.createTracker(i);s&&d.move(u);let p=ww.listItem(e,t,n,{...i,...d.current()});return s&&(p=p.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,f)),p;function f(g){return g+u}}function GM(){return[TN(),VN(),JN(),PM(),jM()]}function YM(e){return{extensions:[CN(),GN(e),$N(),qM(e),HM()]}}const KM={tokenize:ZM,partial:!0},Sw={tokenize:e2,partial:!0},Tw={tokenize:t2,partial:!0},Cw={tokenize:n2,partial:!0},JM={tokenize:r2,partial:!0},Ew={name:"wwwAutolink",tokenize:QM,previous:Aw},_w={name:"protocolAutolink",tokenize:WM,previous:kw},Ji={name:"emailAutolink",tokenize:XM,previous:Nw},vi={};function $M(){return{text:vi}}let pa=48;for(;pa<123;)vi[pa]=Ji,pa++,pa===58?pa=65:pa===91&&(pa=97);vi[43]=Ji;vi[45]=Ji;vi[46]=Ji;vi[95]=Ji;vi[72]=[Ji,_w];vi[104]=[Ji,_w];vi[87]=[Ji,Ew];vi[119]=[Ji,Ew];function XM(e,t,n){const i=this;let a,s;return u;function u(b){return!lh(b)||!Nw.call(i,i.previous)||Zh(i.events)?n(b):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),d(b))}function d(b){return lh(b)?(e.consume(b),d):b===64?(e.consume(b),p):n(b)}function p(b){return b===46?e.check(JM,g,f)(b):b===45||b===95||Gn(b)?(s=!0,e.consume(b),p):g(b)}function f(b){return e.consume(b),a=!0,p}function g(b){return s&&a&&tr(i.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(b)):n(b)}}function QM(e,t,n){const i=this;return a;function a(u){return u!==87&&u!==119||!Aw.call(i,i.previous)||Zh(i.events)?n(u):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(KM,e.attempt(Sw,e.attempt(Tw,s),n),n)(u))}function s(u){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(u)}}function WM(e,t,n){const i=this;let a="",s=!1;return u;function u(b){return(b===72||b===104)&&kw.call(i,i.previous)&&!Zh(i.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),a+=String.fromCodePoint(b),e.consume(b),d):n(b)}function d(b){if(tr(b)&&a.length<5)return a+=String.fromCodePoint(b),e.consume(b),d;if(b===58){const T=a.toLowerCase();if(T==="http"||T==="https")return e.consume(b),p}return n(b)}function p(b){return b===47?(e.consume(b),s?f:(s=!0,p)):n(b)}function f(b){return b===null||Yc(b)||jt(b)||ya(b)||df(b)?n(b):e.attempt(Sw,e.attempt(Tw,g),n)(b)}function g(b){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(b)}}function ZM(e,t,n){let i=0;return a;function a(u){return(u===87||u===119)&&i<3?(i++,e.consume(u),a):u===46&&i===3?(e.consume(u),s):n(u)}function s(u){return u===null?n(u):t(u)}}function e2(e,t,n){let i,a,s;return u;function u(f){return f===46||f===95?e.check(Cw,p,d)(f):f===null||jt(f)||ya(f)||f!==45&&df(f)?p(f):(s=!0,e.consume(f),u)}function d(f){return f===95?i=!0:(a=i,i=void 0),e.consume(f),u}function p(f){return a||i||!s?n(f):t(f)}}function t2(e,t){let n=0,i=0;return a;function a(u){return u===40?(n++,e.consume(u),a):u===41&&i<n?s(u):u===33||u===34||u===38||u===39||u===41||u===42||u===44||u===46||u===58||u===59||u===60||u===63||u===93||u===95||u===126?e.check(Cw,t,s)(u):u===null||jt(u)||ya(u)?t(u):(e.consume(u),a)}function s(u){return u===41&&i++,e.consume(u),a}}function n2(e,t,n){return i;function i(d){return d===33||d===34||d===39||d===41||d===42||d===44||d===46||d===58||d===59||d===63||d===95||d===126?(e.consume(d),i):d===38?(e.consume(d),s):d===93?(e.consume(d),a):d===60||d===null||jt(d)||ya(d)?t(d):n(d)}function a(d){return d===null||d===40||d===91||jt(d)||ya(d)?t(d):i(d)}function s(d){return tr(d)?u(d):n(d)}function u(d){return d===59?(e.consume(d),i):tr(d)?(e.consume(d),u):n(d)}}function r2(e,t,n){return i;function i(s){return e.consume(s),a}function a(s){return Gn(s)?n(s):t(s)}}function Aw(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||jt(e)}function kw(e){return!tr(e)}function Nw(e){return!(e===47||lh(e))}function lh(e){return e===43||e===45||e===46||e===95||Gn(e)}function Zh(e){let t=e.length,n=!1;for(;t--;){const i=e[t][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){n=!0;break}if(i._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const i2={tokenize:d2,partial:!0};function o2(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:u2,continuation:{tokenize:c2},exit:f2}},text:{91:{name:"gfmFootnoteCall",tokenize:s2},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:a2,resolveTo:l2}}}}function a2(e,t,n){const i=this;let a=i.events.length;const s=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let u;for(;a--;){const p=i.events[a][1];if(p.type==="labelImage"){u=p;break}if(p.type==="gfmFootnoteCall"||p.type==="labelLink"||p.type==="label"||p.type==="image"||p.type==="link")break}return d;function d(p){if(!u||!u._balanced)return n(p);const f=Xr(i.sliceSerialize({start:u.end,end:i.now()}));return f.codePointAt(0)!==94||!s.includes(f.slice(1))?n(p):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),t(p))}}function l2(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},e[e.length-1][1].start)},u={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},d=[e[n+1],e[n+2],["enter",i,t],e[n+3],e[n+4],["enter",a,t],["exit",a,t],["enter",s,t],["enter",u,t],["exit",u,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",i,t]];return e.splice(n,e.length-n+1,...d),e}function s2(e,t,n){const i=this,a=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s=0,u;return d;function d(b){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(b),e.exit("gfmFootnoteCallLabelMarker"),p}function p(b){return b!==94?n(b):(e.enter("gfmFootnoteCallMarker"),e.consume(b),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",f)}function f(b){if(s>999||b===93&&!u||b===null||b===91||jt(b))return n(b);if(b===93){e.exit("chunkString");const T=e.exit("gfmFootnoteCallString");return a.includes(Xr(i.sliceSerialize(T)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(b),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(b)}return jt(b)||(u=!0),s++,e.consume(b),b===92?g:f}function g(b){return b===91||b===92||b===93?(e.consume(b),s++,f):f(b)}}function u2(e,t,n){const i=this,a=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s,u=0,d;return p;function p(k){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(k),e.exit("gfmFootnoteDefinitionLabelMarker"),f}function f(k){return k===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(k),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",g):n(k)}function g(k){if(u>999||k===93&&!d||k===null||k===91||jt(k))return n(k);if(k===93){e.exit("chunkString");const I=e.exit("gfmFootnoteDefinitionLabelString");return s=Xr(i.sliceSerialize(I)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(k),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),T}return jt(k)||(d=!0),u++,e.consume(k),k===92?b:g}function b(k){return k===91||k===92||k===93?(e.consume(k),u++,g):g(k)}function T(k){return k===58?(e.enter("definitionMarker"),e.consume(k),e.exit("definitionMarker"),a.includes(s)||a.push(s),St(e,E,"gfmFootnoteDefinitionWhitespace")):n(k)}function E(k){return t(k)}}function c2(e,t,n){return e.check(fu,t,e.attempt(i2,t,n))}function f2(e){e.exit("gfmFootnoteDefinition")}function d2(e,t,n){const i=this;return St(e,a,"gfmFootnoteDefinitionIndent",5);function a(s){const u=i.events[i.events.length-1];return u&&u[1].type==="gfmFootnoteDefinitionIndent"&&u[2].sliceSerialize(u[1],!0).length===4?t(s):n(s)}}function p2(e){let n=(e||{}).singleTilde;const i={name:"strikethrough",tokenize:s,resolveAll:a};return n==null&&(n=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function a(u,d){let p=-1;for(;++p<u.length;)if(u[p][0]==="enter"&&u[p][1].type==="strikethroughSequenceTemporary"&&u[p][1]._close){let f=p;for(;f--;)if(u[f][0]==="exit"&&u[f][1].type==="strikethroughSequenceTemporary"&&u[f][1]._open&&u[p][1].end.offset-u[p][1].start.offset===u[f][1].end.offset-u[f][1].start.offset){u[p][1].type="strikethroughSequence",u[f][1].type="strikethroughSequence";const g={type:"strikethrough",start:Object.assign({},u[f][1].start),end:Object.assign({},u[p][1].end)},b={type:"strikethroughText",start:Object.assign({},u[f][1].end),end:Object.assign({},u[p][1].start)},T=[["enter",g,d],["enter",u[f][1],d],["exit",u[f][1],d],["enter",b,d]],E=d.parser.constructs.insideSpan.null;E&&Cr(T,T.length,0,pf(E,u.slice(f+1,p),d)),Cr(T,T.length,0,[["exit",b,d],["enter",u[p][1],d],["exit",u[p][1],d],["exit",g,d]]),Cr(u,f-1,p-f+3,T),p=f+T.length-2;break}}for(p=-1;++p<u.length;)u[p][1].type==="strikethroughSequenceTemporary"&&(u[p][1].type="data");return u}function s(u,d,p){const f=this.previous,g=this.events;let b=0;return T;function T(k){return f===126&&g[g.length-1][1].type!=="characterEscape"?p(k):(u.enter("strikethroughSequenceTemporary"),E(k))}function E(k){const I=_l(f);if(k===126)return b>1?p(k):(u.consume(k),b++,E);if(b<2&&!n)return p(k);const D=u.exit("strikethroughSequenceTemporary"),M=_l(k);return D._open=!M||M===2&&!!I,D._close=!I||I===2&&!!M,d(k)}}}class h2{constructor(){this.map=[]}add(t,n,i){m2(this,t,n,i)}consume(t){if(this.map.sort(function(s,u){return s[0]-u[0]}),this.map.length===0)return;let n=this.map.length;const i=[];for(;n>0;)n-=1,i.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];i.push(t.slice()),t.length=0;let a=i.pop();for(;a;){for(const s of a)t.push(s);a=i.pop()}this.map.length=0}}function m2(e,t,n,i){let a=0;if(!(n===0&&i.length===0)){for(;a<e.map.length;){if(e.map[a][0]===t){e.map[a][1]+=n,e.map[a][2].push(...i);return}a+=1}e.map.push([t,n,i])}}function g2(e,t){let n=!1;const i=[];for(;t<e.length;){const a=e[t];if(n){if(a[0]==="enter")a[1].type==="tableContent"&&i.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(a[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const s=i.length-1;i[s]=i[s]==="left"?"center":"right"}}else if(a[1].type==="tableDelimiterRow")break}else a[0]==="enter"&&a[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return i}function y2(){return{flow:{null:{name:"table",tokenize:v2,resolveAll:x2}}}}function v2(e,t,n){const i=this;let a=0,s=0,u;return d;function d(B){let K=i.events.length-1;for(;K>-1;){const _e=i.events[K][1].type;if(_e==="lineEnding"||_e==="linePrefix")K--;else break}const ce=K>-1?i.events[K][1].type:null,xe=ce==="tableHead"||ce==="tableRow"?G:p;return xe===G&&i.parser.lazy[i.now().line]?n(B):xe(B)}function p(B){return e.enter("tableHead"),e.enter("tableRow"),f(B)}function f(B){return B===124||(u=!0,s+=1),g(B)}function g(B){return B===null?n(B):et(B)?s>1?(s=0,i.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(B),e.exit("lineEnding"),E):n(B):gt(B)?St(e,g,"whitespace")(B):(s+=1,u&&(u=!1,a+=1),B===124?(e.enter("tableCellDivider"),e.consume(B),e.exit("tableCellDivider"),u=!0,g):(e.enter("data"),b(B)))}function b(B){return B===null||B===124||jt(B)?(e.exit("data"),g(B)):(e.consume(B),B===92?T:b)}function T(B){return B===92||B===124?(e.consume(B),b):b(B)}function E(B){return i.interrupt=!1,i.parser.lazy[i.now().line]?n(B):(e.enter("tableDelimiterRow"),u=!1,gt(B)?St(e,k,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):k(B))}function k(B){return B===45||B===58?D(B):B===124?(u=!0,e.enter("tableCellDivider"),e.consume(B),e.exit("tableCellDivider"),I):Q(B)}function I(B){return gt(B)?St(e,D,"whitespace")(B):D(B)}function D(B){return B===58?(s+=1,u=!0,e.enter("tableDelimiterMarker"),e.consume(B),e.exit("tableDelimiterMarker"),M):B===45?(s+=1,M(B)):B===null||et(B)?se(B):Q(B)}function M(B){return B===45?(e.enter("tableDelimiterFiller"),U(B)):Q(B)}function U(B){return B===45?(e.consume(B),U):B===58?(u=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(B),e.exit("tableDelimiterMarker"),O):(e.exit("tableDelimiterFiller"),O(B))}function O(B){return gt(B)?St(e,se,"whitespace")(B):se(B)}function se(B){return B===124?k(B):B===null||et(B)?!u||a!==s?Q(B):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(B)):Q(B)}function Q(B){return n(B)}function G(B){return e.enter("tableRow"),Y(B)}function Y(B){return B===124?(e.enter("tableCellDivider"),e.consume(B),e.exit("tableCellDivider"),Y):B===null||et(B)?(e.exit("tableRow"),t(B)):gt(B)?St(e,Y,"whitespace")(B):(e.enter("data"),me(B))}function me(B){return B===null||B===124||jt(B)?(e.exit("data"),Y(B)):(e.consume(B),B===92?j:me)}function j(B){return B===92||B===124?(e.consume(B),me):me(B)}}function x2(e,t){let n=-1,i=!0,a=0,s=[0,0,0,0],u=[0,0,0,0],d=!1,p=0,f,g,b;const T=new h2;for(;++n<e.length;){const E=e[n],k=E[1];E[0]==="enter"?k.type==="tableHead"?(d=!1,p!==0&&(bv(T,t,p,f,g),g=void 0,p=0),f={type:"table",start:Object.assign({},k.start),end:Object.assign({},k.end)},T.add(n,0,[["enter",f,t]])):k.type==="tableRow"||k.type==="tableDelimiterRow"?(i=!0,b=void 0,s=[0,0,0,0],u=[0,n+1,0,0],d&&(d=!1,g={type:"tableBody",start:Object.assign({},k.start),end:Object.assign({},k.end)},T.add(n,0,[["enter",g,t]])),a=k.type==="tableDelimiterRow"?2:g?3:1):a&&(k.type==="data"||k.type==="tableDelimiterMarker"||k.type==="tableDelimiterFiller")?(i=!1,u[2]===0&&(s[1]!==0&&(u[0]=u[1],b=Ic(T,t,s,a,void 0,b),s=[0,0,0,0]),u[2]=n)):k.type==="tableCellDivider"&&(i?i=!1:(s[1]!==0&&(u[0]=u[1],b=Ic(T,t,s,a,void 0,b)),s=u,u=[s[1],n,0,0])):k.type==="tableHead"?(d=!0,p=n):k.type==="tableRow"||k.type==="tableDelimiterRow"?(p=n,s[1]!==0?(u[0]=u[1],b=Ic(T,t,s,a,n,b)):u[1]!==0&&(b=Ic(T,t,u,a,n,b)),a=0):a&&(k.type==="data"||k.type==="tableDelimiterMarker"||k.type==="tableDelimiterFiller")&&(u[3]=n)}for(p!==0&&bv(T,t,p,f,g),T.consume(t.events),n=-1;++n<t.events.length;){const E=t.events[n];E[0]==="enter"&&E[1].type==="table"&&(E[1]._align=g2(t.events,n))}return e}function Ic(e,t,n,i,a,s){const u=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",d="tableContent";n[0]!==0&&(s.end=Object.assign({},xl(t.events,n[0])),e.add(n[0],0,[["exit",s,t]]));const p=xl(t.events,n[1]);if(s={type:u,start:Object.assign({},p),end:Object.assign({},p)},e.add(n[1],0,[["enter",s,t]]),n[2]!==0){const f=xl(t.events,n[2]),g=xl(t.events,n[3]),b={type:d,start:Object.assign({},f),end:Object.assign({},g)};if(e.add(n[2],0,[["enter",b,t]]),i!==2){const T=t.events[n[2]],E=t.events[n[3]];if(T[1].end=Object.assign({},E[1].end),T[1].type="chunkText",T[1].contentType="text",n[3]>n[2]+1){const k=n[2]+1,I=n[3]-n[2]-1;e.add(k,I,[])}}e.add(n[3]+1,0,[["exit",b,t]])}return a!==void 0&&(s.end=Object.assign({},xl(t.events,a)),e.add(a,0,[["exit",s,t]]),s=void 0),s}function bv(e,t,n,i,a){const s=[],u=xl(t.events,n);a&&(a.end=Object.assign({},u),s.push(["exit",a,t])),i.end=Object.assign({},u),s.push(["exit",i,t]),e.add(n+1,0,s)}function xl(e,t){const n=e[t],i=n[0]==="enter"?"start":"end";return n[1][i]}const b2={name:"tasklistCheck",tokenize:S2};function w2(){return{text:{91:b2}}}function S2(e,t,n){const i=this;return a;function a(p){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?n(p):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(p),e.exit("taskListCheckMarker"),s)}function s(p){return jt(p)?(e.enter("taskListCheckValueUnchecked"),e.consume(p),e.exit("taskListCheckValueUnchecked"),u):p===88||p===120?(e.enter("taskListCheckValueChecked"),e.consume(p),e.exit("taskListCheckValueChecked"),u):n(p)}function u(p){return p===93?(e.enter("taskListCheckMarker"),e.consume(p),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),d):n(p)}function d(p){return et(p)?t(p):gt(p)?e.check({tokenize:T2},t,n)(p):n(p)}}function T2(e,t,n){return St(e,i,"whitespace");function i(a){return a===null?n(a):t(a)}}function C2(e){return qb([$M(),o2(),p2(e),y2(),w2()])}const E2={};function ga(e){const t=this,n=e||E2,i=t.data(),a=i.micromarkExtensions||(i.micromarkExtensions=[]),s=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),u=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);a.push(C2(n)),s.push(GM()),u.push(YM(n))}const sh=["A+","A","A-","B+","B","B-","C+","C","C-","D+","D","D-","F"],_2=({instruction:e})=>{const[t,n]=H.useState(!1);return y.jsxs("div",{className:"border-l-4 border-blue-400 bg-blue-400/10 rounded-r-lg",children:[y.jsxs("button",{onClick:()=>n(!t),className:"w-full flex items-center justify-between p-4 text-left","aria-expanded":t,children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"flex-shrink-0 text-blue-400 pt-0.5",children:y.jsx(Tb,{})}),y.jsx("h3",{className:"font-semibold text-blue-300",children:"Preflection"})]}),y.jsx(cf,{className:`w-5 h-5 text-blue-300 transition-transform ${t?"rotate-180":""}`})]}),t&&y.jsx("div",{className:"px-4 pb-4",children:y.jsx("div",{className:"pl-9",children:y.jsxs("p",{className:"text-sm text-gray-400 italic",children:['"',e,'"']})})})]})},A2=({memory:e})=>{const[t,n]=H.useState(!1);return y.jsxs("div",{className:"border-l-4 border-green-400 bg-green-400/10 rounded-r-lg",children:[y.jsxs("button",{onClick:()=>n(!t),className:"w-full flex items-center justify-between p-4 text-left","aria-expanded":t,children:[y.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[y.jsx("div",{className:"flex-shrink-0 text-green-400 pt-0.5",children:y.jsx(FC,{})}),y.jsxs("div",{className:"text-left",children:[y.jsx("h3",{className:"font-semibold text-green-300",children:"Memory Saved"}),!t&&y.jsx("p",{className:"text-xs text-gray-500 truncate",children:e.summary})]})]}),y.jsx(cf,{className:`w-5 h-5 text-green-300 transition-transform flex-shrink-0 ${t?"rotate-180":""}`})]}),t&&y.jsx("div",{className:"px-4 pb-4",children:y.jsxs("div",{className:"pl-9",children:[y.jsx("p",{className:"text-sm text-gray-400",children:e.summary}),y.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:e.tags.map((i,a)=>y.jsx("span",{className:"bg-gray-700 text-green-300 text-xs font-medium px-2 py-0.5 rounded-full",children:i},a))})]})})]})},k2=({tasks:e})=>{const[t,n]=H.useState(!1);return!e||e.length===0?null:y.jsxs("div",{className:"border-l-4 border-yellow-400 bg-yellow-400/10 rounded-r-lg",children:[y.jsxs("button",{onClick:()=>n(!t),className:"w-full flex items-center justify-between p-4 text-left","aria-expanded":t,children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"flex-shrink-0 text-yellow-400 pt-0.5",children:y.jsx(Cb,{})}),y.jsxs("div",{className:"text-left",children:[y.jsx("h3",{className:"font-semibold text-yellow-300",children:"Task List"}),!t&&y.jsxs("p",{className:"text-xs text-gray-500",children:[e.length," task",e.length!==1?"s":""," generated"]})]})]}),y.jsx(cf,{className:`w-5 h-5 text-yellow-300 transition-transform ${t?"rotate-180":""}`})]}),t&&y.jsx("div",{className:"px-4 pb-4",children:y.jsx("div",{className:"pl-9",children:y.jsx("ul",{className:"list-none mt-2 space-y-2",children:e.map(i=>y.jsxs("li",{className:"flex items-center gap-2 text-sm text-gray-400",children:[y.jsx("input",{type:"checkbox",defaultChecked:!1,className:"form-checkbox h-4 w-4 rounded bg-gray-700 border-gray-600 text-blue-500 focus:ring-blue-500"}),y.jsx("span",{children:i.description})]},i.id))})})})]})},N2=({auditResult:e})=>{const[t,n]=H.useState(!1),i=e.completedTasks.length,a=e.pendingTasks.length;return y.jsxs("div",{className:"border-l-4 border-purple-400 bg-purple-400/10 rounded-r-lg",children:[y.jsxs("button",{onClick:()=>n(!t),className:"w-full flex items-center justify-between p-4 text-left","aria-expanded":t,children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"flex-shrink-0 text-purple-400 pt-0.5",children:y.jsx(Eb,{})}),y.jsxs("div",{className:"text-left",children:[y.jsx("h3",{className:"font-semibold text-purple-300",children:"Self-Audit"}),!t&&y.jsxs("p",{className:"text-xs text-gray-500",children:[y.jsxs("span",{className:"text-green-400",children:[i," Completed"]}),y.jsx("span",{className:"mx-1",children:""}),y.jsxs("span",{className:"text-yellow-400",children:[a," Pending"]})]})]})]}),y.jsx(cf,{className:`w-5 h-5 text-purple-300 transition-transform ${t?"rotate-180":""}`})]}),t&&y.jsx("div",{className:"px-4 pb-4",children:y.jsxs("div",{className:"pl-9",children:[e.commentary&&y.jsxs("p",{className:"text-sm text-gray-400 italic mb-3",children:['"',e.commentary,'"']}),y.jsxs("div",{className:"space-y-3",children:[e.completedTasks.length>0&&y.jsxs("div",{children:[y.jsx("h4",{className:"text-xs font-semibold text-green-400 uppercase tracking-wider",children:"Completed"}),y.jsx("ul",{className:"mt-1 space-y-1",children:e.completedTasks.map((s,u)=>y.jsxs("li",{className:"flex items-center gap-2 text-sm text-gray-400",children:[y.jsx(VC,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),y.jsx("span",{children:s})]},u))})]}),e.pendingTasks.length>0&&y.jsxs("div",{children:[y.jsx("h4",{className:"text-xs font-semibold text-yellow-400 uppercase tracking-wider",children:"Pending"}),y.jsx("ul",{className:"mt-1 space-y-1",children:e.pendingTasks.map((s,u)=>y.jsxs("li",{className:"flex items-center gap-2 text-sm text-gray-400",children:[y.jsx(GC,{className:"w-3 h-3 text-yellow-500 flex-shrink-0"}),y.jsx("span",{children:s})]},u))})]})]})]})})]})},M2=({directions:e})=>y.jsxs("div",{className:"border border-yellow-600/30 bg-yellow-900/10 rounded-lg p-3",children:[y.jsx("div",{className:"text-xs font-semibold uppercase tracking-wider text-yellow-300 mb-1",children:"Stage Directions"}),y.jsx("p",{className:"text-sm text-yellow-100 whitespace-pre-wrap",children:e})]}),R2=({monologue:e})=>y.jsxs("div",{className:"border border-purple-600/40 bg-purple-900/20 rounded-lg p-3",children:[y.jsx("div",{className:"text-xs font-semibold uppercase tracking-wider text-purple-300 mb-1",children:"Internal Monologue"}),y.jsx("p",{className:"text-sm text-purple-100 whitespace-pre-wrap",children:e})]});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let D2,I2;function P2(){return{geminiUrl:D2,vertexUrl:I2}}function L2(e,t,n,i){var a,s;if(!(e!=null&&e.baseUrl)){const u=P2();return t?(a=u.vertexUrl)!==null&&a!==void 0?a:n:(s=u.geminiUrl)!==null&&s!==void 0?s:i}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sa{}function Ge(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(i,a)=>{if(Object.prototype.hasOwnProperty.call(t,a)){const s=t[a];return s!=null?String(s):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function v(e,t,n){for(let s=0;s<t.length-1;s++){const u=t[s];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in e))if(Array.isArray(n))e[d]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(e[d])){const p=e[d];if(Array.isArray(n))for(let f=0;f<p.length;f++){const g=p[f];v(g,t.slice(s+1),n[f])}else for(const f of p)v(f,t.slice(s+1),n)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in e||(e[d]=[{}]);const p=e[d];v(p[0],t.slice(s+1),n);return}(!e[u]||typeof e[u]!="object")&&(e[u]={}),e=e[u]}const i=t[t.length-1],a=e[i];if(a!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===a)return;if(typeof a=="object"&&typeof n=="object"&&a!==null&&n!==null)Object.assign(a,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[i]=n}function h(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let i=0;i<t.length;i++){if(typeof e!="object"||e===null)return n;const a=t[i];if(a.endsWith("[]")){const s=a.slice(0,-2);if(s in e){const u=e[s];return Array.isArray(u)?u.map(d=>h(d,t.slice(i+1),n)):n}else return n}else e=e[a]}return e}catch(i){if(i instanceof TypeError)return n;throw i}}function U2(e,t){for(const[n,i]of Object.entries(t)){const a=n.split("."),s=i.split("."),u=new Set;let d=-1;for(let p=0;p<a.length;p++)if(a[p]==="*"){d=p;break}if(d!==-1&&s.length>d)for(let p=d;p<s.length;p++){const f=s[p];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&u.add(f)}uh(e,a,s,0,u)}}function uh(e,t,n,i,a){if(i>=t.length||typeof e!="object"||e===null)return;const s=t[i];if(s.endsWith("[]")){const u=s.slice(0,-2),d=e;if(u in d&&Array.isArray(d[u]))for(const p of d[u])uh(p,t,n,i+1,a)}else if(s==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const u=e,d=Object.keys(u).filter(f=>!f.startsWith("_")&&!a.has(f)),p={};for(const f of d)p[f]=u[f];for(const[f,g]of Object.entries(p)){const b=[];for(const T of n.slice(i))T==="*"?b.push(f):b.push(T);v(u,b,g)}for(const f of d)delete u[f]}}else{const u=e;s in u&&uh(u[s],t,n,i+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function em(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function O2(e){const t={},n=h(e,["operationName"]);n!=null&&v(t,["operationName"],n);const i=h(e,["resourceName"]);return i!=null&&v(t,["_url","resourceName"],i),t}function B2(e){const t={},n=h(e,["name"]);n!=null&&v(t,["name"],n);const i=h(e,["metadata"]);i!=null&&v(t,["metadata"],i);const a=h(e,["done"]);a!=null&&v(t,["done"],a);const s=h(e,["error"]);s!=null&&v(t,["error"],s);const u=h(e,["response","generateVideoResponse"]);return u!=null&&v(t,["response"],q2(u)),t}function z2(e){const t={},n=h(e,["name"]);n!=null&&v(t,["name"],n);const i=h(e,["metadata"]);i!=null&&v(t,["metadata"],i);const a=h(e,["done"]);a!=null&&v(t,["done"],a);const s=h(e,["error"]);s!=null&&v(t,["error"],s);const u=h(e,["response"]);return u!=null&&v(t,["response"],j2(u)),t}function q2(e){const t={},n=h(e,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(u=>H2(u))),v(t,["generatedVideos"],s)}const i=h(e,["raiMediaFilteredCount"]);i!=null&&v(t,["raiMediaFilteredCount"],i);const a=h(e,["raiMediaFilteredReasons"]);return a!=null&&v(t,["raiMediaFilteredReasons"],a),t}function j2(e){const t={},n=h(e,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(u=>F2(u))),v(t,["generatedVideos"],s)}const i=h(e,["raiMediaFilteredCount"]);i!=null&&v(t,["raiMediaFilteredCount"],i);const a=h(e,["raiMediaFilteredReasons"]);return a!=null&&v(t,["raiMediaFilteredReasons"],a),t}function H2(e){const t={},n=h(e,["video"]);return n!=null&&v(t,["video"],Y2(n)),t}function F2(e){const t={},n=h(e,["_self"]);return n!=null&&v(t,["video"],K2(n)),t}function V2(e){const t={},n=h(e,["operationName"]);return n!=null&&v(t,["_url","operationName"],n),t}function G2(e){const t={},n=h(e,["operationName"]);return n!=null&&v(t,["_url","operationName"],n),t}function Y2(e){const t={},n=h(e,["uri"]);n!=null&&v(t,["uri"],n);const i=h(e,["encodedVideo"]);i!=null&&v(t,["videoBytes"],em(i));const a=h(e,["encoding"]);return a!=null&&v(t,["mimeType"],a),t}function K2(e){const t={},n=h(e,["gcsUri"]);n!=null&&v(t,["uri"],n);const i=h(e,["bytesBase64Encoded"]);i!=null&&v(t,["videoBytes"],em(i));const a=h(e,["mimeType"]);return a!=null&&v(t,["mimeType"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var wv;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(wv||(wv={}));var Sv;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(Sv||(Sv={}));var Ze;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(Ze||(Ze={}));var Tv;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Tv||(Tv={}));var Cv;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(Cv||(Cv={}));var Ev;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(Ev||(Ev={}));var _v;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(_v||(_v={}));var Av;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(Av||(Av={}));var kv;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(kv||(kv={}));var Nv;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Nv||(Nv={}));var Mv;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE"})(Mv||(Mv={}));var Rv;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(Rv||(Rv={}));var Dv;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Dv||(Dv={}));var Iv;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY"})(Iv||(Iv={}));var Pv;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Pv||(Pv={}));var Xc;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(Xc||(Xc={}));var Lv;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Lv||(Lv={}));var ch;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ch||(ch={}));var Uv;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Uv||(Uv={}));var Ov;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Ov||(Ov={}));var Bv;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V"})(Bv||(Bv={}));var zv;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(zv||(zv={}));var qv;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(qv||(qv={}));var jv;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(jv||(jv={}));var Hv;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Hv||(Hv={}));var Fv;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(Fv||(Fv={}));var Vv;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Vv||(Vv={}));var Gv;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(Gv||(Gv={}));var Yv;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(Yv||(Yv={}));var Kv;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Kv||(Kv={}));var Jv;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Jv||(Jv={}));var $v;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})($v||($v={}));var Xv;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Xv||(Xv={}));var Qv;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(Qv||(Qv={}));var Wv;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(Wv||(Wv={}));var Zv;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(Zv||(Zv={}));var ex;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(ex||(ex={}));var tx;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(tx||(tx={}));var nx;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(nx||(nx={}));var rx;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(rx||(rx={}));var ix;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(ix||(ix={}));var ox;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(ox||(ox={}));var ax;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(ax||(ax={}));var lx;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(lx||(lx={}));var sx;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(sx||(sx={}));var ux;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(ux||(ux={}));var cx;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(cx||(cx={}));var fx;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(fx||(fx={}));var bl;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(bl||(bl={}));class fh{constructor(t){const n={};for(const i of t.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class Fs{get text(){var t,n,i,a,s,u,d,p;if(((a=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",g=!1;const b=[];for(const T of(p=(d=(u=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[E,k]of Object.entries(T))E!=="text"&&E!=="thought"&&(k!==null||k!==void 0)&&b.push(E);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;g=!0,f+=T.text}}return b.length>0&&console.warn(`there are non-text parts ${b} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),g?f:void 0}get data(){var t,n,i,a,s,u,d,p;if(((a=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const g=[];for(const b of(p=(d=(u=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[T,E]of Object.entries(b))T!=="inlineData"&&(E!==null||E!==void 0)&&g.push(T);b.inlineData&&typeof b.inlineData.data=="string"&&(f+=atob(b.inlineData.data))}return g.length>0&&console.warn(`there are non-data parts ${g} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var t,n,i,a,s,u,d,p;if(((a=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(p=(d=(u=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(g=>g.functionCall).map(g=>g.functionCall).filter(g=>g!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var t,n,i,a,s,u,d,p,f;if(((a=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const g=(p=(d=(u=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if((g==null?void 0:g.length)!==0)return(f=g==null?void 0:g[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var t,n,i,a,s,u,d,p,f;if(((a=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const g=(p=(d=(u=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if((g==null?void 0:g.length)!==0)return(f=g==null?void 0:g[0])===null||f===void 0?void 0:f.output}}class dx{}class px{}class J2{}class $2{}class X2{}class Q2{}class hx{}class mx{}class gx{}class W2{}class Qc{_fromAPIResponse({apiResponse:t,isVertexAI:n}){const i=new Qc;let a;const s=t;return n?a=z2(s):a=B2(s),Object.assign(i,a),i}}class yx{}class vx{}class xx{}class Z2{}class eR{}class tR{}class bx{}class nR{get text(){var t,n,i;let a="",s=!1;const u=[];for(const d of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[p,f]of Object.entries(d))p!=="text"&&p!=="thought"&&f!==null&&u.push(p);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;s=!0,a+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?a:void 0}get data(){var t,n,i;let a="";const s=[];for(const u of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,p]of Object.entries(u))d!=="inlineData"&&p!==null&&s.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(a+=atob(u.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class rR{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function At(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function Mw(e,t){const n=At(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function Rw(e){return Array.isArray(e)?e.map(t=>Wc(t)):[Wc(e)]}function Wc(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function Dw(e){const t=Wc(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Iw(e){const t=Wc(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function wx(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function Pw(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>wx(t)):[wx(e)]}function dh(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function Sx(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function Tx(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function Yn(e){if(e==null)throw new Error("ContentUnion is required");return dh(e)?e:{role:"user",parts:Pw(e)}}function tm(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const i=Yn(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(e.isVertexAI()){const n=Yn(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>Yn(n)):[Yn(t)]}function Hr(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(Sx(e)||Tx(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Yn(e)]}const t=[],n=[],i=dh(e[0]);for(const a of e){const s=dh(a);if(s!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)t.push(a);else{if(Sx(a)||Tx(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(a)}}return i||t.push({role:"user",parts:Pw(n)}),t}function iR(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(i=>i!=="null");if(n.length===1)t.type=Object.values(Ze).includes(n[0].toUpperCase())?n[0].toUpperCase():Ze.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const i of n)t.anyOf.push({type:Object.values(Ze).includes(i.toUpperCase())?i.toUpperCase():Ze.TYPE_UNSPECIFIED})}}function Sl(e){const t={},n=["items"],i=["anyOf"],a=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=e.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(t.nullable=!0,e=s[1]):s[1].type==="null"&&(t.nullable=!0,e=s[0])),e.type instanceof Array&&iR(e.type,t);for(const[u,d]of Object.entries(e))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;t.type=Object.values(Ze).includes(d.toUpperCase())?d.toUpperCase():Ze.TYPE_UNSPECIFIED}else if(n.includes(u))t[u]=Sl(d);else if(i.includes(u)){const p=[];for(const f of d){if(f.type=="null"){t.nullable=!0;continue}p.push(Sl(f))}t[u]=p}else if(a.includes(u)){const p={};for(const[f,g]of Object.entries(d))p[f]=Sl(g);t[u]=p}else{if(u==="additionalProperties")continue;t[u]=d}return t}function nm(e){return Sl(e)}function rm(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function im(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Rl(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Sl(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Sl(t.response));return e}function Dl(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function oR(e,t,n,i=1){const a=!t.startsWith(`${n}/`)&&t.split("/").length===i;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:a?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:a?`${n}/${t}`:t}function $i(e,t){if(typeof t!="string")throw new Error("name must be a string");return oR(e,t,"cachedContents")}function Lw(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Lo(e){return em(e)}function aR(e){return e!=null&&typeof e=="object"&&"name"in e}function lR(e){return e!=null&&typeof e=="object"&&"video"in e}function sR(e){return e!=null&&typeof e=="object"&&"uri"in e}function Uw(e){var t;let n;if(aR(e)&&(n=e.name),!(sR(e)&&(n=e.uri,n===void 0))&&!(lR(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const a=n.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${n}`);n=a[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Ow(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function Bw(e){for(const t of["models","tunedModels","publisherModels"])if(uR(e,t))return e[t];return[]}function uR(e,t){return e!==null&&typeof e=="object"&&t in e}function cR(e,t={}){const n=e,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),t.behavior&&(i.behavior=t.behavior),{functionDeclarations:[i]}}function fR(e,t={}){const n=[],i=new Set;for(const a of e){const s=a.name;if(i.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);i.add(s);const u=cR(a,t);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function zw(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,a=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(a>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function dR(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function qw(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const a=n.inlinedResponses;if(!Array.isArray(a)||a.length===0)return e;let s=!1;for(const u of a){if(typeof u!="object"||u===null)continue;const p=u.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){s=!0;break}}return s&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function Il(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function jw(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pR(e){const t={},n=h(e,["responsesFile"]);n!=null&&v(t,["fileName"],n);const i=h(e,["inlinedResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>VR(u))),v(t,["inlinedResponses"],s)}const a=h(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(u=>u)),v(t,["inlinedEmbedContentResponses"],s)}return t}function hR(e){const t={},n=h(e,["predictionsFormat"]);n!=null&&v(t,["format"],n);const i=h(e,["gcsDestination","outputUriPrefix"]);i!=null&&v(t,["gcsUri"],i);const a=h(e,["bigqueryDestination","outputUri"]);return a!=null&&v(t,["bigqueryUri"],a),t}function mR(e){const t={},n=h(e,["format"]);n!=null&&v(t,["predictionsFormat"],n);const i=h(e,["gcsUri"]);i!=null&&v(t,["gcsDestination","outputUriPrefix"],i);const a=h(e,["bigqueryUri"]);if(a!=null&&v(t,["bigqueryDestination","outputUri"],a),h(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(h(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function qc(e){const t={},n=h(e,["name"]);n!=null&&v(t,["name"],n);const i=h(e,["metadata","displayName"]);i!=null&&v(t,["displayName"],i);const a=h(e,["metadata","state"]);a!=null&&v(t,["state"],jw(a));const s=h(e,["metadata","createTime"]);s!=null&&v(t,["createTime"],s);const u=h(e,["metadata","endTime"]);u!=null&&v(t,["endTime"],u);const d=h(e,["metadata","updateTime"]);d!=null&&v(t,["updateTime"],d);const p=h(e,["metadata","model"]);p!=null&&v(t,["model"],p);const f=h(e,["metadata","output"]);return f!=null&&v(t,["dest"],pR(qw(f))),t}function ph(e){const t={},n=h(e,["name"]);n!=null&&v(t,["name"],n);const i=h(e,["displayName"]);i!=null&&v(t,["displayName"],i);const a=h(e,["state"]);a!=null&&v(t,["state"],jw(a));const s=h(e,["error"]);s!=null&&v(t,["error"],s);const u=h(e,["createTime"]);u!=null&&v(t,["createTime"],u);const d=h(e,["startTime"]);d!=null&&v(t,["startTime"],d);const p=h(e,["endTime"]);p!=null&&v(t,["endTime"],p);const f=h(e,["updateTime"]);f!=null&&v(t,["updateTime"],f);const g=h(e,["model"]);g!=null&&v(t,["model"],g);const b=h(e,["inputConfig"]);b!=null&&v(t,["src"],gR(b));const T=h(e,["outputConfig"]);return T!=null&&v(t,["dest"],hR(qw(T))),t}function gR(e){const t={},n=h(e,["instancesFormat"]);n!=null&&v(t,["format"],n);const i=h(e,["gcsSource","uris"]);i!=null&&v(t,["gcsUri"],i);const a=h(e,["bigquerySource","inputUri"]);return a!=null&&v(t,["bigqueryUri"],a),t}function yR(e,t){const n={};if(h(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(h(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=h(t,["fileName"]);i!=null&&v(n,["fileName"],i);const a=h(t,["inlinedRequests"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(u=>FR(e,u))),v(n,["requests","requests"],s)}return n}function vR(e){const t={},n=h(e,["format"]);n!=null&&v(t,["instancesFormat"],n);const i=h(e,["gcsUri"]);i!=null&&v(t,["gcsSource","uris"],i);const a=h(e,["bigqueryUri"]);if(a!=null&&v(t,["bigquerySource","inputUri"],a),h(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function xR(e){const t={};if(h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["data"]);n!=null&&v(t,["data"],n);const i=h(e,["mimeType"]);return i!=null&&v(t,["mimeType"],i),t}function bR(e,t){const n={},i=h(t,["name"]);return i!=null&&v(n,["_url","name"],Il(e,i)),n}function wR(e,t){const n={},i=h(t,["name"]);return i!=null&&v(n,["_url","name"],Il(e,i)),n}function SR(e){const t={},n=h(e,["content"]);n!=null&&v(t,["content"],n);const i=h(e,["citationMetadata"]);i!=null&&v(t,["citationMetadata"],TR(i));const a=h(e,["tokenCount"]);a!=null&&v(t,["tokenCount"],a);const s=h(e,["finishReason"]);s!=null&&v(t,["finishReason"],s);const u=h(e,["urlContextMetadata"]);u!=null&&v(t,["urlContextMetadata"],u);const d=h(e,["avgLogprobs"]);d!=null&&v(t,["avgLogprobs"],d);const p=h(e,["groundingMetadata"]);p!=null&&v(t,["groundingMetadata"],p);const f=h(e,["index"]);f!=null&&v(t,["index"],f);const g=h(e,["logprobsResult"]);g!=null&&v(t,["logprobsResult"],g);const b=h(e,["safetyRatings"]);if(b!=null){let T=b;Array.isArray(T)&&(T=T.map(E=>E)),v(t,["safetyRatings"],T)}return t}function TR(e){const t={},n=h(e,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>a)),v(t,["citations"],i)}return t}function Hw(e){const t={},n=h(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>QR(s))),v(t,["parts"],a)}const i=h(e,["role"]);return i!=null&&v(t,["role"],i),t}function CR(e,t){const n={},i=h(e,["displayName"]);if(t!==void 0&&i!=null&&v(t,["batch","displayName"],i),h(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function ER(e,t){const n={},i=h(e,["displayName"]);t!==void 0&&i!=null&&v(t,["displayName"],i);const a=h(e,["dest"]);return t!==void 0&&a!=null&&v(t,["outputConfig"],mR(dR(a))),n}function Cx(e,t){const n={},i=h(t,["model"]);i!=null&&v(n,["_url","model"],At(e,i));const a=h(t,["src"]);a!=null&&v(n,["batch","inputConfig"],yR(e,zw(e,a)));const s=h(t,["config"]);return s!=null&&CR(s,n),n}function _R(e,t){const n={},i=h(t,["model"]);i!=null&&v(n,["model"],At(e,i));const a=h(t,["src"]);a!=null&&v(n,["inputConfig"],vR(zw(e,a)));const s=h(t,["config"]);return s!=null&&ER(s,n),n}function AR(e,t){const n={},i=h(e,["displayName"]);return t!==void 0&&i!=null&&v(t,["batch","displayName"],i),n}function kR(e,t){const n={},i=h(t,["model"]);i!=null&&v(n,["_url","model"],At(e,i));const a=h(t,["src"]);a!=null&&v(n,["batch","inputConfig"],LR(e,a));const s=h(t,["config"]);return s!=null&&AR(s,n),n}function NR(e,t){const n={},i=h(t,["name"]);return i!=null&&v(n,["_url","name"],Il(e,i)),n}function MR(e,t){const n={},i=h(t,["name"]);return i!=null&&v(n,["_url","name"],Il(e,i)),n}function RR(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&v(t,["sdkHttpResponse"],n);const i=h(e,["name"]);i!=null&&v(t,["name"],i);const a=h(e,["done"]);a!=null&&v(t,["done"],a);const s=h(e,["error"]);return s!=null&&v(t,["error"],s),t}function DR(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&v(t,["sdkHttpResponse"],n);const i=h(e,["name"]);i!=null&&v(t,["name"],i);const a=h(e,["done"]);a!=null&&v(t,["done"],a);const s=h(e,["error"]);return s!=null&&v(t,["error"],s),t}function IR(e,t){const n={},i=h(t,["contents"]);if(i!=null){let s=tm(e,i);Array.isArray(s)&&(s=s.map(u=>u)),v(n,["requests[]","request","content"],s)}const a=h(t,["config"]);return a!=null&&(v(n,["_self"],PR(a,n)),U2(n,{"requests[].*":"requests[].request.*"})),n}function PR(e,t){const n={},i=h(e,["taskType"]);t!==void 0&&i!=null&&v(t,["requests[]","taskType"],i);const a=h(e,["title"]);t!==void 0&&a!=null&&v(t,["requests[]","title"],a);const s=h(e,["outputDimensionality"]);if(t!==void 0&&s!=null&&v(t,["requests[]","outputDimensionality"],s),h(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function LR(e,t){const n={},i=h(t,["fileName"]);i!=null&&v(n,["file_name"],i);const a=h(t,["inlinedRequests"]);return a!=null&&v(n,["requests"],IR(e,a)),n}function UR(e){const t={};if(h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["fileUri"]);n!=null&&v(t,["fileUri"],n);const i=h(e,["mimeType"]);return i!=null&&v(t,["mimeType"],i),t}function OR(e,t,n){const i={},a=h(t,["systemInstruction"]);n!==void 0&&a!=null&&v(n,["systemInstruction"],Hw(Yn(a)));const s=h(t,["temperature"]);s!=null&&v(i,["temperature"],s);const u=h(t,["topP"]);u!=null&&v(i,["topP"],u);const d=h(t,["topK"]);d!=null&&v(i,["topK"],d);const p=h(t,["candidateCount"]);p!=null&&v(i,["candidateCount"],p);const f=h(t,["maxOutputTokens"]);f!=null&&v(i,["maxOutputTokens"],f);const g=h(t,["stopSequences"]);g!=null&&v(i,["stopSequences"],g);const b=h(t,["responseLogprobs"]);b!=null&&v(i,["responseLogprobs"],b);const T=h(t,["logprobs"]);T!=null&&v(i,["logprobs"],T);const E=h(t,["presencePenalty"]);E!=null&&v(i,["presencePenalty"],E);const k=h(t,["frequencyPenalty"]);k!=null&&v(i,["frequencyPenalty"],k);const I=h(t,["seed"]);I!=null&&v(i,["seed"],I);const D=h(t,["responseMimeType"]);D!=null&&v(i,["responseMimeType"],D);const M=h(t,["responseSchema"]);M!=null&&v(i,["responseSchema"],nm(M));const U=h(t,["responseJsonSchema"]);if(U!=null&&v(i,["responseJsonSchema"],U),h(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const O=h(t,["safetySettings"]);if(n!==void 0&&O!=null){let ce=O;Array.isArray(ce)&&(ce=ce.map(xe=>WR(xe))),v(n,["safetySettings"],ce)}const se=h(t,["tools"]);if(n!==void 0&&se!=null){let ce=Dl(se);Array.isArray(ce)&&(ce=ce.map(xe=>ZR(Rl(xe)))),v(n,["tools"],ce)}const Q=h(t,["toolConfig"]);if(n!==void 0&&Q!=null&&v(n,["toolConfig"],Q),h(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=h(t,["cachedContent"]);n!==void 0&&G!=null&&v(n,["cachedContent"],$i(e,G));const Y=h(t,["responseModalities"]);Y!=null&&v(i,["responseModalities"],Y);const me=h(t,["mediaResolution"]);me!=null&&v(i,["mediaResolution"],me);const j=h(t,["speechConfig"]);if(j!=null&&v(i,["speechConfig"],rm(j)),h(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const B=h(t,["thinkingConfig"]);B!=null&&v(i,["thinkingConfig"],B);const K=h(t,["imageConfig"]);return K!=null&&v(i,["imageConfig"],K),i}function BR(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&v(t,["sdkHttpResponse"],n);const i=h(e,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(f=>SR(f))),v(t,["candidates"],p)}const a=h(e,["modelVersion"]);a!=null&&v(t,["modelVersion"],a);const s=h(e,["promptFeedback"]);s!=null&&v(t,["promptFeedback"],s);const u=h(e,["responseId"]);u!=null&&v(t,["responseId"],u);const d=h(e,["usageMetadata"]);return d!=null&&v(t,["usageMetadata"],d),t}function zR(e,t){const n={},i=h(t,["name"]);return i!=null&&v(n,["_url","name"],Il(e,i)),n}function qR(e,t){const n={},i=h(t,["name"]);return i!=null&&v(n,["_url","name"],Il(e,i)),n}function jR(e){const t={};if(h(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(e,["enableWidget"]);return n!=null&&v(t,["enableWidget"],n),t}function HR(e){const t={},n=h(e,["timeRangeFilter"]);if(n!=null&&v(t,["timeRangeFilter"],n),h(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function FR(e,t){const n={},i=h(t,["model"]);i!=null&&v(n,["request","model"],At(e,i));const a=h(t,["contents"]);if(a!=null){let d=Hr(a);Array.isArray(d)&&(d=d.map(p=>Hw(p))),v(n,["request","contents"],d)}const s=h(t,["metadata"]);s!=null&&v(n,["metadata"],s);const u=h(t,["config"]);return u!=null&&v(n,["request","generationConfig"],OR(e,u,h(n,["request"],{}))),n}function VR(e){const t={},n=h(e,["response"]);n!=null&&v(t,["response"],BR(n));const i=h(e,["error"]);return i!=null&&v(t,["error"],i),t}function GR(e,t){const n={},i=h(e,["pageSize"]);t!==void 0&&i!=null&&v(t,["_query","pageSize"],i);const a=h(e,["pageToken"]);if(t!==void 0&&a!=null&&v(t,["_query","pageToken"],a),h(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function YR(e,t){const n={},i=h(e,["pageSize"]);t!==void 0&&i!=null&&v(t,["_query","pageSize"],i);const a=h(e,["pageToken"]);t!==void 0&&a!=null&&v(t,["_query","pageToken"],a);const s=h(e,["filter"]);return t!==void 0&&s!=null&&v(t,["_query","filter"],s),n}function KR(e){const t={},n=h(e,["config"]);return n!=null&&GR(n,t),t}function JR(e){const t={},n=h(e,["config"]);return n!=null&&YR(n,t),t}function $R(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&v(t,["sdkHttpResponse"],n);const i=h(e,["nextPageToken"]);i!=null&&v(t,["nextPageToken"],i);const a=h(e,["operations"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(u=>qc(u))),v(t,["batchJobs"],s)}return t}function XR(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&v(t,["sdkHttpResponse"],n);const i=h(e,["nextPageToken"]);i!=null&&v(t,["nextPageToken"],i);const a=h(e,["batchPredictionJobs"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(u=>ph(u))),v(t,["batchJobs"],s)}return t}function QR(e){const t={},n=h(e,["videoMetadata"]);n!=null&&v(t,["videoMetadata"],n);const i=h(e,["thought"]);i!=null&&v(t,["thought"],i);const a=h(e,["inlineData"]);a!=null&&v(t,["inlineData"],xR(a));const s=h(e,["fileData"]);s!=null&&v(t,["fileData"],UR(s));const u=h(e,["thoughtSignature"]);u!=null&&v(t,["thoughtSignature"],u);const d=h(e,["functionCall"]);d!=null&&v(t,["functionCall"],d);const p=h(e,["codeExecutionResult"]);p!=null&&v(t,["codeExecutionResult"],p);const f=h(e,["executableCode"]);f!=null&&v(t,["executableCode"],f);const g=h(e,["functionResponse"]);g!=null&&v(t,["functionResponse"],g);const b=h(e,["text"]);return b!=null&&v(t,["text"],b),t}function WR(e){const t={};if(h(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=h(e,["category"]);n!=null&&v(t,["category"],n);const i=h(e,["threshold"]);return i!=null&&v(t,["threshold"],i),t}function ZR(e){const t={},n=h(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(g=>g)),v(t,["functionDeclarations"],f)}if(h(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=h(e,["googleSearch"]);i!=null&&v(t,["googleSearch"],HR(i));const a=h(e,["googleSearchRetrieval"]);if(a!=null&&v(t,["googleSearchRetrieval"],a),h(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=h(e,["googleMaps"]);s!=null&&v(t,["googleMaps"],jR(s));const u=h(e,["urlContext"]);u!=null&&v(t,["urlContext"],u);const d=h(e,["computerUse"]);d!=null&&v(t,["computerUse"],d);const p=h(e,["codeExecution"]);return p!=null&&v(t,["codeExecution"],p),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var va;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(va||(va={}));class pu{constructor(t,n,i,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,i,a)}init(t,n,i){var a,s;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(s=(a=u.config)===null||a===void 0?void 0:a.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eD extends Sa{constructor(t){super(),this.apiClient=t,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new pu(va.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(t){const n=Cx(this.apiClient,t),i=n._url,a=Ge("{model}:batchGenerateContent",i),d=n.batch.inputConfig.requests,p=d.requests,f=[];for(const g of p){const b=Object.assign({},g);if(b.systemInstruction){const T=b.systemInstruction;delete b.systemInstruction;const E=b.request;E.systemInstruction=T,b.request=E}f.push(b)}return d.requests=f,delete n.config,delete n._url,delete n._query,{path:a,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const i=n?Object.assign({},n):{},a=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${a}`),i.dest===void 0){const s=this.getGcsUri(t),u=this.getBigqueryUri(t);if(s)s.endsWith(".jsonl")?i.dest=`${s.slice(0,-6)}/dest`:i.dest=`${s}_dest_${a}`;else if(u)i.dest=`${u}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(t){var n,i,a,s;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=_R(this.apiClient,t);return d=Ge("batchPredictionJobs",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),u.then(g=>ph(g))}else{const f=Cx(this.apiClient,t);return d=Ge("{model}:batchGenerateContent",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),u.then(g=>qc(g))}}async createEmbeddingsInternal(t){var n,i;let a,s="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=kR(this.apiClient,t);return s=Ge("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>qc(p))}}async get(t){var n,i,a,s;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=qR(this.apiClient,t);return d=Ge("batchPredictionJobs/{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),u.then(g=>ph(g))}else{const f=zR(this.apiClient,t);return d=Ge("batches/{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),u.then(g=>qc(g))}}async cancel(t){var n,i,a,s;let u="",d={};if(this.apiClient.isVertexAI()){const p=wR(this.apiClient,t);u=Ge("batchPredictionJobs/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=bR(this.apiClient,t);u=Ge("batches/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(t){var n,i,a,s;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=JR(t);return d=Ge("batchPredictionJobs",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:g.headers},T})),u.then(g=>{const b=XR(g),T=new bx;return Object.assign(T,b),T})}else{const f=KR(t);return d=Ge("batches",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:g.headers},T})),u.then(g=>{const b=$R(g),T=new bx;return Object.assign(T,b),T})}}async delete(t){var n,i,a,s;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=MR(this.apiClient,t);return d=Ge("batchPredictionJobs/{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:g.headers},T})),u.then(g=>DR(g))}else{const f=NR(this.apiClient,t);return d=Ge("batches/{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:g.headers},T})),u.then(g=>RR(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tD(e){const t={};if(h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["data"]);n!=null&&v(t,["data"],n);const i=h(e,["mimeType"]);return i!=null&&v(t,["mimeType"],i),t}function Ex(e){const t={},n=h(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>SD(s))),v(t,["parts"],a)}const i=h(e,["role"]);return i!=null&&v(t,["role"],i),t}function nD(e,t){const n={},i=h(e,["ttl"]);t!==void 0&&i!=null&&v(t,["ttl"],i);const a=h(e,["expireTime"]);t!==void 0&&a!=null&&v(t,["expireTime"],a);const s=h(e,["displayName"]);t!==void 0&&s!=null&&v(t,["displayName"],s);const u=h(e,["contents"]);if(t!==void 0&&u!=null){let g=Hr(u);Array.isArray(g)&&(g=g.map(b=>Ex(b))),v(t,["contents"],g)}const d=h(e,["systemInstruction"]);t!==void 0&&d!=null&&v(t,["systemInstruction"],Ex(Yn(d)));const p=h(e,["tools"]);if(t!==void 0&&p!=null){let g=p;Array.isArray(g)&&(g=g.map(b=>TD(b))),v(t,["tools"],g)}const f=h(e,["toolConfig"]);if(t!==void 0&&f!=null&&v(t,["toolConfig"],f),h(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function rD(e,t){const n={},i=h(e,["ttl"]);t!==void 0&&i!=null&&v(t,["ttl"],i);const a=h(e,["expireTime"]);t!==void 0&&a!=null&&v(t,["expireTime"],a);const s=h(e,["displayName"]);t!==void 0&&s!=null&&v(t,["displayName"],s);const u=h(e,["contents"]);if(t!==void 0&&u!=null){let b=Hr(u);Array.isArray(b)&&(b=b.map(T=>T)),v(t,["contents"],b)}const d=h(e,["systemInstruction"]);t!==void 0&&d!=null&&v(t,["systemInstruction"],Yn(d));const p=h(e,["tools"]);if(t!==void 0&&p!=null){let b=p;Array.isArray(b)&&(b=b.map(T=>CD(T))),v(t,["tools"],b)}const f=h(e,["toolConfig"]);t!==void 0&&f!=null&&v(t,["toolConfig"],f);const g=h(e,["kmsKeyName"]);return t!==void 0&&g!=null&&v(t,["encryption_spec","kmsKeyName"],g),n}function iD(e,t){const n={},i=h(t,["model"]);i!=null&&v(n,["model"],Mw(e,i));const a=h(t,["config"]);return a!=null&&nD(a,n),n}function oD(e,t){const n={},i=h(t,["model"]);i!=null&&v(n,["model"],Mw(e,i));const a=h(t,["config"]);return a!=null&&rD(a,n),n}function aD(e,t){const n={},i=h(t,["name"]);return i!=null&&v(n,["_url","name"],$i(e,i)),n}function lD(e,t){const n={},i=h(t,["name"]);return i!=null&&v(n,["_url","name"],$i(e,i)),n}function sD(e){const t={},n=h(e,["sdkHttpResponse"]);return n!=null&&v(t,["sdkHttpResponse"],n),t}function uD(e){const t={},n=h(e,["sdkHttpResponse"]);return n!=null&&v(t,["sdkHttpResponse"],n),t}function cD(e){const t={};if(h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["fileUri"]);n!=null&&v(t,["fileUri"],n);const i=h(e,["mimeType"]);return i!=null&&v(t,["mimeType"],i),t}function fD(e){const t={};if(h(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(e,["description"]);n!=null&&v(t,["description"],n);const i=h(e,["name"]);i!=null&&v(t,["name"],i);const a=h(e,["parameters"]);a!=null&&v(t,["parameters"],a);const s=h(e,["parametersJsonSchema"]);s!=null&&v(t,["parametersJsonSchema"],s);const u=h(e,["response"]);u!=null&&v(t,["response"],u);const d=h(e,["responseJsonSchema"]);return d!=null&&v(t,["responseJsonSchema"],d),t}function dD(e,t){const n={},i=h(t,["name"]);return i!=null&&v(n,["_url","name"],$i(e,i)),n}function pD(e,t){const n={},i=h(t,["name"]);return i!=null&&v(n,["_url","name"],$i(e,i)),n}function hD(e){const t={};if(h(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(e,["enableWidget"]);return n!=null&&v(t,["enableWidget"],n),t}function mD(e){const t={},n=h(e,["timeRangeFilter"]);if(n!=null&&v(t,["timeRangeFilter"],n),h(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function gD(e,t){const n={},i=h(e,["pageSize"]);t!==void 0&&i!=null&&v(t,["_query","pageSize"],i);const a=h(e,["pageToken"]);return t!==void 0&&a!=null&&v(t,["_query","pageToken"],a),n}function yD(e,t){const n={},i=h(e,["pageSize"]);t!==void 0&&i!=null&&v(t,["_query","pageSize"],i);const a=h(e,["pageToken"]);return t!==void 0&&a!=null&&v(t,["_query","pageToken"],a),n}function vD(e){const t={},n=h(e,["config"]);return n!=null&&gD(n,t),t}function xD(e){const t={},n=h(e,["config"]);return n!=null&&yD(n,t),t}function bD(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&v(t,["sdkHttpResponse"],n);const i=h(e,["nextPageToken"]);i!=null&&v(t,["nextPageToken"],i);const a=h(e,["cachedContents"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(u=>u)),v(t,["cachedContents"],s)}return t}function wD(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&v(t,["sdkHttpResponse"],n);const i=h(e,["nextPageToken"]);i!=null&&v(t,["nextPageToken"],i);const a=h(e,["cachedContents"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(u=>u)),v(t,["cachedContents"],s)}return t}function SD(e){const t={},n=h(e,["videoMetadata"]);n!=null&&v(t,["videoMetadata"],n);const i=h(e,["thought"]);i!=null&&v(t,["thought"],i);const a=h(e,["inlineData"]);a!=null&&v(t,["inlineData"],tD(a));const s=h(e,["fileData"]);s!=null&&v(t,["fileData"],cD(s));const u=h(e,["thoughtSignature"]);u!=null&&v(t,["thoughtSignature"],u);const d=h(e,["functionCall"]);d!=null&&v(t,["functionCall"],d);const p=h(e,["codeExecutionResult"]);p!=null&&v(t,["codeExecutionResult"],p);const f=h(e,["executableCode"]);f!=null&&v(t,["executableCode"],f);const g=h(e,["functionResponse"]);g!=null&&v(t,["functionResponse"],g);const b=h(e,["text"]);return b!=null&&v(t,["text"],b),t}function TD(e){const t={},n=h(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(g=>g)),v(t,["functionDeclarations"],f)}if(h(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=h(e,["googleSearch"]);i!=null&&v(t,["googleSearch"],mD(i));const a=h(e,["googleSearchRetrieval"]);if(a!=null&&v(t,["googleSearchRetrieval"],a),h(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=h(e,["googleMaps"]);s!=null&&v(t,["googleMaps"],hD(s));const u=h(e,["urlContext"]);u!=null&&v(t,["urlContext"],u);const d=h(e,["computerUse"]);d!=null&&v(t,["computerUse"],d);const p=h(e,["codeExecution"]);return p!=null&&v(t,["codeExecution"],p),t}function CD(e){const t={},n=h(e,["functionDeclarations"]);if(n!=null){let b=n;Array.isArray(b)&&(b=b.map(T=>fD(T))),v(t,["functionDeclarations"],b)}const i=h(e,["retrieval"]);i!=null&&v(t,["retrieval"],i);const a=h(e,["googleSearch"]);a!=null&&v(t,["googleSearch"],a);const s=h(e,["googleSearchRetrieval"]);s!=null&&v(t,["googleSearchRetrieval"],s);const u=h(e,["enterpriseWebSearch"]);u!=null&&v(t,["enterpriseWebSearch"],u);const d=h(e,["googleMaps"]);d!=null&&v(t,["googleMaps"],d);const p=h(e,["urlContext"]);p!=null&&v(t,["urlContext"],p);const f=h(e,["computerUse"]);f!=null&&v(t,["computerUse"],f);const g=h(e,["codeExecution"]);return g!=null&&v(t,["codeExecution"],g),t}function ED(e,t){const n={},i=h(e,["ttl"]);t!==void 0&&i!=null&&v(t,["ttl"],i);const a=h(e,["expireTime"]);return t!==void 0&&a!=null&&v(t,["expireTime"],a),n}function _D(e,t){const n={},i=h(e,["ttl"]);t!==void 0&&i!=null&&v(t,["ttl"],i);const a=h(e,["expireTime"]);return t!==void 0&&a!=null&&v(t,["expireTime"],a),n}function AD(e,t){const n={},i=h(t,["name"]);i!=null&&v(n,["_url","name"],$i(e,i));const a=h(t,["config"]);return a!=null&&ED(a,n),n}function kD(e,t){const n={},i=h(t,["name"]);i!=null&&v(n,["_url","name"],$i(e,i));const a=h(t,["config"]);return a!=null&&_D(a,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ND extends Sa{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new pu(va.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(t){var n,i,a,s;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=oD(this.apiClient,t);return d=Ge("cachedContents",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),u.then(g=>g)}else{const f=iD(this.apiClient,t);return d=Ge("cachedContents",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),u.then(g=>g)}}async get(t){var n,i,a,s;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=pD(this.apiClient,t);return d=Ge("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),u.then(g=>g)}else{const f=dD(this.apiClient,t);return d=Ge("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),u.then(g=>g)}}async delete(t){var n,i,a,s;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=lD(this.apiClient,t);return d=Ge("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:g.headers},T})),u.then(g=>{const b=uD(g),T=new vx;return Object.assign(T,b),T})}else{const f=aD(this.apiClient,t);return d=Ge("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:g.headers},T})),u.then(g=>{const b=sD(g),T=new vx;return Object.assign(T,b),T})}}async update(t){var n,i,a,s;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=kD(this.apiClient,t);return d=Ge("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),u.then(g=>g)}else{const f=AD(this.apiClient,t);return d=Ge("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),u.then(g=>g)}}async listInternal(t){var n,i,a,s;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=xD(t);return d=Ge("cachedContents",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:g.headers},T})),u.then(g=>{const b=wD(g),T=new xx;return Object.assign(T,b),T})}else{const f=vD(t);return d=Ge("cachedContents",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:g.headers},T})),u.then(g=>{const b=bD(g),T=new xx;return Object.assign(T,b),T})}}}function _x(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Qt(e){return this instanceof Qt?(this.v=e,this):new Qt(e)}function Tl(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),a,s=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),a[Symbol.asyncIterator]=function(){return this},a;function u(E){return function(k){return Promise.resolve(k).then(E,b)}}function d(E,k){i[E]&&(a[E]=function(I){return new Promise(function(D,M){s.push([E,I,D,M])>1||p(E,I)})},k&&(a[E]=k(a[E])))}function p(E,k){try{f(i[E](k))}catch(I){T(s[0][3],I)}}function f(E){E.value instanceof Qt?Promise.resolve(E.value.v).then(g,b):T(s[0][2],E)}function g(E){p("next",E)}function b(E){p("throw",E)}function T(E,k){E(k),s.shift(),s.length&&p(s[0][0],s[0][1])}}function Zs(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof _x=="function"?_x(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=e[s]&&function(u){return new Promise(function(d,p){u=e[s](u),a(d,p,u.done,u.value)})}}function a(s,u,d,p){Promise.resolve(p).then(function(f){s({value:f,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MD(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:Fw(n)}function Fw(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function RD(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Ax(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let i=0;for(;i<n;)if(e[i].role==="user")t.push(e[i]),i++;else{const a=[];let s=!0;for(;i<n&&e[i].role==="model";)a.push(e[i]),s&&!Fw(e[i])&&(s=!1),i++;s?t.push(...a):t.pop()}return t}class DD{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new ID(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class ID{constructor(t,n,i,a={},s=[]){this.apiClient=t,this.modelsModule=n,this.model=i,this.config=a,this.history=s,this.sendPromise=Promise.resolve(),RD(s)}async sendMessage(t){var n;await this.sendPromise;const i=Yn(t.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,u,d;const p=await a,f=(u=(s=p.candidates)===null||s===void 0?void 0:s[0])===null||u===void 0?void 0:u.content,g=p.automaticFunctionCallingHistory,b=this.getHistory(!0).length;let T=[];g!=null&&(T=(d=g.slice(b))!==null&&d!==void 0?d:[]);const E=f?[f]:[];this.recordHistory(i,E,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(t){var n;await this.sendPromise;const i=Yn(t.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const s=await a;return this.processStreamResponse(s,i)}getHistory(t=!1){const n=t?Ax(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){var i,a;return Tl(this,arguments,function*(){var u,d,p,f;const g=[];try{for(var b=!0,T=Zs(t),E;E=yield Qt(T.next()),u=E.done,!u;b=!0){f=E.value,b=!1;const k=f;if(MD(k)){const I=(a=(i=k.candidates)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.content;I!==void 0&&g.push(I)}yield yield Qt(k)}}catch(k){d={error:k}}finally{try{!b&&!u&&(p=T.return)&&(yield Qt(p.call(T)))}finally{if(d)throw d.error}}this.recordHistory(n,g)})}recordHistory(t,n,i){let a=[];n.length>0&&n.every(s=>s.role!==void 0)?a=n:a.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Ax(i)):this.history.push(t),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yf extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,yf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PD(e){const t={},n=h(e,["file"]);return n!=null&&v(t,["file"],n),t}function LD(e){const t={},n=h(e,["sdkHttpResponse"]);return n!=null&&v(t,["sdkHttpResponse"],n),t}function UD(e){const t={},n=h(e,["name"]);return n!=null&&v(t,["_url","file"],Uw(n)),t}function OD(e){const t={},n=h(e,["sdkHttpResponse"]);return n!=null&&v(t,["sdkHttpResponse"],n),t}function BD(e){const t={},n=h(e,["name"]);return n!=null&&v(t,["_url","file"],Uw(n)),t}function zD(e,t){const n={},i=h(e,["pageSize"]);t!==void 0&&i!=null&&v(t,["_query","pageSize"],i);const a=h(e,["pageToken"]);return t!==void 0&&a!=null&&v(t,["_query","pageToken"],a),n}function qD(e){const t={},n=h(e,["config"]);return n!=null&&zD(n,t),t}function jD(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&v(t,["sdkHttpResponse"],n);const i=h(e,["nextPageToken"]);i!=null&&v(t,["nextPageToken"],i);const a=h(e,["files"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(u=>u)),v(t,["files"],s)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HD extends Sa{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new pu(va.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,i;let a,s="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=qD(t);return s=Ge("files",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const f=jD(p),g=new Z2;return Object.assign(g,f),g})}}async createInternal(t){var n,i;let a,s="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=PD(t);return s=Ge("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>{const f=LD(p),g=new eR;return Object.assign(g,f),g})}}async get(t){var n,i;let a,s="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=BD(t);return s=Ge("files/{file}",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(t){var n,i;let a,s="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=UD(t);return s=Ge("files/{file}",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const f=OD(p),g=new tR;return Object.assign(g,f),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jc(e){const t={};if(h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["data"]);n!=null&&v(t,["data"],n);const i=h(e,["mimeType"]);return i!=null&&v(t,["mimeType"],i),t}function FD(e){const t={},n=h(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>iI(s))),v(t,["parts"],a)}const i=h(e,["role"]);return i!=null&&v(t,["role"],i),t}function VD(e){const t={};if(h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["fileUri"]);n!=null&&v(t,["fileUri"],n);const i=h(e,["mimeType"]);return i!=null&&v(t,["mimeType"],i),t}function GD(e){const t={};if(h(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(e,["description"]);n!=null&&v(t,["description"],n);const i=h(e,["name"]);i!=null&&v(t,["name"],i);const a=h(e,["parameters"]);a!=null&&v(t,["parameters"],a);const s=h(e,["parametersJsonSchema"]);s!=null&&v(t,["parametersJsonSchema"],s);const u=h(e,["response"]);u!=null&&v(t,["response"],u);const d=h(e,["responseJsonSchema"]);return d!=null&&v(t,["responseJsonSchema"],d),t}function YD(e){const t={},n=h(e,["modelSelectionConfig"]);n!=null&&v(t,["modelConfig"],n);const i=h(e,["audioTimestamp"]);i!=null&&v(t,["audioTimestamp"],i);const a=h(e,["candidateCount"]);a!=null&&v(t,["candidateCount"],a);const s=h(e,["enableAffectiveDialog"]);s!=null&&v(t,["enableAffectiveDialog"],s);const u=h(e,["frequencyPenalty"]);u!=null&&v(t,["frequencyPenalty"],u);const d=h(e,["logprobs"]);d!=null&&v(t,["logprobs"],d);const p=h(e,["maxOutputTokens"]);p!=null&&v(t,["maxOutputTokens"],p);const f=h(e,["mediaResolution"]);f!=null&&v(t,["mediaResolution"],f);const g=h(e,["presencePenalty"]);g!=null&&v(t,["presencePenalty"],g);const b=h(e,["responseJsonSchema"]);b!=null&&v(t,["responseJsonSchema"],b);const T=h(e,["responseLogprobs"]);T!=null&&v(t,["responseLogprobs"],T);const E=h(e,["responseMimeType"]);E!=null&&v(t,["responseMimeType"],E);const k=h(e,["responseModalities"]);k!=null&&v(t,["responseModalities"],k);const I=h(e,["responseSchema"]);I!=null&&v(t,["responseSchema"],I);const D=h(e,["routingConfig"]);D!=null&&v(t,["routingConfig"],D);const M=h(e,["seed"]);M!=null&&v(t,["seed"],M);const U=h(e,["speechConfig"]);U!=null&&v(t,["speechConfig"],Vw(U));const O=h(e,["stopSequences"]);O!=null&&v(t,["stopSequences"],O);const se=h(e,["temperature"]);se!=null&&v(t,["temperature"],se);const Q=h(e,["thinkingConfig"]);Q!=null&&v(t,["thinkingConfig"],Q);const G=h(e,["topK"]);G!=null&&v(t,["topK"],G);const Y=h(e,["topP"]);return Y!=null&&v(t,["topP"],Y),t}function KD(e){const t={};if(h(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(e,["enableWidget"]);return n!=null&&v(t,["enableWidget"],n),t}function JD(e){const t={},n=h(e,["timeRangeFilter"]);if(n!=null&&v(t,["timeRangeFilter"],n),h(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function $D(e,t){const n={},i=h(e,["generationConfig"]);t!==void 0&&i!=null&&v(t,["setup","generationConfig"],i);const a=h(e,["responseModalities"]);t!==void 0&&a!=null&&v(t,["setup","generationConfig","responseModalities"],a);const s=h(e,["temperature"]);t!==void 0&&s!=null&&v(t,["setup","generationConfig","temperature"],s);const u=h(e,["topP"]);t!==void 0&&u!=null&&v(t,["setup","generationConfig","topP"],u);const d=h(e,["topK"]);t!==void 0&&d!=null&&v(t,["setup","generationConfig","topK"],d);const p=h(e,["maxOutputTokens"]);t!==void 0&&p!=null&&v(t,["setup","generationConfig","maxOutputTokens"],p);const f=h(e,["mediaResolution"]);t!==void 0&&f!=null&&v(t,["setup","generationConfig","mediaResolution"],f);const g=h(e,["seed"]);t!==void 0&&g!=null&&v(t,["setup","generationConfig","seed"],g);const b=h(e,["speechConfig"]);t!==void 0&&b!=null&&v(t,["setup","generationConfig","speechConfig"],im(b));const T=h(e,["thinkingConfig"]);t!==void 0&&T!=null&&v(t,["setup","generationConfig","thinkingConfig"],T);const E=h(e,["enableAffectiveDialog"]);t!==void 0&&E!=null&&v(t,["setup","generationConfig","enableAffectiveDialog"],E);const k=h(e,["systemInstruction"]);t!==void 0&&k!=null&&v(t,["setup","systemInstruction"],FD(Yn(k)));const I=h(e,["tools"]);if(t!==void 0&&I!=null){let G=Dl(I);Array.isArray(G)&&(G=G.map(Y=>aI(Rl(Y)))),v(t,["setup","tools"],G)}const D=h(e,["sessionResumption"]);t!==void 0&&D!=null&&v(t,["setup","sessionResumption"],oI(D));const M=h(e,["inputAudioTranscription"]);t!==void 0&&M!=null&&v(t,["setup","inputAudioTranscription"],M);const U=h(e,["outputAudioTranscription"]);t!==void 0&&U!=null&&v(t,["setup","outputAudioTranscription"],U);const O=h(e,["realtimeInputConfig"]);t!==void 0&&O!=null&&v(t,["setup","realtimeInputConfig"],O);const se=h(e,["contextWindowCompression"]);t!==void 0&&se!=null&&v(t,["setup","contextWindowCompression"],se);const Q=h(e,["proactivity"]);return t!==void 0&&Q!=null&&v(t,["setup","proactivity"],Q),n}function XD(e,t){const n={},i=h(e,["generationConfig"]);t!==void 0&&i!=null&&v(t,["setup","generationConfig"],YD(i));const a=h(e,["responseModalities"]);t!==void 0&&a!=null&&v(t,["setup","generationConfig","responseModalities"],a);const s=h(e,["temperature"]);t!==void 0&&s!=null&&v(t,["setup","generationConfig","temperature"],s);const u=h(e,["topP"]);t!==void 0&&u!=null&&v(t,["setup","generationConfig","topP"],u);const d=h(e,["topK"]);t!==void 0&&d!=null&&v(t,["setup","generationConfig","topK"],d);const p=h(e,["maxOutputTokens"]);t!==void 0&&p!=null&&v(t,["setup","generationConfig","maxOutputTokens"],p);const f=h(e,["mediaResolution"]);t!==void 0&&f!=null&&v(t,["setup","generationConfig","mediaResolution"],f);const g=h(e,["seed"]);t!==void 0&&g!=null&&v(t,["setup","generationConfig","seed"],g);const b=h(e,["speechConfig"]);t!==void 0&&b!=null&&v(t,["setup","generationConfig","speechConfig"],Vw(im(b)));const T=h(e,["thinkingConfig"]);t!==void 0&&T!=null&&v(t,["setup","generationConfig","thinkingConfig"],T);const E=h(e,["enableAffectiveDialog"]);t!==void 0&&E!=null&&v(t,["setup","generationConfig","enableAffectiveDialog"],E);const k=h(e,["systemInstruction"]);t!==void 0&&k!=null&&v(t,["setup","systemInstruction"],Yn(k));const I=h(e,["tools"]);if(t!==void 0&&I!=null){let G=Dl(I);Array.isArray(G)&&(G=G.map(Y=>lI(Rl(Y)))),v(t,["setup","tools"],G)}const D=h(e,["sessionResumption"]);t!==void 0&&D!=null&&v(t,["setup","sessionResumption"],D);const M=h(e,["inputAudioTranscription"]);t!==void 0&&M!=null&&v(t,["setup","inputAudioTranscription"],M);const U=h(e,["outputAudioTranscription"]);t!==void 0&&U!=null&&v(t,["setup","outputAudioTranscription"],U);const O=h(e,["realtimeInputConfig"]);t!==void 0&&O!=null&&v(t,["setup","realtimeInputConfig"],O);const se=h(e,["contextWindowCompression"]);t!==void 0&&se!=null&&v(t,["setup","contextWindowCompression"],se);const Q=h(e,["proactivity"]);return t!==void 0&&Q!=null&&v(t,["setup","proactivity"],Q),n}function QD(e,t){const n={},i=h(t,["model"]);i!=null&&v(n,["setup","model"],At(e,i));const a=h(t,["config"]);return a!=null&&v(n,["config"],$D(a,n)),n}function WD(e,t){const n={},i=h(t,["model"]);i!=null&&v(n,["setup","model"],At(e,i));const a=h(t,["config"]);return a!=null&&v(n,["config"],XD(a,n)),n}function ZD(e){const t={},n=h(e,["musicGenerationConfig"]);return n!=null&&v(t,["musicGenerationConfig"],n),t}function eI(e){const t={},n=h(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>a)),v(t,["weightedPrompts"],i)}return t}function tI(e){const t={},n=h(e,["media"]);if(n!=null){let f=Rw(n);Array.isArray(f)&&(f=f.map(g=>jc(g))),v(t,["mediaChunks"],f)}const i=h(e,["audio"]);i!=null&&v(t,["audio"],jc(Iw(i)));const a=h(e,["audioStreamEnd"]);a!=null&&v(t,["audioStreamEnd"],a);const s=h(e,["video"]);s!=null&&v(t,["video"],jc(Dw(s)));const u=h(e,["text"]);u!=null&&v(t,["text"],u);const d=h(e,["activityStart"]);d!=null&&v(t,["activityStart"],d);const p=h(e,["activityEnd"]);return p!=null&&v(t,["activityEnd"],p),t}function nI(e){const t={},n=h(e,["media"]);if(n!=null){let f=Rw(n);Array.isArray(f)&&(f=f.map(g=>g)),v(t,["mediaChunks"],f)}const i=h(e,["audio"]);i!=null&&v(t,["audio"],Iw(i));const a=h(e,["audioStreamEnd"]);a!=null&&v(t,["audioStreamEnd"],a);const s=h(e,["video"]);s!=null&&v(t,["video"],Dw(s));const u=h(e,["text"]);u!=null&&v(t,["text"],u);const d=h(e,["activityStart"]);d!=null&&v(t,["activityStart"],d);const p=h(e,["activityEnd"]);return p!=null&&v(t,["activityEnd"],p),t}function rI(e){const t={},n=h(e,["setupComplete"]);n!=null&&v(t,["setupComplete"],n);const i=h(e,["serverContent"]);i!=null&&v(t,["serverContent"],i);const a=h(e,["toolCall"]);a!=null&&v(t,["toolCall"],a);const s=h(e,["toolCallCancellation"]);s!=null&&v(t,["toolCallCancellation"],s);const u=h(e,["usageMetadata"]);u!=null&&v(t,["usageMetadata"],sI(u));const d=h(e,["goAway"]);d!=null&&v(t,["goAway"],d);const p=h(e,["sessionResumptionUpdate"]);return p!=null&&v(t,["sessionResumptionUpdate"],p),t}function iI(e){const t={},n=h(e,["videoMetadata"]);n!=null&&v(t,["videoMetadata"],n);const i=h(e,["thought"]);i!=null&&v(t,["thought"],i);const a=h(e,["inlineData"]);a!=null&&v(t,["inlineData"],jc(a));const s=h(e,["fileData"]);s!=null&&v(t,["fileData"],VD(s));const u=h(e,["thoughtSignature"]);u!=null&&v(t,["thoughtSignature"],u);const d=h(e,["functionCall"]);d!=null&&v(t,["functionCall"],d);const p=h(e,["codeExecutionResult"]);p!=null&&v(t,["codeExecutionResult"],p);const f=h(e,["executableCode"]);f!=null&&v(t,["executableCode"],f);const g=h(e,["functionResponse"]);g!=null&&v(t,["functionResponse"],g);const b=h(e,["text"]);return b!=null&&v(t,["text"],b),t}function oI(e){const t={},n=h(e,["handle"]);if(n!=null&&v(t,["handle"],n),h(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function Vw(e){const t={},n=h(e,["voiceConfig"]);if(n!=null&&v(t,["voiceConfig"],n),h(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=h(e,["languageCode"]);return i!=null&&v(t,["languageCode"],i),t}function aI(e){const t={},n=h(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(g=>g)),v(t,["functionDeclarations"],f)}if(h(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=h(e,["googleSearch"]);i!=null&&v(t,["googleSearch"],JD(i));const a=h(e,["googleSearchRetrieval"]);if(a!=null&&v(t,["googleSearchRetrieval"],a),h(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=h(e,["googleMaps"]);s!=null&&v(t,["googleMaps"],KD(s));const u=h(e,["urlContext"]);u!=null&&v(t,["urlContext"],u);const d=h(e,["computerUse"]);d!=null&&v(t,["computerUse"],d);const p=h(e,["codeExecution"]);return p!=null&&v(t,["codeExecution"],p),t}function lI(e){const t={},n=h(e,["functionDeclarations"]);if(n!=null){let b=n;Array.isArray(b)&&(b=b.map(T=>GD(T))),v(t,["functionDeclarations"],b)}const i=h(e,["retrieval"]);i!=null&&v(t,["retrieval"],i);const a=h(e,["googleSearch"]);a!=null&&v(t,["googleSearch"],a);const s=h(e,["googleSearchRetrieval"]);s!=null&&v(t,["googleSearchRetrieval"],s);const u=h(e,["enterpriseWebSearch"]);u!=null&&v(t,["enterpriseWebSearch"],u);const d=h(e,["googleMaps"]);d!=null&&v(t,["googleMaps"],d);const p=h(e,["urlContext"]);p!=null&&v(t,["urlContext"],p);const f=h(e,["computerUse"]);f!=null&&v(t,["computerUse"],f);const g=h(e,["codeExecution"]);return g!=null&&v(t,["codeExecution"],g),t}function sI(e){const t={},n=h(e,["promptTokenCount"]);n!=null&&v(t,["promptTokenCount"],n);const i=h(e,["cachedContentTokenCount"]);i!=null&&v(t,["cachedContentTokenCount"],i);const a=h(e,["candidatesTokenCount"]);a!=null&&v(t,["responseTokenCount"],a);const s=h(e,["toolUsePromptTokenCount"]);s!=null&&v(t,["toolUsePromptTokenCount"],s);const u=h(e,["thoughtsTokenCount"]);u!=null&&v(t,["thoughtsTokenCount"],u);const d=h(e,["totalTokenCount"]);d!=null&&v(t,["totalTokenCount"],d);const p=h(e,["promptTokensDetails"]);if(p!=null){let E=p;Array.isArray(E)&&(E=E.map(k=>k)),v(t,["promptTokensDetails"],E)}const f=h(e,["cacheTokensDetails"]);if(f!=null){let E=f;Array.isArray(E)&&(E=E.map(k=>k)),v(t,["cacheTokensDetails"],E)}const g=h(e,["candidatesTokensDetails"]);if(g!=null){let E=g;Array.isArray(E)&&(E=E.map(k=>k)),v(t,["responseTokensDetails"],E)}const b=h(e,["toolUsePromptTokensDetails"]);if(b!=null){let E=b;Array.isArray(E)&&(E=E.map(k=>k)),v(t,["toolUsePromptTokensDetails"],E)}const T=h(e,["trafficType"]);return T!=null&&v(t,["trafficType"],T),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uI(e){const t={};if(h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["data"]);n!=null&&v(t,["data"],n);const i=h(e,["mimeType"]);return i!=null&&v(t,["mimeType"],i),t}function cI(e){const t={},n=h(e,["content"]);n!=null&&v(t,["content"],n);const i=h(e,["citationMetadata"]);i!=null&&v(t,["citationMetadata"],fI(i));const a=h(e,["tokenCount"]);a!=null&&v(t,["tokenCount"],a);const s=h(e,["finishReason"]);s!=null&&v(t,["finishReason"],s);const u=h(e,["urlContextMetadata"]);u!=null&&v(t,["urlContextMetadata"],u);const d=h(e,["avgLogprobs"]);d!=null&&v(t,["avgLogprobs"],d);const p=h(e,["groundingMetadata"]);p!=null&&v(t,["groundingMetadata"],p);const f=h(e,["index"]);f!=null&&v(t,["index"],f);const g=h(e,["logprobsResult"]);g!=null&&v(t,["logprobsResult"],g);const b=h(e,["safetyRatings"]);if(b!=null){let T=b;Array.isArray(T)&&(T=T.map(E=>E)),v(t,["safetyRatings"],T)}return t}function fI(e){const t={},n=h(e,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>a)),v(t,["citations"],i)}return t}function dI(e,t){const n={},i=h(t,["model"]);i!=null&&v(n,["_url","model"],At(e,i));const a=h(t,["contents"]);if(a!=null){let s=Hr(a);Array.isArray(s)&&(s=s.map(u=>u)),v(n,["contents"],s)}return n}function pI(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&v(t,["sdkHttpResponse"],n);const i=h(e,["tokensInfo"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>s)),v(t,["tokensInfo"],a)}return t}function hI(e){const t={},n=h(e,["values"]);n!=null&&v(t,["values"],n);const i=h(e,["statistics"]);return i!=null&&v(t,["statistics"],mI(i)),t}function mI(e){const t={},n=h(e,["truncated"]);n!=null&&v(t,["truncated"],n);const i=h(e,["token_count"]);return i!=null&&v(t,["tokenCount"],i),t}function vf(e){const t={},n=h(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>bP(s))),v(t,["parts"],a)}const i=h(e,["role"]);return i!=null&&v(t,["role"],i),t}function gI(e){const t={},n=h(e,["controlType"]);n!=null&&v(t,["controlType"],n);const i=h(e,["enableControlImageComputation"]);return i!=null&&v(t,["computeControl"],i),t}function yI(e){const t={};if(h(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(h(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(h(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function vI(e,t){const n={},i=h(e,["systemInstruction"]);t!==void 0&&i!=null&&v(t,["systemInstruction"],Yn(i));const a=h(e,["tools"]);if(t!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>$w(d))),v(t,["tools"],u)}const s=h(e,["generationConfig"]);return t!==void 0&&s!=null&&v(t,["generationConfig"],lP(s)),n}function xI(e,t){const n={},i=h(t,["model"]);i!=null&&v(n,["_url","model"],At(e,i));const a=h(t,["contents"]);if(a!=null){let u=Hr(a);Array.isArray(u)&&(u=u.map(d=>vf(d))),v(n,["contents"],u)}const s=h(t,["config"]);return s!=null&&yI(s),n}function bI(e,t){const n={},i=h(t,["model"]);i!=null&&v(n,["_url","model"],At(e,i));const a=h(t,["contents"]);if(a!=null){let u=Hr(a);Array.isArray(u)&&(u=u.map(d=>d)),v(n,["contents"],u)}const s=h(t,["config"]);return s!=null&&vI(s,n),n}function wI(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&v(t,["sdkHttpResponse"],n);const i=h(e,["totalTokens"]);i!=null&&v(t,["totalTokens"],i);const a=h(e,["cachedContentTokenCount"]);return a!=null&&v(t,["cachedContentTokenCount"],a),t}function SI(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&v(t,["sdkHttpResponse"],n);const i=h(e,["totalTokens"]);return i!=null&&v(t,["totalTokens"],i),t}function TI(e,t){const n={},i=h(t,["model"]);return i!=null&&v(n,["_url","name"],At(e,i)),n}function CI(e,t){const n={},i=h(t,["model"]);return i!=null&&v(n,["_url","name"],At(e,i)),n}function EI(e){const t={},n=h(e,["sdkHttpResponse"]);return n!=null&&v(t,["sdkHttpResponse"],n),t}function _I(e){const t={},n=h(e,["sdkHttpResponse"]);return n!=null&&v(t,["sdkHttpResponse"],n),t}function AI(e,t){const n={},i=h(e,["outputGcsUri"]);t!==void 0&&i!=null&&v(t,["parameters","storageUri"],i);const a=h(e,["negativePrompt"]);t!==void 0&&a!=null&&v(t,["parameters","negativePrompt"],a);const s=h(e,["numberOfImages"]);t!==void 0&&s!=null&&v(t,["parameters","sampleCount"],s);const u=h(e,["aspectRatio"]);t!==void 0&&u!=null&&v(t,["parameters","aspectRatio"],u);const d=h(e,["guidanceScale"]);t!==void 0&&d!=null&&v(t,["parameters","guidanceScale"],d);const p=h(e,["seed"]);t!==void 0&&p!=null&&v(t,["parameters","seed"],p);const f=h(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&v(t,["parameters","safetySetting"],f);const g=h(e,["personGeneration"]);t!==void 0&&g!=null&&v(t,["parameters","personGeneration"],g);const b=h(e,["includeSafetyAttributes"]);t!==void 0&&b!=null&&v(t,["parameters","includeSafetyAttributes"],b);const T=h(e,["includeRaiReason"]);t!==void 0&&T!=null&&v(t,["parameters","includeRaiReason"],T);const E=h(e,["language"]);t!==void 0&&E!=null&&v(t,["parameters","language"],E);const k=h(e,["outputMimeType"]);t!==void 0&&k!=null&&v(t,["parameters","outputOptions","mimeType"],k);const I=h(e,["outputCompressionQuality"]);t!==void 0&&I!=null&&v(t,["parameters","outputOptions","compressionQuality"],I);const D=h(e,["addWatermark"]);t!==void 0&&D!=null&&v(t,["parameters","addWatermark"],D);const M=h(e,["labels"]);t!==void 0&&M!=null&&v(t,["labels"],M);const U=h(e,["editMode"]);t!==void 0&&U!=null&&v(t,["parameters","editMode"],U);const O=h(e,["baseSteps"]);return t!==void 0&&O!=null&&v(t,["parameters","editConfig","baseSteps"],O),n}function kI(e,t){const n={},i=h(t,["model"]);i!=null&&v(n,["_url","model"],At(e,i));const a=h(t,["prompt"]);a!=null&&v(n,["instances[0]","prompt"],a);const s=h(t,["referenceImages"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(p=>_P(p))),v(n,["instances[0]","referenceImages"],d)}const u=h(t,["config"]);return u!=null&&AI(u,n),n}function NI(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&v(t,["sdkHttpResponse"],n);const i=h(e,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>xf(s))),v(t,["generatedImages"],a)}return t}function MI(e,t){const n={},i=h(e,["taskType"]);t!==void 0&&i!=null&&v(t,["requests[]","taskType"],i);const a=h(e,["title"]);t!==void 0&&a!=null&&v(t,["requests[]","title"],a);const s=h(e,["outputDimensionality"]);if(t!==void 0&&s!=null&&v(t,["requests[]","outputDimensionality"],s),h(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function RI(e,t){const n={},i=h(e,["taskType"]);t!==void 0&&i!=null&&v(t,["instances[]","task_type"],i);const a=h(e,["title"]);t!==void 0&&a!=null&&v(t,["instances[]","title"],a);const s=h(e,["outputDimensionality"]);t!==void 0&&s!=null&&v(t,["parameters","outputDimensionality"],s);const u=h(e,["mimeType"]);t!==void 0&&u!=null&&v(t,["instances[]","mimeType"],u);const d=h(e,["autoTruncate"]);return t!==void 0&&d!=null&&v(t,["parameters","autoTruncate"],d),n}function DI(e,t){const n={},i=h(t,["model"]);i!=null&&v(n,["_url","model"],At(e,i));const a=h(t,["contents"]);if(a!=null){let d=tm(e,a);Array.isArray(d)&&(d=d.map(p=>p)),v(n,["requests[]","content"],d)}const s=h(t,["config"]);s!=null&&MI(s,n);const u=h(t,["model"]);return u!==void 0&&v(n,["requests[]","model"],At(e,u)),n}function II(e,t){const n={},i=h(t,["model"]);i!=null&&v(n,["_url","model"],At(e,i));const a=h(t,["contents"]);if(a!=null){let u=tm(e,a);Array.isArray(u)&&(u=u.map(d=>d)),v(n,["instances[]","content"],u)}const s=h(t,["config"]);return s!=null&&RI(s,n),n}function PI(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&v(t,["sdkHttpResponse"],n);const i=h(e,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>u)),v(t,["embeddings"],s)}const a=h(e,["metadata"]);return a!=null&&v(t,["metadata"],a),t}function LI(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&v(t,["sdkHttpResponse"],n);const i=h(e,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>hI(u))),v(t,["embeddings"],s)}const a=h(e,["metadata"]);return a!=null&&v(t,["metadata"],a),t}function UI(e){const t={},n=h(e,["endpoint"]);n!=null&&v(t,["name"],n);const i=h(e,["deployedModelId"]);return i!=null&&v(t,["deployedModelId"],i),t}function OI(e){const t={};if(h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["fileUri"]);n!=null&&v(t,["fileUri"],n);const i=h(e,["mimeType"]);return i!=null&&v(t,["mimeType"],i),t}function BI(e){const t={};if(h(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(e,["description"]);n!=null&&v(t,["description"],n);const i=h(e,["name"]);i!=null&&v(t,["name"],i);const a=h(e,["parameters"]);a!=null&&v(t,["parameters"],a);const s=h(e,["parametersJsonSchema"]);s!=null&&v(t,["parametersJsonSchema"],s);const u=h(e,["response"]);u!=null&&v(t,["response"],u);const d=h(e,["responseJsonSchema"]);return d!=null&&v(t,["responseJsonSchema"],d),t}function zI(e,t,n){const i={},a=h(t,["systemInstruction"]);n!==void 0&&a!=null&&v(n,["systemInstruction"],vf(Yn(a)));const s=h(t,["temperature"]);s!=null&&v(i,["temperature"],s);const u=h(t,["topP"]);u!=null&&v(i,["topP"],u);const d=h(t,["topK"]);d!=null&&v(i,["topK"],d);const p=h(t,["candidateCount"]);p!=null&&v(i,["candidateCount"],p);const f=h(t,["maxOutputTokens"]);f!=null&&v(i,["maxOutputTokens"],f);const g=h(t,["stopSequences"]);g!=null&&v(i,["stopSequences"],g);const b=h(t,["responseLogprobs"]);b!=null&&v(i,["responseLogprobs"],b);const T=h(t,["logprobs"]);T!=null&&v(i,["logprobs"],T);const E=h(t,["presencePenalty"]);E!=null&&v(i,["presencePenalty"],E);const k=h(t,["frequencyPenalty"]);k!=null&&v(i,["frequencyPenalty"],k);const I=h(t,["seed"]);I!=null&&v(i,["seed"],I);const D=h(t,["responseMimeType"]);D!=null&&v(i,["responseMimeType"],D);const M=h(t,["responseSchema"]);M!=null&&v(i,["responseSchema"],nm(M));const U=h(t,["responseJsonSchema"]);if(U!=null&&v(i,["responseJsonSchema"],U),h(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const O=h(t,["safetySettings"]);if(n!==void 0&&O!=null){let ce=O;Array.isArray(ce)&&(ce=ce.map(xe=>AP(xe))),v(n,["safetySettings"],ce)}const se=h(t,["tools"]);if(n!==void 0&&se!=null){let ce=Dl(se);Array.isArray(ce)&&(ce=ce.map(xe=>IP(Rl(xe)))),v(n,["tools"],ce)}const Q=h(t,["toolConfig"]);if(n!==void 0&&Q!=null&&v(n,["toolConfig"],Q),h(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=h(t,["cachedContent"]);n!==void 0&&G!=null&&v(n,["cachedContent"],$i(e,G));const Y=h(t,["responseModalities"]);Y!=null&&v(i,["responseModalities"],Y);const me=h(t,["mediaResolution"]);me!=null&&v(i,["mediaResolution"],me);const j=h(t,["speechConfig"]);if(j!=null&&v(i,["speechConfig"],rm(j)),h(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const B=h(t,["thinkingConfig"]);B!=null&&v(i,["thinkingConfig"],B);const K=h(t,["imageConfig"]);return K!=null&&v(i,["imageConfig"],K),i}function qI(e,t,n){const i={},a=h(t,["systemInstruction"]);n!==void 0&&a!=null&&v(n,["systemInstruction"],Yn(a));const s=h(t,["temperature"]);s!=null&&v(i,["temperature"],s);const u=h(t,["topP"]);u!=null&&v(i,["topP"],u);const d=h(t,["topK"]);d!=null&&v(i,["topK"],d);const p=h(t,["candidateCount"]);p!=null&&v(i,["candidateCount"],p);const f=h(t,["maxOutputTokens"]);f!=null&&v(i,["maxOutputTokens"],f);const g=h(t,["stopSequences"]);g!=null&&v(i,["stopSequences"],g);const b=h(t,["responseLogprobs"]);b!=null&&v(i,["responseLogprobs"],b);const T=h(t,["logprobs"]);T!=null&&v(i,["logprobs"],T);const E=h(t,["presencePenalty"]);E!=null&&v(i,["presencePenalty"],E);const k=h(t,["frequencyPenalty"]);k!=null&&v(i,["frequencyPenalty"],k);const I=h(t,["seed"]);I!=null&&v(i,["seed"],I);const D=h(t,["responseMimeType"]);D!=null&&v(i,["responseMimeType"],D);const M=h(t,["responseSchema"]);M!=null&&v(i,["responseSchema"],nm(M));const U=h(t,["responseJsonSchema"]);U!=null&&v(i,["responseJsonSchema"],U);const O=h(t,["routingConfig"]);O!=null&&v(i,["routingConfig"],O);const se=h(t,["modelSelectionConfig"]);se!=null&&v(i,["modelConfig"],se);const Q=h(t,["safetySettings"]);if(n!==void 0&&Q!=null){let ue=Q;Array.isArray(ue)&&(ue=ue.map(Ee=>Ee)),v(n,["safetySettings"],ue)}const G=h(t,["tools"]);if(n!==void 0&&G!=null){let ue=Dl(G);Array.isArray(ue)&&(ue=ue.map(Ee=>$w(Rl(Ee)))),v(n,["tools"],ue)}const Y=h(t,["toolConfig"]);n!==void 0&&Y!=null&&v(n,["toolConfig"],Y);const me=h(t,["labels"]);n!==void 0&&me!=null&&v(n,["labels"],me);const j=h(t,["cachedContent"]);n!==void 0&&j!=null&&v(n,["cachedContent"],$i(e,j));const B=h(t,["responseModalities"]);B!=null&&v(i,["responseModalities"],B);const K=h(t,["mediaResolution"]);K!=null&&v(i,["mediaResolution"],K);const ce=h(t,["speechConfig"]);ce!=null&&v(i,["speechConfig"],Jw(rm(ce)));const xe=h(t,["audioTimestamp"]);xe!=null&&v(i,["audioTimestamp"],xe);const _e=h(t,["thinkingConfig"]);_e!=null&&v(i,["thinkingConfig"],_e);const Pe=h(t,["imageConfig"]);return Pe!=null&&v(i,["imageConfig"],Pe),i}function kx(e,t){const n={},i=h(t,["model"]);i!=null&&v(n,["_url","model"],At(e,i));const a=h(t,["contents"]);if(a!=null){let u=Hr(a);Array.isArray(u)&&(u=u.map(d=>vf(d))),v(n,["contents"],u)}const s=h(t,["config"]);return s!=null&&v(n,["generationConfig"],zI(e,s,n)),n}function Nx(e,t){const n={},i=h(t,["model"]);i!=null&&v(n,["_url","model"],At(e,i));const a=h(t,["contents"]);if(a!=null){let u=Hr(a);Array.isArray(u)&&(u=u.map(d=>d)),v(n,["contents"],u)}const s=h(t,["config"]);return s!=null&&v(n,["generationConfig"],qI(e,s,n)),n}function Mx(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&v(t,["sdkHttpResponse"],n);const i=h(e,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(f=>cI(f))),v(t,["candidates"],p)}const a=h(e,["modelVersion"]);a!=null&&v(t,["modelVersion"],a);const s=h(e,["promptFeedback"]);s!=null&&v(t,["promptFeedback"],s);const u=h(e,["responseId"]);u!=null&&v(t,["responseId"],u);const d=h(e,["usageMetadata"]);return d!=null&&v(t,["usageMetadata"],d),t}function Rx(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&v(t,["sdkHttpResponse"],n);const i=h(e,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(g=>g)),v(t,["candidates"],f)}const a=h(e,["createTime"]);a!=null&&v(t,["createTime"],a);const s=h(e,["modelVersion"]);s!=null&&v(t,["modelVersion"],s);const u=h(e,["promptFeedback"]);u!=null&&v(t,["promptFeedback"],u);const d=h(e,["responseId"]);d!=null&&v(t,["responseId"],d);const p=h(e,["usageMetadata"]);return p!=null&&v(t,["usageMetadata"],p),t}function jI(e,t){const n={};if(h(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=h(e,["numberOfImages"]);t!==void 0&&i!=null&&v(t,["parameters","sampleCount"],i);const a=h(e,["aspectRatio"]);t!==void 0&&a!=null&&v(t,["parameters","aspectRatio"],a);const s=h(e,["guidanceScale"]);if(t!==void 0&&s!=null&&v(t,["parameters","guidanceScale"],s),h(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=h(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&v(t,["parameters","safetySetting"],u);const d=h(e,["personGeneration"]);t!==void 0&&d!=null&&v(t,["parameters","personGeneration"],d);const p=h(e,["includeSafetyAttributes"]);t!==void 0&&p!=null&&v(t,["parameters","includeSafetyAttributes"],p);const f=h(e,["includeRaiReason"]);t!==void 0&&f!=null&&v(t,["parameters","includeRaiReason"],f);const g=h(e,["language"]);t!==void 0&&g!=null&&v(t,["parameters","language"],g);const b=h(e,["outputMimeType"]);t!==void 0&&b!=null&&v(t,["parameters","outputOptions","mimeType"],b);const T=h(e,["outputCompressionQuality"]);if(t!==void 0&&T!=null&&v(t,["parameters","outputOptions","compressionQuality"],T),h(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=h(e,["imageSize"]);if(t!==void 0&&E!=null&&v(t,["parameters","sampleImageSize"],E),h(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function HI(e,t){const n={},i=h(e,["outputGcsUri"]);t!==void 0&&i!=null&&v(t,["parameters","storageUri"],i);const a=h(e,["negativePrompt"]);t!==void 0&&a!=null&&v(t,["parameters","negativePrompt"],a);const s=h(e,["numberOfImages"]);t!==void 0&&s!=null&&v(t,["parameters","sampleCount"],s);const u=h(e,["aspectRatio"]);t!==void 0&&u!=null&&v(t,["parameters","aspectRatio"],u);const d=h(e,["guidanceScale"]);t!==void 0&&d!=null&&v(t,["parameters","guidanceScale"],d);const p=h(e,["seed"]);t!==void 0&&p!=null&&v(t,["parameters","seed"],p);const f=h(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&v(t,["parameters","safetySetting"],f);const g=h(e,["personGeneration"]);t!==void 0&&g!=null&&v(t,["parameters","personGeneration"],g);const b=h(e,["includeSafetyAttributes"]);t!==void 0&&b!=null&&v(t,["parameters","includeSafetyAttributes"],b);const T=h(e,["includeRaiReason"]);t!==void 0&&T!=null&&v(t,["parameters","includeRaiReason"],T);const E=h(e,["language"]);t!==void 0&&E!=null&&v(t,["parameters","language"],E);const k=h(e,["outputMimeType"]);t!==void 0&&k!=null&&v(t,["parameters","outputOptions","mimeType"],k);const I=h(e,["outputCompressionQuality"]);t!==void 0&&I!=null&&v(t,["parameters","outputOptions","compressionQuality"],I);const D=h(e,["addWatermark"]);t!==void 0&&D!=null&&v(t,["parameters","addWatermark"],D);const M=h(e,["labels"]);t!==void 0&&M!=null&&v(t,["labels"],M);const U=h(e,["imageSize"]);t!==void 0&&U!=null&&v(t,["parameters","sampleImageSize"],U);const O=h(e,["enhancePrompt"]);return t!==void 0&&O!=null&&v(t,["parameters","enhancePrompt"],O),n}function FI(e,t){const n={},i=h(t,["model"]);i!=null&&v(n,["_url","model"],At(e,i));const a=h(t,["prompt"]);a!=null&&v(n,["instances[0]","prompt"],a);const s=h(t,["config"]);return s!=null&&jI(s,n),n}function VI(e,t){const n={},i=h(t,["model"]);i!=null&&v(n,["_url","model"],At(e,i));const a=h(t,["prompt"]);a!=null&&v(n,["instances[0]","prompt"],a);const s=h(t,["config"]);return s!=null&&HI(s,n),n}function GI(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&v(t,["sdkHttpResponse"],n);const i=h(e,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>rP(u))),v(t,["generatedImages"],s)}const a=h(e,["positivePromptSafetyAttributes"]);return a!=null&&v(t,["positivePromptSafetyAttributes"],Yw(a)),t}function YI(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&v(t,["sdkHttpResponse"],n);const i=h(e,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>xf(u))),v(t,["generatedImages"],s)}const a=h(e,["positivePromptSafetyAttributes"]);return a!=null&&v(t,["positivePromptSafetyAttributes"],Kw(a)),t}function KI(e,t){const n={},i=h(e,["numberOfVideos"]);if(t!==void 0&&i!=null&&v(t,["parameters","sampleCount"],i),h(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=h(e,["durationSeconds"]);if(t!==void 0&&a!=null&&v(t,["parameters","durationSeconds"],a),h(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=h(e,["aspectRatio"]);t!==void 0&&s!=null&&v(t,["parameters","aspectRatio"],s);const u=h(e,["resolution"]);t!==void 0&&u!=null&&v(t,["parameters","resolution"],u);const d=h(e,["personGeneration"]);if(t!==void 0&&d!=null&&v(t,["parameters","personGeneration"],d),h(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=h(e,["negativePrompt"]);t!==void 0&&p!=null&&v(t,["parameters","negativePrompt"],p);const f=h(e,["enhancePrompt"]);if(t!==void 0&&f!=null&&v(t,["parameters","enhancePrompt"],f),h(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const g=h(e,["lastFrame"]);t!==void 0&&g!=null&&v(t,["instances[0]","lastFrame"],bf(g));const b=h(e,["referenceImages"]);if(t!==void 0&&b!=null){let T=b;Array.isArray(T)&&(T=T.map(E=>YP(E))),v(t,["instances[0]","referenceImages"],T)}if(h(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(h(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function JI(e,t){const n={},i=h(e,["numberOfVideos"]);t!==void 0&&i!=null&&v(t,["parameters","sampleCount"],i);const a=h(e,["outputGcsUri"]);t!==void 0&&a!=null&&v(t,["parameters","storageUri"],a);const s=h(e,["fps"]);t!==void 0&&s!=null&&v(t,["parameters","fps"],s);const u=h(e,["durationSeconds"]);t!==void 0&&u!=null&&v(t,["parameters","durationSeconds"],u);const d=h(e,["seed"]);t!==void 0&&d!=null&&v(t,["parameters","seed"],d);const p=h(e,["aspectRatio"]);t!==void 0&&p!=null&&v(t,["parameters","aspectRatio"],p);const f=h(e,["resolution"]);t!==void 0&&f!=null&&v(t,["parameters","resolution"],f);const g=h(e,["personGeneration"]);t!==void 0&&g!=null&&v(t,["parameters","personGeneration"],g);const b=h(e,["pubsubTopic"]);t!==void 0&&b!=null&&v(t,["parameters","pubsubTopic"],b);const T=h(e,["negativePrompt"]);t!==void 0&&T!=null&&v(t,["parameters","negativePrompt"],T);const E=h(e,["enhancePrompt"]);t!==void 0&&E!=null&&v(t,["parameters","enhancePrompt"],E);const k=h(e,["generateAudio"]);t!==void 0&&k!=null&&v(t,["parameters","generateAudio"],k);const I=h(e,["lastFrame"]);t!==void 0&&I!=null&&v(t,["instances[0]","lastFrame"],Zr(I));const D=h(e,["referenceImages"]);if(t!==void 0&&D!=null){let O=D;Array.isArray(O)&&(O=O.map(se=>KP(se))),v(t,["instances[0]","referenceImages"],O)}const M=h(e,["mask"]);t!==void 0&&M!=null&&v(t,["instances[0]","mask"],GP(M));const U=h(e,["compressionQuality"]);return t!==void 0&&U!=null&&v(t,["parameters","compressionQuality"],U),n}function $I(e){const t={},n=h(e,["name"]);n!=null&&v(t,["name"],n);const i=h(e,["metadata"]);i!=null&&v(t,["metadata"],i);const a=h(e,["done"]);a!=null&&v(t,["done"],a);const s=h(e,["error"]);s!=null&&v(t,["error"],s);const u=h(e,["response","generateVideoResponse"]);return u!=null&&v(t,["response"],ZI(u)),t}function XI(e){const t={},n=h(e,["name"]);n!=null&&v(t,["name"],n);const i=h(e,["metadata"]);i!=null&&v(t,["metadata"],i);const a=h(e,["done"]);a!=null&&v(t,["done"],a);const s=h(e,["error"]);s!=null&&v(t,["error"],s);const u=h(e,["response"]);return u!=null&&v(t,["response"],eP(u)),t}function QI(e,t){const n={},i=h(t,["model"]);i!=null&&v(n,["_url","model"],At(e,i));const a=h(t,["prompt"]);a!=null&&v(n,["instances[0]","prompt"],a);const s=h(t,["image"]);s!=null&&v(n,["instances[0]","image"],bf(s));const u=h(t,["video"]);u!=null&&v(n,["instances[0]","video"],Xw(u));const d=h(t,["source"]);d!=null&&tP(d,n);const p=h(t,["config"]);return p!=null&&KI(p,n),n}function WI(e,t){const n={},i=h(t,["model"]);i!=null&&v(n,["_url","model"],At(e,i));const a=h(t,["prompt"]);a!=null&&v(n,["instances[0]","prompt"],a);const s=h(t,["image"]);s!=null&&v(n,["instances[0]","image"],Zr(s));const u=h(t,["video"]);u!=null&&v(n,["instances[0]","video"],Qw(u));const d=h(t,["source"]);d!=null&&nP(d,n);const p=h(t,["config"]);return p!=null&&JI(p,n),n}function ZI(e){const t={},n=h(e,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(u=>oP(u))),v(t,["generatedVideos"],s)}const i=h(e,["raiMediaFilteredCount"]);i!=null&&v(t,["raiMediaFilteredCount"],i);const a=h(e,["raiMediaFilteredReasons"]);return a!=null&&v(t,["raiMediaFilteredReasons"],a),t}function eP(e){const t={},n=h(e,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(u=>aP(u))),v(t,["generatedVideos"],s)}const i=h(e,["raiMediaFilteredCount"]);i!=null&&v(t,["raiMediaFilteredCount"],i);const a=h(e,["raiMediaFilteredReasons"]);return a!=null&&v(t,["raiMediaFilteredReasons"],a),t}function tP(e,t){const n={},i=h(e,["prompt"]);t!==void 0&&i!=null&&v(t,["instances[0]","prompt"],i);const a=h(e,["image"]);t!==void 0&&a!=null&&v(t,["instances[0]","image"],bf(a));const s=h(e,["video"]);return t!==void 0&&s!=null&&v(t,["instances[0]","video"],Xw(s)),n}function nP(e,t){const n={},i=h(e,["prompt"]);t!==void 0&&i!=null&&v(t,["instances[0]","prompt"],i);const a=h(e,["image"]);t!==void 0&&a!=null&&v(t,["instances[0]","image"],Zr(a));const s=h(e,["video"]);return t!==void 0&&s!=null&&v(t,["instances[0]","video"],Qw(s)),n}function rP(e){const t={},n=h(e,["_self"]);n!=null&&v(t,["image"],dP(n));const i=h(e,["raiFilteredReason"]);i!=null&&v(t,["raiFilteredReason"],i);const a=h(e,["_self"]);return a!=null&&v(t,["safetyAttributes"],Yw(a)),t}function xf(e){const t={},n=h(e,["_self"]);n!=null&&v(t,["image"],Gw(n));const i=h(e,["raiFilteredReason"]);i!=null&&v(t,["raiFilteredReason"],i);const a=h(e,["_self"]);a!=null&&v(t,["safetyAttributes"],Kw(a));const s=h(e,["prompt"]);return s!=null&&v(t,["enhancedPrompt"],s),t}function iP(e){const t={},n=h(e,["_self"]);n!=null&&v(t,["mask"],Gw(n));const i=h(e,["labels"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>s)),v(t,["labels"],a)}return t}function oP(e){const t={},n=h(e,["video"]);return n!=null&&v(t,["video"],FP(n)),t}function aP(e){const t={},n=h(e,["_self"]);return n!=null&&v(t,["video"],VP(n)),t}function lP(e){const t={},n=h(e,["modelSelectionConfig"]);n!=null&&v(t,["modelConfig"],n);const i=h(e,["audioTimestamp"]);i!=null&&v(t,["audioTimestamp"],i);const a=h(e,["candidateCount"]);a!=null&&v(t,["candidateCount"],a);const s=h(e,["enableAffectiveDialog"]);s!=null&&v(t,["enableAffectiveDialog"],s);const u=h(e,["frequencyPenalty"]);u!=null&&v(t,["frequencyPenalty"],u);const d=h(e,["logprobs"]);d!=null&&v(t,["logprobs"],d);const p=h(e,["maxOutputTokens"]);p!=null&&v(t,["maxOutputTokens"],p);const f=h(e,["mediaResolution"]);f!=null&&v(t,["mediaResolution"],f);const g=h(e,["presencePenalty"]);g!=null&&v(t,["presencePenalty"],g);const b=h(e,["responseJsonSchema"]);b!=null&&v(t,["responseJsonSchema"],b);const T=h(e,["responseLogprobs"]);T!=null&&v(t,["responseLogprobs"],T);const E=h(e,["responseMimeType"]);E!=null&&v(t,["responseMimeType"],E);const k=h(e,["responseModalities"]);k!=null&&v(t,["responseModalities"],k);const I=h(e,["responseSchema"]);I!=null&&v(t,["responseSchema"],I);const D=h(e,["routingConfig"]);D!=null&&v(t,["routingConfig"],D);const M=h(e,["seed"]);M!=null&&v(t,["seed"],M);const U=h(e,["speechConfig"]);U!=null&&v(t,["speechConfig"],Jw(U));const O=h(e,["stopSequences"]);O!=null&&v(t,["stopSequences"],O);const se=h(e,["temperature"]);se!=null&&v(t,["temperature"],se);const Q=h(e,["thinkingConfig"]);Q!=null&&v(t,["thinkingConfig"],Q);const G=h(e,["topK"]);G!=null&&v(t,["topK"],G);const Y=h(e,["topP"]);return Y!=null&&v(t,["topP"],Y),t}function sP(e,t){const n={},i=h(t,["model"]);return i!=null&&v(n,["_url","name"],At(e,i)),n}function uP(e,t){const n={},i=h(t,["model"]);return i!=null&&v(n,["_url","name"],At(e,i)),n}function cP(e){const t={};if(h(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(e,["enableWidget"]);return n!=null&&v(t,["enableWidget"],n),t}function fP(e){const t={},n=h(e,["timeRangeFilter"]);if(n!=null&&v(t,["timeRangeFilter"],n),h(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function dP(e){const t={},n=h(e,["bytesBase64Encoded"]);n!=null&&v(t,["imageBytes"],Lo(n));const i=h(e,["mimeType"]);return i!=null&&v(t,["mimeType"],i),t}function Gw(e){const t={},n=h(e,["gcsUri"]);n!=null&&v(t,["gcsUri"],n);const i=h(e,["bytesBase64Encoded"]);i!=null&&v(t,["imageBytes"],Lo(i));const a=h(e,["mimeType"]);return a!=null&&v(t,["mimeType"],a),t}function bf(e){const t={};if(h(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=h(e,["imageBytes"]);n!=null&&v(t,["bytesBase64Encoded"],Lo(n));const i=h(e,["mimeType"]);return i!=null&&v(t,["mimeType"],i),t}function Zr(e){const t={},n=h(e,["gcsUri"]);n!=null&&v(t,["gcsUri"],n);const i=h(e,["imageBytes"]);i!=null&&v(t,["bytesBase64Encoded"],Lo(i));const a=h(e,["mimeType"]);return a!=null&&v(t,["mimeType"],a),t}function pP(e,t,n){const i={},a=h(t,["pageSize"]);n!==void 0&&a!=null&&v(n,["_query","pageSize"],a);const s=h(t,["pageToken"]);n!==void 0&&s!=null&&v(n,["_query","pageToken"],s);const u=h(t,["filter"]);n!==void 0&&u!=null&&v(n,["_query","filter"],u);const d=h(t,["queryBase"]);return n!==void 0&&d!=null&&v(n,["_url","models_url"],Ow(e,d)),i}function hP(e,t,n){const i={},a=h(t,["pageSize"]);n!==void 0&&a!=null&&v(n,["_query","pageSize"],a);const s=h(t,["pageToken"]);n!==void 0&&s!=null&&v(n,["_query","pageToken"],s);const u=h(t,["filter"]);n!==void 0&&u!=null&&v(n,["_query","filter"],u);const d=h(t,["queryBase"]);return n!==void 0&&d!=null&&v(n,["_url","models_url"],Ow(e,d)),i}function mP(e,t){const n={},i=h(t,["config"]);return i!=null&&pP(e,i,n),n}function gP(e,t){const n={},i=h(t,["config"]);return i!=null&&hP(e,i,n),n}function yP(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&v(t,["sdkHttpResponse"],n);const i=h(e,["nextPageToken"]);i!=null&&v(t,["nextPageToken"],i);const a=h(e,["_self"]);if(a!=null){let s=Bw(a);Array.isArray(s)&&(s=s.map(u=>hh(u))),v(t,["models"],s)}return t}function vP(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&v(t,["sdkHttpResponse"],n);const i=h(e,["nextPageToken"]);i!=null&&v(t,["nextPageToken"],i);const a=h(e,["_self"]);if(a!=null){let s=Bw(a);Array.isArray(s)&&(s=s.map(u=>mh(u))),v(t,["models"],s)}return t}function xP(e){const t={},n=h(e,["maskMode"]);n!=null&&v(t,["maskMode"],n);const i=h(e,["segmentationClasses"]);i!=null&&v(t,["maskClasses"],i);const a=h(e,["maskDilation"]);return a!=null&&v(t,["dilation"],a),t}function hh(e){const t={},n=h(e,["name"]);n!=null&&v(t,["name"],n);const i=h(e,["displayName"]);i!=null&&v(t,["displayName"],i);const a=h(e,["description"]);a!=null&&v(t,["description"],a);const s=h(e,["version"]);s!=null&&v(t,["version"],s);const u=h(e,["_self"]);u!=null&&v(t,["tunedModelInfo"],PP(u));const d=h(e,["inputTokenLimit"]);d!=null&&v(t,["inputTokenLimit"],d);const p=h(e,["outputTokenLimit"]);p!=null&&v(t,["outputTokenLimit"],p);const f=h(e,["supportedGenerationMethods"]);return f!=null&&v(t,["supportedActions"],f),t}function mh(e){const t={},n=h(e,["name"]);n!=null&&v(t,["name"],n);const i=h(e,["displayName"]);i!=null&&v(t,["displayName"],i);const a=h(e,["description"]);a!=null&&v(t,["description"],a);const s=h(e,["versionId"]);s!=null&&v(t,["version"],s);const u=h(e,["deployedModels"]);if(u!=null){let b=u;Array.isArray(b)&&(b=b.map(T=>UI(T))),v(t,["endpoints"],b)}const d=h(e,["labels"]);d!=null&&v(t,["labels"],d);const p=h(e,["_self"]);p!=null&&v(t,["tunedModelInfo"],LP(p));const f=h(e,["defaultCheckpointId"]);f!=null&&v(t,["defaultCheckpointId"],f);const g=h(e,["checkpoints"]);if(g!=null){let b=g;Array.isArray(b)&&(b=b.map(T=>T)),v(t,["checkpoints"],b)}return t}function bP(e){const t={},n=h(e,["videoMetadata"]);n!=null&&v(t,["videoMetadata"],n);const i=h(e,["thought"]);i!=null&&v(t,["thought"],i);const a=h(e,["inlineData"]);a!=null&&v(t,["inlineData"],uI(a));const s=h(e,["fileData"]);s!=null&&v(t,["fileData"],OI(s));const u=h(e,["thoughtSignature"]);u!=null&&v(t,["thoughtSignature"],u);const d=h(e,["functionCall"]);d!=null&&v(t,["functionCall"],d);const p=h(e,["codeExecutionResult"]);p!=null&&v(t,["codeExecutionResult"],p);const f=h(e,["executableCode"]);f!=null&&v(t,["executableCode"],f);const g=h(e,["functionResponse"]);g!=null&&v(t,["functionResponse"],g);const b=h(e,["text"]);return b!=null&&v(t,["text"],b),t}function wP(e){const t={},n=h(e,["productImage"]);return n!=null&&v(t,["image"],Zr(n)),t}function SP(e,t){const n={},i=h(e,["numberOfImages"]);t!==void 0&&i!=null&&v(t,["parameters","sampleCount"],i);const a=h(e,["baseSteps"]);t!==void 0&&a!=null&&v(t,["parameters","editConfig","baseSteps"],a);const s=h(e,["outputGcsUri"]);t!==void 0&&s!=null&&v(t,["parameters","storageUri"],s);const u=h(e,["seed"]);t!==void 0&&u!=null&&v(t,["parameters","seed"],u);const d=h(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&v(t,["parameters","safetySetting"],d);const p=h(e,["personGeneration"]);t!==void 0&&p!=null&&v(t,["parameters","personGeneration"],p);const f=h(e,["addWatermark"]);t!==void 0&&f!=null&&v(t,["parameters","addWatermark"],f);const g=h(e,["outputMimeType"]);t!==void 0&&g!=null&&v(t,["parameters","outputOptions","mimeType"],g);const b=h(e,["outputCompressionQuality"]);t!==void 0&&b!=null&&v(t,["parameters","outputOptions","compressionQuality"],b);const T=h(e,["enhancePrompt"]);t!==void 0&&T!=null&&v(t,["parameters","enhancePrompt"],T);const E=h(e,["labels"]);return t!==void 0&&E!=null&&v(t,["labels"],E),n}function TP(e,t){const n={},i=h(t,["model"]);i!=null&&v(n,["_url","model"],At(e,i));const a=h(t,["source"]);a!=null&&EP(a,n);const s=h(t,["config"]);return s!=null&&SP(s,n),n}function CP(e){const t={},n=h(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>xf(a))),v(t,["generatedImages"],i)}return t}function EP(e,t){const n={},i=h(e,["prompt"]);t!==void 0&&i!=null&&v(t,["instances[0]","prompt"],i);const a=h(e,["personImage"]);t!==void 0&&a!=null&&v(t,["instances[0]","personImage","image"],Zr(a));const s=h(e,["productImages"]);if(t!==void 0&&s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>wP(d))),v(t,["instances[0]","productImages"],u)}return n}function _P(e){const t={},n=h(e,["referenceImage"]);n!=null&&v(t,["referenceImage"],Zr(n));const i=h(e,["referenceId"]);i!=null&&v(t,["referenceId"],i);const a=h(e,["referenceType"]);a!=null&&v(t,["referenceType"],a);const s=h(e,["maskImageConfig"]);s!=null&&v(t,["maskImageConfig"],xP(s));const u=h(e,["controlImageConfig"]);u!=null&&v(t,["controlImageConfig"],gI(u));const d=h(e,["styleImageConfig"]);d!=null&&v(t,["styleImageConfig"],d);const p=h(e,["subjectImageConfig"]);return p!=null&&v(t,["subjectImageConfig"],p),t}function Yw(e){const t={},n=h(e,["safetyAttributes","categories"]);n!=null&&v(t,["categories"],n);const i=h(e,["safetyAttributes","scores"]);i!=null&&v(t,["scores"],i);const a=h(e,["contentType"]);return a!=null&&v(t,["contentType"],a),t}function Kw(e){const t={},n=h(e,["safetyAttributes","categories"]);n!=null&&v(t,["categories"],n);const i=h(e,["safetyAttributes","scores"]);i!=null&&v(t,["scores"],i);const a=h(e,["contentType"]);return a!=null&&v(t,["contentType"],a),t}function AP(e){const t={};if(h(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=h(e,["category"]);n!=null&&v(t,["category"],n);const i=h(e,["threshold"]);return i!=null&&v(t,["threshold"],i),t}function kP(e){const t={},n=h(e,["image"]);return n!=null&&v(t,["image"],Zr(n)),t}function NP(e,t){const n={},i=h(e,["mode"]);t!==void 0&&i!=null&&v(t,["parameters","mode"],i);const a=h(e,["maxPredictions"]);t!==void 0&&a!=null&&v(t,["parameters","maxPredictions"],a);const s=h(e,["confidenceThreshold"]);t!==void 0&&s!=null&&v(t,["parameters","confidenceThreshold"],s);const u=h(e,["maskDilation"]);t!==void 0&&u!=null&&v(t,["parameters","maskDilation"],u);const d=h(e,["binaryColorThreshold"]);t!==void 0&&d!=null&&v(t,["parameters","binaryColorThreshold"],d);const p=h(e,["labels"]);return t!==void 0&&p!=null&&v(t,["labels"],p),n}function MP(e,t){const n={},i=h(t,["model"]);i!=null&&v(n,["_url","model"],At(e,i));const a=h(t,["source"]);a!=null&&DP(a,n);const s=h(t,["config"]);return s!=null&&NP(s,n),n}function RP(e){const t={},n=h(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>iP(a))),v(t,["generatedMasks"],i)}return t}function DP(e,t){const n={},i=h(e,["prompt"]);t!==void 0&&i!=null&&v(t,["instances[0]","prompt"],i);const a=h(e,["image"]);t!==void 0&&a!=null&&v(t,["instances[0]","image"],Zr(a));const s=h(e,["scribbleImage"]);return t!==void 0&&s!=null&&v(t,["instances[0]","scribble"],kP(s)),n}function Jw(e){const t={},n=h(e,["voiceConfig"]);if(n!=null&&v(t,["voiceConfig"],n),h(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=h(e,["languageCode"]);return i!=null&&v(t,["languageCode"],i),t}function IP(e){const t={},n=h(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(g=>g)),v(t,["functionDeclarations"],f)}if(h(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=h(e,["googleSearch"]);i!=null&&v(t,["googleSearch"],fP(i));const a=h(e,["googleSearchRetrieval"]);if(a!=null&&v(t,["googleSearchRetrieval"],a),h(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=h(e,["googleMaps"]);s!=null&&v(t,["googleMaps"],cP(s));const u=h(e,["urlContext"]);u!=null&&v(t,["urlContext"],u);const d=h(e,["computerUse"]);d!=null&&v(t,["computerUse"],d);const p=h(e,["codeExecution"]);return p!=null&&v(t,["codeExecution"],p),t}function $w(e){const t={},n=h(e,["functionDeclarations"]);if(n!=null){let b=n;Array.isArray(b)&&(b=b.map(T=>BI(T))),v(t,["functionDeclarations"],b)}const i=h(e,["retrieval"]);i!=null&&v(t,["retrieval"],i);const a=h(e,["googleSearch"]);a!=null&&v(t,["googleSearch"],a);const s=h(e,["googleSearchRetrieval"]);s!=null&&v(t,["googleSearchRetrieval"],s);const u=h(e,["enterpriseWebSearch"]);u!=null&&v(t,["enterpriseWebSearch"],u);const d=h(e,["googleMaps"]);d!=null&&v(t,["googleMaps"],d);const p=h(e,["urlContext"]);p!=null&&v(t,["urlContext"],p);const f=h(e,["computerUse"]);f!=null&&v(t,["computerUse"],f);const g=h(e,["codeExecution"]);return g!=null&&v(t,["codeExecution"],g),t}function PP(e){const t={},n=h(e,["baseModel"]);n!=null&&v(t,["baseModel"],n);const i=h(e,["createTime"]);i!=null&&v(t,["createTime"],i);const a=h(e,["updateTime"]);return a!=null&&v(t,["updateTime"],a),t}function LP(e){const t={},n=h(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&v(t,["baseModel"],n);const i=h(e,["createTime"]);i!=null&&v(t,["createTime"],i);const a=h(e,["updateTime"]);return a!=null&&v(t,["updateTime"],a),t}function UP(e,t){const n={},i=h(e,["displayName"]);t!==void 0&&i!=null&&v(t,["displayName"],i);const a=h(e,["description"]);t!==void 0&&a!=null&&v(t,["description"],a);const s=h(e,["defaultCheckpointId"]);return t!==void 0&&s!=null&&v(t,["defaultCheckpointId"],s),n}function OP(e,t){const n={},i=h(e,["displayName"]);t!==void 0&&i!=null&&v(t,["displayName"],i);const a=h(e,["description"]);t!==void 0&&a!=null&&v(t,["description"],a);const s=h(e,["defaultCheckpointId"]);return t!==void 0&&s!=null&&v(t,["defaultCheckpointId"],s),n}function BP(e,t){const n={},i=h(t,["model"]);i!=null&&v(n,["_url","name"],At(e,i));const a=h(t,["config"]);return a!=null&&UP(a,n),n}function zP(e,t){const n={},i=h(t,["model"]);i!=null&&v(n,["_url","model"],At(e,i));const a=h(t,["config"]);return a!=null&&OP(a,n),n}function qP(e,t){const n={},i=h(e,["outputGcsUri"]);t!==void 0&&i!=null&&v(t,["parameters","storageUri"],i);const a=h(e,["includeRaiReason"]);t!==void 0&&a!=null&&v(t,["parameters","includeRaiReason"],a);const s=h(e,["outputMimeType"]);t!==void 0&&s!=null&&v(t,["parameters","outputOptions","mimeType"],s);const u=h(e,["outputCompressionQuality"]);t!==void 0&&u!=null&&v(t,["parameters","outputOptions","compressionQuality"],u);const d=h(e,["enhanceInputImage"]);t!==void 0&&d!=null&&v(t,["parameters","upscaleConfig","enhanceInputImage"],d);const p=h(e,["imagePreservationFactor"]);t!==void 0&&p!=null&&v(t,["parameters","upscaleConfig","imagePreservationFactor"],p);const f=h(e,["labels"]);t!==void 0&&f!=null&&v(t,["labels"],f);const g=h(e,["numberOfImages"]);t!==void 0&&g!=null&&v(t,["parameters","sampleCount"],g);const b=h(e,["mode"]);return t!==void 0&&b!=null&&v(t,["parameters","mode"],b),n}function jP(e,t){const n={},i=h(t,["model"]);i!=null&&v(n,["_url","model"],At(e,i));const a=h(t,["image"]);a!=null&&v(n,["instances[0]","image"],Zr(a));const s=h(t,["upscaleFactor"]);s!=null&&v(n,["parameters","upscaleConfig","upscaleFactor"],s);const u=h(t,["config"]);return u!=null&&qP(u,n),n}function HP(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&v(t,["sdkHttpResponse"],n);const i=h(e,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>xf(s))),v(t,["generatedImages"],a)}return t}function FP(e){const t={},n=h(e,["uri"]);n!=null&&v(t,["uri"],n);const i=h(e,["encodedVideo"]);i!=null&&v(t,["videoBytes"],Lo(i));const a=h(e,["encoding"]);return a!=null&&v(t,["mimeType"],a),t}function VP(e){const t={},n=h(e,["gcsUri"]);n!=null&&v(t,["uri"],n);const i=h(e,["bytesBase64Encoded"]);i!=null&&v(t,["videoBytes"],Lo(i));const a=h(e,["mimeType"]);return a!=null&&v(t,["mimeType"],a),t}function GP(e){const t={},n=h(e,["image"]);n!=null&&v(t,["_self"],Zr(n));const i=h(e,["maskMode"]);return i!=null&&v(t,["maskMode"],i),t}function YP(e){const t={},n=h(e,["image"]);n!=null&&v(t,["image"],bf(n));const i=h(e,["referenceType"]);return i!=null&&v(t,["referenceType"],i),t}function KP(e){const t={},n=h(e,["image"]);n!=null&&v(t,["image"],Zr(n));const i=h(e,["referenceType"]);return i!=null&&v(t,["referenceType"],i),t}function Xw(e){const t={},n=h(e,["uri"]);n!=null&&v(t,["uri"],n);const i=h(e,["videoBytes"]);i!=null&&v(t,["encodedVideo"],Lo(i));const a=h(e,["mimeType"]);return a!=null&&v(t,["encoding"],a),t}function Qw(e){const t={},n=h(e,["uri"]);n!=null&&v(t,["gcsUri"],n);const i=h(e,["videoBytes"]);i!=null&&v(t,["bytesBase64Encoded"],Lo(i));const a=h(e,["mimeType"]);return a!=null&&v(t,["mimeType"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JP="Content-Type",$P="X-Server-Timeout",XP="User-Agent",gh="x-goog-api-client",QP="1.25.0",WP=`google-genai-sdk/${QP}`,ZP="v1beta1",e3="v1beta",Dx=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class t3{constructor(t){var n,i;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:ZP,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:e3,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&i.push(t.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,i){const a=[this.getRequestUrlInternal(n)];return i&&a.push(this.getBaseResourcePath()),t!==""&&a.push(t),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),a=this.constructUrl(t.path,n,i);if(t.queryParams)for(const[u,d]of Object.entries(t.queryParams))a.searchParams.append(u,String(d));let s={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=t.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,t.abortSignal),this.unaryApiCall(a,s,t.httpMethod)}patchHttpOptions(t,n){const i=JSON.parse(JSON.stringify(t));for(const[a,s]of Object.entries(n))typeof s=="object"?i[a]=Object.assign(Object.assign({},i[a]),s):s!==void 0&&(i[a]=s);return i}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),a=this.constructUrl(t.path,n,i);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let s={};return s.body=t.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,t.abortSignal),this.streamApiCall(a,s,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,i){if(n&&n.timeout||i){const a=new AbortController,s=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>a.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}i&&i.addEventListener("abort",()=>{a.abort()}),t.signal=s}return n&&n.extraBody!==null&&n3(t,n.extraBody),t.headers=await this.getHeadersInternal(n),t}async unaryApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async a=>(await Ix(a),new fh(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async a=>(await Ix(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(t){var n;return Tl(this,arguments,function*(){const a=(n=t==null?void 0:t.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let u="";for(;;){const{done:d,value:p}=yield Qt(a.read());if(d){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=s.decode(p,{stream:!0});try{const b=JSON.parse(f);if("error"in b){const T=JSON.parse(JSON.stringify(b.error)),E=T.status,k=T.code,I=`got status: ${E}. ${JSON.stringify(b)}`;if(k>=400&&k<600)throw new yf({message:I,status:k})}}catch(b){if(b.name==="ApiError")throw b}u+=f;let g=u.match(Dx);for(;g;){const b=g[1];try{const T=new Response(b,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield Qt(new fh(T)),u=u.slice(g[0].length),g=u.match(Dx)}catch(T){throw new Error(`exception parsing stream chunk ${b}. ${T}`)}}}}finally{a.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const t={},n=WP+" "+this.clientOptions.userAgentExtra;return t[XP]=n,t[gh]=n,t[JP]="application/json",t}async getHeadersInternal(t){const n=new Headers;if(t&&t.headers){for(const[i,a]of Object.entries(t.headers))n.append(i,a);t.timeout&&t.timeout>0&&n.append($P,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(t,n){var i;const a={};n!=null&&(a.mimeType=n.mimeType,a.name=n.name,a.displayName=n.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const s=this.clientOptions.uploader,u=await s.stat(t);a.sizeBytes=String(u.size);const d=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=d;const p=await this.fetchUploadUrl(a,n);return s.upload(t,p,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n){var i;let a={};n!=null&&n.httpOptions?a=n.httpOptions:a={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${t.mimeType}`}};const s={file:t},u=await this.request({path:Ge("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:a});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(i=u==null?void 0:u.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function Ix(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let i;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?i=await e.json():i={error:{message:await e.text(),code:e.status,status:e.statusText}};const a=JSON.stringify(i);throw n>=400&&n<600?new yf({message:a,status:n}):new Error(a)}}function n3(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const s=JSON.parse(e.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(s,u){const d=Object.assign({},s);for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const f=u[p],g=d[p];f&&typeof f=="object"&&!Array.isArray(f)&&g&&typeof g=="object"&&!Array.isArray(g)?d[p]=i(g,f):(g&&f&&typeof g!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof g}, New type: ${typeof f}. Overwriting.`),d[p]=f)}return d}const a=i(n,t);e.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const r3="mcp_used/unknown";let i3=!1;function Ww(e){for(const t of e)if(o3(t)||typeof t=="object"&&"inputSchema"in t)return!0;return i3}function Zw(e){var t;const n=(t=e[gh])!==null&&t!==void 0?t:"";e[gh]=(n+` ${r3}`).trimStart()}function o3(e){return e!==null&&typeof e=="object"&&e instanceof om}function a3(e,t=100){return Tl(this,arguments,function*(){let i,a=0;for(;a<t;){const s=yield Qt(e.listTools({cursor:i}));for(const u of s.tools)yield yield Qt(u),a++;if(!s.nextCursor)break;i=s.nextCursor}})}class om{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new om(t,n)}async initialize(){var t,n,i,a;if(this.mcpTools.length>0)return;const s={},u=[];for(const g of this.mcpClients)try{for(var d=!0,p=(n=void 0,Zs(a3(g))),f;f=await p.next(),t=f.done,!t;d=!0){a=f.value,d=!1;const b=a;u.push(b);const T=b.name;if(s[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);s[T]=g}}catch(b){n={error:b}}finally{try{!d&&!t&&(i=p.return)&&await i.call(p)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),fR(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const i of t)if(i.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[i.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const u=await a.callTool({name:i.name,arguments:i.args},void 0,s);n.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function l3(e,t,n){const i=new rR;let a;n.data instanceof Blob?a=JSON.parse(await n.data.text()):a=JSON.parse(n.data),Object.assign(i,a),t(i)}class s3{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i}async connect(t){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),u=f3(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),p=`${a}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${d}`;let f=()=>{};const g=new Promise(O=>{f=O}),b=t.callbacks,T=function(){f({})},E=this.apiClient,k={onopen:T,onmessage:O=>{l3(E,b.onmessage,O)},onerror:(n=b==null?void 0:b.onerror)!==null&&n!==void 0?n:function(O){},onclose:(i=b==null?void 0:b.onclose)!==null&&i!==void 0?i:function(O){}},I=this.webSocketFactory.create(p,c3(u),k);I.connect(),await g;const U={setup:{model:At(this.apiClient,t.model)}};return I.send(JSON.stringify(U)),new u3(I,this.apiClient)}}class u3{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=eI(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=ZD(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(bl.PLAY)}pause(){this.sendPlaybackControl(bl.PAUSE)}stop(){this.sendPlaybackControl(bl.STOP)}resetContext(){this.sendPlaybackControl(bl.RESET_CONTEXT)}close(){this.conn.close()}}function c3(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function f3(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const d3="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function p3(e,t,n){const i=new nR;let a;n.data instanceof Blob?a=await n.data.text():n.data instanceof ArrayBuffer?a=new TextDecoder().decode(n.data):a=n.data;const s=JSON.parse(a);if(e.isVertexAI()){const u=rI(s);Object.assign(i,u)}else Object.assign(i,s);t(i)}class h3{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i,this.music=new s3(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,i,a,s,u,d;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let g;const b=this.apiClient.getHeaders();t.config&&t.config.tools&&Ww(t.config.tools)&&Zw(b);const T=v3(b);if(this.apiClient.isVertexAI())g=`${p}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T);else{const j=this.apiClient.getApiKey();let B="BidiGenerateContent",K="key";j!=null&&j.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),B="BidiGenerateContentConstrained",K="access_token"),g=`${p}/ws/google.ai.generativelanguage.${f}.GenerativeService.${B}?${K}=${j}`}let E=()=>{};const k=new Promise(j=>{E=j}),I=t.callbacks,D=function(){var j;(j=I==null?void 0:I.onopen)===null||j===void 0||j.call(I),E({})},M=this.apiClient,U={onopen:D,onmessage:j=>{p3(M,I.onmessage,j)},onerror:(n=I==null?void 0:I.onerror)!==null&&n!==void 0?n:function(j){},onclose:(i=I==null?void 0:I.onclose)!==null&&i!==void 0?i:function(j){}},O=this.webSocketFactory.create(g,y3(T),U);O.connect(),await k;let se=At(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&se.startsWith("publishers/")){const j=this.apiClient.getProject(),B=this.apiClient.getLocation();se=`projects/${j}/locations/${B}/`+se}let Q={};this.apiClient.isVertexAI()&&((a=t.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Xc.AUDIO]}:t.config.responseModalities=[Xc.AUDIO]),!((s=t.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const G=(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],Y=[];for(const j of G)if(this.isCallableTool(j)){const B=j;Y.push(await B.tool())}else Y.push(j);Y.length>0&&(t.config.tools=Y);const me={model:se,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?Q=WD(this.apiClient,me):Q=QD(this.apiClient,me),delete Q.config,O.send(JSON.stringify(Q)),new g3(O,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const m3={turnComplete:!0};class g3{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Hr(n.turns),t.isVertexAI()||(i=i.map(a=>vf(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const s of i){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!t.isVertexAI()&&!("id"in s))throw new Error(d3)}return{toolResponse:{functionResponses:i}}}sendClientContent(t){t=Object.assign(Object.assign({},m3),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:nI(t)}:n={realtimeInput:tI(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function y3(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function v3(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Px=10;function Lx(e){var t,n,i;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let a=!1;for(const u of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(Cl(u)){a=!0;break}if(!a)return!0;const s=(i=e==null?void 0:e.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function Cl(e){return"callTool"in e&&typeof e.callTool=="function"}function x3(e){var t,n,i;return(i=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(a=>Cl(a)))!==null&&i!==void 0?i:!1}function b3(e){var t,n,i;return(i=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(a=>!Cl(a)))!==null&&i!==void 0?i:!1}function Ux(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class w3 extends Sa{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var i,a,s,u,d;const p=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!x3(n)||Lx(n.config))return await this.generateContentInternal(p);if(b3(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let f,g;const b=Hr(p.contents),T=(s=(a=(i=p.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&s!==void 0?s:Px;let E=0;for(;E<T&&(f=await this.generateContentInternal(p),!(!f.functionCalls||f.functionCalls.length===0));){const k=f.candidates[0].content,I=[];for(const D of(d=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(Cl(D)){const U=await D.callTool(f.functionCalls);I.push(...U)}E++,g={role:"user",parts:I},p.contents=Hr(p.contents),p.contents.push(k),p.contents.push(g),Ux(p.config)&&(b.push(k),b.push(g))}return Ux(p.config)&&(f.automaticFunctionCallingHistory=b),f},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),Lx(n.config)){const i=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var a;let s;const u=[];if(i!=null&&i.generatedImages)for(const p of i.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((a=p==null?void 0:p.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?s=p==null?void 0:p.safetyAttributes:u.push(p);let d;return s?d={generatedImages:u,positivePromptSafetyAttributes:s,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async n=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new pu(va.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const a={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(a)},this.generateVideos=async n=>{var i,a,s,u,d,p;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((a=n.video)===null||a===void 0)&&a.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((u=(s=n.source)===null||s===void 0?void 0:s.video)===null||u===void 0)&&u.uri&&(!((p=(d=n.source)===null||d===void 0?void 0:d.video)===null||p===void 0)&&p.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,i,a;const s=(n=t.config)===null||n===void 0?void 0:n.tools;if(!s)return t;const u=await Promise.all(s.map(async p=>Cl(p)?await p.tool():p)),d={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:u})};if(d.config.tools=u,t.config&&t.config.tools&&Ww(t.config.tools)){const p=(a=(i=t.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&a!==void 0?a:{};let f=Object.assign({},p);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),Zw(f),d.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:f})}return d}async initAfcToolsMap(t){var n,i,a;const s=new Map;for(const u of(i=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Cl(u)){const d=u,p=await d.tool();for(const f of(a=p.functionDeclarations)!==null&&a!==void 0?a:[]){if(!f.name)throw new Error("Function declaration name is required.");if(s.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);s.set(f.name,d)}}return s}async processAfcStream(t){var n,i,a;const s=(a=(i=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&a!==void 0?a:Px;let u=!1,d=0;const p=await this.initAfcToolsMap(t);return(function(f,g,b){var T,E;return Tl(this,arguments,function*(){for(var k,I,D,M;d<s;){u&&(d++,u=!1);const Q=yield Qt(f.processParamsMaybeAddMcpUsage(b)),G=yield Qt(f.generateContentStreamInternal(Q)),Y=[],me=[];try{for(var U=!0,O=(I=void 0,Zs(G)),se;se=yield Qt(O.next()),k=se.done,!k;U=!0){M=se.value,U=!1;const j=M;if(yield yield Qt(j),j.candidates&&(!((T=j.candidates[0])===null||T===void 0)&&T.content)){me.push(j.candidates[0].content);for(const B of(E=j.candidates[0].content.parts)!==null&&E!==void 0?E:[])if(d<s&&B.functionCall){if(!B.functionCall.name)throw new Error("Function call name was not returned by the model.");if(g.has(B.functionCall.name)){const K=yield Qt(g.get(B.functionCall.name).callTool([B.functionCall]));Y.push(...K)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${g.keys()}, mising tool: ${B.functionCall.name}`)}}}}catch(j){I={error:j}}finally{try{!U&&!k&&(D=O.return)&&(yield Qt(D.call(O)))}finally{if(I)throw I.error}}if(Y.length>0){u=!0;const j=new Fs;j.candidates=[{content:{role:"user",parts:Y}}],yield yield Qt(j);const B=[];B.push(...me),B.push({role:"user",parts:Y});const K=Hr(b.contents).concat(B);b.contents=K}else break}})})(this,p,t)}async generateContentInternal(t){var n,i,a,s;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=Nx(this.apiClient,t);return d=Ge("{model}:generateContent",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:g.headers},T})),u.then(g=>{const b=Rx(g),T=new Fs;return Object.assign(T,b),T})}else{const f=kx(this.apiClient,t);return d=Ge("{model}:generateContent",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:g.headers},T})),u.then(g=>{const b=Mx(g),T=new Fs;return Object.assign(T,b),T})}}async generateContentStreamInternal(t){var n,i,a,s;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=Nx(this.apiClient,t);return d=Ge("{model}:streamGenerateContent?alt=sse",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(b){return Tl(this,arguments,function*(){var T,E,k,I;try{for(var D=!0,M=Zs(b),U;U=yield Qt(M.next()),T=U.done,!T;D=!0){I=U.value,D=!1;const O=I,se=Rx(yield Qt(O.json()));se.sdkHttpResponse={headers:O.headers};const Q=new Fs;Object.assign(Q,se),yield yield Qt(Q)}}catch(O){E={error:O}}finally{try{!D&&!T&&(k=M.return)&&(yield Qt(k.call(M)))}finally{if(E)throw E.error}}})})}else{const f=kx(this.apiClient,t);return d=Ge("{model}:streamGenerateContent?alt=sse",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}),u.then(function(b){return Tl(this,arguments,function*(){var T,E,k,I;try{for(var D=!0,M=Zs(b),U;U=yield Qt(M.next()),T=U.done,!T;D=!0){I=U.value,D=!1;const O=I,se=Mx(yield Qt(O.json()));se.sdkHttpResponse={headers:O.headers};const Q=new Fs;Object.assign(Q,se),yield yield Qt(Q)}}catch(O){E={error:O}}finally{try{!D&&!T&&(k=M.return)&&(yield Qt(k.call(M)))}finally{if(E)throw E.error}}})})}}async embedContent(t){var n,i,a,s;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=II(this.apiClient,t);return d=Ge("{model}:predict",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:g.headers},T})),u.then(g=>{const b=LI(g),T=new dx;return Object.assign(T,b),T})}else{const f=DI(this.apiClient,t);return d=Ge("{model}:batchEmbedContents",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:g.headers},T})),u.then(g=>{const b=PI(g),T=new dx;return Object.assign(T,b),T})}}async generateImagesInternal(t){var n,i,a,s;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=VI(this.apiClient,t);return d=Ge("{model}:predict",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:g.headers},T})),u.then(g=>{const b=YI(g),T=new px;return Object.assign(T,b),T})}else{const f=FI(this.apiClient,t);return d=Ge("{model}:predict",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:g.headers},T})),u.then(g=>{const b=GI(g),T=new px;return Object.assign(T,b),T})}}async editImageInternal(t){var n,i;let a,s="",u={};if(this.apiClient.isVertexAI()){const d=kI(this.apiClient,t);return s=Ge("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const f=NI(p),g=new J2;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,i;let a,s="",u={};if(this.apiClient.isVertexAI()){const d=jP(this.apiClient,t);return s=Ge("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const f=HP(p),g=new $2;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,i;let a,s="",u={};if(this.apiClient.isVertexAI()){const d=TP(this.apiClient,t);return s=Ge("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>{const f=CP(p),g=new X2;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,i;let a,s="",u={};if(this.apiClient.isVertexAI()){const d=MP(this.apiClient,t);return s=Ge("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>{const f=RP(p),g=new Q2;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,i,a,s;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=uP(this.apiClient,t);return d=Ge("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),u.then(g=>mh(g))}else{const f=sP(this.apiClient,t);return d=Ge("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),u.then(g=>hh(g))}}async listInternal(t){var n,i,a,s;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=gP(this.apiClient,t);return d=Ge("{models_url}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:g.headers},T})),u.then(g=>{const b=vP(g),T=new hx;return Object.assign(T,b),T})}else{const f=mP(this.apiClient,t);return d=Ge("{models_url}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:g.headers},T})),u.then(g=>{const b=yP(g),T=new hx;return Object.assign(T,b),T})}}async update(t){var n,i,a,s;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=zP(this.apiClient,t);return d=Ge("{model}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),u.then(g=>mh(g))}else{const f=BP(this.apiClient,t);return d=Ge("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),u.then(g=>hh(g))}}async delete(t){var n,i,a,s;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=CI(this.apiClient,t);return d=Ge("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:g.headers},T})),u.then(g=>{const b=_I(g),T=new mx;return Object.assign(T,b),T})}else{const f=TI(this.apiClient,t);return d=Ge("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:g.headers},T})),u.then(g=>{const b=EI(g),T=new mx;return Object.assign(T,b),T})}}async countTokens(t){var n,i,a,s;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=bI(this.apiClient,t);return d=Ge("{model}:countTokens",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:g.headers},T})),u.then(g=>{const b=SI(g),T=new gx;return Object.assign(T,b),T})}else{const f=xI(this.apiClient,t);return d=Ge("{model}:countTokens",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:g.headers},T})),u.then(g=>{const b=wI(g),T=new gx;return Object.assign(T,b),T})}}async computeTokens(t){var n,i;let a,s="",u={};if(this.apiClient.isVertexAI()){const d=dI(this.apiClient,t);return s=Ge("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const f=pI(p),g=new W2;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,i,a,s;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=WI(this.apiClient,t);return d=Ge("{model}:predictLongRunning",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),u.then(g=>{const b=XI(g),T=new Qc;return Object.assign(T,b),T})}else{const f=QI(this.apiClient,t);return d=Ge("{model}:predictLongRunning",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),u.then(g=>{const b=$I(g),T=new Qc;return Object.assign(T,b),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class S3 extends Sa{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:u,isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:a,isVertexAI:!1})}}async get(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:u,isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:a,isVertexAI:!1})}}async getVideosOperationInternal(t){var n,i,a,s;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=G2(t);return d=Ge("{operationName}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),u}else{const f=V2(t);return d=Ge("{operationName}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),u}}async fetchPredictVideosOperationInternal(t){var n,i;let a,s="",u={};if(this.apiClient.isVertexAI()){const d=O2(t);return s=Ge("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function T3(e){const t={};if(h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["data"]);n!=null&&v(t,["data"],n);const i=h(e,["mimeType"]);return i!=null&&v(t,["mimeType"],i),t}function C3(e){const t={},n=h(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>D3(s))),v(t,["parts"],a)}const i=h(e,["role"]);return i!=null&&v(t,["role"],i),t}function E3(e,t,n){const i={},a=h(t,["expireTime"]);n!==void 0&&a!=null&&v(n,["expireTime"],a);const s=h(t,["newSessionExpireTime"]);n!==void 0&&s!=null&&v(n,["newSessionExpireTime"],s);const u=h(t,["uses"]);n!==void 0&&u!=null&&v(n,["uses"],u);const d=h(t,["liveConnectConstraints"]);n!==void 0&&d!=null&&v(n,["bidiGenerateContentSetup"],R3(e,d));const p=h(t,["lockAdditionalFields"]);return n!==void 0&&p!=null&&v(n,["fieldMask"],p),i}function _3(e,t){const n={},i=h(t,["config"]);return i!=null&&v(n,["config"],E3(e,i,n)),n}function A3(e){const t={};if(h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["fileUri"]);n!=null&&v(t,["fileUri"],n);const i=h(e,["mimeType"]);return i!=null&&v(t,["mimeType"],i),t}function k3(e){const t={};if(h(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(e,["enableWidget"]);return n!=null&&v(t,["enableWidget"],n),t}function N3(e){const t={},n=h(e,["timeRangeFilter"]);if(n!=null&&v(t,["timeRangeFilter"],n),h(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function M3(e,t){const n={},i=h(e,["generationConfig"]);t!==void 0&&i!=null&&v(t,["setup","generationConfig"],i);const a=h(e,["responseModalities"]);t!==void 0&&a!=null&&v(t,["setup","generationConfig","responseModalities"],a);const s=h(e,["temperature"]);t!==void 0&&s!=null&&v(t,["setup","generationConfig","temperature"],s);const u=h(e,["topP"]);t!==void 0&&u!=null&&v(t,["setup","generationConfig","topP"],u);const d=h(e,["topK"]);t!==void 0&&d!=null&&v(t,["setup","generationConfig","topK"],d);const p=h(e,["maxOutputTokens"]);t!==void 0&&p!=null&&v(t,["setup","generationConfig","maxOutputTokens"],p);const f=h(e,["mediaResolution"]);t!==void 0&&f!=null&&v(t,["setup","generationConfig","mediaResolution"],f);const g=h(e,["seed"]);t!==void 0&&g!=null&&v(t,["setup","generationConfig","seed"],g);const b=h(e,["speechConfig"]);t!==void 0&&b!=null&&v(t,["setup","generationConfig","speechConfig"],im(b));const T=h(e,["thinkingConfig"]);t!==void 0&&T!=null&&v(t,["setup","generationConfig","thinkingConfig"],T);const E=h(e,["enableAffectiveDialog"]);t!==void 0&&E!=null&&v(t,["setup","generationConfig","enableAffectiveDialog"],E);const k=h(e,["systemInstruction"]);t!==void 0&&k!=null&&v(t,["setup","systemInstruction"],C3(Yn(k)));const I=h(e,["tools"]);if(t!==void 0&&I!=null){let G=Dl(I);Array.isArray(G)&&(G=G.map(Y=>P3(Rl(Y)))),v(t,["setup","tools"],G)}const D=h(e,["sessionResumption"]);t!==void 0&&D!=null&&v(t,["setup","sessionResumption"],I3(D));const M=h(e,["inputAudioTranscription"]);t!==void 0&&M!=null&&v(t,["setup","inputAudioTranscription"],M);const U=h(e,["outputAudioTranscription"]);t!==void 0&&U!=null&&v(t,["setup","outputAudioTranscription"],U);const O=h(e,["realtimeInputConfig"]);t!==void 0&&O!=null&&v(t,["setup","realtimeInputConfig"],O);const se=h(e,["contextWindowCompression"]);t!==void 0&&se!=null&&v(t,["setup","contextWindowCompression"],se);const Q=h(e,["proactivity"]);return t!==void 0&&Q!=null&&v(t,["setup","proactivity"],Q),n}function R3(e,t){const n={},i=h(t,["model"]);i!=null&&v(n,["setup","model"],At(e,i));const a=h(t,["config"]);return a!=null&&v(n,["config"],M3(a,n)),n}function D3(e){const t={},n=h(e,["videoMetadata"]);n!=null&&v(t,["videoMetadata"],n);const i=h(e,["thought"]);i!=null&&v(t,["thought"],i);const a=h(e,["inlineData"]);a!=null&&v(t,["inlineData"],T3(a));const s=h(e,["fileData"]);s!=null&&v(t,["fileData"],A3(s));const u=h(e,["thoughtSignature"]);u!=null&&v(t,["thoughtSignature"],u);const d=h(e,["functionCall"]);d!=null&&v(t,["functionCall"],d);const p=h(e,["codeExecutionResult"]);p!=null&&v(t,["codeExecutionResult"],p);const f=h(e,["executableCode"]);f!=null&&v(t,["executableCode"],f);const g=h(e,["functionResponse"]);g!=null&&v(t,["functionResponse"],g);const b=h(e,["text"]);return b!=null&&v(t,["text"],b),t}function I3(e){const t={},n=h(e,["handle"]);if(n!=null&&v(t,["handle"],n),h(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function P3(e){const t={},n=h(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(g=>g)),v(t,["functionDeclarations"],f)}if(h(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=h(e,["googleSearch"]);i!=null&&v(t,["googleSearch"],N3(i));const a=h(e,["googleSearchRetrieval"]);if(a!=null&&v(t,["googleSearchRetrieval"],a),h(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=h(e,["googleMaps"]);s!=null&&v(t,["googleMaps"],k3(s));const u=h(e,["urlContext"]);u!=null&&v(t,["urlContext"],u);const d=h(e,["computerUse"]);d!=null&&v(t,["computerUse"],d);const p=h(e,["codeExecution"]);return p!=null&&v(t,["codeExecution"],p),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function L3(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=e[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const a=Object.keys(i).map(s=>`${n}.${s}`);t.push(...a)}else t.push(n)}return t.join(",")}function U3(e,t){let n=null;const i=e.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const s=i.setup;typeof s=="object"&&s!==null?(e.bidiGenerateContentSetup=s,n=s):delete e.bidiGenerateContentSetup}else i!==void 0&&delete e.bidiGenerateContentSetup;const a=e.fieldMask;if(n){const s=L3(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)s?e.fieldMask=s:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];a.length>0&&(d=a.map(f=>u.includes(f)?`generationConfig.${f}`:f));const p=[];s&&p.push(s),d.length>0&&p.push(...d),p.length>0?e.fieldMask=p.join(","):delete e.fieldMask}else delete e.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?e.fieldMask=a.join(","):delete e.fieldMask;return e}class O3 extends Sa{constructor(t){super(),this.apiClient=t}async create(t){var n,i;let a,s="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=_3(this.apiClient,t);s=Ge("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const p=U3(d,t.config);return a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function B3(e){const t={},n=h(e,["name"]);return n!=null&&v(t,["_url","name"],n),t}function z3(e){const t={},n=h(e,["name"]);return n!=null&&v(t,["_url","name"],n),t}function q3(e,t){const n={};if(h(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=h(e,["tunedModelDisplayName"]);if(t!==void 0&&i!=null&&v(t,["displayName"],i),h(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=h(e,["epochCount"]);t!==void 0&&a!=null&&v(t,["tuningTask","hyperparameters","epochCount"],a);const s=h(e,["learningRateMultiplier"]);if(s!=null&&v(n,["tuningTask","hyperparameters","learningRateMultiplier"],s),h(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(h(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(h(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=h(e,["batchSize"]);t!==void 0&&u!=null&&v(t,["tuningTask","hyperparameters","batchSize"],u);const d=h(e,["learningRate"]);if(t!==void 0&&d!=null&&v(t,["tuningTask","hyperparameters","learningRate"],d),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return n}function j3(e,t){const n={},i=h(e,["validationDataset"]);t!==void 0&&i!=null&&v(t,["supervisedTuningSpec"],n4(i,n));const a=h(e,["tunedModelDisplayName"]);t!==void 0&&a!=null&&v(t,["tunedModelDisplayName"],a);const s=h(e,["description"]);t!==void 0&&s!=null&&v(t,["description"],s);const u=h(e,["epochCount"]);t!==void 0&&u!=null&&v(t,["supervisedTuningSpec","hyperParameters","epochCount"],u);const d=h(e,["learningRateMultiplier"]);t!==void 0&&d!=null&&v(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],d);const p=h(e,["exportLastCheckpointOnly"]);t!==void 0&&p!=null&&v(t,["supervisedTuningSpec","exportLastCheckpointOnly"],p);const f=h(e,["adapterSize"]);if(t!==void 0&&f!=null&&v(t,["supervisedTuningSpec","hyperParameters","adapterSize"],f),h(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(h(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const g=h(e,["labels"]);return t!==void 0&&g!=null&&v(t,["labels"],g),n}function H3(e){const t={},n=h(e,["baseModel"]);n!=null&&v(t,["baseModel"],n);const i=h(e,["preTunedModel"]);i!=null&&v(t,["preTunedModel"],i);const a=h(e,["trainingDataset"]);a!=null&&v(t,["tuningTask","trainingData"],Z3(a));const s=h(e,["config"]);return s!=null&&q3(s,t),t}function F3(e){const t={},n=h(e,["baseModel"]);n!=null&&v(t,["baseModel"],n);const i=h(e,["preTunedModel"]);i!=null&&v(t,["preTunedModel"],i);const a=h(e,["trainingDataset"]);a!=null&&v(t,["supervisedTuningSpec","trainingDatasetUri"],e4(a,t));const s=h(e,["config"]);return s!=null&&j3(s,t),t}function V3(e){const t={},n=h(e,["name"]);return n!=null&&v(t,["_url","name"],n),t}function G3(e){const t={},n=h(e,["name"]);return n!=null&&v(t,["_url","name"],n),t}function Y3(e,t){const n={},i=h(e,["pageSize"]);t!==void 0&&i!=null&&v(t,["_query","pageSize"],i);const a=h(e,["pageToken"]);t!==void 0&&a!=null&&v(t,["_query","pageToken"],a);const s=h(e,["filter"]);return t!==void 0&&s!=null&&v(t,["_query","filter"],s),n}function K3(e,t){const n={},i=h(e,["pageSize"]);t!==void 0&&i!=null&&v(t,["_query","pageSize"],i);const a=h(e,["pageToken"]);t!==void 0&&a!=null&&v(t,["_query","pageToken"],a);const s=h(e,["filter"]);return t!==void 0&&s!=null&&v(t,["_query","filter"],s),n}function J3(e){const t={},n=h(e,["config"]);return n!=null&&Y3(n,t),t}function $3(e){const t={},n=h(e,["config"]);return n!=null&&K3(n,t),t}function X3(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&v(t,["sdkHttpResponse"],n);const i=h(e,["nextPageToken"]);i!=null&&v(t,["nextPageToken"],i);const a=h(e,["tunedModels"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(u=>eS(u))),v(t,["tuningJobs"],s)}return t}function Q3(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&v(t,["sdkHttpResponse"],n);const i=h(e,["nextPageToken"]);i!=null&&v(t,["nextPageToken"],i);const a=h(e,["tuningJobs"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(u=>yh(u))),v(t,["tuningJobs"],s)}return t}function W3(e){const t={},n=h(e,["name"]);n!=null&&v(t,["model"],n);const i=h(e,["name"]);return i!=null&&v(t,["endpoint"],i),t}function Z3(e){const t={};if(h(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=h(e,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>a)),v(t,["examples","examples"],i)}return t}function e4(e,t){const n={},i=h(e,["gcsUri"]);t!==void 0&&i!=null&&v(t,["supervisedTuningSpec","trainingDatasetUri"],i);const a=h(e,["vertexDatasetResource"]);if(t!==void 0&&a!=null&&v(t,["supervisedTuningSpec","trainingDatasetUri"],a),h(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function eS(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&v(t,["sdkHttpResponse"],n);const i=h(e,["name"]);i!=null&&v(t,["name"],i);const a=h(e,["state"]);a!=null&&v(t,["state"],Lw(a));const s=h(e,["createTime"]);s!=null&&v(t,["createTime"],s);const u=h(e,["tuningTask","startTime"]);u!=null&&v(t,["startTime"],u);const d=h(e,["tuningTask","completeTime"]);d!=null&&v(t,["endTime"],d);const p=h(e,["updateTime"]);p!=null&&v(t,["updateTime"],p);const f=h(e,["description"]);f!=null&&v(t,["description"],f);const g=h(e,["baseModel"]);g!=null&&v(t,["baseModel"],g);const b=h(e,["_self"]);b!=null&&v(t,["tunedModel"],W3(b));const T=h(e,["customBaseModel"]);T!=null&&v(t,["customBaseModel"],T);const E=h(e,["experiment"]);E!=null&&v(t,["experiment"],E);const k=h(e,["labels"]);k!=null&&v(t,["labels"],k);const I=h(e,["outputUri"]);I!=null&&v(t,["outputUri"],I);const D=h(e,["pipelineJob"]);D!=null&&v(t,["pipelineJob"],D);const M=h(e,["serviceAccount"]);M!=null&&v(t,["serviceAccount"],M);const U=h(e,["tunedModelDisplayName"]);U!=null&&v(t,["tunedModelDisplayName"],U);const O=h(e,["veoTuningSpec"]);return O!=null&&v(t,["veoTuningSpec"],O),t}function yh(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&v(t,["sdkHttpResponse"],n);const i=h(e,["name"]);i!=null&&v(t,["name"],i);const a=h(e,["state"]);a!=null&&v(t,["state"],Lw(a));const s=h(e,["createTime"]);s!=null&&v(t,["createTime"],s);const u=h(e,["startTime"]);u!=null&&v(t,["startTime"],u);const d=h(e,["endTime"]);d!=null&&v(t,["endTime"],d);const p=h(e,["updateTime"]);p!=null&&v(t,["updateTime"],p);const f=h(e,["error"]);f!=null&&v(t,["error"],f);const g=h(e,["description"]);g!=null&&v(t,["description"],g);const b=h(e,["baseModel"]);b!=null&&v(t,["baseModel"],b);const T=h(e,["tunedModel"]);T!=null&&v(t,["tunedModel"],T);const E=h(e,["preTunedModel"]);E!=null&&v(t,["preTunedModel"],E);const k=h(e,["supervisedTuningSpec"]);k!=null&&v(t,["supervisedTuningSpec"],k);const I=h(e,["tuningDataStats"]);I!=null&&v(t,["tuningDataStats"],I);const D=h(e,["encryptionSpec"]);D!=null&&v(t,["encryptionSpec"],D);const M=h(e,["partnerModelTuningSpec"]);M!=null&&v(t,["partnerModelTuningSpec"],M);const U=h(e,["customBaseModel"]);U!=null&&v(t,["customBaseModel"],U);const O=h(e,["experiment"]);O!=null&&v(t,["experiment"],O);const se=h(e,["labels"]);se!=null&&v(t,["labels"],se);const Q=h(e,["outputUri"]);Q!=null&&v(t,["outputUri"],Q);const G=h(e,["pipelineJob"]);G!=null&&v(t,["pipelineJob"],G);const Y=h(e,["serviceAccount"]);Y!=null&&v(t,["serviceAccount"],Y);const me=h(e,["tunedModelDisplayName"]);me!=null&&v(t,["tunedModelDisplayName"],me);const j=h(e,["veoTuningSpec"]);return j!=null&&v(t,["veoTuningSpec"],j),t}function t4(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&v(t,["sdkHttpResponse"],n);const i=h(e,["name"]);i!=null&&v(t,["name"],i);const a=h(e,["metadata"]);a!=null&&v(t,["metadata"],a);const s=h(e,["done"]);s!=null&&v(t,["done"],s);const u=h(e,["error"]);return u!=null&&v(t,["error"],u),t}function n4(e,t){const n={},i=h(e,["gcsUri"]);i!=null&&v(n,["validationDatasetUri"],i);const a=h(e,["vertexDatasetResource"]);return t!==void 0&&a!=null&&v(t,["supervisedTuningSpec","trainingDatasetUri"],a),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class r4 extends Sa{constructor(t){super(),this.apiClient=t,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new pu(va.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const a={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(a.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:a});return s.baseModel=void 0,await this.tuneInternal(s)}else{const a=Object.assign({},n);return await this.tuneInternal(a)}else{const a=Object.assign({},n),s=await this.tuneMldevInternal(a);let u="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?u=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(u=s.name.split("/operations/")[0]),{name:u,state:ch.JOB_STATE_QUEUED}}}}async getInternal(t){var n,i,a,s;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=G3(t);return d=Ge("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:g.headers},T})),u.then(g=>yh(g))}else{const f=V3(t);return d=Ge("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:g.headers},T})),u.then(g=>eS(g))}}async listInternal(t){var n,i,a,s;let u,d="",p={};if(this.apiClient.isVertexAI()){const f=$3(t);return d=Ge("tuningJobs",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:g.headers},T})),u.then(g=>{const b=Q3(g),T=new yx;return Object.assign(T,b),T})}else{const f=J3(t);return d=Ge("tunedModels",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:g.headers},T})),u.then(g=>{const b=X3(g),T=new yx;return Object.assign(T,b),T})}}async cancel(t){var n,i,a,s;let u="",d={};if(this.apiClient.isVertexAI()){const p=z3(t);u=Ge("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=B3(t);u=Ge("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async tuneInternal(t){var n,i;let a,s="",u={};if(this.apiClient.isVertexAI()){const d=F3(t);return s=Ge("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>yh(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,i;let a,s="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=H3(t);return s=Ge("tunedModels",d._url),u=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>t4(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class i4{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const o4=1024*1024*8,a4=3,l4=1e3,s4=2,qp="x-goog-upload-status";async function u4(e,t,n){var i,a,s;let u=0,d=0,p=new fh(new Response),f="upload";for(u=e.size;d<u;){const b=Math.min(o4,u-d),T=e.slice(d,d+b);d+b>=u&&(f+=", finalize");let E=0,k=l4;for(;E<a4&&(p=await n.request({path:"",body:T,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(d),"Content-Length":String(b)}}}),!(!((i=p==null?void 0:p.headers)===null||i===void 0)&&i[qp]));)E++,await f4(k),k=k*s4;if(d+=b,((a=p==null?void 0:p.headers)===null||a===void 0?void 0:a[qp])!=="active")break;if(u<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const g=await(p==null?void 0:p.json());if(((s=p==null?void 0:p.headers)===null||s===void 0?void 0:s[qp])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return g.file}async function c4(e){return{size:e.size,type:e.type}}function f4(e){return new Promise(t=>setTimeout(t,e))}class d4{async upload(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await u4(t,n,i)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await c4(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class p4{create(t,n,i){return new h4(t,n,i)}}class h4{constructor(t,n,i){this.url=t,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ox="x-goog-api-key";class m4{constructor(t){this.apiKey=t}async addAuthHeaders(t){if(t.get(Ox)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Ox,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const g4="gl-node/";class Ta{constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const i=L2(t.httpOptions,t.vertexai,void 0,void 0);i&&(t.httpOptions?t.httpOptions.baseUrl=i:t.httpOptions={baseUrl:i}),this.apiVersion=t.apiVersion;const a=new m4(this.apiKey);this.apiClient=new t3({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:g4+"web",uploader:new d4,downloader:new i4}),this.models=new w3(this.apiClient),this.live=new h3(this.apiClient,a,new p4),this.batches=new eD(this.apiClient),this.chats=new DD(this.models,this.apiClient),this.caches=new ND(this.apiClient),this.files=new HD(this.apiClient),this.operations=new S3(this.apiClient),this.authTokens=new O3(this.apiClient),this.tunings=new r4(this.apiClient)}}var Hc={exports:{}},y4=Hc.exports,Bx;function v4(){return Bx||(Bx=1,(function(e,t){(function(n,i){e.exports=i()})(y4,function(){var n=function(m,w){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,_){C.__proto__=_}||function(C,_){for(var N in _)Object.prototype.hasOwnProperty.call(_,N)&&(C[N]=_[N])})(m,w)},i=function(){return(i=Object.assign||function(m){for(var w,C=1,_=arguments.length;C<_;C++)for(var N in w=arguments[C])Object.prototype.hasOwnProperty.call(w,N)&&(m[N]=w[N]);return m}).apply(this,arguments)};function a(m,w,C){for(var _,N=0,R=w.length;N<R;N++)!_&&N in w||((_=_||Array.prototype.slice.call(w,0,N))[N]=w[N]);return m.concat(_||Array.prototype.slice.call(w))}var s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:XT,u=Object.keys,d=Array.isArray;function p(m,w){return typeof w!="object"||u(w).forEach(function(C){m[C]=w[C]}),m}typeof Promise>"u"||s.Promise||(s.Promise=Promise);var f=Object.getPrototypeOf,g={}.hasOwnProperty;function b(m,w){return g.call(m,w)}function T(m,w){typeof w=="function"&&(w=w(f(m))),(typeof Reflect>"u"?u:Reflect.ownKeys)(w).forEach(function(C){k(m,C,w[C])})}var E=Object.defineProperty;function k(m,w,C,_){E(m,w,p(C&&b(C,"get")&&typeof C.get=="function"?{get:C.get,set:C.set,configurable:!0}:{value:C,configurable:!0,writable:!0},_))}function I(m){return{from:function(w){return m.prototype=Object.create(w.prototype),k(m.prototype,"constructor",m),{extend:T.bind(null,m.prototype)}}}}var D=Object.getOwnPropertyDescriptor,M=[].slice;function U(m,w,C){return M.call(m,w,C)}function O(m,w){return w(m)}function se(m){if(!m)throw new Error("Assertion Failed")}function Q(m){s.setImmediate?setImmediate(m):setTimeout(m,0)}function G(m,w){if(typeof w=="string"&&b(m,w))return m[w];if(!w)return m;if(typeof w!="string"){for(var C=[],_=0,N=w.length;_<N;++_){var R=G(m,w[_]);C.push(R)}return C}var q=w.indexOf(".");if(q!==-1){var F=m[w.substr(0,q)];return F==null?void 0:G(F,w.substr(q+1))}}function Y(m,w,C){if(m&&w!==void 0&&!("isFrozen"in Object&&Object.isFrozen(m)))if(typeof w!="string"&&"length"in w){se(typeof C!="string"&&"length"in C);for(var _=0,N=w.length;_<N;++_)Y(m,w[_],C[_])}else{var R,q,F=w.indexOf(".");F!==-1?(R=w.substr(0,F),(q=w.substr(F+1))===""?C===void 0?d(m)&&!isNaN(parseInt(R))?m.splice(R,1):delete m[R]:m[R]=C:Y(F=!(F=m[R])||!b(m,R)?m[R]={}:F,q,C)):C===void 0?d(m)&&!isNaN(parseInt(w))?m.splice(w,1):delete m[w]:m[w]=C}}function me(m){var w,C={};for(w in m)b(m,w)&&(C[w]=m[w]);return C}var j=[].concat;function B(m){return j.apply([],m)}var ve="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(B([8,16,32,64].map(function(m){return["Int","Uint","Float"].map(function(w){return w+m+"Array"})}))).filter(function(m){return s[m]}),K=new Set(ve.map(function(m){return s[m]})),ce=null;function xe(m){return ce=new WeakMap,m=(function w(C){if(!C||typeof C!="object")return C;var _=ce.get(C);if(_)return _;if(d(C)){_=[],ce.set(C,_);for(var N=0,R=C.length;N<R;++N)_.push(w(C[N]))}else if(K.has(C.constructor))_=C;else{var q,F=f(C);for(q in _=F===Object.prototype?{}:Object.create(F),ce.set(C,_),C)b(C,q)&&(_[q]=w(C[q]))}return _})(m),ce=null,m}var _e={}.toString;function Pe(m){return _e.call(m).slice(8,-1)}var ue=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ee=typeof ue=="symbol"?function(m){var w;return m!=null&&(w=m[ue])&&w.apply(m)}:function(){return null};function Me(m,w){return w=m.indexOf(w),0<=w&&m.splice(w,1),0<=w}var Qe={};function V(m){var w,C,_,N;if(arguments.length===1){if(d(m))return m.slice();if(this===Qe&&typeof m=="string")return[m];if(N=Ee(m)){for(C=[];!(_=N.next()).done;)C.push(_.value);return C}if(m==null)return[m];if(typeof(w=m.length)!="number")return[m];for(C=new Array(w);w--;)C[w]=m[w];return C}for(w=arguments.length,C=new Array(w);w--;)C[w]=arguments[w];return C}var z=typeof Symbol<"u"?function(m){return m[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Er=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Wn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Er),J={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function L(m,w){this.name=m,this.message=w}function Ae(m,w){return m+". Errors: "+Object.keys(w).map(function(C){return w[C].toString()}).filter(function(C,_,N){return N.indexOf(C)===_}).join(`
`)}function He(m,w,C,_){this.failures=w,this.failedKeys=_,this.successCount=C,this.message=Ae(m,w)}function qe(m,w){this.name="BulkError",this.failures=Object.keys(w).map(function(C){return w[C]}),this.failuresByPos=w,this.message=Ae(m,this.failures)}I(L).from(Error).extend({toString:function(){return this.name+": "+this.message}}),I(He).from(L),I(qe).from(L);var We=Wn.reduce(function(m,w){return m[w]=w+"Error",m},{}),st=L,Ne=Wn.reduce(function(m,w){var C=w+"Error";function _(N,R){this.name=C,N?typeof N=="string"?(this.message="".concat(N).concat(R?`
 `+R:""),this.inner=R||null):typeof N=="object"&&(this.message="".concat(N.name," ").concat(N.message),this.inner=N):(this.message=J[w]||C,this.inner=null)}return I(_).from(st),m[w]=_,m},{});Ne.Syntax=SyntaxError,Ne.Type=TypeError,Ne.Range=RangeError;var Mt=Er.reduce(function(m,w){return m[w+"Error"]=Ne[w],m},{}),Tt=Wn.reduce(function(m,w){return["Syntax","Type","Range"].indexOf(w)===-1&&(m[w+"Error"]=Ne[w]),m},{});function pt(){}function dr(m){return m}function tn(m,w){return m==null||m===dr?w:function(C){return w(m(C))}}function hn(m,w){return function(){m.apply(this,arguments),w.apply(this,arguments)}}function Jn(m,w){return m===pt?w:function(){var C=m.apply(this,arguments);C!==void 0&&(arguments[0]=C);var _=this.onsuccess,N=this.onerror;this.onsuccess=null,this.onerror=null;var R=w.apply(this,arguments);return _&&(this.onsuccess=this.onsuccess?hn(_,this.onsuccess):_),N&&(this.onerror=this.onerror?hn(N,this.onerror):N),R!==void 0?R:C}}function ei(m,w){return m===pt?w:function(){m.apply(this,arguments);var C=this.onsuccess,_=this.onerror;this.onsuccess=this.onerror=null,w.apply(this,arguments),C&&(this.onsuccess=this.onsuccess?hn(C,this.onsuccess):C),_&&(this.onerror=this.onerror?hn(_,this.onerror):_)}}function Xi(m,w){return m===pt?w:function(C){var _=m.apply(this,arguments);p(C,_);var N=this.onsuccess,R=this.onerror;return this.onsuccess=null,this.onerror=null,C=w.apply(this,arguments),N&&(this.onsuccess=this.onsuccess?hn(N,this.onsuccess):N),R&&(this.onerror=this.onerror?hn(R,this.onerror):R),_===void 0?C===void 0?void 0:C:p(_,C)}}function ti(m,w){return m===pt?w:function(){return w.apply(this,arguments)!==!1&&m.apply(this,arguments)}}function pr(m,w){return m===pt?w:function(){var C=m.apply(this,arguments);if(C&&typeof C.then=="function"){for(var _=this,N=arguments.length,R=new Array(N);N--;)R[N]=arguments[N];return C.then(function(){return w.apply(_,R)})}return w.apply(this,arguments)}}Tt.ModifyError=He,Tt.DexieError=L,Tt.BulkError=qe;var Tn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Uo(m){Tn=m}var Vr={},an=100,ve=typeof Promise>"u"?[]:(function(){var m=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[m,f(m),m];var w=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[w,f(w),m]})(),Er=ve[0],Wn=ve[1],ve=ve[2],Wn=Wn&&Wn.then,Re=Er&&Er.constructor,Je=!!ve,rt=function(m,w){Ft.push([m,w]),ln&&(queueMicrotask(Oo),ln=!1)},dt=!0,ln=!0,Cn=[],Ht=[],Yt=dr,Bt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:pt,pgp:!1,env:{},finalize:pt},Ue=Bt,Ft=[],Wt=0,Ye=[];function ke(m){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var w=this._PSD=Ue;if(typeof m!="function"){if(m!==Vr)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&En(this,this._value))}this._state=null,this._value=null,++w.ref,(function C(_,N){try{N(function(R){if(_._state===null){if(R===_)throw new TypeError("A promise cannot be resolved with itself.");var q=_._lib&&Nn();R&&typeof R.then=="function"?C(_,function(F,W){R instanceof ke?R._then(F,W):R.then(F,W)}):(_._state=!0,_._value=R,_n(_)),q&&Ar()}},En.bind(null,_))}catch(R){En(_,R)}})(this,m)}var sn={get:function(){var m=Ue,w=qo;function C(_,N){var R=this,q=!m.global&&(m!==Ue||w!==qo),F=q&&!Xn(),W=new ke(function(Z,ie){_r(R,new $n(_a(_,m,q,F),_a(N,m,q,F),Z,ie,m))});return this._consoleTask&&(W._consoleTask=this._consoleTask),W}return C.prototype=Vr,C},set:function(m){k(this,"then",m&&m.prototype===Vr?sn:{get:function(){return m},set:sn.set})}};function $n(m,w,C,_,N){this.onFulfilled=typeof m=="function"?m:null,this.onRejected=typeof w=="function"?w:null,this.resolve=C,this.reject=_,this.psd=N}function En(m,w){var C,_;Ht.push(w),m._state===null&&(C=m._lib&&Nn(),w=Yt(w),m._state=!1,m._value=w,_=m,Cn.some(function(N){return N._value===_._value})||Cn.push(_),_n(m),C&&Ar())}function _n(m){var w=m._listeners;m._listeners=[];for(var C=0,_=w.length;C<_;++C)_r(m,w[C]);var N=m._PSD;--N.ref||N.finalize(),Wt===0&&(++Wt,rt(function(){--Wt==0&&Ll()},[]))}function _r(m,w){if(m._state!==null){var C=m._state?w.onFulfilled:w.onRejected;if(C===null)return(m._state?w.resolve:w.reject)(m._value);++w.psd.ref,++Wt,rt(Ea,[C,m,w])}else m._listeners.push(w)}function Ea(m,w,C){try{var _,N=w._value;!w._state&&Ht.length&&(Ht=[]),_=Tn&&w._consoleTask?w._consoleTask.run(function(){return m(N)}):m(N),w._state||Ht.indexOf(N)!==-1||(function(R){for(var q=Cn.length;q;)if(Cn[--q]._value===R._value)return Cn.splice(q,1)})(w),C.resolve(_)}catch(R){C.reject(R)}finally{--Wt==0&&Ll(),--C.psd.ref||C.psd.finalize()}}function Oo(){hr(Bt,function(){Nn()&&Ar()})}function Nn(){var m=dt;return ln=dt=!1,m}function Ar(){var m,w,C;do for(;0<Ft.length;)for(m=Ft,Ft=[],C=m.length,w=0;w<C;++w){var _=m[w];_[0].apply(null,_[1])}while(0<Ft.length);ln=dt=!0}function Ll(){var m=Cn;Cn=[],m.forEach(function(_){_._PSD.onunhandled.call(null,_._value,_)});for(var w=Ye.slice(0),C=w.length;C;)w[--C]()}function Bo(m){return new ke(Vr,!1,m)}function zt(m,w){var C=Ue;return function(){var _=Nn(),N=Ue;try{return ri(C,!0),m.apply(this,arguments)}catch(R){w&&w(R)}finally{ri(N,!1),_&&Ar()}}}T(ke.prototype,{then:sn,_then:function(m,w){_r(this,new $n(null,null,m,w,Ue))},catch:function(m){if(arguments.length===1)return this.then(null,m);var w=m,C=arguments[1];return typeof w=="function"?this.then(null,function(_){return(_ instanceof w?C:Bo)(_)}):this.then(null,function(_){return(_&&_.name===w?C:Bo)(_)})},finally:function(m){return this.then(function(w){return ke.resolve(m()).then(function(){return w})},function(w){return ke.resolve(m()).then(function(){return Bo(w)})})},timeout:function(m,w){var C=this;return m<1/0?new ke(function(_,N){var R=setTimeout(function(){return N(new Ne.Timeout(w))},m);C.then(_,N).finally(clearTimeout.bind(null,R))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&k(ke.prototype,Symbol.toStringTag,"Dexie.Promise"),Bt.env=Ol(),T(ke,{all:function(){var m=V.apply(null,arguments).map(Wi);return new ke(function(w,C){m.length===0&&w([]);var _=m.length;m.forEach(function(N,R){return ke.resolve(N).then(function(q){m[R]=q,--_||w(m)},C)})})},resolve:function(m){return m instanceof ke?m:m&&typeof m.then=="function"?new ke(function(w,C){m.then(w,C)}):new ke(Vr,!0,m)},reject:Bo,race:function(){var m=V.apply(null,arguments).map(Wi);return new ke(function(w,C){m.map(function(_){return ke.resolve(_).then(w,C)})})},PSD:{get:function(){return Ue},set:function(m){return Ue=m}},totalEchoes:{get:function(){return qo}},newPSD:Vt,usePSD:hr,scheduler:{get:function(){return rt},set:function(m){rt=m}},rejectionMapper:{get:function(){return Yt},set:function(m){Yt=m}},follow:function(m,w){return new ke(function(C,_){return Vt(function(N,R){var q=Ue;q.unhandleds=[],q.onunhandled=R,q.finalize=hn(function(){var F,W=this;F=function(){W.unhandleds.length===0?N():R(W.unhandleds[0])},Ye.push(function Z(){F(),Ye.splice(Ye.indexOf(Z),1)}),++Wt,rt(function(){--Wt==0&&Ll()},[])},q.finalize),m()},w,C,_)})}}),Re&&(Re.allSettled&&k(ke,"allSettled",function(){var m=V.apply(null,arguments).map(Wi);return new ke(function(w){m.length===0&&w([]);var C=m.length,_=new Array(C);m.forEach(function(N,R){return ke.resolve(N).then(function(q){return _[R]={status:"fulfilled",value:q}},function(q){return _[R]={status:"rejected",reason:q}}).then(function(){return--C||w(_)})})})}),Re.any&&typeof AggregateError<"u"&&k(ke,"any",function(){var m=V.apply(null,arguments).map(Wi);return new ke(function(w,C){m.length===0&&C(new AggregateError([]));var _=m.length,N=new Array(_);m.forEach(function(R,q){return ke.resolve(R).then(function(F){return w(F)},function(F){N[q]=F,--_||C(new AggregateError(N))})})})}),Re.withResolvers&&(ke.withResolvers=Re.withResolvers));var un={awaits:0,echoes:0,id:0},Ul=0,Qi=[],zo=0,qo=0,ni=0;function Vt(m,w,C,_){var N=Ue,R=Object.create(N);return R.parent=N,R.ref=0,R.global=!1,R.id=++ni,Bt.env,R.env=Je?{Promise:ke,PromiseProp:{value:ke,configurable:!0,writable:!0},all:ke.all,race:ke.race,allSettled:ke.allSettled,any:ke.any,resolve:ke.resolve,reject:ke.reject}:{},w&&p(R,w),++N.ref,R.finalize=function(){--this.parent.ref||this.parent.finalize()},_=hr(R,m,C,_),R.ref===0&&R.finalize(),_}function cn(){return un.id||(un.id=++Ul),++un.awaits,un.echoes+=an,un.id}function Xn(){return!!un.awaits&&(--un.awaits==0&&(un.id=0),un.echoes=un.awaits*an,!0)}function Wi(m){return un.echoes&&m&&m.constructor===Re?(cn(),m.then(function(w){return Xn(),w},function(w){return Xn(),Pt(w)})):m}function Tf(){var m=Qi[Qi.length-1];Qi.pop(),ri(m,!1)}function ri(m,w){var C,_=Ue;(w?!un.echoes||zo++&&m===Ue:!zo||--zo&&m===Ue)||queueMicrotask(w?(function(N){++qo,un.echoes&&--un.echoes!=0||(un.echoes=un.awaits=un.id=0),Qi.push(Ue),ri(N,!0)}).bind(null,m):Tf),m!==Ue&&(Ue=m,_===Bt&&(Bt.env=Ol()),Je&&(C=Bt.env.Promise,w=m.env,(_.global||m.global)&&(Object.defineProperty(s,"Promise",w.PromiseProp),C.all=w.all,C.race=w.race,C.resolve=w.resolve,C.reject=w.reject,w.allSettled&&(C.allSettled=w.allSettled),w.any&&(C.any=w.any))))}function Ol(){var m=s.Promise;return Je?{Promise:m,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:m.all,race:m.race,allSettled:m.allSettled,any:m.any,resolve:m.resolve,reject:m.reject}:{}}function hr(m,w,C,_,N){var R=Ue;try{return ri(m,!0),w(C,_,N)}finally{ri(R,!1)}}function _a(m,w,C,_){return typeof m!="function"?m:function(){var N=Ue;C&&cn(),ri(w,!0);try{return m.apply(this,arguments)}finally{ri(N,!1),_&&queueMicrotask(Xn)}}}function ii(m){Promise===Re&&un.echoes===0?zo===0?m():enqueueNativeMicroTask(m):setTimeout(m,0)}(""+Wn).indexOf("[native code]")===-1&&(cn=Xn=pt);var Pt=ke.reject,mr="",jn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",fn="String expected.",xi=[],jo="__dbnames",Gr="readonly",oi="readwrite";function bi(m,w){return m?w?function(){return m.apply(this,arguments)&&w.apply(this,arguments)}:m:w}var Bl={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ho(m){return typeof m!="string"||/\./.test(m)?function(w){return w}:function(w){return w[m]===void 0&&m in w&&delete(w=xe(w))[m],w}}function yu(){throw Ne.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ft(m,w){try{var C=Fo(m),_=Fo(w);if(C!==_)return C==="Array"?1:_==="Array"?-1:C==="binary"?1:_==="binary"?-1:C==="string"?1:_==="string"?-1:C==="Date"?1:_!=="Date"?NaN:-1;switch(C){case"number":case"Date":case"string":return w<m?1:m<w?-1:0;case"binary":return(function(N,R){for(var q=N.length,F=R.length,W=q<F?q:F,Z=0;Z<W;++Z)if(N[Z]!==R[Z])return N[Z]<R[Z]?-1:1;return q===F?0:q<F?-1:1})(kr(m),kr(w));case"Array":return(function(N,R){for(var q=N.length,F=R.length,W=q<F?q:F,Z=0;Z<W;++Z){var ie=ft(N[Z],R[Z]);if(ie!==0)return ie}return q===F?0:q<F?-1:1})(m,w)}}catch{}return NaN}function Fo(m){var w=typeof m;return w!="object"?w:ArrayBuffer.isView(m)?"binary":(m=Pe(m),m==="ArrayBuffer"?"binary":m)}function kr(m){return m instanceof Uint8Array?m:ArrayBuffer.isView(m)?new Uint8Array(m.buffer,m.byteOffset,m.byteLength):new Uint8Array(m)}function Un(m,w,C){var _=m.schema.yProps;return _?(w&&0<C.numFailures&&(w=w.filter(function(N,R){return!C.failures[R]})),Promise.all(_.map(function(N){return N=N.updatesTable,w?m.db.table(N).where("k").anyOf(w).delete():m.db.table(N).clear()})).then(function(){return C})):C}var Zi=(vu.prototype.execute=function(m){var w=this["@@propmod"];if(w.add!==void 0){var C=w.add;if(d(C))return a(a([],d(m)?m:[],!0),C).sort();if(typeof C=="number")return(Number(m)||0)+C;if(typeof C=="bigint")try{return BigInt(m)+C}catch{return BigInt(0)+C}throw new TypeError("Invalid term ".concat(C))}if(w.remove!==void 0){var _=w.remove;if(d(_))return d(m)?m.filter(function(N){return!_.includes(N)}).sort():[];if(typeof _=="number")return Number(m)-_;if(typeof _=="bigint")try{return BigInt(m)-_}catch{return BigInt(0)-_}throw new TypeError("Invalid subtrahend ".concat(_))}return C=(C=w.replacePrefix)===null||C===void 0?void 0:C[0],C&&typeof m=="string"&&m.startsWith(C)?w.replacePrefix[1]+m.substring(C.length):m},vu);function vu(m){this["@@propmod"]=m}function Aa(m,w){for(var C=u(w),_=C.length,N=!1,R=0;R<_;++R){var q=C[R],F=w[q],W=G(m,q);F instanceof Zi?(Y(m,q,F.execute(W)),N=!0):W!==F&&(Y(m,q,F),N=!0)}return N}var zl=(kt.prototype._trans=function(m,w,C){var _=this._tx||Ue.trans,N=this.name,R=Tn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(m==="readonly"?"read":"write"," ").concat(this.name));function q(Z,ie,X){if(!X.schema[N])throw new Ne.NotFound("Table "+N+" not part of transaction");return w(X.idbtrans,X)}var F=Nn();try{var W=_&&_.db._novip===this.db._novip?_===Ue.trans?_._promise(m,q,C):Vt(function(){return _._promise(m,q,C)},{trans:_,transless:Ue.transless||Ue}):(function Z(ie,X,ae,ee){if(ie.idbdb&&(ie._state.openComplete||Ue.letThrough||ie._vip)){var ne=ie._createTransaction(X,ae,ie._dbSchema);try{ne.create(),ie._state.PR1398_maxLoop=3}catch(re){return re.name===We.InvalidState&&ie.isOpen()&&0<--ie._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ie.close({disableAutoOpen:!1}),ie.open().then(function(){return Z(ie,X,ae,ee)})):Pt(re)}return ne._promise(X,function(re,oe){return Vt(function(){return Ue.trans=ne,ee(re,oe,ne)})}).then(function(re){if(X==="readwrite")try{ne.idbtrans.commit()}catch{}return X==="readonly"?re:ne._completion.then(function(){return re})})}if(ie._state.openComplete)return Pt(new Ne.DatabaseClosed(ie._state.dbOpenError));if(!ie._state.isBeingOpened){if(!ie._state.autoOpen)return Pt(new Ne.DatabaseClosed);ie.open().catch(pt)}return ie._state.dbReadyPromise.then(function(){return Z(ie,X,ae,ee)})})(this.db,m,[this.name],q);return R&&(W._consoleTask=R,W=W.catch(function(Z){return console.trace(Z),Pt(Z)})),W}finally{F&&Ar()}},kt.prototype.get=function(m,w){var C=this;return m&&m.constructor===Object?this.where(m).first(w):m==null?Pt(new Ne.Type("Invalid argument to Table.get()")):this._trans("readonly",function(_){return C.core.get({trans:_,key:m}).then(function(N){return C.hook.reading.fire(N)})}).then(w)},kt.prototype.where=function(m){if(typeof m=="string")return new this.db.WhereClause(this,m);if(d(m))return new this.db.WhereClause(this,"[".concat(m.join("+"),"]"));var w=u(m);if(w.length===1)return this.where(w[0]).equals(m[w[0]]);var C=this.schema.indexes.concat(this.schema.primKey).filter(function(F){if(F.compound&&w.every(function(Z){return 0<=F.keyPath.indexOf(Z)})){for(var W=0;W<w.length;++W)if(w.indexOf(F.keyPath[W])===-1)return!1;return!0}return!1}).sort(function(F,W){return F.keyPath.length-W.keyPath.length})[0];if(C&&this.db._maxKey!==mr){var R=C.keyPath.slice(0,w.length);return this.where(R).equals(R.map(function(W){return m[W]}))}!C&&Tn&&console.warn("The query ".concat(JSON.stringify(m)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(w.join("+"),"]"));var _=this.schema.idxByName;function N(F,W){return ft(F,W)===0}var q=w.reduce(function(X,W){var Z=X[0],ie=X[1],X=_[W],ae=m[W];return[Z||X,Z||!X?bi(ie,X&&X.multi?function(ee){return ee=G(ee,W),d(ee)&&ee.some(function(ne){return N(ae,ne)})}:function(ee){return N(ae,G(ee,W))}):ie]},[null,null]),R=q[0],q=q[1];return R?this.where(R.name).equals(m[R.keyPath]).filter(q):C?this.filter(q):this.where(w).equals("")},kt.prototype.filter=function(m){return this.toCollection().and(m)},kt.prototype.count=function(m){return this.toCollection().count(m)},kt.prototype.offset=function(m){return this.toCollection().offset(m)},kt.prototype.limit=function(m){return this.toCollection().limit(m)},kt.prototype.each=function(m){return this.toCollection().each(m)},kt.prototype.toArray=function(m){return this.toCollection().toArray(m)},kt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},kt.prototype.orderBy=function(m){return new this.db.Collection(new this.db.WhereClause(this,d(m)?"[".concat(m.join("+"),"]"):m))},kt.prototype.reverse=function(){return this.toCollection().reverse()},kt.prototype.mapToClass=function(m){var w,C=this.db,_=this.name;function N(){return w!==null&&w.apply(this,arguments)||this}(this.schema.mappedClass=m).prototype instanceof yu&&((function(W,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Class extends value "+String(Z)+" is not a constructor or null");function ie(){this.constructor=W}n(W,Z),W.prototype=Z===null?Object.create(Z):(ie.prototype=Z.prototype,new ie)})(N,w=m),Object.defineProperty(N.prototype,"db",{get:function(){return C},enumerable:!1,configurable:!0}),N.prototype.table=function(){return _},m=N);for(var R=new Set,q=m.prototype;q;q=f(q))Object.getOwnPropertyNames(q).forEach(function(W){return R.add(W)});function F(W){if(!W)return W;var Z,ie=Object.create(m.prototype);for(Z in W)if(!R.has(Z))try{ie[Z]=W[Z]}catch{}return ie}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=F,this.hook("reading",F),m},kt.prototype.defineClass=function(){return this.mapToClass(function(m){p(this,m)})},kt.prototype.add=function(m,w){var C=this,_=this.schema.primKey,N=_.auto,R=_.keyPath,q=m;return R&&N&&(q=Ho(R)(m)),this._trans("readwrite",function(F){return C.core.mutate({trans:F,type:"add",keys:w!=null?[w]:null,values:[q]})}).then(function(F){return F.numFailures?ke.reject(F.failures[0]):F.lastResult}).then(function(F){if(R)try{Y(m,R,F)}catch{}return F})},kt.prototype.upsert=function(m,w){var C=this,_=this.schema.primKey.keyPath;return this._trans("readwrite",function(N){return C.core.get({trans:N,key:m}).then(function(R){var q=R??{};return Aa(q,w),_&&Y(q,_,m),C.core.mutate({trans:N,type:"put",values:[q],keys:[m],upsert:!0,updates:{keys:[m],changeSpecs:[w]}}).then(function(F){return F.numFailures?ke.reject(F.failures[0]):!!R})})})},kt.prototype.update=function(m,w){return typeof m!="object"||d(m)?this.where(":id").equals(m).modify(w):(m=G(m,this.schema.primKey.keyPath),m===void 0?Pt(new Ne.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(m).modify(w))},kt.prototype.put=function(m,w){var C=this,_=this.schema.primKey,N=_.auto,R=_.keyPath,q=m;return R&&N&&(q=Ho(R)(m)),this._trans("readwrite",function(F){return C.core.mutate({trans:F,type:"put",values:[q],keys:w!=null?[w]:null})}).then(function(F){return F.numFailures?ke.reject(F.failures[0]):F.lastResult}).then(function(F){if(R)try{Y(m,R,F)}catch{}return F})},kt.prototype.delete=function(m){var w=this;return this._trans("readwrite",function(C){return w.core.mutate({trans:C,type:"delete",keys:[m]}).then(function(_){return Un(w,[m],_)}).then(function(_){return _.numFailures?ke.reject(_.failures[0]):void 0})})},kt.prototype.clear=function(){var m=this;return this._trans("readwrite",function(w){return m.core.mutate({trans:w,type:"deleteRange",range:Bl}).then(function(C){return Un(m,null,C)})}).then(function(w){return w.numFailures?ke.reject(w.failures[0]):void 0})},kt.prototype.bulkGet=function(m){var w=this;return this._trans("readonly",function(C){return w.core.getMany({keys:m,trans:C}).then(function(_){return _.map(function(N){return w.hook.reading.fire(N)})})})},kt.prototype.bulkAdd=function(m,w,C){var _=this,N=Array.isArray(w)?w:void 0,R=(C=C||(N?void 0:w))?C.allKeys:void 0;return this._trans("readwrite",function(q){var Z=_.schema.primKey,F=Z.auto,Z=Z.keyPath;if(Z&&N)throw new Ne.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(N&&N.length!==m.length)throw new Ne.InvalidArgument("Arguments objects and keys must have the same length");var W=m.length,Z=Z&&F?m.map(Ho(Z)):m;return _.core.mutate({trans:q,type:"add",keys:N,values:Z,wantResults:R}).then(function(ne){var X=ne.numFailures,ae=ne.results,ee=ne.lastResult,ne=ne.failures;if(X===0)return R?ae:ee;throw new qe("".concat(_.name,".bulkAdd(): ").concat(X," of ").concat(W," operations failed"),ne)})})},kt.prototype.bulkPut=function(m,w,C){var _=this,N=Array.isArray(w)?w:void 0,R=(C=C||(N?void 0:w))?C.allKeys:void 0;return this._trans("readwrite",function(q){var Z=_.schema.primKey,F=Z.auto,Z=Z.keyPath;if(Z&&N)throw new Ne.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(N&&N.length!==m.length)throw new Ne.InvalidArgument("Arguments objects and keys must have the same length");var W=m.length,Z=Z&&F?m.map(Ho(Z)):m;return _.core.mutate({trans:q,type:"put",keys:N,values:Z,wantResults:R}).then(function(ne){var X=ne.numFailures,ae=ne.results,ee=ne.lastResult,ne=ne.failures;if(X===0)return R?ae:ee;throw new qe("".concat(_.name,".bulkPut(): ").concat(X," of ").concat(W," operations failed"),ne)})})},kt.prototype.bulkUpdate=function(m){var w=this,C=this.core,_=m.map(function(q){return q.key}),N=m.map(function(q){return q.changes}),R=[];return this._trans("readwrite",function(q){return C.getMany({trans:q,keys:_,cache:"clone"}).then(function(F){var W=[],Z=[];m.forEach(function(X,ae){var ee=X.key,ne=X.changes,re=F[ae];if(re){for(var oe=0,fe=Object.keys(ne);oe<fe.length;oe++){var he=fe[oe],be=ne[he];if(he===w.schema.primKey.keyPath){if(ft(be,ee)!==0)throw new Ne.Constraint("Cannot update primary key in bulkUpdate()")}else Y(re,he,be)}R.push(ae),W.push(ee),Z.push(re)}});var ie=W.length;return C.mutate({trans:q,type:"put",keys:W,values:Z,updates:{keys:_,changeSpecs:N}}).then(function(X){var ae=X.numFailures,ee=X.failures;if(ae===0)return ie;for(var ne=0,re=Object.keys(ee);ne<re.length;ne++){var oe,fe=re[ne],he=R[Number(fe)];he!=null&&(oe=ee[fe],delete ee[fe],ee[he]=oe)}throw new qe("".concat(w.name,".bulkUpdate(): ").concat(ae," of ").concat(ie," operations failed"),ee)})})})},kt.prototype.bulkDelete=function(m){var w=this,C=m.length;return this._trans("readwrite",function(_){return w.core.mutate({trans:_,type:"delete",keys:m}).then(function(N){return Un(w,m,N)})}).then(function(q){var N=q.numFailures,R=q.lastResult,q=q.failures;if(N===0)return R;throw new qe("".concat(w.name,".bulkDelete(): ").concat(N," of ").concat(C," operations failed"),q)})},kt);function kt(){}function Vo(m){function w(q,F){if(F){for(var W=arguments.length,Z=new Array(W-1);--W;)Z[W-1]=arguments[W];return C[q].subscribe.apply(null,Z),m}if(typeof q=="string")return C[q]}var C={};w.addEventType=R;for(var _=1,N=arguments.length;_<N;++_)R(arguments[_]);return w;function R(q,F,W){if(typeof q!="object"){var Z;F=F||ti;var ie={subscribers:[],fire:W=W||pt,subscribe:function(X){ie.subscribers.indexOf(X)===-1&&(ie.subscribers.push(X),ie.fire=F(ie.fire,X))},unsubscribe:function(X){ie.subscribers=ie.subscribers.filter(function(ae){return ae!==X}),ie.fire=ie.subscribers.reduce(F,W)}};return C[q]=w[q]=ie}u(Z=q).forEach(function(X){var ae=Z[X];if(d(ae))R(X,Z[X][0],Z[X][1]);else{if(ae!=="asap")throw new Ne.InvalidArgument("Invalid event config");var ee=R(X,dr,function(){for(var ne=arguments.length,re=new Array(ne);ne--;)re[ne]=arguments[ne];ee.subscribers.forEach(function(oe){Q(function(){oe.apply(null,re)})})})}})}}function Mn(m,w){return I(w).from({prototype:m}),w}function ai(m,w){return!(m.filter||m.algorithm||m.or)&&(w?m.justLimit:!m.replayFilter)}function ka(m,w){m.filter=bi(m.filter,w)}function Go(m,w,C){var _=m.replayFilter;m.replayFilter=_?function(){return bi(_(),w())}:w,m.justLimit=C&&!_}function Yr(m,w){if(m.isPrimKey)return w.primaryKey;var C=w.getIndexByKeyPath(m.index);if(!C)throw new Ne.Schema("KeyPath "+m.index+" on object store "+w.name+" is not indexed");return C}function ql(m,w,C){var _=Yr(m,w.schema);return w.openCursor({trans:C,values:!m.keysOnly,reverse:m.dir==="prev",unique:!!m.unique,query:{index:_,range:m.range}})}function Yo(m,w,C,_){var N=m.replayFilter?bi(m.filter,m.replayFilter()):m.filter;if(m.or){var R={},q=function(F,W,Z){var ie,X;N&&!N(W,Z,function(ae){return W.stop(ae)},function(ae){return W.fail(ae)})||((X=""+(ie=W.primaryKey))=="[object ArrayBuffer]"&&(X=""+new Uint8Array(ie)),b(R,X)||(R[X]=!0,w(F,W,Z)))};return Promise.all([m.or._iterate(q,C),wi(ql(m,_,C),m.algorithm,q,!m.keysOnly&&m.valueMapper)])}return wi(ql(m,_,C),bi(m.algorithm,N),w,!m.keysOnly&&m.valueMapper)}function wi(m,w,C,_){var N=zt(_?function(R,q,F){return C(_(R),q,F)}:C);return m.then(function(R){if(R)return R.start(function(){var q=function(){return R.continue()};w&&!w(R,function(F){return q=F},function(F){R.stop(F),q=pt},function(F){R.fail(F),q=pt})||N(R.value,R,function(F){return q=F}),q()})})}var Cf=(bt.prototype._read=function(m,w){var C=this._ctx;return C.error?C.table._trans(null,Pt.bind(null,C.error)):C.table._trans("readonly",m).then(w)},bt.prototype._write=function(m){var w=this._ctx;return w.error?w.table._trans(null,Pt.bind(null,w.error)):w.table._trans("readwrite",m,"locked")},bt.prototype._addAlgorithm=function(m){var w=this._ctx;w.algorithm=bi(w.algorithm,m)},bt.prototype._iterate=function(m,w){return Yo(this._ctx,m,w,this._ctx.table.core)},bt.prototype.clone=function(m){var w=Object.create(this.constructor.prototype),C=Object.create(this._ctx);return m&&p(C,m),w._ctx=C,w},bt.prototype.raw=function(){return this._ctx.valueMapper=null,this},bt.prototype.each=function(m){var w=this._ctx;return this._read(function(C){return Yo(w,m,C,w.table.core)})},bt.prototype.count=function(m){var w=this;return this._read(function(C){var _=w._ctx,N=_.table.core;if(ai(_,!0))return N.count({trans:C,query:{index:Yr(_,N.schema),range:_.range}}).then(function(q){return Math.min(q,_.limit)});var R=0;return Yo(_,function(){return++R,!1},C,N).then(function(){return R})}).then(m)},bt.prototype.sortBy=function(m,w){var C=m.split(".").reverse(),_=C[0],N=C.length-1;function R(W,Z){return Z?R(W[C[Z]],Z-1):W[_]}var q=this._ctx.dir==="next"?1:-1;function F(W,Z){return ft(R(W,N),R(Z,N))*q}return this.toArray(function(W){return W.sort(F)}).then(w)},bt.prototype.toArray=function(m){var w=this;return this._read(function(C){var _=w._ctx;if(_.dir==="next"&&ai(_,!0)&&0<_.limit){var N=_.valueMapper,R=Yr(_,_.table.core.schema);return _.table.core.query({trans:C,limit:_.limit,values:!0,query:{index:R,range:_.range}}).then(function(F){return F=F.result,N?F.map(N):F})}var q=[];return Yo(_,function(F){return q.push(F)},C,_.table.core).then(function(){return q})},m)},bt.prototype.offset=function(m){var w=this._ctx;return m<=0||(w.offset+=m,ai(w)?Go(w,function(){var C=m;return function(_,N){return C===0||(C===1?--C:N(function(){_.advance(C),C=0}),!1)}}):Go(w,function(){var C=m;return function(){return--C<0}})),this},bt.prototype.limit=function(m){return this._ctx.limit=Math.min(this._ctx.limit,m),Go(this._ctx,function(){var w=m;return function(C,_,N){return--w<=0&&_(N),0<=w}},!0),this},bt.prototype.until=function(m,w){return ka(this._ctx,function(C,_,N){return!m(C.value)||(_(N),w)}),this},bt.prototype.first=function(m){return this.limit(1).toArray(function(w){return w[0]}).then(m)},bt.prototype.last=function(m){return this.reverse().first(m)},bt.prototype.filter=function(m){var w;return ka(this._ctx,function(C){return m(C.value)}),(w=this._ctx).isMatch=bi(w.isMatch,m),this},bt.prototype.and=function(m){return this.filter(m)},bt.prototype.or=function(m){return new this.db.WhereClause(this._ctx.table,m,this)},bt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},bt.prototype.desc=function(){return this.reverse()},bt.prototype.eachKey=function(m){var w=this._ctx;return w.keysOnly=!w.isMatch,this.each(function(C,_){m(_.key,_)})},bt.prototype.eachUniqueKey=function(m){return this._ctx.unique="unique",this.eachKey(m)},bt.prototype.eachPrimaryKey=function(m){var w=this._ctx;return w.keysOnly=!w.isMatch,this.each(function(C,_){m(_.primaryKey,_)})},bt.prototype.keys=function(m){var w=this._ctx;w.keysOnly=!w.isMatch;var C=[];return this.each(function(_,N){C.push(N.key)}).then(function(){return C}).then(m)},bt.prototype.primaryKeys=function(m){var w=this._ctx;if(w.dir==="next"&&ai(w,!0)&&0<w.limit)return this._read(function(_){var N=Yr(w,w.table.core.schema);return w.table.core.query({trans:_,values:!1,limit:w.limit,query:{index:N,range:w.range}})}).then(function(_){return _.result}).then(m);w.keysOnly=!w.isMatch;var C=[];return this.each(function(_,N){C.push(N.primaryKey)}).then(function(){return C}).then(m)},bt.prototype.uniqueKeys=function(m){return this._ctx.unique="unique",this.keys(m)},bt.prototype.firstKey=function(m){return this.limit(1).keys(function(w){return w[0]}).then(m)},bt.prototype.lastKey=function(m){return this.reverse().firstKey(m)},bt.prototype.distinct=function(){var m=this._ctx,m=m.index&&m.table.schema.idxByName[m.index];if(!m||!m.multi)return this;var w={};return ka(this._ctx,function(N){var _=N.primaryKey.toString(),N=b(w,_);return w[_]=!0,!N}),this},bt.prototype.modify=function(m){var w=this,C=this._ctx;return this._write(function(_){var N=typeof m=="function"?m:function(re){return Aa(re,m)},R=C.table.core,Z=R.schema.primaryKey,q=Z.outbound,F=Z.extractKey,W=200,Z=w.db._options.modifyChunkSize;Z&&(W=typeof Z=="object"?Z[R.name]||Z["*"]||200:Z);function ie(re,he){var fe=he.failures,he=he.numFailures;ae+=re-he;for(var be=0,Te=u(fe);be<Te.length;be++){var Oe=Te[be];X.push(fe[Oe])}}var X=[],ae=0,ee=[],ne=m===jl;return w.clone().primaryKeys().then(function(re){function oe(he){var be=Math.min(W,re.length-he),Te=re.slice(he,he+be);return(ne?Promise.resolve([]):R.getMany({trans:_,keys:Te,cache:"immutable"})).then(function(Oe){var je=[],De=[],Be=q?[]:null,ze=ne?Te:[];if(!ne)for(var Ie=0;Ie<be;++Ie){var Fe=Oe[Ie],$e={value:xe(Fe),primKey:re[he+Ie]};N.call($e,$e.value,$e)!==!1&&($e.value==null?ze.push(re[he+Ie]):q||ft(F(Fe),F($e.value))===0?(De.push($e.value),q&&Be.push(re[he+Ie])):(ze.push(re[he+Ie]),je.push($e.value)))}return Promise.resolve(0<je.length&&R.mutate({trans:_,type:"add",values:je}).then(function(it){for(var at in it.failures)ze.splice(parseInt(at),1);ie(je.length,it)})).then(function(){return(0<De.length||fe&&typeof m=="object")&&R.mutate({trans:_,type:"put",keys:Be,values:De,criteria:fe,changeSpec:typeof m!="function"&&m,isAdditionalChunk:0<he}).then(function(it){return ie(De.length,it)})}).then(function(){return(0<ze.length||fe&&ne)&&R.mutate({trans:_,type:"delete",keys:ze,criteria:fe,isAdditionalChunk:0<he}).then(function(it){return Un(C.table,ze,it)}).then(function(it){return ie(ze.length,it)})}).then(function(){return re.length>he+be&&oe(he+W)})})}var fe=ai(C)&&C.limit===1/0&&(typeof m!="function"||ne)&&{index:C.index,range:C.range};return oe(0).then(function(){if(0<X.length)throw new He("Error modifying one or more objects",X,ae,ee);return re.length})})})},bt.prototype.delete=function(){var m=this._ctx,w=m.range;return!ai(m)||m.table.schema.yProps||!m.isPrimKey&&w.type!==3?this.modify(jl):this._write(function(C){var _=m.table.core.schema.primaryKey,N=w;return m.table.core.count({trans:C,query:{index:_,range:N}}).then(function(R){return m.table.core.mutate({trans:C,type:"deleteRange",range:N}).then(function(W){var F=W.failures,W=W.numFailures;if(W)throw new He("Could not delete some values",Object.keys(F).map(function(Z){return F[Z]}),R-W);return R-W})})})},bt);function bt(){}var jl=function(m,w){return w.value=null};function Hl(m,w){return m<w?-1:m===w?0:1}function Ef(m,w){return w<m?-1:m===w?0:1}function Qn(m,w,C){return m=m instanceof Si?new m.Collection(m):m,m._ctx.error=new(C||TypeError)(w),m}function Kr(m){return new m.Collection(m,function(){return Na("")}).limit(0)}function nr(m,w,C,_){var N,R,q,F,W,Z,ie,X=C.length;if(!C.every(function(ne){return typeof ne=="string"}))return Qn(m,fn);function ae(ne){N=ne==="next"?function(oe){return oe.toUpperCase()}:function(oe){return oe.toLowerCase()},R=ne==="next"?function(oe){return oe.toLowerCase()}:function(oe){return oe.toUpperCase()},q=ne==="next"?Hl:Ef;var re=C.map(function(oe){return{lower:R(oe),upper:N(oe)}}).sort(function(oe,fe){return q(oe.lower,fe.lower)});F=re.map(function(oe){return oe.upper}),W=re.map(function(oe){return oe.lower}),ie=(Z=ne)==="next"?"":_}ae("next"),m=new m.Collection(m,function(){return Nr(F[0],W[X-1]+_)}),m._ondirectionchange=function(ne){ae(ne)};var ee=0;return m._addAlgorithm(function(ne,re,oe){var fe=ne.key;if(typeof fe!="string")return!1;var he=R(fe);if(w(he,W,ee))return!0;for(var be=null,Te=ee;Te<X;++Te){var Oe=(function(je,De,Be,ze,Ie,Fe){for(var $e=Math.min(je.length,ze.length),it=-1,at=0;at<$e;++at){var In=De[at];if(In!==ze[at])return Ie(je[at],Be[at])<0?je.substr(0,at)+Be[at]+Be.substr(at+1):Ie(je[at],ze[at])<0?je.substr(0,at)+ze[at]+Be.substr(at+1):0<=it?je.substr(0,it)+De[it]+Be.substr(it+1):null;Ie(je[at],In)<0&&(it=at)}return $e<ze.length&&Fe==="next"?je+Be.substr(je.length):$e<je.length&&Fe==="prev"?je.substr(0,Be.length):it<0?null:je.substr(0,it)+ze[it]+Be.substr(it+1)})(fe,he,F[Te],W[Te],q,Z);Oe===null&&be===null?ee=Te+1:(be===null||0<q(be,Oe))&&(be=Oe)}return re(be!==null?function(){ne.continue(be+ie)}:oe),!1}),m}function Nr(m,w,C,_){return{type:2,lower:m,upper:w,lowerOpen:C,upperOpen:_}}function Na(m){return{type:1,lower:m,upper:m}}var Si=(Object.defineProperty(Kt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Kt.prototype.between=function(m,w,C,_){C=C!==!1,_=_===!0;try{return 0<this._cmp(m,w)||this._cmp(m,w)===0&&(C||_)&&(!C||!_)?Kr(this):new this.Collection(this,function(){return Nr(m,w,!C,!_)})}catch{return Qn(this,jn)}},Kt.prototype.equals=function(m){return m==null?Qn(this,jn):new this.Collection(this,function(){return Na(m)})},Kt.prototype.above=function(m){return m==null?Qn(this,jn):new this.Collection(this,function(){return Nr(m,void 0,!0)})},Kt.prototype.aboveOrEqual=function(m){return m==null?Qn(this,jn):new this.Collection(this,function(){return Nr(m,void 0,!1)})},Kt.prototype.below=function(m){return m==null?Qn(this,jn):new this.Collection(this,function(){return Nr(void 0,m,!1,!0)})},Kt.prototype.belowOrEqual=function(m){return m==null?Qn(this,jn):new this.Collection(this,function(){return Nr(void 0,m)})},Kt.prototype.startsWith=function(m){return typeof m!="string"?Qn(this,fn):this.between(m,m+mr,!0,!0)},Kt.prototype.startsWithIgnoreCase=function(m){return m===""?this.startsWith(m):nr(this,function(w,C){return w.indexOf(C[0])===0},[m],mr)},Kt.prototype.equalsIgnoreCase=function(m){return nr(this,function(w,C){return w===C[0]},[m],"")},Kt.prototype.anyOfIgnoreCase=function(){var m=V.apply(Qe,arguments);return m.length===0?Kr(this):nr(this,function(w,C){return C.indexOf(w)!==-1},m,"")},Kt.prototype.startsWithAnyOfIgnoreCase=function(){var m=V.apply(Qe,arguments);return m.length===0?Kr(this):nr(this,function(w,C){return C.some(function(_){return w.indexOf(_)===0})},m,mr)},Kt.prototype.anyOf=function(){var m=this,w=V.apply(Qe,arguments),C=this._cmp;try{w.sort(C)}catch{return Qn(this,jn)}if(w.length===0)return Kr(this);var _=new this.Collection(this,function(){return Nr(w[0],w[w.length-1])});_._ondirectionchange=function(R){C=R==="next"?m._ascending:m._descending,w.sort(C)};var N=0;return _._addAlgorithm(function(R,q,F){for(var W=R.key;0<C(W,w[N]);)if(++N===w.length)return q(F),!1;return C(W,w[N])===0||(q(function(){R.continue(w[N])}),!1)}),_},Kt.prototype.notEqual=function(m){return this.inAnyRange([[-1/0,m],[m,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Kt.prototype.noneOf=function(){var m=V.apply(Qe,arguments);if(m.length===0)return new this.Collection(this);try{m.sort(this._ascending)}catch{return Qn(this,jn)}var w=m.reduce(function(C,_){return C?C.concat([[C[C.length-1][1],_]]):[[-1/0,_]]},null);return w.push([m[m.length-1],this.db._maxKey]),this.inAnyRange(w,{includeLowers:!1,includeUppers:!1})},Kt.prototype.inAnyRange=function(fe,w){var C=this,_=this._cmp,N=this._ascending,R=this._descending,q=this._min,F=this._max;if(fe.length===0)return Kr(this);if(!fe.every(function(he){return he[0]!==void 0&&he[1]!==void 0&&N(he[0],he[1])<=0}))return Qn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ne.InvalidArgument);var W=!w||w.includeLowers!==!1,Z=w&&w.includeUppers===!0,ie,X=N;function ae(he,be){return X(he[0],be[0])}try{(ie=fe.reduce(function(he,be){for(var Te=0,Oe=he.length;Te<Oe;++Te){var je=he[Te];if(_(be[0],je[1])<0&&0<_(be[1],je[0])){je[0]=q(je[0],be[0]),je[1]=F(je[1],be[1]);break}}return Te===Oe&&he.push(be),he},[])).sort(ae)}catch{return Qn(this,jn)}var ee=0,ne=Z?function(he){return 0<N(he,ie[ee][1])}:function(he){return 0<=N(he,ie[ee][1])},re=W?function(he){return 0<R(he,ie[ee][0])}:function(he){return 0<=R(he,ie[ee][0])},oe=ne,fe=new this.Collection(this,function(){return Nr(ie[0][0],ie[ie.length-1][1],!W,!Z)});return fe._ondirectionchange=function(he){X=he==="next"?(oe=ne,N):(oe=re,R),ie.sort(ae)},fe._addAlgorithm(function(he,be,Te){for(var Oe,je=he.key;oe(je);)if(++ee===ie.length)return be(Te),!1;return!ne(Oe=je)&&!re(Oe)||(C._cmp(je,ie[ee][1])===0||C._cmp(je,ie[ee][0])===0||be(function(){X===N?he.continue(ie[ee][0]):he.continue(ie[ee][1])}),!1)}),fe},Kt.prototype.startsWithAnyOf=function(){var m=V.apply(Qe,arguments);return m.every(function(w){return typeof w=="string"})?m.length===0?Kr(this):this.inAnyRange(m.map(function(w){return[w,w+mr]})):Qn(this,"startsWithAnyOf() only works with strings")},Kt);function Kt(){}function gr(m){return zt(function(w){return Ti(w),m(w.target.error),!1})}function Ti(m){m.stopPropagation&&m.stopPropagation(),m.preventDefault&&m.preventDefault()}var eo="storagemutated",Ci="x-storagemutated-1",Rn=Vo(null,eo),Fl=(Hn.prototype._lock=function(){return se(!Ue.global),++this._reculock,this._reculock!==1||Ue.global||(Ue.lockOwnerFor=this),this},Hn.prototype._unlock=function(){if(se(!Ue.global),--this._reculock==0)for(Ue.global||(Ue.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var m=this._blockedFuncs.shift();try{hr(m[1],m[0])}catch{}}return this},Hn.prototype._locked=function(){return this._reculock&&Ue.lockOwnerFor!==this},Hn.prototype.create=function(m){var w=this;if(!this.mode)return this;var C=this.db.idbdb,_=this.db._state.dbOpenError;if(se(!this.idbtrans),!m&&!C)switch(_&&_.name){case"DatabaseClosedError":throw new Ne.DatabaseClosed(_);case"MissingAPIError":throw new Ne.MissingAPI(_.message,_);default:throw new Ne.OpenFailed(_)}if(!this.active)throw new Ne.TransactionInactive;return se(this._completion._state===null),(m=this.idbtrans=m||(this.db.core||C).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=zt(function(N){Ti(N),w._reject(m.error)}),m.onabort=zt(function(N){Ti(N),w.active&&w._reject(new Ne.Abort(m.error)),w.active=!1,w.on("abort").fire(N)}),m.oncomplete=zt(function(){w.active=!1,w._resolve(),"mutatedParts"in m&&Rn.storagemutated.fire(m.mutatedParts)}),this},Hn.prototype._promise=function(m,w,C){var _=this;if(m==="readwrite"&&this.mode!=="readwrite")return Pt(new Ne.ReadOnly("Transaction is readonly"));if(!this.active)return Pt(new Ne.TransactionInactive);if(this._locked())return new ke(function(R,q){_._blockedFuncs.push([function(){_._promise(m,w,C).then(R,q)},Ue])});if(C)return Vt(function(){var R=new ke(function(q,F){_._lock();var W=w(q,F,_);W&&W.then&&W.then(q,F)});return R.finally(function(){return _._unlock()}),R._lib=!0,R});var N=new ke(function(R,q){var F=w(R,q,_);F&&F.then&&F.then(R,q)});return N._lib=!0,N},Hn.prototype._root=function(){return this.parent?this.parent._root():this},Hn.prototype.waitFor=function(m){var w,C=this._root(),_=ke.resolve(m);C._waitingFor?C._waitingFor=C._waitingFor.then(function(){return _}):(C._waitingFor=_,C._waitingQueue=[],w=C.idbtrans.objectStore(C.storeNames[0]),(function R(){for(++C._spinCount;C._waitingQueue.length;)C._waitingQueue.shift()();C._waitingFor&&(w.get(-1/0).onsuccess=R)})());var N=C._waitingFor;return new ke(function(R,q){_.then(function(F){return C._waitingQueue.push(zt(R.bind(null,F)))},function(F){return C._waitingQueue.push(zt(q.bind(null,F)))}).finally(function(){C._waitingFor===N&&(C._waitingFor=null)})})},Hn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ne.Abort))},Hn.prototype.table=function(m){var w=this._memoizedTables||(this._memoizedTables={});if(b(w,m))return w[m];var C=this.schema[m];if(!C)throw new Ne.NotFound("Table "+m+" not part of transaction");return C=new this.db.Table(m,C,this),C.core=this.db.core.table(m),w[m]=C},Hn);function Hn(){}function Mr(m,w,C,_,N,R,q,F){return{name:m,keyPath:w,unique:C,multi:_,auto:N,compound:R,src:(C&&!q?"&":"")+(_?"*":"")+(N?"++":"")+Ma(w),type:F}}function Ma(m){return typeof m=="string"?m:m?"["+[].join.call(m,"+")+"]":""}function to(m,w,C){return{name:m,primKey:w,indexes:C,mappedClass:null,idxByName:(_=function(N){return[N.name,N]},C.reduce(function(N,R,q){return q=_(R,q),q&&(N[q[0]]=q[1]),N},{}))};var _}var no=function(m){try{return m.only([[]]),no=function(){return[[]]},[[]]}catch{return no=function(){return mr},mr}};function ro(m){return m==null?function(){}:typeof m=="string"?(w=m).split(".").length===1?function(C){return C[w]}:function(C){return G(C,w)}:function(C){return G(C,m)};var w}function Ko(m){return[].slice.call(m)}var xu=0;function mn(m){return m==null?":id":typeof m=="string"?m:"[".concat(m.join("+"),"]")}function Ei(m,w,W){function _(oe){if(oe.type===3)return null;if(oe.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var ee=oe.lower,ne=oe.upper,re=oe.lowerOpen,oe=oe.upperOpen;return ee===void 0?ne===void 0?null:w.upperBound(ne,!!oe):ne===void 0?w.lowerBound(ee,!!re):w.bound(ee,ne,!!re,!!oe)}function N(ae){var ee,ne=ae.name;return{name:ne,schema:ae,mutate:function(re){var oe=re.trans,fe=re.type,he=re.keys,be=re.values,Te=re.range;return new Promise(function(Oe,je){Oe=zt(Oe);var De=oe.objectStore(ne),Be=De.keyPath==null,ze=fe==="put"||fe==="add";if(!ze&&fe!=="delete"&&fe!=="deleteRange")throw new Error("Invalid operation type: "+fe);var Ie,Fe=(he||be||{length:1}).length;if(he&&be&&he.length!==be.length)throw new Error("Given keys array must have same length as given values array.");if(Fe===0)return Oe({numFailures:0,failures:{},results:[],lastResult:void 0});function $e(yn){++In,Ti(yn)}var it=[],at=[],In=0;if(fe==="deleteRange"){if(Te.type===4)return Oe({numFailures:In,failures:at,results:[],lastResult:void 0});Te.type===3?it.push(Ie=De.clear()):it.push(Ie=De.delete(_(Te)))}else{var Be=ze?Be?[be,he]:[be,null]:[he,null],nt=Be[0],gn=Be[1];if(ze)for(var Zt=0;Zt<Fe;++Zt)it.push(Ie=gn&&gn[Zt]!==void 0?De[fe](nt[Zt],gn[Zt]):De[fe](nt[Zt])),Ie.onerror=$e;else for(Zt=0;Zt<Fe;++Zt)it.push(Ie=De[fe](nt[Zt])),Ie.onerror=$e}function ea(yn){yn=yn.target.result,it.forEach(function(rr,rs){return rr.error!=null&&(at[rs]=rr.error)}),Oe({numFailures:In,failures:at,results:fe==="delete"?he:it.map(function(rr){return rr.result}),lastResult:yn})}Ie.onerror=function(yn){$e(yn),ea(yn)},Ie.onsuccess=ea})},getMany:function(re){var oe=re.trans,fe=re.keys;return new Promise(function(he,be){he=zt(he);for(var Te,Oe=oe.objectStore(ne),je=fe.length,De=new Array(je),Be=0,ze=0,Ie=function(it){it=it.target,De[it._pos]=it.result,++ze===Be&&he(De)},Fe=gr(be),$e=0;$e<je;++$e)fe[$e]!=null&&((Te=Oe.get(fe[$e]))._pos=$e,Te.onsuccess=Ie,Te.onerror=Fe,++Be);Be===0&&he(De)})},get:function(re){var oe=re.trans,fe=re.key;return new Promise(function(he,be){he=zt(he);var Te=oe.objectStore(ne).get(fe);Te.onsuccess=function(Oe){return he(Oe.target.result)},Te.onerror=gr(be)})},query:(ee=Z,function(re){return new Promise(function(oe,fe){oe=zt(oe);var he,be,Te,Be=re.trans,Oe=re.values,je=re.limit,Ie=re.query,De=je===1/0?void 0:je,ze=Ie.index,Ie=Ie.range,Be=Be.objectStore(ne),ze=ze.isPrimaryKey?Be:Be.index(ze.name),Ie=_(Ie);if(je===0)return oe({result:[]});ee?((De=Oe?ze.getAll(Ie,De):ze.getAllKeys(Ie,De)).onsuccess=function(Fe){return oe({result:Fe.target.result})},De.onerror=gr(fe)):(he=0,be=!Oe&&"openKeyCursor"in ze?ze.openKeyCursor(Ie):ze.openCursor(Ie),Te=[],be.onsuccess=function(Fe){var $e=be.result;return $e?(Te.push(Oe?$e.value:$e.primaryKey),++he===je?oe({result:Te}):void $e.continue()):oe({result:Te})},be.onerror=gr(fe))})}),openCursor:function(re){var oe=re.trans,fe=re.values,he=re.query,be=re.reverse,Te=re.unique;return new Promise(function(Oe,je){Oe=zt(Oe);var ze=he.index,De=he.range,Be=oe.objectStore(ne),Be=ze.isPrimaryKey?Be:Be.index(ze.name),ze=be?Te?"prevunique":"prev":Te?"nextunique":"next",Ie=!fe&&"openKeyCursor"in Be?Be.openKeyCursor(_(De),ze):Be.openCursor(_(De),ze);Ie.onerror=gr(je),Ie.onsuccess=zt(function(Fe){var $e,it,at,In,nt=Ie.result;nt?(nt.___id=++xu,nt.done=!1,$e=nt.continue.bind(nt),it=(it=nt.continuePrimaryKey)&&it.bind(nt),at=nt.advance.bind(nt),In=function(){throw new Error("Cursor not stopped")},nt.trans=oe,nt.stop=nt.continue=nt.continuePrimaryKey=nt.advance=function(){throw new Error("Cursor not started")},nt.fail=zt(je),nt.next=function(){var gn=this,Zt=1;return this.start(function(){return Zt--?gn.continue():gn.stop()}).then(function(){return gn})},nt.start=function(gn){function Zt(){if(Ie.result)try{gn()}catch(yn){nt.fail(yn)}else nt.done=!0,nt.start=function(){throw new Error("Cursor behind last entry")},nt.stop()}var ea=new Promise(function(yn,rr){yn=zt(yn),Ie.onerror=gr(rr),nt.fail=rr,nt.stop=function(rs){nt.stop=nt.continue=nt.continuePrimaryKey=nt.advance=In,yn(rs)}});return Ie.onsuccess=zt(function(yn){Ie.onsuccess=Zt,Zt()}),nt.continue=$e,nt.continuePrimaryKey=it,nt.advance=at,Zt(),ea},Oe(nt)):Oe(null)},je)})},count:function(re){var oe=re.query,fe=re.trans,he=oe.index,be=oe.range;return new Promise(function(Te,Oe){var je=fe.objectStore(ne),De=he.isPrimaryKey?je:je.index(he.name),je=_(be),De=je?De.count(je):De.count();De.onsuccess=zt(function(Be){return Te(Be.target.result)}),De.onerror=gr(Oe)})}}}var R,q,F,ie=(q=W,F=Ko((R=m).objectStoreNames),{schema:{name:R.name,tables:F.map(function(ae){return q.objectStore(ae)}).map(function(ae){var ee=ae.keyPath,oe=ae.autoIncrement,ne=d(ee),re={},oe={name:ae.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:ee==null,compound:ne,keyPath:ee,autoIncrement:oe,unique:!0,extractKey:ro(ee)},indexes:Ko(ae.indexNames).map(function(fe){return ae.index(fe)}).map(function(Te){var he=Te.name,be=Te.unique,Oe=Te.multiEntry,Te=Te.keyPath,Oe={name:he,compound:d(Te),keyPath:Te,unique:be,multiEntry:Oe,extractKey:ro(Te)};return re[mn(Te)]=Oe}),getIndexByKeyPath:function(fe){return re[mn(fe)]}};return re[":id"]=oe.primaryKey,ee!=null&&(re[mn(ee)]=oe.primaryKey),oe})},hasGetAll:0<F.length&&"getAll"in q.objectStore(F[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),W=ie.schema,Z=ie.hasGetAll,ie=W.tables.map(N),X={};return ie.forEach(function(ae){return X[ae.name]=ae}),{stack:"dbcore",transaction:m.transaction.bind(m),table:function(ae){if(!X[ae])throw new Error("Table '".concat(ae,"' not found"));return X[ae]},MIN_KEY:-1/0,MAX_KEY:no(w),schema:W}}function Ra(m,w,C,_){var N=C.IDBKeyRange;return C.indexedDB,{dbcore:(_=Ei(w,N,_),m.dbcore.reduce(function(R,q){return q=q.create,i(i({},R),q(R))},_))}}function li(m,_){var C=_.db,_=Ra(m._middlewares,C,m._deps,_);m.core=_.dbcore,m.tables.forEach(function(N){var R=N.name;m.core.schema.tables.some(function(q){return q.name===R})&&(N.core=m.core.table(R),m[R]instanceof m.Table&&(m[R].core=N.core))})}function Da(m,w,C,_){C.forEach(function(N){var R=_[N];w.forEach(function(q){var F=(function W(Z,ie){return D(Z,ie)||(Z=f(Z))&&W(Z,ie)})(q,N);(!F||"value"in F&&F.value===void 0)&&(q===m.Transaction.prototype||q instanceof m.Transaction?k(q,N,{get:function(){return this.table(N)},set:function(W){E(this,N,{value:W,writable:!0,configurable:!0,enumerable:!0})}}):q[N]=new m.Table(N,R))})})}function Jo(m,w){w.forEach(function(C){for(var _ in C)C[_]instanceof m.Table&&delete C[_]})}function Vl(m,w){return m._cfg.version-w._cfg.version}function $o(m,w,C,_){var N=m._dbSchema;C.objectStoreNames.contains("$meta")&&!N.$meta&&(N.$meta=to("$meta",wu("")[0],[]),m._storeNames.push("$meta"));var R=m._createTransaction("readwrite",m._storeNames,N);R.create(C),R._completion.catch(_);var q=R._reject.bind(R),F=Ue.transless||Ue;Vt(function(){return Ue.trans=R,Ue.transless=F,w!==0?(li(m,C),Z=w,((W=R).storeNames.includes("$meta")?W.table("$meta").get("version").then(function(ie){return ie??Z}):ke.resolve(Z)).then(function(ie){return ae=ie,ee=R,ne=C,re=[],ie=(X=m)._versions,oe=X._dbSchema=io(0,X.idbdb,ne),(ie=ie.filter(function(fe){return fe._cfg.version>=ae})).length!==0?(ie.forEach(function(fe){re.push(function(){var he=oe,be=fe._cfg.dbschema;Ua(X,he,ne),Ua(X,be,ne),oe=X._dbSchema=be;var Te=Pa(he,be);Te.add.forEach(function(ze){Gl(ne,ze[0],ze[1].primKey,ze[1].indexes)}),Te.change.forEach(function(ze){if(ze.recreate)throw new Ne.Upgrade("Not yet support for changing primary key");var Ie=ne.objectStore(ze.name);ze.add.forEach(function(Fe){return La(Ie,Fe)}),ze.change.forEach(function(Fe){Ie.deleteIndex(Fe.name),La(Ie,Fe)}),ze.del.forEach(function(Fe){return Ie.deleteIndex(Fe)})});var Oe=fe._cfg.contentUpgrade;if(Oe&&fe._cfg.version>ae){li(X,ne),ee._memoizedTables={};var je=me(be);Te.del.forEach(function(ze){je[ze]=he[ze]}),Jo(X,[X.Transaction.prototype]),Da(X,[X.Transaction.prototype],u(je),je),ee.schema=je;var De,Be=z(Oe);return Be&&cn(),Te=ke.follow(function(){var ze;(De=Oe(ee))&&Be&&(ze=Xn.bind(null,null),De.then(ze,ze))}),De&&typeof De.then=="function"?ke.resolve(De):Te.then(function(){return De})}}),re.push(function(he){var be,Te,Oe=fe._cfg.dbschema;be=Oe,Te=he,[].slice.call(Te.db.objectStoreNames).forEach(function(je){return be[je]==null&&Te.db.deleteObjectStore(je)}),Jo(X,[X.Transaction.prototype]),Da(X,[X.Transaction.prototype],X._storeNames,X._dbSchema),ee.schema=X._dbSchema}),re.push(function(he){X.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(X.idbdb.version/10)===fe._cfg.version?(X.idbdb.deleteObjectStore("$meta"),delete X._dbSchema.$meta,X._storeNames=X._storeNames.filter(function(be){return be!=="$meta"})):he.objectStore("$meta").put(fe._cfg.version,"version"))})}),(function fe(){return re.length?ke.resolve(re.shift()(ee.idbtrans)).then(fe):ke.resolve()})().then(function(){bu(oe,ne)})):ke.resolve();var X,ae,ee,ne,re,oe}).catch(q)):(u(N).forEach(function(ie){Gl(C,ie,N[ie].primKey,N[ie].indexes)}),li(m,C),void ke.follow(function(){return m.on.populate.fire(R)}).catch(q));var W,Z})}function Ia(m,w){bu(m._dbSchema,w),w.db.version%10!=0||w.objectStoreNames.contains("$meta")||w.db.createObjectStore("$meta").add(Math.ceil(w.db.version/10-1),"version");var C=io(0,m.idbdb,w);Ua(m,m._dbSchema,w);for(var _=0,N=Pa(C,m._dbSchema).change;_<N.length;_++){var R=(function(q){if(q.change.length||q.recreate)return console.warn("Unable to patch indexes of table ".concat(q.name," because it has changes on the type of index or primary key.")),{value:void 0};var F=w.objectStore(q.name);q.add.forEach(function(W){Tn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(q.name,".").concat(W.src)),La(F,W)})})(N[_]);if(typeof R=="object")return R.value}}function Pa(m,w){var C,_={del:[],add:[],change:[]};for(C in m)w[C]||_.del.push(C);for(C in w){var N=m[C],R=w[C];if(N){var q={name:C,def:R,recreate:!1,del:[],add:[],change:[]};if(""+(N.primKey.keyPath||"")!=""+(R.primKey.keyPath||"")||N.primKey.auto!==R.primKey.auto)q.recreate=!0,_.change.push(q);else{var F=N.idxByName,W=R.idxByName,Z=void 0;for(Z in F)W[Z]||q.del.push(Z);for(Z in W){var ie=F[Z],X=W[Z];ie?ie.src!==X.src&&q.change.push(X):q.add.push(X)}(0<q.del.length||0<q.add.length||0<q.change.length)&&_.change.push(q)}}else _.add.push([C,R])}return _}function Gl(m,w,C,_){var N=m.db.createObjectStore(w,C.keyPath?{keyPath:C.keyPath,autoIncrement:C.auto}:{autoIncrement:C.auto});return _.forEach(function(R){return La(N,R)}),N}function bu(m,w){u(m).forEach(function(C){w.db.objectStoreNames.contains(C)||(Tn&&console.debug("Dexie: Creating missing table",C),Gl(w,C,m[C].primKey,m[C].indexes))})}function La(m,w){m.createIndex(w.name,w.keyPath,{unique:w.unique,multiEntry:w.multi})}function io(m,w,C){var _={};return U(w.objectStoreNames,0).forEach(function(N){for(var R=C.objectStore(N),q=Mr(Ma(Z=R.keyPath),Z||"",!0,!1,!!R.autoIncrement,Z&&typeof Z!="string",!0),F=[],W=0;W<R.indexNames.length;++W){var ie=R.index(R.indexNames[W]),Z=ie.keyPath,ie=Mr(ie.name,Z,!!ie.unique,!!ie.multiEntry,!1,Z&&typeof Z!="string",!1);F.push(ie)}_[N]=to(N,q,F)}),_}function Ua(m,w,C){for(var _=C.db.objectStoreNames,N=0;N<_.length;++N){var R=_[N],q=C.objectStore(R);m._hasGetAll="getAll"in q;for(var F=0;F<q.indexNames.length;++F){var W=q.indexNames[F],Z=q.index(W).keyPath,ie=typeof Z=="string"?Z:"["+U(Z).join("+")+"]";!w[R]||(Z=w[R].idxByName[ie])&&(Z.name=W,delete w[R].idxByName[ie],w[R].idxByName[W]=Z)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(m._hasGetAll=!1)}function wu(m){return m.split(",").map(function(w,C){var R=w.split(":"),_=(N=R[1])===null||N===void 0?void 0:N.trim(),N=(w=R[0].trim()).replace(/([&*]|\+\+)/g,""),R=/^\[/.test(N)?N.match(/^\[(.*)\]$/)[1].split("+"):N;return Mr(N,R||null,/\&/.test(w),/\*/.test(w),/\+\+/.test(w),d(R),C===0,_)})}var _f=(oo.prototype._createTableSchema=to,oo.prototype._parseIndexSyntax=wu,oo.prototype._parseStoresSpec=function(m,w){var C=this;u(m).forEach(function(_){if(m[_]!==null){var N=C._parseIndexSyntax(m[_]),R=N.shift();if(!R)throw new Ne.Schema("Invalid schema for table "+_+": "+m[_]);if(R.unique=!0,R.multi)throw new Ne.Schema("Primary key cannot be multiEntry*");N.forEach(function(q){if(q.auto)throw new Ne.Schema("Only primary key can be marked as autoIncrement (++)");if(!q.keyPath)throw new Ne.Schema("Index must have a name and cannot be an empty string")}),N=C._createTableSchema(_,R,N),w[_]=N}})},oo.prototype.stores=function(C){var w=this.db;this._cfg.storesSource=this._cfg.storesSource?p(this._cfg.storesSource,C):C;var C=w._versions,_={},N={};return C.forEach(function(R){p(_,R._cfg.storesSource),N=R._cfg.dbschema={},R._parseStoresSpec(_,N)}),w._dbSchema=N,Jo(w,[w._allTables,w,w.Transaction.prototype]),Da(w,[w._allTables,w,w.Transaction.prototype,this._cfg.tables],u(N),N),w._storeNames=u(N),this},oo.prototype.upgrade=function(m){return this._cfg.contentUpgrade=pr(this._cfg.contentUpgrade||pt,m),this},oo);function oo(){}function Yl(m,w){var C=m._dbNamesDB;return C||(C=m._dbNamesDB=new Rr(jo,{addons:[],indexedDB:m,IDBKeyRange:w})).version(1).stores({dbnames:"name"}),C.table("dbnames")}function Oa(m){return m&&typeof m.databases=="function"}function Kl(m){return Vt(function(){return Ue.letThrough=!0,m()})}function Jl(m){return!("from"in m)}var Dn=function(m,w){if(!this){var C=new Dn;return m&&"d"in m&&p(C,m),C}p(this,arguments.length?{d:1,from:m,to:1<arguments.length?w:m}:{d:0})};function Xo(m,w,C){var _=ft(w,C);if(!isNaN(_)){if(0<_)throw RangeError();if(Jl(m))return p(m,{from:w,to:C,d:1});var N=m.l,_=m.r;if(ft(C,m.from)<0)return N?Xo(N,w,C):m.l={from:w,to:C,d:1,l:null,r:null},Tu(m);if(0<ft(w,m.to))return _?Xo(_,w,C):m.r={from:w,to:C,d:1,l:null,r:null},Tu(m);ft(w,m.from)<0&&(m.from=w,m.l=null,m.d=_?_.d+1:1),0<ft(C,m.to)&&(m.to=C,m.r=null,m.d=m.l?m.l.d+1:1),C=!m.r,N&&!m.l&&_i(m,N),_&&C&&_i(m,_)}}function _i(m,w){Jl(w)||(function C(_,W){var R=W.from,q=W.to,F=W.l,W=W.r;Xo(_,R,q),F&&C(_,F),W&&C(_,W)})(m,w)}function Su(m,w){var C=Ba(w),_=C.next();if(_.done)return!1;for(var N=_.value,R=Ba(m),q=R.next(N.from),F=q.value;!_.done&&!q.done;){if(ft(F.from,N.to)<=0&&0<=ft(F.to,N.from))return!0;ft(N.from,F.from)<0?N=(_=C.next(F.from)).value:F=(q=R.next(N.from)).value}return!1}function Ba(m){var w=Jl(m)?null:{s:0,n:m};return{next:function(C){for(var _=0<arguments.length;w;)switch(w.s){case 0:if(w.s=1,_)for(;w.n.l&&ft(C,w.n.from)<0;)w={up:w,n:w.n.l,s:1};else for(;w.n.l;)w={up:w,n:w.n.l,s:1};case 1:if(w.s=2,!_||ft(C,w.n.to)<=0)return{value:w.n,done:!1};case 2:if(w.n.r){w.s=3,w={up:w,n:w.n.r,s:0};continue}case 3:w=w.up}return{done:!0}}}}function Tu(m){var w,C,_=(((w=m.r)===null||w===void 0?void 0:w.d)||0)-(((C=m.l)===null||C===void 0?void 0:C.d)||0),N=1<_?"r":_<-1?"l":"";N&&(w=N=="r"?"l":"r",C=i({},m),_=m[N],m.from=_.from,m.to=_.to,m[N]=_[N],C[N]=_[w],(m[w]=C).d=$l(C)),m.d=$l(m)}function $l(C){var w=C.r,C=C.l;return(w?C?Math.max(w.d,C.d):w.d:C?C.d:0)+1}function za(m,w){return u(w).forEach(function(C){m[C]?_i(m[C],w[C]):m[C]=(function _(N){var R,q,F={};for(R in N)b(N,R)&&(q=N[R],F[R]=!q||typeof q!="object"||K.has(q.constructor)?q:_(q));return F})(w[C])}),m}function Xl(m,w){return m.all||w.all||Object.keys(m).some(function(C){return w[C]&&Su(w[C],m[C])})}T(Dn.prototype,((Wn={add:function(m){return _i(this,m),this},addKey:function(m){return Xo(this,m,m),this},addKeys:function(m){var w=this;return m.forEach(function(C){return Xo(w,C,C)}),this},hasKey:function(m){var w=Ba(this).next(m).value;return w&&ft(w.from,m)<=0&&0<=ft(w.to,m)}})[ue]=function(){return Ba(this)},Wn));var Ai={},Ql={},Wl=!1;function qa(m){za(Ql,m),Wl||(Wl=!0,setTimeout(function(){Wl=!1,Zl(Ql,!(Ql={}))},0))}function Zl(m,w){w===void 0&&(w=!1);var C=new Set;if(m.all)for(var _=0,N=Object.values(Ai);_<N.length;_++)Cu(q=N[_],m,C,w);else for(var R in m){var q,F=/^idb\:\/\/(.*)\/(.*)\//.exec(R);F&&(R=F[1],F=F[2],(q=Ai["idb://".concat(R,"/").concat(F)])&&Cu(q,m,C,w))}C.forEach(function(W){return W()})}function Cu(m,w,C,_){for(var N=[],R=0,q=Object.entries(m.queries.query);R<q.length;R++){for(var F=q[R],W=F[0],Z=[],ie=0,X=F[1];ie<X.length;ie++){var ae=X[ie];Xl(w,ae.obsSet)?ae.subscribers.forEach(function(oe){return C.add(oe)}):_&&Z.push(ae)}_&&N.push([W,Z])}if(_)for(var ee=0,ne=N;ee<ne.length;ee++){var re=ne[ee],W=re[0],Z=re[1];m.queries.query[W]=Z}}function Af(m){var w=m._state,C=m._deps.indexedDB;if(w.isBeingOpened||m.idbdb)return w.dbReadyPromise.then(function(){return w.dbOpenError?Pt(w.dbOpenError):m});w.isBeingOpened=!0,w.dbOpenError=null,w.openComplete=!1;var _=w.openCanceller,N=Math.round(10*m.verno),R=!1;function q(){if(w.openCanceller!==_)throw new Ne.DatabaseClosed("db.open() was cancelled")}function F(){return new ke(function(ae,ee){if(q(),!C)throw new Ne.MissingAPI;var ne=m.name,re=w.autoSchema||!N?C.open(ne):C.open(ne,N);if(!re)throw new Ne.MissingAPI;re.onerror=gr(ee),re.onblocked=zt(m._fireOnBlocked),re.onupgradeneeded=zt(function(oe){var fe;ie=re.transaction,w.autoSchema&&!m._options.allowEmptyDB?(re.onerror=Ti,ie.abort(),re.result.close(),(fe=C.deleteDatabase(ne)).onsuccess=fe.onerror=zt(function(){ee(new Ne.NoSuchDatabase("Database ".concat(ne," doesnt exist")))})):(ie.onerror=gr(ee),oe=oe.oldVersion>Math.pow(2,62)?0:oe.oldVersion,X=oe<1,m.idbdb=re.result,R&&Ia(m,ie),$o(m,oe/10,ie,ee))},ee),re.onsuccess=zt(function(){ie=null;var oe,fe,he,be,Te,Oe=m.idbdb=re.result,je=U(Oe.objectStoreNames);if(0<je.length)try{var De=Oe.transaction((be=je).length===1?be[0]:be,"readonly");if(w.autoSchema)fe=Oe,he=De,(oe=m).verno=fe.version/10,he=oe._dbSchema=io(0,fe,he),oe._storeNames=U(fe.objectStoreNames,0),Da(oe,[oe._allTables],u(he),he);else if(Ua(m,m._dbSchema,De),((Te=Pa(io(0,(Te=m).idbdb,De),Te._dbSchema)).add.length||Te.change.some(function(Be){return Be.add.length||Be.change.length}))&&!R)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Oe.close(),N=Oe.version+1,R=!0,ae(F());li(m,De)}catch{}xi.push(m),Oe.onversionchange=zt(function(Be){w.vcFired=!0,m.on("versionchange").fire(Be)}),Oe.onclose=zt(function(){m.close({disableAutoOpen:!1})}),X&&(Te=m._deps,De=ne,Oe=Te.indexedDB,Te=Te.IDBKeyRange,Oa(Oe)||De===jo||Yl(Oe,Te).put({name:De}).catch(pt)),ae()},ee)}).catch(function(ae){switch(ae==null?void 0:ae.name){case"UnknownError":if(0<w.PR1398_maxLoop)return w.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),F();break;case"VersionError":if(0<N)return N=0,F()}return ke.reject(ae)})}var W,Z=w.dbReadyResolve,ie=null,X=!1;return ke.race([_,(typeof navigator>"u"?ke.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(ae){function ee(){return indexedDB.databases().finally(ae)}W=setInterval(ee,100),ee()}).finally(function(){return clearInterval(W)}):Promise.resolve()).then(F)]).then(function(){return q(),w.onReadyBeingFired=[],ke.resolve(Kl(function(){return m.on.ready.fire(m.vip)})).then(function ae(){if(0<w.onReadyBeingFired.length){var ee=w.onReadyBeingFired.reduce(pr,pt);return w.onReadyBeingFired=[],ke.resolve(Kl(function(){return ee(m.vip)})).then(ae)}})}).finally(function(){w.openCanceller===_&&(w.onReadyBeingFired=null,w.isBeingOpened=!1)}).catch(function(ae){w.dbOpenError=ae;try{ie&&ie.abort()}catch{}return _===w.openCanceller&&m._close(),Pt(ae)}).finally(function(){w.openComplete=!0,Z()}).then(function(){var ae;return X&&(ae={},m.tables.forEach(function(ee){ee.schema.indexes.forEach(function(ne){ne.name&&(ae["idb://".concat(m.name,"/").concat(ee.name,"/").concat(ne.name)]=new Dn(-1/0,[[[]]]))}),ae["idb://".concat(m.name,"/").concat(ee.name,"/")]=ae["idb://".concat(m.name,"/").concat(ee.name,"/:dels")]=new Dn(-1/0,[[[]]])}),Rn(eo).fire(ae),Zl(ae,!0)),m})}function Qo(m){function w(R){return m.next(R)}var C=N(w),_=N(function(R){return m.throw(R)});function N(R){return function(W){var F=R(W),W=F.value;return F.done?W:W&&typeof W.then=="function"?W.then(C,_):d(W)?Promise.all(W).then(C,_):C(W)}}return N(w)()}function si(m,w,C){for(var _=d(m)?m.slice():[m],N=0;N<C;++N)_.push(w);return _}var kf={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(m){return i(i({},m),{table:function(w){var C=m.table(w),_=C.schema,N={},R=[];function q(X,ae,ee){var ne=mn(X),re=N[ne]=N[ne]||[],oe=X==null?0:typeof X=="string"?1:X.length,fe=0<ae,fe=i(i({},ee),{name:fe?"".concat(ne,"(virtual-from:").concat(ee.name,")"):ee.name,lowLevelIndex:ee,isVirtual:fe,keyTail:ae,keyLength:oe,extractKey:ro(X),unique:!fe&&ee.unique});return re.push(fe),fe.isPrimaryKey||R.push(fe),1<oe&&q(oe===2?X[0]:X.slice(0,oe-1),ae+1,ee),re.sort(function(he,be){return he.keyTail-be.keyTail}),fe}w=q(_.primaryKey.keyPath,0,_.primaryKey),N[":id"]=[w];for(var F=0,W=_.indexes;F<W.length;F++){var Z=W[F];q(Z.keyPath,0,Z)}function ie(X){var ae,ee=X.query.index;return ee.isVirtual?i(i({},X),{query:{index:ee.lowLevelIndex,range:(ae=X.query.range,ee=ee.keyTail,{type:ae.type===1?2:ae.type,lower:si(ae.lower,ae.lowerOpen?m.MAX_KEY:m.MIN_KEY,ee),lowerOpen:!0,upper:si(ae.upper,ae.upperOpen?m.MIN_KEY:m.MAX_KEY,ee),upperOpen:!0})}}):X}return i(i({},C),{schema:i(i({},_),{primaryKey:w,indexes:R,getIndexByKeyPath:function(X){return(X=N[mn(X)])&&X[0]}}),count:function(X){return C.count(ie(X))},query:function(X){return C.query(ie(X))},openCursor:function(X){var ae=X.query.index,ee=ae.keyTail,ne=ae.isVirtual,re=ae.keyLength;return ne?C.openCursor(ie(X)).then(function(fe){return fe&&oe(fe)}):C.openCursor(X);function oe(fe){return Object.create(fe,{continue:{value:function(he){he!=null?fe.continue(si(he,X.reverse?m.MAX_KEY:m.MIN_KEY,ee)):X.unique?fe.continue(fe.key.slice(0,re).concat(X.reverse?m.MIN_KEY:m.MAX_KEY,ee)):fe.continue()}},continuePrimaryKey:{value:function(he,be){fe.continuePrimaryKey(si(he,m.MAX_KEY,ee),be)}},primaryKey:{get:function(){return fe.primaryKey}},key:{get:function(){var he=fe.key;return re===1?he[0]:he.slice(0,re)}},value:{get:function(){return fe.value}}})}}})}})}};function ja(m,w,C,_){return C=C||{},_=_||"",u(m).forEach(function(N){var R,q,F;b(w,N)?(R=m[N],q=w[N],typeof R=="object"&&typeof q=="object"&&R&&q?(F=Pe(R))!==Pe(q)?C[_+N]=w[N]:F==="Object"?ja(R,q,C,_+N+"."):R!==q&&(C[_+N]=w[N]):R!==q&&(C[_+N]=w[N])):C[_+N]=void 0}),u(w).forEach(function(N){b(m,N)||(C[_+N]=w[N])}),C}function Ha(m,w){return w.type==="delete"?w.keys:w.keys||w.values.map(m.extractKey)}var Eu={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(m){return i(i({},m),{table:function(w){var C=m.table(w),_=C.schema.primaryKey;return i(i({},C),{mutate:function(N){var R=Ue.trans,q=R.table(w).hook,F=q.deleting,W=q.creating,Z=q.updating;switch(N.type){case"add":if(W.fire===pt)break;return R._promise("readwrite",function(){return ie(N)},!0);case"put":if(W.fire===pt&&Z.fire===pt)break;return R._promise("readwrite",function(){return ie(N)},!0);case"delete":if(F.fire===pt)break;return R._promise("readwrite",function(){return ie(N)},!0);case"deleteRange":if(F.fire===pt)break;return R._promise("readwrite",function(){return(function X(ae,ee,ne){return C.query({trans:ae,values:!1,query:{index:_,range:ee},limit:ne}).then(function(re){var oe=re.result;return ie({type:"delete",keys:oe,trans:ae}).then(function(fe){return 0<fe.numFailures?Promise.reject(fe.failures[0]):oe.length<ne?{failures:[],numFailures:0,lastResult:void 0}:X(ae,i(i({},ee),{lower:oe[oe.length-1],lowerOpen:!0}),ne)})})})(N.trans,N.range,1e4)},!0)}return C.mutate(N);function ie(X){var ae,ee,ne,re=Ue.trans,oe=X.keys||Ha(_,X);if(!oe)throw new Error("Keys missing");return(X=X.type==="add"||X.type==="put"?i(i({},X),{keys:oe}):i({},X)).type!=="delete"&&(X.values=a([],X.values)),X.keys&&(X.keys=a([],X.keys)),ae=C,ne=oe,((ee=X).type==="add"?Promise.resolve([]):ae.getMany({trans:ee.trans,keys:ne,cache:"immutable"})).then(function(fe){var he=oe.map(function(be,Te){var Oe,je,De,Be=fe[Te],ze={onerror:null,onsuccess:null};return X.type==="delete"?F.fire.call(ze,be,Be,re):X.type==="add"||Be===void 0?(Oe=W.fire.call(ze,be,X.values[Te],re),be==null&&Oe!=null&&(X.keys[Te]=be=Oe,_.outbound||Y(X.values[Te],_.keyPath,be))):(Oe=ja(Be,X.values[Te]),(je=Z.fire.call(ze,Oe,be,Be,re))&&(De=X.values[Te],Object.keys(je).forEach(function(Ie){b(De,Ie)?De[Ie]=je[Ie]:Y(De,Ie,je[Ie])}))),ze});return C.mutate(X).then(function(be){for(var Te=be.failures,Oe=be.results,je=be.numFailures,be=be.lastResult,De=0;De<oe.length;++De){var Be=(Oe||oe)[De],ze=he[De];Be==null?ze.onerror&&ze.onerror(Te[De]):ze.onsuccess&&ze.onsuccess(X.type==="put"&&fe[De]?X.values[De]:Be)}return{failures:Te,results:Oe,numFailures:je,lastResult:be}}).catch(function(be){return he.forEach(function(Te){return Te.onerror&&Te.onerror(be)}),Promise.reject(be)})})}}})}})}};function es(m,w,C){try{if(!w||w.keys.length<m.length)return null;for(var _=[],N=0,R=0;N<w.keys.length&&R<m.length;++N)ft(w.keys[N],m[R])===0&&(_.push(C?xe(w.values[N]):w.values[N]),++R);return _.length===m.length?_:null}catch{return null}}var _u={stack:"dbcore",level:-1,create:function(m){return{table:function(w){var C=m.table(w);return i(i({},C),{getMany:function(_){if(!_.cache)return C.getMany(_);var N=es(_.keys,_.trans._cache,_.cache==="clone");return N?ke.resolve(N):C.getMany(_).then(function(R){return _.trans._cache={keys:_.keys,values:_.cache==="clone"?xe(R):R},R})},mutate:function(_){return _.type!=="add"&&(_.trans._cache=null),C.mutate(_)}})}}}};function ki(m,w){return m.trans.mode==="readonly"&&!!m.subscr&&!m.trans.explicit&&m.trans.db._options.cache!=="disabled"&&!w.schema.primaryKey.outbound}function Au(m,w){switch(m){case"query":return w.values&&!w.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Nf={stack:"dbcore",level:0,name:"Observability",create:function(m){var w=m.schema.name,C=new Dn(m.MIN_KEY,m.MAX_KEY);return i(i({},m),{transaction:function(_,N,R){if(Ue.subscr&&N!=="readonly")throw new Ne.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ue.querier));return m.transaction(_,N,R)},table:function(_){var N=m.table(_),R=N.schema,q=R.primaryKey,X=R.indexes,F=q.extractKey,W=q.outbound,Z=q.autoIncrement&&X.filter(function(ee){return ee.compound&&ee.keyPath.includes(q.keyPath)}),ie=i(i({},N),{mutate:function(ee){function ne(Ie){return Ie="idb://".concat(w,"/").concat(_,"/").concat(Ie),be[Ie]||(be[Ie]=new Dn)}var re,oe,fe,he=ee.trans,be=ee.mutatedParts||(ee.mutatedParts={}),Te=ne(""),Oe=ne(":dels"),je=ee.type,ze=ee.type==="deleteRange"?[ee.range]:ee.type==="delete"?[ee.keys]:ee.values.length<50?[Ha(q,ee).filter(function(Ie){return Ie}),ee.values]:[],De=ze[0],Be=ze[1],ze=ee.trans._cache;return d(De)?(Te.addKeys(De),(ze=je==="delete"||De.length===Be.length?es(De,ze):null)||Oe.addKeys(De),(ze||Be)&&(re=ne,oe=ze,fe=Be,R.indexes.forEach(function(Ie){var Fe=re(Ie.name||"");function $e(at){return at!=null?Ie.extractKey(at):null}function it(at){return Ie.multiEntry&&d(at)?at.forEach(function(In){return Fe.addKey(In)}):Fe.addKey(at)}(oe||fe).forEach(function(at,gn){var nt=oe&&$e(oe[gn]),gn=fe&&$e(fe[gn]);ft(nt,gn)!==0&&(nt!=null&&it(nt),gn!=null&&it(gn))})}))):De?(Be={from:(Be=De.lower)!==null&&Be!==void 0?Be:m.MIN_KEY,to:(Be=De.upper)!==null&&Be!==void 0?Be:m.MAX_KEY},Oe.add(Be),Te.add(Be)):(Te.add(C),Oe.add(C),R.indexes.forEach(function(Ie){return ne(Ie.name).add(C)})),N.mutate(ee).then(function(Ie){return!De||ee.type!=="add"&&ee.type!=="put"||(Te.addKeys(Ie.results),Z&&Z.forEach(function(Fe){for(var $e=ee.values.map(function(nt){return Fe.extractKey(nt)}),it=Fe.keyPath.findIndex(function(nt){return nt===q.keyPath}),at=0,In=Ie.results.length;at<In;++at)$e[at][it]=Ie.results[at];ne(Fe.name).addKeys($e)})),he.mutatedParts=za(he.mutatedParts||{},be),Ie})}}),X=function(ne){var re=ne.query,ne=re.index,re=re.range;return[ne,new Dn((ne=re.lower)!==null&&ne!==void 0?ne:m.MIN_KEY,(re=re.upper)!==null&&re!==void 0?re:m.MAX_KEY)]},ae={get:function(ee){return[q,new Dn(ee.key)]},getMany:function(ee){return[q,new Dn().addKeys(ee.keys)]},count:X,query:X,openCursor:X};return u(ae).forEach(function(ee){ie[ee]=function(ne){var re=Ue.subscr,oe=!!re,fe=ki(Ue,N)&&Au(ee,ne)?ne.obsSet={}:re;if(oe){var he=function(Be){return Be="idb://".concat(w,"/").concat(_,"/").concat(Be),fe[Be]||(fe[Be]=new Dn)},be=he(""),Te=he(":dels"),re=ae[ee](ne),oe=re[0],re=re[1];if((ee==="query"&&oe.isPrimaryKey&&!ne.values?Te:he(oe.name||"")).add(re),!oe.isPrimaryKey){if(ee!=="count"){var Oe=ee==="query"&&W&&ne.values&&N.query(i(i({},ne),{values:!1}));return N[ee].apply(this,arguments).then(function(Be){if(ee==="query"){if(W&&ne.values)return Oe.then(function($e){return $e=$e.result,be.addKeys($e),Be});var ze=ne.values?Be.result.map(F):Be.result;(ne.values?be:Te).addKeys(ze)}else if(ee==="openCursor"){var Ie=Be,Fe=ne.values;return Ie&&Object.create(Ie,{key:{get:function(){return Te.addKey(Ie.primaryKey),Ie.key}},primaryKey:{get:function(){var $e=Ie.primaryKey;return Te.addKey($e),$e}},value:{get:function(){return Fe&&be.addKey(Ie.primaryKey),Ie.value}}})}return Be})}Te.add(C)}}return N[ee].apply(this,arguments)}}),ie}})}};function ku(m,w,C){if(C.numFailures===0)return w;if(w.type==="deleteRange")return null;var _=w.keys?w.keys.length:"values"in w&&w.values?w.values.length:1;return C.numFailures===_?null:(w=i({},w),d(w.keys)&&(w.keys=w.keys.filter(function(N,R){return!(R in C.failures)})),"values"in w&&d(w.values)&&(w.values=w.values.filter(function(N,R){return!(R in C.failures)})),w)}function Fa(m,w){return C=m,((_=w).lower===void 0||(_.lowerOpen?0<ft(C,_.lower):0<=ft(C,_.lower)))&&(m=m,(w=w).upper===void 0||(w.upperOpen?ft(m,w.upper)<0:ft(m,w.upper)<=0));var C,_}function ts(m,w,ae,_,N,R){if(!ae||ae.length===0)return m;var q=w.query.index,F=q.multiEntry,W=w.query.range,Z=_.schema.primaryKey.extractKey,ie=q.extractKey,X=(q.lowLevelIndex||q).extractKey,ae=ae.reduce(function(ee,ne){var re=ee,oe=[];if(ne.type==="add"||ne.type==="put")for(var fe=new Dn,he=ne.values.length-1;0<=he;--he){var be,Te=ne.values[he],Oe=Z(Te);fe.hasKey(Oe)||(be=ie(Te),(F&&d(be)?be.some(function(Ie){return Fa(Ie,W)}):Fa(be,W))&&(fe.addKey(Oe),oe.push(Te)))}switch(ne.type){case"add":var je=new Dn().addKeys(w.values?ee.map(function(Fe){return Z(Fe)}):ee),re=ee.concat(w.values?oe.filter(function(Fe){return Fe=Z(Fe),!je.hasKey(Fe)&&(je.addKey(Fe),!0)}):oe.map(function(Fe){return Z(Fe)}).filter(function(Fe){return!je.hasKey(Fe)&&(je.addKey(Fe),!0)}));break;case"put":var De=new Dn().addKeys(ne.values.map(function(Fe){return Z(Fe)}));re=ee.filter(function(Fe){return!De.hasKey(w.values?Z(Fe):Fe)}).concat(w.values?oe:oe.map(function(Fe){return Z(Fe)}));break;case"delete":var Be=new Dn().addKeys(ne.keys);re=ee.filter(function(Fe){return!Be.hasKey(w.values?Z(Fe):Fe)});break;case"deleteRange":var ze=ne.range;re=ee.filter(function(Fe){return!Fa(Z(Fe),ze)})}return re},m);return ae===m?m:(ae.sort(function(ee,ne){return ft(X(ee),X(ne))||ft(Z(ee),Z(ne))}),w.limit&&w.limit<1/0&&(ae.length>w.limit?ae.length=w.limit:m.length===w.limit&&ae.length<w.limit&&(N.dirty=!0)),R?Object.freeze(ae):ae)}function ao(m,w){return ft(m.lower,w.lower)===0&&ft(m.upper,w.upper)===0&&!!m.lowerOpen==!!w.lowerOpen&&!!m.upperOpen==!!w.upperOpen}function Wo(m,w){return(function(C,_,N,R){if(C===void 0)return _!==void 0?-1:0;if(_===void 0)return 1;if((_=ft(C,_))===0){if(N&&R)return 0;if(N)return 1;if(R)return-1}return _})(m.lower,w.lower,m.lowerOpen,w.lowerOpen)<=0&&0<=(function(C,_,N,R){if(C===void 0)return _!==void 0?1:0;if(_===void 0)return-1;if((_=ft(C,_))===0){if(N&&R)return 0;if(N)return-1;if(R)return 1}return _})(m.upper,w.upper,m.upperOpen,w.upperOpen)}function Mf(m,w,C,_){m.subscribers.add(C),_.addEventListener("abort",function(){var N,R;m.subscribers.delete(C),m.subscribers.size===0&&(N=m,R=w,setTimeout(function(){N.subscribers.size===0&&Me(R,N)},3e3))})}var Va={stack:"dbcore",level:0,name:"Cache",create:function(m){var w=m.schema.name;return i(i({},m),{transaction:function(C,_,N){var R,q,F=m.transaction(C,_,N);return _==="readwrite"&&(q=(R=new AbortController).signal,N=function(W){return function(){if(R.abort(),_==="readwrite"){for(var Z=new Set,ie=0,X=C;ie<X.length;ie++){var ae=X[ie],ee=Ai["idb://".concat(w,"/").concat(ae)];if(ee){var ne=m.table(ae),re=ee.optimisticOps.filter(function(Fe){return Fe.trans===F});if(F._explicit&&W&&F.mutatedParts)for(var oe=0,fe=Object.values(ee.queries.query);oe<fe.length;oe++)for(var he=0,be=(je=fe[oe]).slice();he<be.length;he++)Xl((De=be[he]).obsSet,F.mutatedParts)&&(Me(je,De),De.subscribers.forEach(function(Fe){return Z.add(Fe)}));else if(0<re.length){ee.optimisticOps=ee.optimisticOps.filter(function(Fe){return Fe.trans!==F});for(var Te=0,Oe=Object.values(ee.queries.query);Te<Oe.length;Te++)for(var je,De,Be,ze=0,Ie=(je=Oe[Te]).slice();ze<Ie.length;ze++)(De=Ie[ze]).res!=null&&F.mutatedParts&&(W&&!De.dirty?(Be=Object.isFrozen(De.res),Be=ts(De.res,De.req,re,ne,De,Be),De.dirty?(Me(je,De),De.subscribers.forEach(function(Fe){return Z.add(Fe)})):Be!==De.res&&(De.res=Be,De.promise=ke.resolve({result:Be}))):(De.dirty&&Me(je,De),De.subscribers.forEach(function(Fe){return Z.add(Fe)})))}}}Z.forEach(function(Fe){return Fe()})}}},F.addEventListener("abort",N(!1),{signal:q}),F.addEventListener("error",N(!1),{signal:q}),F.addEventListener("complete",N(!0),{signal:q})),F},table:function(C){var _=m.table(C),N=_.schema.primaryKey;return i(i({},_),{mutate:function(R){var q=Ue.trans;if(N.outbound||q.db._options.cache==="disabled"||q.explicit||q.idbtrans.mode!=="readwrite")return _.mutate(R);var F=Ai["idb://".concat(w,"/").concat(C)];return F?(q=_.mutate(R),R.type!=="add"&&R.type!=="put"||!(50<=R.values.length||Ha(N,R).some(function(W){return W==null}))?(F.optimisticOps.push(R),R.mutatedParts&&qa(R.mutatedParts),q.then(function(W){0<W.numFailures&&(Me(F.optimisticOps,R),(W=ku(0,R,W))&&F.optimisticOps.push(W),R.mutatedParts&&qa(R.mutatedParts))}),q.catch(function(){Me(F.optimisticOps,R),R.mutatedParts&&qa(R.mutatedParts)})):q.then(function(W){var Z=ku(0,i(i({},R),{values:R.values.map(function(ie,X){var ae;return W.failures[X]?ie:(ie=(ae=N.keyPath)!==null&&ae!==void 0&&ae.includes(".")?xe(ie):i({},ie),Y(ie,N.keyPath,W.results[X]),ie)})}),W);F.optimisticOps.push(Z),queueMicrotask(function(){return R.mutatedParts&&qa(R.mutatedParts)})}),q):_.mutate(R)},query:function(R){if(!ki(Ue,_)||!Au("query",R))return _.query(R);var q=((Z=Ue.trans)===null||Z===void 0?void 0:Z.db._options.cache)==="immutable",X=Ue,F=X.requery,W=X.signal,Z=(function(ne,re,oe,fe){var he=Ai["idb://".concat(ne,"/").concat(re)];if(!he)return[];if(!(re=he.queries[oe]))return[null,!1,he,null];var be=re[(fe.query?fe.query.index.name:null)||""];if(!be)return[null,!1,he,null];switch(oe){case"query":var Te=be.find(function(Oe){return Oe.req.limit===fe.limit&&Oe.req.values===fe.values&&ao(Oe.req.query.range,fe.query.range)});return Te?[Te,!0,he,be]:[be.find(function(Oe){return("limit"in Oe.req?Oe.req.limit:1/0)>=fe.limit&&(!fe.values||Oe.req.values)&&Wo(Oe.req.query.range,fe.query.range)}),!1,he,be];case"count":return Te=be.find(function(Oe){return ao(Oe.req.query.range,fe.query.range)}),[Te,!!Te,he,be]}})(w,C,"query",R),ie=Z[0],X=Z[1],ae=Z[2],ee=Z[3];return ie&&X?ie.obsSet=R.obsSet:(X=_.query(R).then(function(ne){var re=ne.result;if(ie&&(ie.res=re),q){for(var oe=0,fe=re.length;oe<fe;++oe)Object.freeze(re[oe]);Object.freeze(re)}else ne.result=xe(re);return ne}).catch(function(ne){return ee&&ie&&Me(ee,ie),Promise.reject(ne)}),ie={obsSet:R.obsSet,promise:X,subscribers:new Set,type:"query",req:R,dirty:!1},ee?ee.push(ie):(ee=[ie],(ae=ae||(Ai["idb://".concat(w,"/").concat(C)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[R.query.index.name||""]=ee)),Mf(ie,ee,F,W),ie.promise.then(function(ne){return{result:ts(ne.result,R,ae==null?void 0:ae.optimisticOps,_,ie,q)}})}})}})}};function Zo(m,w){return new Proxy(m,{get:function(C,_,N){return _==="db"?w:Reflect.get(C,_,N)}})}var Rr=(Jt.prototype.version=function(m){if(isNaN(m)||m<.1)throw new Ne.Type("Given version is not a positive number");if(m=Math.round(10*m)/10,this.idbdb||this._state.isBeingOpened)throw new Ne.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,m);var w=this._versions,C=w.filter(function(_){return _._cfg.version===m})[0];return C||(C=new this.Version(m),w.push(C),w.sort(Vl),C.stores({}),this._state.autoSchema=!1,C)},Jt.prototype._whenReady=function(m){var w=this;return this.idbdb&&(this._state.openComplete||Ue.letThrough||this._vip)?m():new ke(function(C,_){if(w._state.openComplete)return _(new Ne.DatabaseClosed(w._state.dbOpenError));if(!w._state.isBeingOpened){if(!w._state.autoOpen)return void _(new Ne.DatabaseClosed);w.open().catch(pt)}w._state.dbReadyPromise.then(C,_)}).then(m)},Jt.prototype.use=function(m){var w=m.stack,C=m.create,_=m.level,N=m.name;return N&&this.unuse({stack:w,name:N}),m=this._middlewares[w]||(this._middlewares[w]=[]),m.push({stack:w,create:C,level:_??10,name:N}),m.sort(function(R,q){return R.level-q.level}),this},Jt.prototype.unuse=function(m){var w=m.stack,C=m.name,_=m.create;return w&&this._middlewares[w]&&(this._middlewares[w]=this._middlewares[w].filter(function(N){return _?N.create!==_:!!C&&N.name!==C})),this},Jt.prototype.open=function(){var m=this;return hr(Bt,function(){return Af(m)})},Jt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var m=this._state,w=xi.indexOf(this);if(0<=w&&xi.splice(w,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}m.isBeingOpened||(m.dbReadyPromise=new ke(function(C){m.dbReadyResolve=C}),m.openCanceller=new ke(function(C,_){m.cancelOpen=_}))},Jt.prototype.close=function(C){var w=(C===void 0?{disableAutoOpen:!0}:C).disableAutoOpen,C=this._state;w?(C.isBeingOpened&&C.cancelOpen(new Ne.DatabaseClosed),this._close(),C.autoOpen=!1,C.dbOpenError=new Ne.DatabaseClosed):(this._close(),C.autoOpen=this._options.autoOpen||C.isBeingOpened,C.openComplete=!1,C.dbOpenError=null)},Jt.prototype.delete=function(m){var w=this;m===void 0&&(m={disableAutoOpen:!0});var C=0<arguments.length&&typeof arguments[0]!="object",_=this._state;return new ke(function(N,R){function q(){w.close(m);var F=w._deps.indexedDB.deleteDatabase(w.name);F.onsuccess=zt(function(){var W,Z,ie;W=w._deps,Z=w.name,ie=W.indexedDB,W=W.IDBKeyRange,Oa(ie)||Z===jo||Yl(ie,W).delete(Z).catch(pt),N()}),F.onerror=gr(R),F.onblocked=w._fireOnBlocked}if(C)throw new Ne.InvalidArgument("Invalid closeOptions argument to db.delete()");_.isBeingOpened?_.dbReadyPromise.then(q):q()})},Jt.prototype.backendDB=function(){return this.idbdb},Jt.prototype.isOpen=function(){return this.idbdb!==null},Jt.prototype.hasBeenClosed=function(){var m=this._state.dbOpenError;return m&&m.name==="DatabaseClosed"},Jt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Jt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Jt.prototype,"tables",{get:function(){var m=this;return u(this._allTables).map(function(w){return m._allTables[w]})},enumerable:!1,configurable:!0}),Jt.prototype.transaction=function(){var m=(function(w,C,_){var N=arguments.length;if(N<2)throw new Ne.InvalidArgument("Too few arguments");for(var R=new Array(N-1);--N;)R[N-1]=arguments[N];return _=R.pop(),[w,B(R),_]}).apply(this,arguments);return this._transaction.apply(this,m)},Jt.prototype._transaction=function(m,w,C){var _=this,N=Ue.trans;N&&N.db===this&&m.indexOf("!")===-1||(N=null);var R,q,F=m.indexOf("?")!==-1;m=m.replace("!","").replace("?","");try{if(q=w.map(function(Z){if(Z=Z instanceof _.Table?Z.name:Z,typeof Z!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Z}),m=="r"||m===Gr)R=Gr;else{if(m!="rw"&&m!=oi)throw new Ne.InvalidArgument("Invalid transaction mode: "+m);R=oi}if(N){if(N.mode===Gr&&R===oi){if(!F)throw new Ne.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");N=null}N&&q.forEach(function(Z){if(N&&N.storeNames.indexOf(Z)===-1){if(!F)throw new Ne.SubTransaction("Table "+Z+" not included in parent transaction.");N=null}}),F&&N&&!N.active&&(N=null)}}catch(Z){return N?N._promise(null,function(ie,X){X(Z)}):Pt(Z)}var W=(function Z(ie,X,ae,ee,ne){return ke.resolve().then(function(){var re=Ue.transless||Ue,oe=ie._createTransaction(X,ae,ie._dbSchema,ee);if(oe.explicit=!0,re={trans:oe,transless:re},ee)oe.idbtrans=ee.idbtrans;else try{oe.create(),oe.idbtrans._explicit=!0,ie._state.PR1398_maxLoop=3}catch(be){return be.name===We.InvalidState&&ie.isOpen()&&0<--ie._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ie.close({disableAutoOpen:!1}),ie.open().then(function(){return Z(ie,X,ae,null,ne)})):Pt(be)}var fe,he=z(ne);return he&&cn(),re=ke.follow(function(){var be;(fe=ne.call(oe,oe))&&(he?(be=Xn.bind(null,null),fe.then(be,be)):typeof fe.next=="function"&&typeof fe.throw=="function"&&(fe=Qo(fe)))},re),(fe&&typeof fe.then=="function"?ke.resolve(fe).then(function(be){return oe.active?be:Pt(new Ne.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):re.then(function(){return fe})).then(function(be){return ee&&oe._resolve(),oe._completion.then(function(){return be})}).catch(function(be){return oe._reject(be),Pt(be)})})}).bind(null,this,R,q,N,C);return N?N._promise(R,W,"lock"):Ue.trans?hr(Ue.transless,function(){return _._whenReady(W)}):this._whenReady(W)},Jt.prototype.table=function(m){if(!b(this._allTables,m))throw new Ne.InvalidTable("Table ".concat(m," does not exist"));return this._allTables[m]},Jt);function Jt(m,w){var C=this;this._middlewares={},this.verno=0;var _=Jt.dependencies;this._options=w=i({addons:Jt.addons,autoOpen:!0,indexedDB:_.indexedDB,IDBKeyRange:_.IDBKeyRange,cache:"cloned"},w),this._deps={indexedDB:w.indexedDB,IDBKeyRange:w.IDBKeyRange},_=w.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var N,R,q,F,W,Z={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:pt,dbReadyPromise:null,cancelOpen:pt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:w.autoOpen};Z.dbReadyPromise=new ke(function(X){Z.dbReadyResolve=X}),Z.openCanceller=new ke(function(X,ae){Z.cancelOpen=ae}),this._state=Z,this.name=m,this.on=Vo(this,"populate","blocked","versionchange","close",{ready:[pr,pt]}),this.once=function(X,ae){var ee=function(){for(var ne=[],re=0;re<arguments.length;re++)ne[re]=arguments[re];C.on(X).unsubscribe(ee),ae.apply(C,ne)};return C.on(X,ee)},this.on.ready.subscribe=O(this.on.ready.subscribe,function(X){return function(ae,ee){Jt.vip(function(){var ne,re=C._state;re.openComplete?(re.dbOpenError||ke.resolve().then(ae),ee&&X(ae)):re.onReadyBeingFired?(re.onReadyBeingFired.push(ae),ee&&X(ae)):(X(ae),ne=C,ee||X(function oe(){ne.on.ready.unsubscribe(ae),ne.on.ready.unsubscribe(oe)}))})}}),this.Collection=(N=this,Mn(Cf.prototype,function(fe,oe){this.db=N;var ee=Bl,ne=null;if(oe)try{ee=oe()}catch(he){ne=he}var re=fe._ctx,oe=re.table,fe=oe.hook.reading.fire;this._ctx={table:oe,index:re.index,isPrimKey:!re.index||oe.schema.primKey.keyPath&&re.index===oe.schema.primKey.name,range:ee,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:ne,or:re.or,valueMapper:fe!==dr?fe:null}})),this.Table=(R=this,Mn(zl.prototype,function(X,ae,ee){this.db=R,this._tx=ee,this.name=X,this.schema=ae,this.hook=R._allTables[X]?R._allTables[X].hook:Vo(null,{creating:[Jn,pt],reading:[tn,dr],updating:[Xi,pt],deleting:[ei,pt]})})),this.Transaction=(q=this,Mn(Fl.prototype,function(X,ae,ee,ne,re){var oe=this;X!=="readonly"&&ae.forEach(function(fe){fe=(fe=ee[fe])===null||fe===void 0?void 0:fe.yProps,fe&&(ae=ae.concat(fe.map(function(he){return he.updatesTable})))}),this.db=q,this.mode=X,this.storeNames=ae,this.schema=ee,this.chromeTransactionDurability=ne,this.idbtrans=null,this.on=Vo(this,"complete","error","abort"),this.parent=re||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ke(function(fe,he){oe._resolve=fe,oe._reject=he}),this._completion.then(function(){oe.active=!1,oe.on.complete.fire()},function(fe){var he=oe.active;return oe.active=!1,oe.on.error.fire(fe),oe.parent?oe.parent._reject(fe):he&&oe.idbtrans&&oe.idbtrans.abort(),Pt(fe)})})),this.Version=(F=this,Mn(_f.prototype,function(X){this.db=F,this._cfg={version:X,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(W=this,Mn(Si.prototype,function(X,ae,ee){if(this.db=W,this._ctx={table:X,index:ae===":id"?null:ae,or:ee},this._cmp=this._ascending=ft,this._descending=function(ne,re){return ft(re,ne)},this._max=function(ne,re){return 0<ft(ne,re)?ne:re},this._min=function(ne,re){return ft(ne,re)<0?ne:re},this._IDBKeyRange=W._deps.IDBKeyRange,!this._IDBKeyRange)throw new Ne.MissingAPI})),this.on("versionchange",function(X){0<X.newVersion?console.warn("Another connection wants to upgrade database '".concat(C.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(C.name,"'. Closing db now to resume the delete request.")),C.close({disableAutoOpen:!1})}),this.on("blocked",function(X){!X.newVersion||X.newVersion<X.oldVersion?console.warn("Dexie.delete('".concat(C.name,"') was blocked")):console.warn("Upgrade '".concat(C.name,"' blocked by other connection holding version ").concat(X.oldVersion/10))}),this._maxKey=no(w.IDBKeyRange),this._createTransaction=function(X,ae,ee,ne){return new C.Transaction(X,ae,ee,C._options.chromeTransactionDurability,ne)},this._fireOnBlocked=function(X){C.on("blocked").fire(X),xi.filter(function(ae){return ae.name===C.name&&ae!==C&&!ae._state.vcFired}).map(function(ae){return ae.on("versionchange").fire(X)})},this.use(_u),this.use(Va),this.use(Nf),this.use(kf),this.use(Eu);var ie=new Proxy(this,{get:function(X,ae,ee){if(ae==="_vip")return!0;if(ae==="table")return function(re){return Zo(C.table(re),ie)};var ne=Reflect.get(X,ae,ee);return ne instanceof zl?Zo(ne,ie):ae==="tables"?ne.map(function(re){return Zo(re,ie)}):ae==="_createTransaction"?function(){return Zo(ne.apply(this,arguments),ie)}:ne}});this.vip=ie,_.forEach(function(X){return X(C)})}var lo,Wn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Nu=(Ga.prototype.subscribe=function(m,w,C){return this._subscribe(m&&typeof m!="function"?m:{next:m,error:w,complete:C})},Ga.prototype[Wn]=function(){return this},Ga);function Ga(m){this._subscribe=m}try{lo={indexedDB:s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,IDBKeyRange:s.IDBKeyRange||s.webkitIDBKeyRange}}catch{lo={indexedDB:null,IDBKeyRange:null}}function Mu(m){var w,C=!1,_=new Nu(function(N){var R=z(m),q,F=!1,W={},Z={},ie={get closed(){return F},unsubscribe:function(){F||(F=!0,q&&q.abort(),X&&Rn.storagemutated.unsubscribe(ee))}};N.start&&N.start(ie);var X=!1,ae=function(){return ii(ne)},ee=function(re){za(W,re),Xl(Z,W)&&ae()},ne=function(){var re,oe,fe;!F&&lo.indexedDB&&(W={},re={},q&&q.abort(),q=new AbortController,fe=(function(he){var be=Nn();try{R&&cn();var Te=Vt(m,he);return Te=R?Te.finally(Xn):Te}finally{be&&Ar()}})(oe={subscr:re,signal:q.signal,requery:ae,querier:m,trans:null}),Promise.resolve(fe).then(function(he){C=!0,w=he,F||oe.signal.aborted||(W={},(function(be){for(var Te in be)if(b(be,Te))return;return 1})(Z=re)||X||(Rn(eo,ee),X=!0),ii(function(){return!F&&N.next&&N.next(he)}))},function(he){C=!1,["DatabaseClosedError","AbortError"].includes(he==null?void 0:he.name)||F||ii(function(){F||N.error&&N.error(he)})}))};return setTimeout(ae,0),ie});return _.hasValue=function(){return C},_.getValue=function(){return w},_}var Ni=Rr;function ns(m){var w=ui;try{ui=!0,Rn.storagemutated.fire(m),Zl(m,!0)}finally{ui=w}}T(Ni,i(i({},Tt),{delete:function(m){return new Ni(m,{addons:[]}).delete()},exists:function(m){return new Ni(m,{addons:[]}).open().then(function(w){return w.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(m){try{return w=Ni.dependencies,C=w.indexedDB,w=w.IDBKeyRange,(Oa(C)?Promise.resolve(C.databases()).then(function(_){return _.map(function(N){return N.name}).filter(function(N){return N!==jo})}):Yl(C,w).toCollection().primaryKeys()).then(m)}catch{return Pt(new Ne.MissingAPI)}var w,C},defineClass:function(){return function(m){p(this,m)}},ignoreTransaction:function(m){return Ue.trans?hr(Ue.transless,m):m()},vip:Kl,async:function(m){return function(){try{var w=Qo(m.apply(this,arguments));return w&&typeof w.then=="function"?w:ke.resolve(w)}catch(C){return Pt(C)}}},spawn:function(m,w,C){try{var _=Qo(m.apply(C,w||[]));return _&&typeof _.then=="function"?_:ke.resolve(_)}catch(N){return Pt(N)}},currentTransaction:{get:function(){return Ue.trans||null}},waitFor:function(m,w){return w=ke.resolve(typeof m=="function"?Ni.ignoreTransaction(m):m).timeout(w||6e4),Ue.trans?Ue.trans.waitFor(w):w},Promise:ke,debug:{get:function(){return Tn},set:function(m){Uo(m)}},derive:I,extend:p,props:T,override:O,Events:Vo,on:Rn,liveQuery:Mu,extendObservabilitySet:za,getByKeyPath:G,setByKeyPath:Y,delByKeyPath:function(m,w){typeof w=="string"?Y(m,w,void 0):"length"in w&&[].map.call(w,function(C){Y(m,C,void 0)})},shallowClone:me,deepClone:xe,getObjectDiff:ja,cmp:ft,asap:Q,minKey:-1/0,addons:[],connections:xi,errnames:We,dependencies:lo,cache:Ai,semVer:"4.2.1",version:"4.2.1".split(".").map(function(m){return parseInt(m)}).reduce(function(m,w,C){return m+w/Math.pow(10,2*C)})})),Ni.maxKey=no(Ni.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Rn(eo,function(m){ui||(m=new CustomEvent(Ci,{detail:m}),ui=!0,dispatchEvent(m),ui=!1)}),addEventListener(Ci,function(m){m=m.detail,ui||ns(m)}));var so,ui=!1,Fn=function(){};return typeof BroadcastChannel<"u"&&((Fn=function(){(so=new BroadcastChannel(Ci)).onmessage=function(m){return m.data&&ns(m.data)}})(),typeof so.unref=="function"&&so.unref(),Rn(eo,function(m){ui||so.postMessage(m)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(m){if(!Rr.disableBfCache&&m.persisted){Tn&&console.debug("Dexie: handling persisted pagehide"),so!=null&&so.close();for(var w=0,C=xi;w<C.length;w++)C[w].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(m){!Rr.disableBfCache&&m.persisted&&(Tn&&console.debug("Dexie: handling persisted pageshow"),Fn(),ns({all:new Dn(-1/0,[[]])}))})),ke.rejectionMapper=function(m,w){return!m||m instanceof L||m instanceof TypeError||m instanceof SyntaxError||!m.name||!Mt[m.name]?m:(w=new Mt[m.name](w||m.message,m),"stack"in m&&k(w,"stack",{get:function(){return this.inner.stack}}),w)},Uo(Tn),i(Rr,Object.freeze({__proto__:null,Dexie:Rr,liveQuery:Mu,Entity:yu,cmp:ft,PropModification:Zi,replacePrefix:function(m,w){return new Zi({replacePrefix:[m,w]})},add:function(m){return new Zi({add:m})},remove:function(m){return new Zi({remove:m})},default:Rr,RangeSet:Dn,mergeRanges:_i,rangesOverlap:Su}),{default:Rr}),Rr})})(Hc)),Hc.exports}var x4=v4();const vh=ou(x4),zx=Symbol.for("Dexie"),Zc=globalThis[zx]||(globalThis[zx]=vh);if(vh.semVer!==Zc.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${vh.semVer} and ${Zc.semVer}`);const{liveQuery:EO,mergeRanges:_O,rangesOverlap:AO,RangeSet:kO,cmp:NO,Entity:MO,PropModification:RO,replacePrefix:DO,add:IO,remove:PO,DexieYProvider:LO}=Zc;class b4 extends Zc{constructor(){super("JITAgentDB"),this.version(1).stores({memories:"++id, timestamp, relevance",journal:"date",knowledge:"name"}),this.version(2).stores({memories:"++id, timestamp, relevance",journal:"date",knowledge:"name",threads:"id, updatedAt, createdAt"}),this.version(3).stores({memories:"++id, timestamp, relevance",journal:"date",knowledge:"name",threads:"id, updatedAt, createdAt",hrmr:"id, messageId, grade, updatedAt"}),this.version(4).stores({memories:"++id, timestamp, relevance",journal:"date",knowledge:"name",threads:"id, updatedAt, createdAt",hrmr:"id, messageId, grade, updatedAt",performers:"id, name"}),this.version(5).stores({memories:"++id, timestamp, relevance",journal:"date",knowledge:"name, updatedAt, createdAt",threads:"id, updatedAt, createdAt",hrmr:"id, messageId, grade, updatedAt",performers:"id, name",performerMemories:"++id, performerId, timestamp"}).upgrade(async t=>{await t.table("knowledge").toCollection().modify(n=>{const i=wh(n,n);Object.assign(n,i)}),await t.table("memories").toCollection().modify(n=>{const i=cm(n);Object.assign(n,i)}),await t.table("performers").toCollection().modify(n=>{typeof n.memoryEnabled>"u"&&(n.memoryEnabled=!0),typeof n.featureOverrides>"u"&&(n.featureOverrides={usePreflection:!0,useMemory:!0,useTaskList:!1,useAudit:!1,useStageDirections:!1,useMonologue:!1,usePromptRewrite:!1})})}),this.version(6).stores({memories:"++id, timestamp, relevance",journal:"date",knowledge:"name, updatedAt, createdAt",threads:"id, updatedAt, createdAt",hrmr:"id, messageId, grade, updatedAt",performers:"id, name",performerMemories:"++id, performerId, timestamp",performerInteractions:"id, conversationId, speakerId, timestamp"}).upgrade(async t=>{await t.table("performers").toCollection().modify(n=>{typeof n.featureOverrides>"u"&&(n.featureOverrides={usePreflection:!0,useMemory:!0,useTaskList:!1,useAudit:!1,useStageDirections:!1,useMonologue:!1,usePromptRewrite:!1})})}),this.version(7).stores({memories:"++id, timestamp, relevance",journal:"date",knowledge:"name, updatedAt, createdAt",threads:"id, updatedAt, createdAt",hrmr:"id, messageId, grade, updatedAt",performers:"id, name",performerMemories:"++id, performerId, timestamp",performerInteractions:"id, conversationId, speakerId, timestamp",tagScores:"tag"}).upgrade(async t=>{const n=new Map,i=(a,s,u=0)=>{a!=null&&a.length&&a.forEach(d=>{const p=d.trim().toLowerCase();if(!p)return;n.has(p)||n.set(p,{tag:p,memoryCount:0,knowledgeCount:0,lastUpdated:Date.now(),score:0});const f=n.get(p);s==="memory"?f.memoryCount+=Math.max(1,Math.round(u||1)):f.knowledgeCount+=1,f.lastUpdated=Date.now()})};if(await t.table("memories").toCollection().each(a=>{i(a.tags,"memory",a.relevance)}),await t.table("knowledge").toCollection().each(a=>{i(a.sourceTags,"knowledge")}),n.size>0){const a=Array.from(n.values()).map(s=>fS(s));await t.table("tagScores").bulkPut(a)}})}}const xt=new b4,iu=()=>xt.memories.toArray(),tS=async e=>{const t=cm(e),n=await xt.memories.add(t);return wf(n),await bh(t.tags,{source:"memory",relevance:t.relevance}),n},w4=async e=>{const t=cm(e),n=await xt.memories.put(t);return wf(n),n},S4=async e=>{await xt.memories.delete(e),wf(e)},T4=async()=>{await xt.memories.clear(),wf(null)},am=()=>xt.journal.toArray(),nS=e=>xt.journal.get(e),lm=e=>xt.journal.put(e),sm=()=>xt.knowledge.toArray(),C4=()=>xt.knowledge.clear(),E4=async e=>{const t=await xt.knowledge.get(e.name);if(t){const n={...t.relationships};for(const s in e.relationships){const u=e.relationships[s]||[],d=n[s]||[];n[s]=[...new Set([...d,...u])]}const i=wh({...t,relationships:n,sourceTags:e.sourceTags??t.sourceTags},t),a=await xt.knowledge.put(i);return await bh(i.sourceTags,{source:"knowledge"}),a}else{const n=wh(e),i=await xt.knowledge.add(n);return await bh(n.sourceTags,{source:"knowledge"}),i}},_4=e=>xt.transaction("rw",xt.knowledge,async()=>{for(const t of e)await E4(t)}),rS=()=>xt.threads.toArray(),iS=e=>xt.threads.put(e),A4=e=>xt.threads.delete(e).then(()=>{}),oS=()=>xt.hrmr.toArray(),k4=e=>xt.hrmr.get(e),aS=e=>xt.hrmr.put(e),lS=e=>xt.hrmr.delete(e).then(()=>{}),um=()=>xt.performers.toArray(),sS=async e=>{const t=await xt.performers.put(e);return dS(),t},N4=async e=>{await xt.performers.delete(e),dS()},uS=async(e,t)=>{const i=(await xt.performerMemories.where("performerId").equals(e).toArray()).sort((a,s)=>s.timestamp-a.timestamp);return typeof t=="number"?i.slice(0,t):i},M4=async e=>{const t=U4(e),n=await xt.performerMemories.add(t);return xh(t.performerId),n},R4=async e=>{if(e){const t=await xt.performerMemories.where("performerId").equals(e).primaryKeys();await xt.performerMemories.bulkDelete(t),xh(e)}else await xt.performerMemories.clear(),xh(null)},D4=async e=>{if(!e.length)return;await xt.performerInteractions.bulkAdd(e);const t=Array.from(new Set(e.map(n=>n.speakerId)));L4(t)},I4=async()=>xt.performerInteractions.toArray(),P4=async()=>{const e=await xt.performerInteractions.toArray(),t=new Map;return e.forEach(n=>{var u,d;const i=[n.speakerId,...n.targetIds].sort(),a=i.join("|");t.has(a)||t.set(a,{pairKey:a,participants:i,lastInteraction:n.timestamp,totalInteractions:0,sentimentSum:0,intrigueCount:0,tags:[]});const s=t.get(a);s.totalInteractions+=1,s.lastInteraction=Math.max(s.lastInteraction,n.timestamp),typeof n.sentiment=="number"&&(s.sentimentSum+=n.sentiment),(u=n.intrigueTags)!=null&&u.length&&(s.intrigueCount+=1,s.tags=Array.from(new Set([...s.tags,...n.intrigueTags]))),(d=n.narrativeTags)!=null&&d.length&&(s.tags=Array.from(new Set([...s.tags,...n.narrativeTags])))}),Array.from(t.values()).sort((n,i)=>i.lastInteraction-n.lastInteraction)},xh=e=>{typeof window<"u"&&window.dispatchEvent(new CustomEvent("performer-memories-updated",{detail:{performerId:e}}))},L4=e=>{typeof window<"u"&&window.dispatchEvent(new CustomEvent("performer-interactions-updated",{detail:{participantIds:e}}))},cS=async()=>(await xt.tagScores.toArray()).sort((t,n)=>n.score-t.score);async function bh(e,t={source:"memory"}){if(!(e!=null&&e.length))return;const n=Array.from(new Set(e.map(s=>s==null?void 0:s.toString().trim().toLowerCase()).filter(s=>!!s)));if(!n.length)return;const i=await xt.tagScores.bulkGet(n),a=[];n.forEach((s,u)=>{const d=i[u]?{...i[u]}:{tag:s,memoryCount:0,knowledgeCount:0,lastUpdated:Date.now(),score:0};if(t.source==="memory"){const p=Math.max(1,Math.round(t.relevance??1));d.memoryCount+=p}else d.knowledgeCount+=1;d.lastUpdated=Date.now(),a.push(fS(d))}),await xt.tagScores.bulkPut(a)}function fS(e){const t=e.memoryCount*.6+e.knowledgeCount*1.2;return{...e,score:Math.round(t*100)/100,lastUpdated:Date.now()}}const wf=e=>{typeof window<"u"&&window.dispatchEvent(new CustomEvent("memories-updated",{detail:{id:e}}))},dS=()=>{typeof window<"u"&&window.dispatchEvent(new Event("performers-updated"))},pS=e=>{if(!Array.isArray(e))return[];const t=new Set;return e.forEach(n=>{if(typeof n!="string")return;const i=n.replace(/^#+/,"").trim();i&&t.add(i.toLowerCase())}),Array.from(t)},cm=e=>{const t=e.timestamp??Date.now(),n=hS(t),i=pS(e.tags),a=Array.from(new Set([...e.metaTags??[],...n]));return{...e,timestamp:t,tags:i,metaTags:a}},U4=e=>{const t=e.timestamp??Date.now(),n=hS(t),i=Array.from(new Set([...pS(e.tags),...n]));return{...e,timestamp:t,tags:i}},hS=e=>{const t=new Date(e),n=t.toISOString().split("T")[0],i=t.getUTCFullYear(),a=`${i}-${String(t.getUTCMonth()+1).padStart(2,"0")}`,s=`${i}-W${String(O4(t)).padStart(2,"0")}`;return[`date:${n}`,`month:${a}`,`year:${i}`,`week:${s}`]},O4=e=>{const t=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())),n=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-n);const i=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t.getTime()-i.getTime())/864e5+1)/7)},wh=(e,t)=>{const n=Date.now(),i=e.relationships||{},a=Array.from(new Set([...(t==null?void 0:t.sourceTags)??[],...e.sourceTags??[]].filter(Boolean)));return{...t,...e,relationships:i,sourceTags:a,createdAt:(t==null?void 0:t.createdAt)??n,updatedAt:n}},fm=["google","openai","openrouter"],hu=["gemini-2.5-pro","gemini-2.5-flash","gemini-2.5-flash-lite"],mu=["gpt-5-chat-latest","gpt-5-2025-08-07","gpt-5-mini-2025-08-07","gpt-5-nano-2025-08-07","gpt-4.1-2025-04-14"],Sf=["x-ai/grok-4-fast","openai/gpt-5-nano","google/gemini-2.5-flash-lite-preview-09-2025","anthropic/claude-haiku-4.5"],kn={sentiment:{label:"Sentiment Lens",tagline:"Emotion + tone profile",instructions:"Deliver a crisp yet nuanced emotional analysis. Identify the dominant sentiment (with polarity score from -5 to +5), secondary emotions, intensity, and evidence from wording or context. Highlight any emotional contradictions.",formatHint:"Return Markdown with a bolded lead sentence summarizing sentiment, followed by bullet points for polarity, emotional cues, and recommended response tone.",relatedModules:["Emotion","Reasoning","Bias"]},subtext:{label:"Subtext Radar",tagline:"Hidden motives & context",instructions:"Surface the implicit layers beneath the message. Capture motives, unsaid assumptions, power dynamics, or risks. Note what might be strategically important moving forward.",formatHint:"Respond in Markdown with a short intro line and a bulleted breakdown of key subtext signals, implicit assumptions, and suggested follow-up questions.",relatedModules:["Reasoning","History"]},reverse:{label:"Reverse Reasoning",tagline:"Backtrace the logic",instructions:"Reconstruct the likely reasoning chain that led to this message. Outline the goal, key decision points, supporting evidence, and uncertainties. Call out any leaps in logic.",formatHint:'Provide a numbered list that traces the reasoning steps, ending with a brief "Confidence" line that rates certainty from 0-100%.',relatedModules:["Reasoning","History"]},calendar:{label:"Calendar Summary",tagline:"Capture scheduling cues",instructions:"Identify any deadlines, meetings, or time-sensitive commitments implied by the message. Convert them into structured scheduling insights and note owner/responsible parties.",formatHint:'Reply in Markdown with a concise summary and a small calendar-ready block including title, when, duration, and next action. Mention "No scheduling signals detected." if none are found.',relatedModules:["Temporal","History"]},spatial:{label:"Spatial Mapping",tagline:"Physical positioning cues",instructions:"Interpret spatial language, references to locations, movement, or relational positioning. Identify any implicit proximities or spatial constraints that influence collaboration or safety.",formatHint:"Respond with a compact Markdown block outlining key spatial anchors, relative positions, and suggested actions that consider the physical layout.",relatedModules:["Stage","Temporal"]},temporal:{label:"Temporal Tracker",tagline:"Time & sequencing focus",instructions:"Extract all time-oriented details, sequencing cues, deadlines, and cadence expectations. Highlight dependencies or conflicts across the timeline.",formatHint:"Produce a Markdown snippet with a timeline summary, critical milestones, and notes about urgency or latency.",relatedModules:["Calendar","History"]},bias:{label:"Bias Monitor",tagline:"Bias & framing audit",instructions:"Scan for cognitive, linguistic, or framing biases. Call out potentially skewed assumptions, charged language, or one-sided framing. Offer balancing counterpoints when relevant.",formatHint:"Return a Markdown section with detected bias types, quoted evidence, and mitigation recommendations.",relatedModules:["Reasoning","Sentiment"]},history:{label:"History Recall",tagline:"Context alignment",instructions:"Evaluate alignment between the current message and prior context. Surface callbacks, inconsistencies, or evolved stances that matter for continuity.",formatHint:"Reply with references to past events, highlight consistencies or drift, and note follow-ups to maintain continuity.",relatedModules:["Temporal","Memory"]}},Sh=1e4,Ln={provider:"google",googleApiKey:"",googleModel:"gemini-2.5-flash",openaiApiKey:"",openaiModel:"gpt-5-mini-2025-08-07",openRouterApiKey:"",openRouterModel:"openai/gpt-5-nano",admonitionVisibility:{preflection:!0,monologue:!0,stageDirections:!0,memory:!0,tasks:!0,audit:!0,postProcessing:!0},maxOutputTokens:Sh},mS="aiSettings",B4="systemInstruction",dm=()=>typeof window<"u"?window.localStorage:null,Wr=()=>{var t,n,i,a,s,u,d;const e=dm();if(!e)return Ln;try{const p=e.getItem(mS);if(!p)return Ln;const f=JSON.parse(p);return{provider:fm.includes(f.provider)?f.provider:Ln.provider,googleApiKey:typeof f.googleApiKey=="string"?f.googleApiKey:Ln.googleApiKey,googleModel:hu.includes(f.googleModel)?f.googleModel:Ln.googleModel,openaiApiKey:typeof f.openaiApiKey=="string"?f.openaiApiKey:Ln.openaiApiKey,openaiModel:mu.includes(f.openaiModel)?f.openaiModel:Ln.openaiModel,openRouterApiKey:typeof f.openRouterApiKey=="string"?f.openRouterApiKey:Ln.openRouterApiKey,openRouterModel:Sf.includes(f.openRouterModel)?f.openRouterModel:Ln.openRouterModel,admonitionVisibility:{preflection:((t=f.admonitionVisibility)==null?void 0:t.preflection)??Ln.admonitionVisibility.preflection,monologue:((n=f.admonitionVisibility)==null?void 0:n.monologue)??Ln.admonitionVisibility.monologue,stageDirections:((i=f.admonitionVisibility)==null?void 0:i.stageDirections)??Ln.admonitionVisibility.stageDirections,memory:((a=f.admonitionVisibility)==null?void 0:a.memory)??Ln.admonitionVisibility.memory,tasks:((s=f.admonitionVisibility)==null?void 0:s.tasks)??Ln.admonitionVisibility.tasks,audit:((u=f.admonitionVisibility)==null?void 0:u.audit)??Ln.admonitionVisibility.audit,postProcessing:((d=f.admonitionVisibility)==null?void 0:d.postProcessing)??Ln.admonitionVisibility.postProcessing},maxOutputTokens:typeof f.maxOutputTokens=="number"&&f.maxOutputTokens>0?f.maxOutputTokens:Ln.maxOutputTokens}}catch(p){return console.warn("Failed to load AI settings from storage, falling back to defaults.",p),Ln}},z4=e=>{const t=dm();t&&(t.setItem(mS,JSON.stringify(e)),typeof window<"u"&&window.dispatchEvent(new Event("ai-settings-updated")))},q4=()=>{const e=dm();return e?e.getItem(B4):null},gS={type:"object",properties:{preflection:{type:"string",description:"Internal reasoning before responding."},internalMonologue:{type:"string",description:"A performative internal monologue for narrative transparency."},stageDirections:{type:"string",description:"Physical or contextual stage directions to accompany the response."},response:{type:"string",description:"Final Markdown response for the user."},tasks:{type:"array",description:"List of actionable tasks.",items:{type:"object",properties:{id:{type:"string",description:"Unique task identifier."},description:{type:"string",description:"Task description."}},required:["id","description"],additionalProperties:!1}},memory:{type:"object",description:"Memory entry to store.",properties:{summary:{type:"string",description:"Conversation summary."},tags:{type:"array",description:"3-5 relevant keywords.",items:{type:"string"}}},required:["summary","tags"],additionalProperties:!1},audit:{type:"object",description:"Self-audit of generated tasks.",properties:{completedTasks:{type:"array",items:{type:"string"},description:"Tasks completed in the response."},pendingTasks:{type:"array",items:{type:"string"},description:"Tasks that remain pending."},commentary:{type:"string",description:"Reflection on task coverage."}},required:["completedTasks","pendingTasks","commentary"],additionalProperties:!1}},required:["preflection","internalMonologue","stageDirections","response","tasks","memory","audit"],additionalProperties:!1},j4={type:Ze.OBJECT,properties:{preflection:{type:Ze.STRING,description:"Internal reasoning before responding."},internalMonologue:{type:Ze.STRING,description:"A performative internal monologue for narrative transparency."},stageDirections:{type:Ze.STRING,description:"Physical or contextual stage directions to accompany the response."},response:{type:Ze.STRING,description:"Final Markdown response for the user."},tasks:{type:Ze.ARRAY,description:"List of actionable tasks.",items:{type:Ze.OBJECT,properties:{id:{type:Ze.STRING,description:"Unique task identifier."},description:{type:Ze.STRING,description:"Task description."}},required:["id","description"],additionalProperties:!1}},memory:{type:Ze.OBJECT,description:"Memory entry to store.",properties:{summary:{type:Ze.STRING,description:"Conversation summary."},tags:{type:Ze.ARRAY,description:"3-5 relevant keywords.",items:{type:Ze.STRING}}},required:["summary","tags"],additionalProperties:!1},audit:{type:Ze.OBJECT,description:"Self-audit of generated tasks.",properties:{completedTasks:{type:Ze.ARRAY,items:{type:Ze.STRING},description:"Tasks completed in the response."},pendingTasks:{type:Ze.ARRAY,items:{type:Ze.STRING},description:"Tasks that remain pending."},commentary:{type:Ze.STRING,description:"Reflection on task coverage."}},required:["completedTasks","pendingTasks","commentary"],additionalProperties:!1}},required:["preflection","internalMonologue","stageDirections","response","tasks","memory","audit"],additionalProperties:!1},H4={type:"object",properties:{relationships:{type:"array",description:"Identified relationships between entities.",items:{type:"object",properties:{source:{type:"string",description:"Source entity name."},type:{type:"string",description:"Relationship verb or phrase."},target:{type:"string",description:"Target entity name."}},required:["source","type","target"]}}},required:["relationships"],additionalProperties:!1},F4={type:Ze.OBJECT,properties:{relationships:{type:Ze.ARRAY,description:"Identified relationships between entities.",items:{type:Ze.OBJECT,properties:{source:{type:Ze.STRING,description:"Source entity name."},type:{type:Ze.STRING,description:"Relationship verb or phrase."},target:{type:Ze.STRING,description:"Target entity name."}},required:["source","type","target"]}}},required:["relationships"]},V4={type:"object",properties:{title:{type:"string",description:"Concise conversation title (<= 8 words)."},summary:{type:"string",description:"High-level overview in <= 120 words."},tags:{type:"array",items:{type:"string"},description:"Three to five topical tags."},journalNote:{type:"string",description:"Two-sentence entry fit for the temporal journal."}},required:["title","summary","journalNote"],additionalProperties:!1},G4={type:Ze.OBJECT,properties:{title:{type:Ze.STRING,description:"Concise conversation title (<= 8 words)."},summary:{type:Ze.STRING,description:"High-level overview in <= 120 words."},tags:{type:Ze.ARRAY,description:"Three to five topical tags.",items:{type:Ze.STRING}},journalNote:{type:Ze.STRING,description:"Two-sentence entry fit for the temporal journal."}},required:["title","summary","journalNote"]},Y4={type:"object",properties:{summary:{type:"string",description:"Concise summary of the chunk."},tags:{type:"array",items:{type:"string"},minItems:2,maxItems:6,description:"Relevant keywords for retrieval."},relevance:{type:"number",minimum:0,maximum:10,description:"Initial importance score 0-10."}},required:["summary","tags","relevance"],additionalProperties:!1},K4={type:Ze.OBJECT,properties:{summary:{type:Ze.STRING,description:"Concise summary of the chunk."},tags:{type:Ze.ARRAY,description:"Relevant keywords for retrieval.",items:{type:Ze.STRING}},relevance:{type:Ze.NUMBER,description:"Initial importance score 0-10."}},required:["summary","tags","relevance"]},J4={type:"object",properties:{finalScore:{type:"number",minimum:0,maximum:10,description:"Final importance score 0-10."},justification:{type:"string",description:"One paragraph justification for the score."},dimensions:{type:"object",properties:{novelty:{type:"number",minimum:0,maximum:10,description:"Novelty / new knowledge score."},coachingValue:{type:"number",minimum:0,maximum:10,description:"Helps improve future interactions."},operationalImpact:{type:"number",minimum:0,maximum:10,description:"Direct project or execution impact."},emotionalSignal:{type:"number",minimum:0,maximum:10,description:"Emotional / relationship signal strength."}},required:["novelty","coachingValue","operationalImpact","emotionalSignal"],additionalProperties:!1}},required:["finalScore","justification","dimensions"],additionalProperties:!1},$4={type:Ze.OBJECT,properties:{finalScore:{type:Ze.NUMBER,description:"Final importance score 0-10."},justification:{type:Ze.STRING,description:"One paragraph justification for the score."},dimensions:{type:Ze.OBJECT,properties:{novelty:{type:Ze.NUMBER},coachingValue:{type:Ze.NUMBER},operationalImpact:{type:Ze.NUMBER},emotionalSignal:{type:Ze.NUMBER}},required:["novelty","coachingValue","operationalImpact","emotionalSignal"],additionalProperties:!1}},required:["finalScore","justification","dimensions"]},X4=(e,t=280)=>e?e.length<=t?e:`${e.slice(0,t-3)}...`:"",pm=(e,t=5)=>!e||e.length===0?null:[...e].sort((s,u)=>(u.date||"").localeCompare(s.date||"")).slice(0,t).map(s=>{const u=X4(s.content||"");return`- ${s.date}: ${u||"[No details provided]"}`}).join(`
`),Q4=(e,t=4)=>!e||e.length===0?null:e.slice(0,t).map(i=>{const a=new Date(i.timestamp).toISOString().split("T")[0],s=i.tags.slice(0,4).map(u=>`#${u.replace(/\s+/g,"-")}`).join(" ");return`- ${a}  ${i.summary}${s?` (${s})`:""}`}).join(`
`),yS=(e,t,n,i)=>{let a=`You are JIT, a helpful AI agent. Always reply using a single JSON object that strictly matches this schema:
${JSON.stringify(gS,null,2)}
`;e.usePreflection?a+=`
- The 'preflection' field is mandatory. Use it for step-by-step reasoning.`:a+=`
- Set the 'preflection' field to an empty string.`,e.useMonologue?a+=`
- Produce an expressive 'internalMonologue' field capturing tone, instincts, and narrative flair (2-3 sentences).`:a+=`
- The 'internalMonologue' field should be an empty string.`,e.useStageDirections?a+=`
- Populate 'stageDirections' with concise physical or environmental cues that frame the response (max 2 sentences).`:a+=`
- Leave 'stageDirections' as an empty string.`,e.useMemory?a+=`
- The 'memory' field is mandatory. Summarize key takeaways and include tags.`:a+=`
- Omit the 'memory' field when it's not required.`,e.useTaskList?a+=`
- The 'tasks' field is mandatory when actionable items exist. Provide clear task IDs.`:a+=`
- Omit the 'tasks' array unless tasks are explicitly needed.`,e.useAudit&&e.useTaskList?a+=`
- The 'audit' field is mandatory. Compare generated tasks against the response.`:a+=`
- Omit the 'audit' field when task auditing is disabled.`,t&&t.trim().length>0&&(a+=`

Temporal Journal Snapshot (most recent entries):
${t}
- Factor these dates and commitments into scheduling advice, reminders, and task planning.`),n&&n.trim().length>0&&(a+=`

Knowledge Graph Excerpts:
${n}
- Cross-reference these relationships when relevant.`),i&&i.trim().length>0&&(a+=`

Memory Recall Primer:
${i}
- Treat these as high-signal memories. Reference them when they improve accuracy or continuity.`);const s=q4();return s&&s.trim().length>0&&(a+=`

Additional persona or behavior guidelines:
${s.trim()}`),a+=`

Reply with JSON onlyno additional commentary or Markdown outside the JSON object.`,a},W4=(e,t,n,i,a)=>{var p;const s=[],u=(p=e.prompt)==null?void 0:p.trim();u&&u.length>0&&s.push(u);const d=["Boardroom Charter:","- Operate as a specialist executive collaborating alongside Sylvia (the core agent).","- Keep responses concise, insight-driven, and use Markdown formatting when helpful.","- Surface risks, opportunities, and action items explicitly.","- Address the user directly but feel free to reference Sylvia or other performers as peers."];return t.usePreflection&&d.push("- Offer a short internal rationale when it sharpens the recommendation."),t.useStageDirections&&d.push("- Include stage directions when physical context or presence matters."),s.push(d.join(`
`)),n&&n.trim().length>0&&s.push(`Temporal Signals:
${n}`),i&&i.trim().length>0&&s.push(`Shared Knowledge Highlights:
${i}`),a&&a.trim().length>0&&s.push(`Your Recent Insights:
${a}`),s.push(`Collaboration Protocol:
- Deliver your analysis as ${e.name}.
- Conclude with clear handoff language so Sylvia can synthesize the next move.
- Do not attempt to speak for Sylvia; offer complementary perspective.`),s.join(`

`)},vS=e=>{const t=Array.isArray(e==null?void 0:e.tasks)?e.tasks.filter(p=>typeof(p==null?void 0:p.id)=="string"&&typeof(p==null?void 0:p.description)=="string").map(p=>({id:p.id,description:p.description})):void 0,n=e!=null&&e.memory&&typeof e.memory.summary=="string"?{summary:e.memory.summary,tags:Array.isArray(e.memory.tags)?e.memory.tags.filter(p=>typeof p=="string"):[]}:void 0,i=e!=null&&e.audit&&typeof e.audit.commentary=="string"?{commentary:e.audit.commentary,completedTasks:Array.isArray(e.audit.completedTasks)?e.audit.completedTasks.filter(p=>typeof p=="string"):[],pendingTasks:Array.isArray(e.audit.pendingTasks)?e.audit.pendingTasks.filter(p=>typeof p=="string"):[]}:void 0,a=typeof(e==null?void 0:e.preflection)=="string"&&e.preflection.trim().length>0?e.preflection:void 0,s=typeof(e==null?void 0:e.internalMonologue)=="string"&&e.internalMonologue.trim().length>0?e.internalMonologue:void 0,u=typeof(e==null?void 0:e.stageDirections)=="string"&&e.stageDirections.trim().length>0?e.stageDirections:void 0,d=typeof(e==null?void 0:e.response)=="string"&&e.response.trim().length>0?e.response:"Sorry, I couldn't generate a response.";return{preflection:a,internalMonologue:s,stageDirections:u,response:d,tasks:t&&t.length>0?t:void 0,memory:n,audit:i}},gu=e=>{if(typeof e=="string")return JSON.parse(e);if(Array.isArray(e)){const t=e.map(n=>typeof n=="object"&&n&&"text"in n?n.text:"").join("").trim();if(!t)throw new Error("Model response did not contain textual JSON content.");return JSON.parse(t)}throw new Error("Model response had an unexpected content format.")},xS=e=>{if(!e)return"";const t=e.content;return typeof t=="string"?t.trim():Array.isArray(t)?t.map(n=>typeof(n==null?void 0:n.text)=="string"?n.text:"").join("").trim():""},Z4=e=>e.map(t=>({role:t.role==="user"?"user":"assistant",content:[{type:"text",text:t.content}]})),eL=e=>e?e.replace(/```[\s\S]*?```/g,"[code]").replace(/`([^`]+)`/g,"$1").replace(/!\[[^\]]*\]\([^\)]*\)/g,"[image]").replace(/\[([^\]]+)\]\([^\)]+\)/g,"$1").replace(/\s+/g," ").trim():"",tL=(e,t=14)=>!e||e.length===0?"[No conversation captured]":e.slice(-t).map(i=>`${i.role==="user"?"User":"Agent"}: ${eL(i.content)}`).join(`
`),Fr=(e,t)=>{if(!e||e.trim().length===0)throw new Error(`No API key configured for ${t}. Please provide one in Settings.`)},Ca=async({url:e,headers:t,body:n})=>{const i=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",...t},body:JSON.stringify(n)});if(!i.ok){const a=await i.text();throw new Error(`API request failed with status ${i.status}: ${a}`)}return i.json()},bS=async(e,t,n,i,a,s,u,d,p,f)=>{var I;const g=d||i.googleApiKey;Fr(g,"google");const b=new Ta({apiKey:g}),T=[{text:e}];n&&T.unshift({inlineData:{mimeType:"image/jpeg",data:n}});const k=(I=(await b.models.generateContent({model:u||i.googleModel,contents:{role:"user",parts:T},config:{systemInstruction:s||yS(t,a,p,f),responseMimeType:"application/json",responseSchema:j4,maxOutputTokens:Math.min(i.maxOutputTokens||Sh,Sh)}})).text)==null?void 0:I.trim();if(!k)throw new Error("Google response did not include text content.");return vS(JSON.parse(k))},nL=async(e,t,n=.3,i)=>{var d;Fr(t.googleApiKey,"google");const u=(d=(await new Ta({apiKey:t.googleApiKey}).models.generateContent({model:t.googleModel,contents:[{role:"user",parts:[{text:e}]}],config:{systemInstruction:i,responseMimeType:"text/plain",temperature:n}})).text)==null?void 0:d.trim();if(!u)throw new Error("Google response did not include text content.");return u},rL=(e,t,n)=>{const i=Z4(t),a=[{type:"text",text:e}];return n&&a.push({type:"input_image",image_base64:n,media_type:"image/jpeg"}),[{role:"system",content:[{type:"text",text:"System prompt placeholder"}]},...i,{role:"user",content:a}]},ef=async(e,t,n,i,a,s,u,d,p,f,g,b)=>{var Y,me,j;const T=e==="openai",E=f||(T?s.openaiApiKey:s.openRouterApiKey);Fr(E,e);const k=p||(T?s.openaiModel:s.openRouterModel),I=T?"https://api.openai.com/v1/chat/completions":"https://openrouter.ai/api/v1/chat/completions",D=d||yS(i,u,g,b),M=rL(t,n,a);M[0]={role:"system",content:[{type:"text",text:D}]};const U={Authorization:`Bearer ${E}`};T||(typeof window<"u"&&((Y=window.location)!=null&&Y.origin)&&(U["HTTP-Referer"]=window.location.origin),U["X-Title"]="Sylvia");const se=await Ca({url:I,headers:U,body:{model:k,temperature:.7,messages:M,response_format:{type:"json_schema",json_schema:{name:"AgentResponse",schema:gS,strict:!0}}}}),Q=(j=(me=se==null?void 0:se.choices)==null?void 0:me[0])==null?void 0:j.message;if(!Q)throw new Error("Model did not return a message.");const G=gu(Q.content);return vS(G)},qx=async(e,t,n,i=.3,a)=>{var I,D,M;const s=e==="openai",u=s?n.openaiApiKey:n.openRouterApiKey;Fr(u,e);const d=s?n.openaiModel:n.openRouterModel,p=s?"https://api.openai.com/v1/chat/completions":"https://openrouter.ai/api/v1/chat/completions",f={Authorization:`Bearer ${u}`};s||(typeof window<"u"&&((I=window.location)!=null&&I.origin)&&(f["HTTP-Referer"]=window.location.origin),f["X-Title"]="Sylvia");const T=await Ca({url:p,headers:f,body:{model:d,temperature:i,messages:[{role:"system",content:[{type:"text",text:a}]},{role:"user",content:[{type:"text",text:t}]}]}}),E=(M=(D=T==null?void 0:T.choices)==null?void 0:D[0])==null?void 0:M.message;if(!E)throw new Error("Model did not return a message.");const k=xS(E);if(!k)throw new Error("Model message did not contain text content.");return k},iL=async(e,t,n,i,a={})=>{const s=Wr(),u=pm(a.temporalEntries??[])||null,d=SS(t),p=hm(e),f=Array.from(new Set([...d,...p]));let g=null;try{const T=await sm();g=wS(T,f)}catch(T){console.warn("Unable to load knowledge graph for primer:",T)}const b=Q4(a.contextMemories);try{switch(s.provider){case"google":return await bS(e,n,i,s,u,void 0,void 0,void 0,g,b);case"openai":return await ef("openai",e,t,n,i,s,u,void 0,void 0,void 0,g,b);case"openrouter":return await ef("openrouter",e,t,n,i,s,u,void 0,void 0,void 0,g,b);default:throw new Error(`Unsupported provider: ${s.provider}`)}}catch(T){return console.error("Error generating agent response:",T),{response:"Sorry, I encountered an error while processing your request. Please check your AI settings and try again."}}},oL=async(e,t=5)=>{try{const n=await uS(e,t);return n.length?n.map(a=>{const s=new Date(a.timestamp).toISOString().split("T")[0],u=a.tags.slice(0,3).map(d=>`#${d.replace(/\s+/g,"-")}`).join(" ");return`- **${s}**  ${a.summary}${u?` (${u})`:""}`}).join(`
`):null}catch(n){return console.warn("Failed to build performer memory primer:",n),null}},aL=async(e,t,n,i,a,s={})=>{const u=Wr(),d=pm(s.temporalEntries??[])||null,p=SS(n),f=hm(t),g=Array.from(new Set([...p,...f]));let b=null;if(e.memoryEnabled!==!1)try{b=await oL(e.id)}catch(k){console.warn("Unable to load performer memories:",k)}let T=null;try{const k=await sm();T=wS(k,g,t.toLowerCase())}catch(k){console.warn("Unable to load knowledge graph for performer:",k)}const E=W4(e,i,d,T,b);switch(e.provider){case"google":return bS(t,i,a,u,d,E,e.model,e.apiKey||u.googleApiKey,T,void 0);case"openai":return ef("openai",t,n,i,a,u,d,E,e.model,e.apiKey||u.openaiApiKey,T,void 0);case"openrouter":return ef("openrouter",t,n,i,a,u,d,E,e.model,e.apiKey||u.openRouterApiKey,T,void 0);default:throw new Error(`Unsupported performer provider: ${e.provider}`)}},lL=async(e,t)=>{var a,s,u,d;const n=Wr(),i=t.temperature??.2;switch(t.provider){case"google":{const p=t.apiKey||n.googleApiKey;Fr(p,"google");const b=(a=(await new Ta({apiKey:p}).models.generateContent({model:t.model||n.googleModel,contents:[{role:"user",parts:[{text:e}]}],config:{systemInstruction:Hx,responseMimeType:"application/json",responseSchema:K4,temperature:i}})).text)==null?void 0:a.trim();if(!b)throw new Error("Memory generation returned no content.");const T=JSON.parse(b);return{summary:T.summary,tags:Array.isArray(T.tags)?T.tags:[],relevance:typeof T.relevance=="number"?T.relevance:5}}case"openai":case"openrouter":{const p=t.provider,f=p==="openai",g=t.apiKey||(f?n.openaiApiKey:n.openRouterApiKey);Fr(g,p);const b=t.model||(f?n.openaiModel:n.openRouterModel),T=f?"https://api.openai.com/v1/chat/completions":"https://openrouter.ai/api/v1/chat/completions",E={Authorization:`Bearer ${g}`};f||(typeof window<"u"&&((s=window.location)!=null&&s.origin)&&(E["HTTP-Referer"]=window.location.origin),E["X-Title"]="Sylvia Memory Onboarding");const I=await Ca({url:T,headers:E,body:{model:b,temperature:i,messages:[{role:"system",content:[{type:"text",text:Hx}]},{role:"user",content:[{type:"text",text:e}]}],response_format:{type:"json_schema",json_schema:{name:"MemoryGeneration",schema:Y4,strict:!0}}}}),D=(d=(u=I==null?void 0:I.choices)==null?void 0:u[0])==null?void 0:d.message;if(!D)throw new Error("Memory generation response missing message.");const M=gu(D.content);return{summary:(M==null?void 0:M.summary)||e.slice(0,240),tags:Array.isArray(M==null?void 0:M.tags)?M.tags:[],relevance:typeof(M==null?void 0:M.relevance)=="number"?M.relevance:5}}default:throw new Error(`Unsupported provider: ${t.provider}`)}},sL=async(e,t)=>{var a,s,u,d;const n=Wr(),i=t.temperature??.1;switch(t.provider){case"google":{const p=t.apiKey||n.googleApiKey;Fr(p,"google");const b=(a=(await new Ta({apiKey:p}).models.generateContent({model:t.model||n.googleModel,contents:[{role:"user",parts:[{text:e}]}],config:{systemInstruction:Fx,responseMimeType:"application/json",responseSchema:$4,temperature:i}})).text)==null?void 0:a.trim();return b?JSON.parse(b):null}case"openai":case"openrouter":{const p=t.provider,f=p==="openai",g=t.apiKey||(f?n.openaiApiKey:n.openRouterApiKey);Fr(g,p);const b=t.model||(f?n.openaiModel:n.openRouterModel),T=f?"https://api.openai.com/v1/chat/completions":"https://openrouter.ai/api/v1/chat/completions",E={Authorization:`Bearer ${g}`};f||(typeof window<"u"&&((s=window.location)!=null&&s.origin)&&(E["HTTP-Referer"]=window.location.origin),E["X-Title"]="Sylvia Memory Evaluation");const I=await Ca({url:T,headers:E,body:{model:b,temperature:i,messages:[{role:"system",content:[{type:"text",text:Fx}]},{role:"user",content:[{type:"text",text:e}]}],response_format:{type:"json_schema",json_schema:{name:"MemoryEvaluation",schema:J4,strict:!0}}}}),D=(d=(u=I==null?void 0:I.choices)==null?void 0:u[0])==null?void 0:d.message;return D?gu(D.content):null}default:return null}},uL=async(e,t,n)=>{var i,a,s,u;try{switch(e){case"google":{const d=n.googleApiKey;if(!d)return null;const g=(i=(await new Ta({apiKey:d}).models.generateContent({model:n.googleModel,contents:[{role:"user",parts:[{text:t}]}],config:{systemInstruction:jx,responseMimeType:"text/plain",temperature:.1}})).text)==null?void 0:i.trim();return g&&g.length>0?g:null}case"openai":case"openrouter":{const d=e==="openai",p=d?n.openaiApiKey:n.openRouterApiKey;if(!p)return null;const f=d?n.openaiModel:n.openRouterModel,g=d?"https://api.openai.com/v1/chat/completions":"https://openrouter.ai/api/v1/chat/completions",b={Authorization:`Bearer ${p}`};d||(typeof window<"u"&&((a=window.location)!=null&&a.origin)&&(b["HTTP-Referer"]=window.location.origin),b["X-Title"]="Sylvia Prompt Rewrite");const E=await Ca({url:g,headers:b,body:{model:f,temperature:.1,messages:[{role:"system",content:[{type:"text",text:jx}]},{role:"user",content:[{type:"text",text:t}]}]}}),k=(u=(s=E==null?void 0:E.choices)==null?void 0:s[0])==null?void 0:u.message;if(!k)return null;const I=xS(k);return I&&I.length>0?I:null}default:return null}}catch(d){return console.warn(`Prompt rewrite via ${e} failed:`,d),null}},cL=async e=>{const t=e==null?void 0:e.trim();if(!t)return e;const n=Wr(),i=Array.from(new Set([n.provider,"google","openai","openrouter"]));for(const a of i){const s=await uL(a,t,n);if(s&&s.trim().length>0&&s.trim()!==t)return s.trim()}return e},jx="You are an expert writing assistant. Rewrite the following user request so it is clear, concise, grammatically correct, and preserves the original intent and level of formality. Do not add new ideas.",Hx="You are Sylvia's memory curator. Given raw source text, distill a crisp summary, list 3-5 keywords, and assign a relevance score from 0-10 (10 = vital, 0 = disposable). Return JSON only.",Fx=`You are Sylvia's reinforcement analyst. Evaluate the supplied memory summary against these axes:
- Novelty: Is this substantively new knowledge for Sylvia?
- Coaching value: Will this help Sylvia respond more intelligently later?
- Operational impact: Does it affect projects, deadlines, or commitments?
- Emotional signal: Does it capture tone, trust, or relationship signals?
Provide each score between 0-10 and a concise justification referencing the summary. Compute a weighted final score (40% novelty, 25% coaching value, 25% operational impact, 10% emotional). Return JSON only.`,jp=`You are Sylvia's post-processing specialist. Inspect the provided message in isolation and apply the requested analytical tool. Follow the "Output Expectations" and "Formatting Requirements" verbatim, cite evidence from the message, and keep the voice precise and professional. If the message lacks enough signal for the tool, say so while still honoring the requested format. Never fabricate context beyond what is supplied.`,Vx="You are Sylvia's conversation archivist. Given a chat transcript, produce a crisp record that leadership can skim quickly. Return valid JSON with keys: title (<= 8 words), summary (<= 120 words), tags (3-5 topical single-word or hyphenated strings), and journalNote (two sentences linking to upcoming follow-ups or timing cues). Use factual, chronological language and avoid markdown or filler.",wS=(e,t,n)=>{if(!e.length||!(t!=null&&t.length))return null;const i=new Set(t.map(u=>u.toLowerCase())),a=e.filter(u=>{const d=u.name.toLowerCase();return i.has(d)||n.includes(d)?!0:Object.entries(u.relationships||{}).some(([p,f])=>i.has(p.replace(/_/g," ").toLowerCase())?!0:(f||[]).some(g=>i.has(g.toLowerCase())))});if(!a.length)return null;const s=[];return a.slice(0,8).forEach(u=>{s.push(` ${u.name}`),Object.entries(u.relationships||{}).slice(0,6).forEach(([d,p])=>{if(!(p!=null&&p.length))return;const f=d.replace(/_/g," "),g=p.slice(0,6).join(", ");s.push(`   - ${f}: ${g}`)})}),s.join(`
`)},hm=e=>{if(!e)return[];const t=e.split(/[^A-Za-z0-9_]+/g).filter(Boolean),n=new Set;return t.forEach(i=>{i.length>3&&n.add(i.toLowerCase())}),Array.from(n).slice(0,12)},SS=e=>{const t=new Set;return e.slice(-12).forEach(n=>{var i,a,s;(s=(a=(i=n.agentResponseParts)==null?void 0:i.memory)==null?void 0:a.tags)==null||s.forEach(u=>{typeof u=="string"&&u.trim().length>1&&t.add(u.trim().toLowerCase())})}),Array.from(t).slice(0,12)},fL=e=>{const t=new Date(e),n=t.toISOString().split("T")[0],i=t.getUTCFullYear(),a=`${i}-${String(t.getUTCMonth()+1).padStart(2,"0")}`,s=`${i}-W${String(dL(t)).padStart(2,"0")}`,u=t.toLocaleDateString("en-US",{weekday:"short",timeZone:"UTC"}).toLowerCase();return[`date:${n}`,`month:${a}`,`year:${i}`,`week:${s}`,`dow:${u}`]},dL=e=>{const t=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())),n=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-n);const i=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t.getTime()-i.getTime())/864e5+1)/7)},pL=(e,t,n,i)=>{const a=kn[e],s=n==="user"?"user":"agent",u=(t==null?void 0:t.trim())||"[No textual content provided.]";return[`Apply the ${a.label} tool to the following ${s} message.`,"","Message:",'"""',u,'"""',"",i&&i.trim().length>0?`Temporal Journal Snapshot:
${i}

Use this context to detect scheduling conflicts or complementary follow-ups.

`:"","Output Expectations:",a.instructions,"","Formatting Requirements:",a.formatHint].join(`
`)},hL=async(e,t,n)=>{const i=Wr();let a=null;if(e==="calendar")try{const u=await am();a=pm(u)||null}catch(u){console.error("Failed to load temporal context for post-processing:",u)}const s=pL(e,t,n,a);switch(i.provider){case"google":return nL(s,i,.4,jp);case"openai":return qx("openai",s,i,.4,jp);case"openrouter":return qx("openrouter",s,i,.4,jp);default:throw new Error(`Unsupported provider: ${i.provider}`)}},mL=async e=>{var a,s,u,d;const t=Wr(),i=["Transcript:",'"""',tL(e),'"""'].join(`
`);switch(t.provider){case"google":{Fr(t.googleApiKey,"google");const g=(a=(await new Ta({apiKey:t.googleApiKey}).models.generateContent({model:t.googleModel,contents:[{role:"user",parts:[{text:i}]}],config:{systemInstruction:Vx,responseMimeType:"application/json",responseSchema:G4,temperature:.3}})).text)==null?void 0:a.trim();if(!g)throw new Error("Thread summary request returned no content.");const b=JSON.parse(g);return{title:b.title||"Conversation Snapshot",summary:b.summary||"",tags:Array.isArray(b.tags)?b.tags.filter(T=>typeof T=="string"):[],journalNote:b.journalNote||""}}case"openai":case"openrouter":{const p=t.provider,f=p==="openai",g=f?t.openaiApiKey:t.openRouterApiKey;Fr(g,p);const b=f?t.openaiModel:t.openRouterModel,T=f?"https://api.openai.com/v1/chat/completions":"https://openrouter.ai/api/v1/chat/completions",E={Authorization:`Bearer ${g}`};f||(typeof window<"u"&&((s=window.location)!=null&&s.origin)&&(E["HTTP-Referer"]=window.location.origin),E["X-Title"]="Sylvia");const I=await Ca({url:T,headers:E,body:{model:b,temperature:.3,messages:[{role:"system",content:[{type:"text",text:Vx}]},{role:"user",content:[{type:"text",text:i}]}],response_format:{type:"json_schema",json_schema:{name:"ThreadSummary",schema:V4,strict:!0}}}}),D=(d=(u=I==null?void 0:I.choices)==null?void 0:u[0])==null?void 0:d.message;if(!D)throw new Error("Thread summary request returned no message.");const M=gu(D.content);return{title:(M==null?void 0:M.title)||"Conversation Snapshot",summary:(M==null?void 0:M.summary)||"",tags:Array.isArray(M==null?void 0:M.tags)?M.tags.filter(U=>typeof U=="string"):[],journalNote:(M==null?void 0:M.journalNote)||""}}default:throw new Error(`Unsupported provider: ${t.provider}`)}},TS=e=>!e||!Array.isArray(e.relationships)?[]:e.relationships.filter(t=>typeof(t==null?void 0:t.source)=="string"&&typeof(t==null?void 0:t.type)=="string"&&typeof(t==null?void 0:t.target)=="string").map(t=>({source:t.source,type:t.type,target:t.target})),gL=async(e,t)=>{if(!e.length){console.log("No relationships to store.");return}const n=new Map,i=(t==null?void 0:t.timestamp)??Date.now(),a=fL(i),s=Array.from(new Set([...(t==null?void 0:t.additionalTags)??[],...a]));for(const u of e){n.has(u.source)||n.set(u.source,{name:u.source,relationships:{},sourceTags:[],lastSeenConversationId:(t==null?void 0:t.conversationId)??null}),n.has(u.target)||n.set(u.target,{name:u.target,relationships:{},sourceTags:[],lastSeenConversationId:(t==null?void 0:t.conversationId)??null});const d=n.get(u.source),p=n.get(u.target),f=u.type.replace(/ /g,"_").toLowerCase();d.relationships[f]||(d.relationships[f]=[]),d.relationships[f].includes(u.target)||d.relationships[f].push(u.target),d.sourceTags=Array.from(new Set([...d.sourceTags??[],...s,`relation:${f}`])),p.sourceTags=Array.from(new Set([...p.sourceTags??[],...s,`relationship:${f}`])),p.lastSeenConversationId=(t==null?void 0:t.conversationId)??p.lastSeenConversationId??null,d.lastSeenConversationId=(t==null?void 0:t.conversationId)??d.lastSeenConversationId??null}await _4(Array.from(n.values()))},yL=async(e,t)=>{var s;Fr(t.googleApiKey,"google");const a=(s=(await new Ta({apiKey:t.googleApiKey}).models.generateContent({model:t.googleModel,contents:`Extract entities and their relationships from the following text. Respond using JSON only.

Text: "${e}"`,config:{responseMimeType:"application/json",responseSchema:F4}})).text)==null?void 0:s.trim();if(!a)throw new Error("Google response did not include entity data.");return TS(JSON.parse(a))},Gx=async(e,t,n)=>{var E,k,I;const i=e==="openai",a=i?n.openaiApiKey:n.openRouterApiKey;Fr(a,e);const s=i?n.openaiModel:n.openRouterModel,u=i?"https://api.openai.com/v1/chat/completions":"https://openrouter.ai/api/v1/chat/completions",d={Authorization:`Bearer ${a}`};i||(typeof window<"u"&&((E=window.location)!=null&&E.origin)&&(d["HTTP-Referer"]=window.location.origin),d["X-Title"]="Sylvia");const p=[{role:"system",content:[{type:"text",text:"Extract entities and their relationships. Respond with JSON only matching the provided schema."}]},{role:"user",content:[{type:"text",text:`Text:
"""${t}"""`}]}],g=await Ca({url:u,headers:d,body:{model:s,temperature:0,messages:p,response_format:{type:"json_schema",json_schema:{name:"EntityExtraction",schema:H4,strict:!0}}}}),b=(I=(k=g==null?void 0:g.choices)==null?void 0:k[0])==null?void 0:I.message;if(!b)throw new Error("Model did not return entity data.");const T=gu(b.content);return TS(T)},vL=async(e,t)=>{const n=Wr();try{let i=[];switch(n.provider){case"google":i=await yL(e,n);break;case"openai":i=await Gx("openai",e,n);break;case"openrouter":i=await Gx("openrouter",e,n);break;default:throw new Error(`Unsupported provider: ${n.provider}`)}const a=(t==null?void 0:t.timestamp)??Date.now(),s=Array.from(new Set([...(t==null?void 0:t.tags)??[],...hm(e)]));await gL(i,{conversationId:t==null?void 0:t.conversationId,timestamp:a,additionalTags:s})}catch(i){throw console.error("Error processing entities:",i),i}},Th=[{id:"sentiment",label:kn.sentiment.label,description:kn.sentiment.tagline,Icon:jC,iconOnly:!0},{id:"subtext",label:kn.subtext.label,description:kn.subtext.tagline,Icon:sf,iconOnly:!0},{id:"reverse",label:kn.reverse.label,description:kn.reverse.tagline,Icon:uf,iconOnly:!0},{id:"calendar",label:kn.calendar.label,description:kn.calendar.tagline,Icon:OC,iconOnly:!0},{id:"spatial",label:kn.spatial.label,description:kn.spatial.tagline,Icon:Rh,iconOnly:!0},{id:"temporal",label:kn.temporal.label,description:kn.temporal.tagline,Icon:Dh,iconOnly:!0},{id:"bias",label:kn.bias.label,description:kn.bias.tagline,Icon:Ih,iconOnly:!0},{id:"history",label:kn.history.label,description:kn.history.tagline,Icon:Ph,iconOnly:!0}],Pc=({onClick:e,disabled:t=!1,isActive:n=!1,label:i,tooltip:a,children:s,iconOnly:u=!1})=>y.jsxs("div",{className:"relative group",children:[y.jsxs("button",{onClick:e,disabled:t,className:`flex items-center ${u?"justify-center w-9 h-9 p-0":"gap-2 px-3 py-1.5"} rounded-full border border-gray-700/70 bg-gray-900/60 text-xs font-medium tracking-wide text-gray-300 hover:bg-gray-800/70 hover:border-gray-600 transition-colors shadow-sm ${t?"opacity-50 cursor-not-allowed":""}`,children:[y.jsx("span",{className:"flex items-center justify-center w-4 h-4",children:n?y.jsx("span",{className:"w-3 h-3 border-2 border-blue-400 border-t-transparent rounded-full animate-spin"}):s}),!u&&y.jsx("span",{children:i})]}),y.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 top-full mt-2 px-2 py-1 text-[10px] rounded-md bg-gray-900 text-gray-200 whitespace-nowrap opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity shadow-lg ring-1 ring-black/40",children:a})]}),xL=({onCopy:e,onSpeak:t,isSpeaking:n,onAction:i,inFlightAction:a,disabled:s=!1,onOpenRating:u,currentGrade:d,showRating:p=!0})=>y.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-3",children:[y.jsx(Pc,{onClick:e,label:"Copy",tooltip:"Copy message to clipboard",disabled:s,children:y.jsx(RC,{className:"w-4 h-4"})}),y.jsx(Pc,{onClick:t,label:n?"Stop":"Listen",tooltip:n?"Stop playback":"Listen to this message",disabled:s,children:y.jsx(DC,{className:`w-4 h-4 ${n?"text-blue-300":""}`})}),p&&y.jsx(Pc,{onClick:u,label:d||"Grade",tooltip:d?`Current rating: ${d}`:"Rate this response",disabled:s,children:y.jsx(uu,{className:"w-4 h-4"})}),Th.map(({id:f,label:g,description:b,Icon:T,iconOnly:E})=>y.jsx(Pc,{onClick:()=>i(f),label:g,tooltip:b,isActive:a===f,disabled:s,iconOnly:E,children:y.jsx(T,{className:"w-4 h-4"})},f))]}),bL=e=>e.replace(/```[\s\S]*?```/g,"").replace(/`([^`]+)`/g,"$1").replace(/!\[[^\]]*\]\([^\)]*\)/g,"").replace(/\[([^\]]+)\]\([^\)]+\)/g,"$1").replace(/^>\s?/gm,"").replace(/^#+\s?/gm,"").replace(/[*_~]/g,"").replace(/\s+/g," ").trim(),wL=({message:e})=>{var V,z;const t=e.role==="user",n=e.agentResponseParts,[i,a]=H.useState(!1),[s,u]=H.useState(null),[d,p]=H.useState(null),[f,g]=H.useState({}),[b,T]=H.useState(!1),[E,k]=H.useState(!1),[I,D]=H.useState(null),[M,U]=H.useState(null),[O,se]=H.useState(null),Q=H.useRef(null),[G,Y]=H.useState(()=>Wr().admonitionVisibility);H.useEffect(()=>{const J=()=>Y(Wr().admonitionVisibility);return window.addEventListener("ai-settings-updated",J),()=>window.removeEventListener("ai-settings-updated",J)},[]);const me=H.useMemo(()=>{var J;return!!((J=e.content)!=null&&J.trim().length)},[e.content]);H.useEffect(()=>()=>{typeof window<"u"&&"speechSynthesis"in window&&window.speechSynthesis.cancel()},[]);const j=async()=>{var J;if(me)try{if((J=navigator==null?void 0:navigator.clipboard)!=null&&J.writeText)await navigator.clipboard.writeText(e.content);else{const L=document.createElement("textarea");L.value=e.content,L.style.position="fixed",L.style.opacity="0",document.body.appendChild(L),L.focus(),L.select(),document.execCommand("copy"),document.body.removeChild(L)}a(!0),setTimeout(()=>a(!1),2e3)}catch(L){console.error("Failed to copy message:",L),u("Could not copy to clipboard."),setTimeout(()=>u(null),4e3)}},B=()=>{if(!me)return;if(typeof window>"u"||!("speechSynthesis"in window)){u("Text-to-speech is not supported in this browser."),setTimeout(()=>u(null),4e3);return}const J=window.speechSynthesis;if(b){J.cancel(),T(!1);return}const L=new SpeechSynthesisUtterance(bL(e.content));L.rate=1,L.pitch=1,L.onend=()=>T(!1),L.onerror=()=>T(!1),Q.current=L,J.cancel(),J.speak(L),T(!0)},K=async J=>{if(!(!me||d===J)){u(null),p(J);try{const L=await hL(J,e.content,e.role);g(Ae=>({...Ae,[J]:L}))}catch(L){console.error(`Post-processing (${J}) failed:`,L),u("Unable to run post-processing. Double-check AI settings and try again."),setTimeout(()=>u(null),5e3)}finally{p(null)}}};H.useEffect(()=>{e.role==="agent"&&(async()=>{try{const J=await k4(e.id);J&&(D(J.grade),se(J))}catch(J){console.error("Failed to load HRMR rating:",J)}})()},[e.id,e.role]);const ce=H.useMemo(()=>{var L,Ae,He,qe,We,st;const J=new Set;return Object.keys(f).forEach(Ne=>{const Mt=kn[Ne];Mt!=null&&Mt.relatedModules&&Mt.relatedModules.forEach(Tt=>J.add(Tt))}),(L=e.agentResponseParts)!=null&&L.internalMonologue&&J.add("Monologue"),(Ae=e.agentResponseParts)!=null&&Ae.stageDirections&&J.add("Stage"),(He=e.agentResponseParts)!=null&&He.preflection&&J.add("Preflection"),(qe=e.agentResponseParts)!=null&&qe.memory&&J.add("Memory"),(st=(We=e.agentResponseParts)==null?void 0:We.tasks)!=null&&st.length&&J.add("Tasking"),Array.from(J)},[f,e.agentResponseParts]),xe=async J=>{var L;if(!(e.role!=="agent"||!e.agentResponseParts)){U(null);try{const Ae=Date.now(),He={id:e.id,messageId:e.id,grade:J,agentResponse:e.agentResponseParts.response||e.content,preflection:e.agentResponseParts.preflection,internalMonologue:e.agentResponseParts.internalMonologue,stageDirections:e.agentResponseParts.stageDirections,tasks:e.agentResponseParts.tasks,memorySummary:(L=e.agentResponseParts.memory)==null?void 0:L.summary,modulesUsed:ce,createdAt:(O==null?void 0:O.createdAt)??Ae,updatedAt:Ae};await aS(He),D(J),se(He),U("Saved"),k(!1)}catch(Ae){console.error("Failed to store HRMR rating:",Ae),U("Could not save rating.")}finally{setTimeout(()=>U(null),3e3)}}},_e=async()=>{try{await lS(e.id),D(null),se(null),U("Rating cleared.")}catch(J){console.error("Failed to clear HRMR rating:",J),U("Could not clear rating.")}finally{k(!1),setTimeout(()=>U(null),3e3)}},Pe=!t&&!!e.performerId,ue=t&&!!e.speakerPersonaId,Ee=t?e.speakerPersonaName||"You":e.performerName||"Sylvia",Me=!t&&((V=e.collaborators)!=null&&V.length)?`With ${e.collaborators.join(", ")}`:null,Qe=t?"bg-purple-600":Pe?"bg-amber-500":"bg-blue-600";return y.jsxs("div",{className:`flex items-start gap-4 p-4 ${t?"":"bg-gray-800/20"}`,children:[y.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${Qe}`,children:t?y.jsx(JC,{className:"w-5 h-5"}):y.jsx($C,{className:"w-5 h-5 text-gray-900"})}),y.jsxs("div",{className:"flex-1 overflow-hidden",children:[y.jsxs("div",{className:"font-bold text-gray-200 flex items-center gap-2",children:[y.jsx("span",{children:Ee}),Pe&&y.jsx("span",{className:"px-2 py-0.5 text-[10px] uppercase tracking-wide bg-amber-500/20 border border-amber-400/40 text-amber-200 rounded-full",children:"Performer"}),ue&&y.jsx("span",{className:"px-2 py-0.5 text-[10px] uppercase tracking-wide bg-purple-500/20 border border-purple-400/40 text-purple-200 rounded-full",children:"In Character"}),!t&&!Pe&&((z=e.collaborators)!=null&&z.length)?y.jsx("span",{className:"px-2 py-0.5 text-[10px] uppercase tracking-wide bg-blue-500/20 border border-blue-400/40 text-blue-200 rounded-full",children:"Boardroom"}):null]}),Me&&y.jsx("div",{className:"text-xs text-gray-400 mt-1",children:Me}),e.image&&y.jsx("div",{className:"mt-2",children:y.jsx("img",{src:e.image,alt:"user upload",className:"max-w-xs rounded-lg border border-gray-700"})}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("div",{className:"prose prose-invert prose-sm max-w-none text-gray-300",children:y.jsx(ma,{remarkPlugins:[ga],children:e.content})}),e.rewrittenContent&&e.rewrittenContent.trim().length>0&&e.rewrittenContent!==e.content&&y.jsxs("div",{className:"text-xs text-blue-300 bg-blue-900/20 border border-blue-600/30 rounded-md px-3 py-2",children:[y.jsx("span",{className:"uppercase tracking-wider font-semibold text-blue-200 mr-2",children:"Rewritten"}),y.jsx(ma,{remarkPlugins:[ga],className:"inline prose prose-invert",children:e.rewrittenContent})]})]}),y.jsx(xL,{onCopy:j,onSpeak:B,isSpeaking:b,onAction:K,inFlightAction:d,disabled:!me,onOpenRating:()=>{t||k(J=>!J)},currentGrade:t?null:I,showRating:!t}),y.jsx("div",{className:"mt-2 text-xs min-h-[18px]",children:s?y.jsx("span",{className:"text-red-400",children:s}):i?y.jsx("span",{className:"text-green-400",children:"Copied to clipboard."}):M?y.jsx("span",{className:"text-blue-300",children:M}):null}),E&&!t&&y.jsxs("div",{className:"mt-3 bg-[#1a1c1f] border border-gray-700 rounded-lg p-3",children:[y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[y.jsx("span",{className:"text-xs uppercase tracking-wider text-gray-400",children:"Rate Response"}),I&&y.jsx("button",{onClick:_e,className:"text-xs text-red-400 hover:text-red-300",children:"Clear"})]}),y.jsx("div",{className:"grid grid-cols-7 gap-2",children:sh.map(J=>y.jsx("button",{onClick:()=>xe(J),className:`px-2 py-1 rounded-md text-sm font-semibold border transition-colors ${I===J?"bg-blue-600 border-blue-400 text-white":"bg-[#26282B] border-gray-700 text-gray-200 hover:bg-gray-700/60"}`,children:J},J))})]}),n&&y.jsxs("div",{className:"mt-4 space-y-3",children:[n.preflection&&G.preflection&&y.jsx(_2,{instruction:n.preflection}),n.internalMonologue&&G.monologue&&y.jsx(R2,{monologue:n.internalMonologue}),n.stageDirections&&G.stageDirections&&y.jsx(M2,{directions:n.stageDirections}),n.memory&&G.memory&&y.jsx(A2,{memory:n.memory}),n.tasks&&n.tasks.length>0&&G.tasks&&y.jsx(k2,{tasks:n.tasks}),n.audit&&G.audit&&y.jsx(N2,{auditResult:n.audit})]}),G.postProcessing&&Th.filter(J=>f[J.id]).length>0&&y.jsx("div",{className:"mt-4 space-y-3",children:Th.filter(J=>f[J.id]).map(J=>y.jsxs("div",{className:"border border-gray-700/70 rounded-lg bg-[#1d1f22] p-4 shadow-inner",children:[y.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-100",children:[y.jsx(J.Icon,{className:"w-4 h-4 text-blue-300"}),y.jsx("span",{children:J.label})]}),y.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:kn[J.id].relatedModules.map(L=>y.jsx("span",{className:"text-[10px] uppercase tracking-wider bg-blue-900/30 text-blue-200 px-2 py-0.5 rounded-full border border-blue-600/30",children:L},L))}),y.jsx("div",{className:"mt-2 prose prose-invert prose-sm max-w-none text-gray-300",children:y.jsx(ma,{remarkPlugins:[ga],children:f[J.id]})})]},J.id))})]})]})},Hp=({text:e,hasIcon:t})=>y.jsxs("button",{className:"bg-[#1e1f20] hover:bg-gray-700 text-gray-300 py-2 px-4 rounded-full flex items-center gap-2 transition-colors",children:[t&&y.jsx(HC,{}),y.jsx("span",{children:e})]});function Ct(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function gi(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function CS(e,t){const n=Ct(e);if(isNaN(t))return gi(e,NaN);if(!t)return n;const i=n.getDate(),a=gi(e,n.getTime());a.setMonth(n.getMonth()+t+1,0);const s=a.getDate();return i>=s?a:(n.setFullYear(a.getFullYear(),a.getMonth(),i),n)}const ES=6048e5,SL=864e5,Lc=43200,Yx=1440;let TL={};function Pl(){return TL}function Al(e,t){var d,p,f,g;const n=Pl(),i=(t==null?void 0:t.weekStartsOn)??((p=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:p.weekStartsOn)??n.weekStartsOn??((g=(f=n.locale)==null?void 0:f.options)==null?void 0:g.weekStartsOn)??0,a=Ct(e),s=a.getDay(),u=(s<i?7:0)+s-i;return a.setDate(a.getDate()-u),a.setHours(0,0,0,0),a}function tf(e){return Al(e,{weekStartsOn:1})}function _S(e){const t=Ct(e),n=t.getFullYear(),i=gi(e,0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);const a=tf(i),s=gi(e,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const u=tf(s);return t.getTime()>=a.getTime()?n+1:t.getTime()>=u.getTime()?n:n-1}function nf(e){const t=Ct(e);return t.setHours(0,0,0,0),t}function rf(e){const t=Ct(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function CL(e,t){const n=nf(e),i=nf(t),a=+n-rf(n),s=+i-rf(i);return Math.round((a-s)/SL)}function EL(e){const t=_S(e),n=gi(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),tf(n)}function Fc(e,t){const n=Ct(e),i=Ct(t),a=n.getTime()-i.getTime();return a<0?-1:a>0?1:a}function AS(e){return gi(e,Date.now())}function _L(e,t){const n=nf(e),i=nf(t);return+n==+i}function AL(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function kL(e){if(!AL(e)&&typeof e!="number")return!1;const t=Ct(e);return!isNaN(Number(t))}function NL(e,t){const n=Ct(e),i=Ct(t),a=n.getFullYear()-i.getFullYear(),s=n.getMonth()-i.getMonth();return a*12+s}function ML(e){return t=>{const i=(e?Math[e]:Math.trunc)(t);return i===0?0:i}}function RL(e,t){return+Ct(e)-+Ct(t)}function DL(e){const t=Ct(e);return t.setHours(23,59,59,999),t}function kS(e){const t=Ct(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function IL(e){const t=Ct(e);return+DL(t)==+kS(t)}function PL(e,t){const n=Ct(e),i=Ct(t),a=Fc(n,i),s=Math.abs(NL(n,i));let u;if(s<1)u=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-a*s);let d=Fc(n,i)===-a;IL(Ct(e))&&s===1&&Fc(e,i)===1&&(d=!1),u=a*(s-Number(d))}return u===0?0:u}function LL(e,t,n){const i=RL(e,t)/1e3;return ML(n==null?void 0:n.roundingMethod)(i)}function UL(e,t){const n=Ct(e.start),i=Ct(e.end);let a=+n>+i;const s=a?+n:+i,u=a?i:n;u.setHours(0,0,0,0);let d=1;const p=[];for(;+u<=s;)p.push(Ct(u)),u.setDate(u.getDate()+d),u.setHours(0,0,0,0);return a?p.reverse():p}function OL(e){const t=Ct(e);return t.setDate(1),t.setHours(0,0,0,0),t}function BL(e){const t=Ct(e),n=gi(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function zL(e,t){var d,p;const n=Pl(),i=n.weekStartsOn??((p=(d=n.locale)==null?void 0:d.options)==null?void 0:p.weekStartsOn)??0,a=Ct(e),s=a.getDay(),u=(s<i?-7:0)+6-(s-i);return a.setDate(a.getDate()+u),a.setHours(23,59,59,999),a}const qL={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},jL=(e,t,n)=>{let i;const a=qL[e];return typeof a=="string"?i=a:t===1?i=a.one:i=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function Fp(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const HL={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},FL={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},VL={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},GL={date:Fp({formats:HL,defaultWidth:"full"}),time:Fp({formats:FL,defaultWidth:"full"}),dateTime:Fp({formats:VL,defaultWidth:"full"})},YL={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},KL=(e,t,n,i)=>YL[e];function Vs(e){return(t,n)=>{const i=n!=null&&n.context?String(n.context):"standalone";let a;if(i==="formatting"&&e.formattingValues){const u=e.defaultFormattingWidth||e.defaultWidth,d=n!=null&&n.width?String(n.width):u;a=e.formattingValues[d]||e.formattingValues[u]}else{const u=e.defaultWidth,d=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[d]||e.values[u]}const s=e.argumentCallback?e.argumentCallback(t):t;return a[s]}}const JL={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},$L={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},XL={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},QL={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},WL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ZL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},eU=(e,t)=>{const n=Number(e),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},tU={ordinalNumber:eU,era:Vs({values:JL,defaultWidth:"wide"}),quarter:Vs({values:$L,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Vs({values:XL,defaultWidth:"wide"}),day:Vs({values:QL,defaultWidth:"wide"}),dayPeriod:Vs({values:WL,defaultWidth:"wide",formattingValues:ZL,defaultFormattingWidth:"wide"})};function Gs(e){return(t,n={})=>{const i=n.width,a=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;const u=s[0],d=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],p=Array.isArray(d)?rU(d,b=>b.test(u)):nU(d,b=>b.test(u));let f;f=e.valueCallback?e.valueCallback(p):p,f=n.valueCallback?n.valueCallback(f):f;const g=t.slice(u.length);return{value:f,rest:g}}}function nU(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function rU(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function iU(e){return(t,n={})=>{const i=t.match(e.matchPattern);if(!i)return null;const a=i[0],s=t.match(e.parsePattern);if(!s)return null;let u=e.valueCallback?e.valueCallback(s[0]):s[0];u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(a.length);return{value:u,rest:d}}}const oU=/^(\d+)(th|st|nd|rd)?/i,aU=/\d+/i,lU={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},sU={any:[/^b/i,/^(a|c)/i]},uU={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},cU={any:[/1/i,/2/i,/3/i,/4/i]},fU={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},dU={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},pU={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},hU={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},mU={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},gU={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},yU={ordinalNumber:iU({matchPattern:oU,parsePattern:aU,valueCallback:e=>parseInt(e,10)}),era:Gs({matchPatterns:lU,defaultMatchWidth:"wide",parsePatterns:sU,defaultParseWidth:"any"}),quarter:Gs({matchPatterns:uU,defaultMatchWidth:"wide",parsePatterns:cU,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Gs({matchPatterns:fU,defaultMatchWidth:"wide",parsePatterns:dU,defaultParseWidth:"any"}),day:Gs({matchPatterns:pU,defaultMatchWidth:"wide",parsePatterns:hU,defaultParseWidth:"any"}),dayPeriod:Gs({matchPatterns:mU,defaultMatchWidth:"any",parsePatterns:gU,defaultParseWidth:"any"})},NS={code:"en-US",formatDistance:jL,formatLong:GL,formatRelative:KL,localize:tU,match:yU,options:{weekStartsOn:0,firstWeekContainsDate:1}};function vU(e){const t=Ct(e);return CL(t,BL(t))+1}function xU(e){const t=Ct(e),n=+tf(t)-+EL(t);return Math.round(n/ES)+1}function MS(e,t){var g,b,T,E;const n=Ct(e),i=n.getFullYear(),a=Pl(),s=(t==null?void 0:t.firstWeekContainsDate)??((b=(g=t==null?void 0:t.locale)==null?void 0:g.options)==null?void 0:b.firstWeekContainsDate)??a.firstWeekContainsDate??((E=(T=a.locale)==null?void 0:T.options)==null?void 0:E.firstWeekContainsDate)??1,u=gi(e,0);u.setFullYear(i+1,0,s),u.setHours(0,0,0,0);const d=Al(u,t),p=gi(e,0);p.setFullYear(i,0,s),p.setHours(0,0,0,0);const f=Al(p,t);return n.getTime()>=d.getTime()?i+1:n.getTime()>=f.getTime()?i:i-1}function bU(e,t){var d,p,f,g;const n=Pl(),i=(t==null?void 0:t.firstWeekContainsDate)??((p=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:p.firstWeekContainsDate)??n.firstWeekContainsDate??((g=(f=n.locale)==null?void 0:f.options)==null?void 0:g.firstWeekContainsDate)??1,a=MS(e,t),s=gi(e,0);return s.setFullYear(a,0,i),s.setHours(0,0,0,0),Al(s,t)}function wU(e,t){const n=Ct(e),i=+Al(n,t)-+bU(n,t);return Math.round(i/ES)+1}function It(e,t){const n=e<0?"-":"",i=Math.abs(e).toString().padStart(t,"0");return n+i}const Io={y(e,t){const n=e.getFullYear(),i=n>0?n:1-n;return It(t==="yy"?i%100:i,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):It(n+1,2)},d(e,t){return It(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return It(e.getHours()%12||12,t.length)},H(e,t){return It(e.getHours(),t.length)},m(e,t){return It(e.getMinutes(),t.length)},s(e,t){return It(e.getSeconds(),t.length)},S(e,t){const n=t.length,i=e.getMilliseconds(),a=Math.trunc(i*Math.pow(10,n-3));return It(a,t.length)}},vl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Kx={G:function(e,t,n){const i=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const i=e.getFullYear(),a=i>0?i:1-i;return n.ordinalNumber(a,{unit:"year"})}return Io.y(e,t)},Y:function(e,t,n,i){const a=MS(e,i),s=a>0?a:1-a;if(t==="YY"){const u=s%100;return It(u,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):It(s,t.length)},R:function(e,t){const n=_S(e);return It(n,t.length)},u:function(e,t){const n=e.getFullYear();return It(n,t.length)},Q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return It(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return It(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,n){const i=e.getMonth();switch(t){case"M":case"MM":return Io.M(e,t);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,n){const i=e.getMonth();switch(t){case"L":return String(i+1);case"LL":return It(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,n,i){const a=wU(e,i);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):It(a,t.length)},I:function(e,t,n){const i=xU(e);return t==="Io"?n.ordinalNumber(i,{unit:"week"}):It(i,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Io.d(e,t)},D:function(e,t,n){const i=vU(e);return t==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):It(i,t.length)},E:function(e,t,n){const i=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,n,i){const a=e.getDay(),s=(a-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return It(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,i){const a=e.getDay(),s=(a-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return It(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const i=e.getDay(),a=i===0?7:i;switch(t){case"i":return String(a);case"ii":return It(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const i=e.getHours();let a;switch(i===12?a=vl.noon:i===0?a=vl.midnight:a=i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const i=e.getHours();let a;switch(i>=17?a=vl.evening:i>=12?a=vl.afternoon:i>=4?a=vl.morning:a=vl.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let i=e.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return Io.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Io.H(e,t)},K:function(e,t,n){const i=e.getHours()%12;return t==="Ko"?n.ordinalNumber(i,{unit:"hour"}):It(i,t.length)},k:function(e,t,n){let i=e.getHours();return i===0&&(i=24),t==="ko"?n.ordinalNumber(i,{unit:"hour"}):It(i,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Io.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Io.s(e,t)},S:function(e,t){return Io.S(e,t)},X:function(e,t,n){const i=e.getTimezoneOffset();if(i===0)return"Z";switch(t){case"X":return $x(i);case"XXXX":case"XX":return ha(i);case"XXXXX":case"XXX":default:return ha(i,":")}},x:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"x":return $x(i);case"xxxx":case"xx":return ha(i);case"xxxxx":case"xxx":default:return ha(i,":")}},O:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Jx(i,":");case"OOOO":default:return"GMT"+ha(i,":")}},z:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Jx(i,":");case"zzzz":default:return"GMT"+ha(i,":")}},t:function(e,t,n){const i=Math.trunc(e.getTime()/1e3);return It(i,t.length)},T:function(e,t,n){const i=e.getTime();return It(i,t.length)}};function Jx(e,t=""){const n=e>0?"-":"+",i=Math.abs(e),a=Math.trunc(i/60),s=i%60;return s===0?n+String(a):n+String(a)+t+It(s,2)}function $x(e,t){return e%60===0?(e>0?"-":"+")+It(Math.abs(e)/60,2):ha(e,t)}function ha(e,t=""){const n=e>0?"-":"+",i=Math.abs(e),a=It(Math.trunc(i/60),2),s=It(i%60,2);return n+a+t+s}const Xx=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},RS=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},SU=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],i=n[1],a=n[2];if(!a)return Xx(e,t);let s;switch(i){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",Xx(i,t)).replace("{{time}}",RS(a,t))},TU={p:RS,P:SU},CU=/^D+$/,EU=/^Y+$/,_U=["D","DD","YY","YYYY"];function AU(e){return CU.test(e)}function kU(e){return EU.test(e)}function NU(e,t,n){const i=MU(e,t,n);if(console.warn(i),_U.includes(e))throw new RangeError(i)}function MU(e,t,n){const i=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const RU=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,DU=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,IU=/^'([^]*?)'?$/,PU=/''/g,LU=/[a-zA-Z]/;function cr(e,t,n){var g,b,T,E;const i=Pl(),a=i.locale??NS,s=i.firstWeekContainsDate??((b=(g=i.locale)==null?void 0:g.options)==null?void 0:b.firstWeekContainsDate)??1,u=i.weekStartsOn??((E=(T=i.locale)==null?void 0:T.options)==null?void 0:E.weekStartsOn)??0,d=Ct(e);if(!kL(d))throw new RangeError("Invalid time value");let p=t.match(DU).map(k=>{const I=k[0];if(I==="p"||I==="P"){const D=TU[I];return D(k,a.formatLong)}return k}).join("").match(RU).map(k=>{if(k==="''")return{isToken:!1,value:"'"};const I=k[0];if(I==="'")return{isToken:!1,value:UU(k)};if(Kx[I])return{isToken:!0,value:k};if(I.match(LU))throw new RangeError("Format string contains an unescaped latin alphabet character `"+I+"`");return{isToken:!1,value:k}});a.localize.preprocessor&&(p=a.localize.preprocessor(d,p));const f={firstWeekContainsDate:s,weekStartsOn:u,locale:a};return p.map(k=>{if(!k.isToken)return k.value;const I=k.value;(kU(I)||AU(I))&&NU(I,t,String(e));const D=Kx[I[0]];return D(d,I,a.localize,f)}).join("")}function UU(e){const t=e.match(IU);return t?t[1].replace(PU,"'"):e}function OU(e,t,n){const i=Pl(),a=(n==null?void 0:n.locale)??i.locale??NS,s=2520,u=Fc(e,t);if(isNaN(u))throw new RangeError("Invalid time value");const d=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:u});let p,f;u>0?(p=Ct(t),f=Ct(e)):(p=Ct(e),f=Ct(t));const g=LL(f,p),b=(rf(f)-rf(p))/1e3,T=Math.round((g-b)/60);let E;if(T<2)return n!=null&&n.includeSeconds?g<5?a.formatDistance("lessThanXSeconds",5,d):g<10?a.formatDistance("lessThanXSeconds",10,d):g<20?a.formatDistance("lessThanXSeconds",20,d):g<40?a.formatDistance("halfAMinute",0,d):g<60?a.formatDistance("lessThanXMinutes",1,d):a.formatDistance("xMinutes",1,d):T===0?a.formatDistance("lessThanXMinutes",1,d):a.formatDistance("xMinutes",T,d);if(T<45)return a.formatDistance("xMinutes",T,d);if(T<90)return a.formatDistance("aboutXHours",1,d);if(T<Yx){const k=Math.round(T/60);return a.formatDistance("aboutXHours",k,d)}else{if(T<s)return a.formatDistance("xDays",1,d);if(T<Lc){const k=Math.round(T/Yx);return a.formatDistance("xDays",k,d)}else if(T<Lc*2)return E=Math.round(T/Lc),a.formatDistance("aboutXMonths",E,d)}if(E=PL(f,p),E<12){const k=Math.round(T/Lc);return a.formatDistance("xMonths",k,d)}else{const k=E%12,I=Math.trunc(E/12);return k<3?a.formatDistance("aboutXYears",I,d):k<9?a.formatDistance("overXYears",I,d):a.formatDistance("almostXYears",I+1,d)}}function Ys(e,t){return OU(e,AS(e),t)}function BU(e){return _L(e,AS(e))}function zU(e,t){return CS(e,-1)}const Ks="__sylviaChatCache",Js="chatHistory",Qx=e=>[...e].sort((t,n)=>(n.updatedAt??n.createdAt??0)-(t.updatedAt??t.createdAt??0)),Vp=()=>`session-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`,$s="user",Uc="sylvia",Wx=70,qU=new Set(["great","good","excellent","amazing","positive","love","like","success","win","progress","awesome","helpful","confident"]),jU=new Set(["bad","terrible","awful","negative","hate","dislike","fail","problem","issue","worry","anxious","concern","angry"]),HU=new Set(["always","never","must","everyone","noone","obviously","clearly"]),mm=e=>(e==null?void 0:e.replace(/[`*_#>\[\]]/g," "))??"",Gp=e=>{if(!e)return 0;const t=mm(e).toLowerCase().match(/[a-z]+/g)||[];if(!t.length)return 0;let n=0,i=0;t.forEach(s=>{qU.has(s)&&(n+=1),jU.has(s)&&(i+=1)});const a=n+i;return a?(n-i)/a:0},Yp=e=>{const t=[],n=mm(e).toLowerCase();return HU.forEach(i=>{n.includes(i)&&t.push("bias")}),(n.includes("secret")||n.includes("confidential"))&&t.push("secret"),(n.includes("mission")||n.includes("objective"))&&t.push("mission"),Array.from(new Set(t))},Kp=(e,t,n)=>{const i=new Set;return e!=null&&e.intrigueLevel&&e.intrigueLevel>=Wx&&i.add("speaker-high-intrigue"),t.forEach(a=>{const s=n.get(a);s!=null&&s.intrigueLevel&&s.intrigueLevel>=Wx&&i.add("target-high-intrigue")}),Array.from(i)},FU=/[a-z0-9]+/gi,of=(e,t)=>{if(!e)return;const n=mm(e).toLowerCase().match(FU);n==null||n.forEach(i=>{i.length>2&&t.add(i)})},VU=(e,t)=>{const n=new Set;return of(e,n),t.slice(-6).forEach(i=>of(i.content,n)),n},GU=(e,t)=>{let n=e.relevance??0;const i=e.tags.reduce((f,g)=>f+(t.has(g.toLowerCase())?1:0),0);n+=i*6;const a=new Set;of(e.summary,a),a.forEach(f=>{t.has(f)&&(n+=1.5)});const s=new Set;of(e.conversation,s);let u=0;s.forEach(f=>{t.has(f)&&(u+=1)}),n+=u*.5;const d=(Date.now()-e.timestamp)/(1e3*60*60*24),p=Math.max(0,1-Math.min(d,60)/60);return n+=p*5,n},YU=(e,t,n)=>{const i=new Set;return i.add(`conversation:${e}`),i.add(t?`performer:${t}`:"performer:core"),i.add(`memory:${n.useMemory?"on":"off"}`),n.usePreflection&&i.add("preflection:on"),n.useStageDirections&&i.add("stage:on"),n.useTaskList&&i.add("tasking:on"),n.useAudit&&i.add("audit:on"),n.useMonologue&&i.add("monologue:on"),n.usePromptRewrite&&i.add("rewrite:on"),Array.from(i)},KU=(e,t)=>{if(!(t!=null&&t.featureOverrides))return e;const n=t.featureOverrides,i={usePreflection:n.usePreflection??e.usePreflection,useMemory:n.useMemory??e.useMemory,useTaskList:n.useTaskList??e.useTaskList,useAudit:n.useAudit??e.useAudit,useStageDirections:n.useStageDirections??e.useStageDirections,useMonologue:n.useMonologue??e.useMonologue,usePromptRewrite:n.usePromptRewrite??e.usePromptRewrite};return i.useTaskList||(i.useAudit=!1),i},Zx=(e,t)=>e?`${e.name}: ${t}`:`User: ${t}`,JU=e=>new Promise((t,n)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>{const a=i.result;t(a.split(",")[1])},i.onerror=a=>n(a)}),$U=()=>{const[e,t]=H.useState(()=>{if(typeof window>"u")return[];const z=window[Ks];if(z&&Array.isArray(z))return z;try{const J=window.localStorage.getItem(Js);if(J){const L=JSON.parse(J);if(Array.isArray(L))return window[Ks]=L,L}}catch(J){console.error("Failed to hydrate chat history:",J)}return[]}),[n,i]=H.useState(!1),[a,s]=H.useState([]),[u,d]=H.useState([]),[p,f]=H.useState(!1),[g,b]=H.useState(null),[T,E]=H.useState(null),[k,I]=H.useState([]),[D,M]=H.useState(!1),[U,O]=H.useState(!1),[se,Q]=H.useState(()=>Vp()),[G,Y]=H.useState(!1),[me,j]=H.useState([]),[B,K]=H.useState(!1),ce=H.useRef(null),xe=z=>{if(z===$s)return"User";if(z===Uc)return"Sylvia";const J=a.find(L=>L.id===z);return(J==null?void 0:J.name)||"Collaborator"};H.useEffect(()=>{if(typeof window>"u")return;try{const L=window.localStorage.getItem(Js);if(L){const Ae=JSON.parse(L);Array.isArray(Ae)&&t(Ae)}}catch(L){console.error("Failed to restore chat history:",L)}const z=async()=>{try{const Ae=(await um()).sort((He,qe)=>He.name.localeCompare(qe.name));s(Ae),d(He=>He.filter(qe=>Ae.some(We=>We.id===qe)))}catch(L){console.error("Failed to load performers:",L)}};z();const J=L=>{z()};return window.addEventListener("performers-updated",J),()=>{window.removeEventListener("performers-updated",J)}},[]),H.useEffect(()=>{var z;(z=ce.current)==null||z.scrollIntoView({behavior:"smooth"})},[e]),H.useEffect(()=>{if(!(typeof window>"u")){window[Ks]=e;try{window.localStorage.setItem(Js,JSON.stringify(e))}catch(z){console.error("Failed to persist chat history:",z)}}},[e]);const _e=async()=>{O(!0);try{const z=await rS();I(Qx(z))}catch(z){console.error("Failed to load saved threads:",z),b("Could not load saved threads. Check console for details."),setTimeout(()=>b(null),4e3)}finally{O(!1)}},Pe=z=>{d(J=>J.includes(z)?J.filter(L=>L!==z):[...J,z])},ue=async()=>{const z=!D;M(z),z&&await _e()},Ee=()=>{if(e.length===0){if(E(null),Q(Vp()),d([]),Y(!1),typeof window<"u"){window[Ks]=[];try{window.localStorage.removeItem(Js)}catch(J){console.error("Failed to clear chat history cache:",J)}}return}if(window.confirm("Start a fresh thread? This will clear the current conversation.")){if(t([]),d([]),E(null),Q(Vp()),b("New conversation started."),Y(!1),typeof window<"u"){window[Ks]=[];try{window.localStorage.removeItem(Js)}catch(J){console.error("Failed to clear chat history cache:",J)}}setTimeout(()=>b(null),3e3)}},Me=async z=>{try{k.length||await _e();const J=k.find(Ae=>Ae.id===z);if(!J){b("Selected thread could not be found."),setTimeout(()=>b(null),3e3);return}const L=Array.isArray(J.messages)?JSON.parse(JSON.stringify(J.messages)):[];t(L),I(Ae=>Qx([J,...Ae.filter(He=>He.id!==J.id)])),E({id:J.id,title:J.title||"Conversation Thread"}),Q(J.id),b(`Loaded "${J.title||"Conversation Thread"}".`),M(!1),d([]),Y(!1),setTimeout(()=>b(null),3e3)}catch(J){console.error("Failed to load selected thread:",J),b("Could not load selected thread. Check console for details."),setTimeout(()=>b(null),4e3)}},Qe=async(z,J,L,Ae)=>{var dr;if(!z&&!L)return;i(!0);const He=Date.now(),qe=He.toString();let We,st=null,Ne=z;if(L&&(st=await JU(L),We=`data:${L.type||"image/jpeg"};base64,${st}`),J.usePromptRewrite&&z.trim())try{Ne=await cL(z)}catch(tn){console.error("Prompt rewrite failed:",tn)}const Mt=(T==null?void 0:T.id)??se,Tt=Ae?a.find(tn=>tn.id===Ae):null,pt={id:qe,role:"user",content:z,image:We,rewrittenContent:Ne!==z?Ne:void 0,timestamp:He,conversationId:Mt,speakerPersonaId:(Tt==null?void 0:Tt.id)??null,speakerPersonaName:(Tt==null?void 0:Tt.name)??null};t(tn=>[...tn,pt]);try{const tn=await am(),hn=new Map(a.map(Ye=>[Ye.id,Ye])),Jn=u.map(Ye=>a.find(ke=>ke.id===Ye)).filter(Ye=>!!Ye),ei=[...e],Xi=[...e,pt],ti=await iu(),pr=VU(Ne,Xi),Tn=ti.map(Ye=>({memory:Ye,score:GU(Ye,pr)})).filter(Ye=>Ye.score>0),Vr=[...Tn.filter(Ye=>Ye.memory.tags.some(ke=>pr.has(ke))).map(Ye=>Ye.memory),...Tn.sort((Ye,ke)=>ke.score-Ye.score).slice(0,8).map(Ye=>Ye.memory)],an=Array.from(new Map(Vr.map(Ye=>[(Ye.id??Ye.timestamp).toString(),Ye])).values()),Er=an.slice(0,10);j(an);const ve=[],Re=[],Je=()=>`interaction-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`,rt=Ye=>{Ye&&Ye.targetIds.length&&Re.push(Ye)},dt=new Set;Jn.forEach(Ye=>dt.add(Ye.id)),G||dt.add(Uc);const ln=(Tt==null?void 0:Tt.id)??$s,Cn=Tt?"performer":"user",Ht=new Set(dt);Ae&&Ht.add($s),Ht.delete(ln);const Yt=Gp(Ne),Bt=Yp(Ne);Ae&&Bt.push("roleplay");const Ue=Kp(Tt??null,Array.from(Ht),hn);Ue.length&&Bt.push("intrigue"),rt({id:Je(),conversationId:Mt,speakerId:ln,speakerName:(Tt==null?void 0:Tt.name)||"User",speakerType:Cn,targetIds:Array.from(Ht),targetNames:Array.from(Ht).map(xe),timestamp:He,messageId:qe,sentiment:Yt,narrativeTags:Array.from(new Set(Bt)),intrigueTags:Ue});for(const Ye of Jn){const ke=KU(J,Ye);let sn=null;try{sn=await aL(Ye,Ne,ei,ke,st,{temporalEntries:tn,contextMemories:Er})}catch(Nn){console.error("Performer response failed:",Nn)}if(!sn)continue;const $n=Date.now(),En={id:`${$n}-performer-${Ye.id}`,role:"agent",content:sn.response||`${Ye.name} is still formulating ideas.`,agentResponseParts:sn,performerId:Ye.id,performerName:Ye.name,performerIcon:Ye.icon,timestamp:$n,collaborators:G?void 0:["Sylvia"],conversationId:Mt};if(ve.push(En),t(Nn=>[...Nn,En]),ei.push(En),sn.memory&&Ye.memoryEnabled!==!1&&ke.useMemory)try{await M4({performerId:Ye.id,timestamp:$n,summary:sn.memory.summary,tags:sn.memory.tags,transcriptSnippet:[Zx(Tt,z),`${Ye.name}: ${sn.response||""}`].join(`

`),relevance:5,conversationId:Mt})}catch(Nn){console.error("Failed to capture performer memory:",Nn)}const _n=new Set([$s,...Jn.map(Nn=>Nn.id)]);_n.delete(Ye.id),G||_n.add(Uc);const _r=sn.response||"",Ea=Yp(_r),Oo=Kp(Ye,Array.from(_n),hn);Oo.length&&Ea.push("intrigue"),rt({id:Je(),conversationId:Mt,speakerId:Ye.id,speakerName:Ye.name,speakerType:"performer",targetIds:Array.from(_n),targetNames:Array.from(_n).map(xe),timestamp:$n,messageId:En.id,sentiment:Gp(_r),narrativeTags:Array.from(new Set(Ea)),intrigueTags:Oo})}let Ft=null;G||(Ft=await iL(Ne,ei,J,st,{temporalEntries:tn,contextMemories:Er}));const Wt=Date.now();if(Ft!=null&&Ft.memory&&J.useMemory)try{const Ye=[Zx(Tt,z)];ve.forEach(ke=>{Ye.push(`${ke.performerName||"Performer"}: ${ke.content}`)}),Ye.push(`Sylvia: ${Ft.response||""}`),await tS({timestamp:Wt,relevance:5,conversation:Ye.join(`

`),summary:Ft.memory.summary,tags:Ft.memory.tags,knowledgeRefs:ve.map(ke=>ke.performerId).filter(ke=>!!ke),metaTags:YU(Mt,((dr=ve[0])==null?void 0:dr.performerId)??null,J)})}catch(Ye){console.error("Failed to capture agent memory:",Ye)}if(Ft){const Ye={id:Wt.toString(),role:"agent",content:Ft.response||"I don't have a response for that.",agentResponseParts:Ft,performerId:null,performerName:"Sylvia",timestamp:Wt,collaborators:ve.length?ve.map(_n=>_n.performerName||"Performer"):void 0,conversationId:Mt};t(_n=>[..._n,Ye]);const ke=new Set([$s,...Jn.map(_n=>_n.id)]),sn=Ft.response||"",$n=Yp(sn),En=Kp(null,Array.from(ke),hn);En.length&&$n.push("intrigue"),rt({id:Je(),conversationId:Mt,speakerId:Uc,speakerName:"Sylvia",speakerType:"sylvia",targetIds:Array.from(ke),targetNames:Array.from(ke).map(xe),timestamp:Wt,messageId:Ye.id,sentiment:Gp(sn),narrativeTags:Array.from(new Set($n)),intrigueTags:En})}if(Re.length)try{await D4(Re)}catch(Ye){console.error("Failed to log performer interactions:",Ye)}}catch(tn){console.error("Failed to get agent response:",tn);const hn={id:(Date.now()+1).toString(),role:"agent",content:"Sorry, I ran into an issue. Please try again.",timestamp:Date.now(),conversationId:Mt};t(Jn=>[...Jn,hn])}finally{i(!1)}},V=async()=>{if(!p){if(e.length===0){b("Start a conversation before archiving."),setTimeout(()=>b(null),2500);return}f(!0);try{const z=await mL(e),J=Date.now(),L=cr(new Date,"yyyy-MM-dd"),Ae=JSON.parse(JSON.stringify(e)),He={id:`thread-${J}`,title:z.title||`Conversation ${cr(new Date,"MMM d, yyyy")}`,summary:z.summary,tags:z.tags,createdAt:J,updatedAt:J,journalDate:L,journalNote:z.journalNote,messages:Ae};await iS(He),I(qe=>{const We=qe.filter(st=>st.id!==He.id);return[He,...We].sort((st,Ne)=>Ne.updatedAt-st.updatedAt)}),E({id:He.id,title:He.title}),Q(He.id);try{const qe=await nS(L),We=z.journalNote||z.summary||"Conversation saved.",st=`Conversation: ${He.title}`,Ne=qe!=null&&qe.content?`${qe.content.trim()}

${st}
${We}`:`${st}
${We}`;await lm({date:L,content:Ne})}catch(qe){console.error("Failed to sync conversation to journal:",qe)}b("Conversation archived. Review it on the Threads page.")}catch(z){console.error("Failed to save conversation thread:",z),b("Could not archive this conversation. Check console for details.")}finally{f(!1),setTimeout(()=>b(null),4e3)}}};return y.jsxs("div",{className:"flex flex-col h-full",children:[y.jsxs("div",{className:"flex-1 overflow-y-auto",children:[y.jsxs("div",{className:"sticky top-0 z-10 bg-[#26282B] border-b border-gray-700/50 px-6 py-4",children:[y.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[y.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs uppercase tracking-widest text-gray-500",children:[y.jsx("span",{children:"Thread Controls"}),T&&y.jsxs("span",{className:"text-gray-300 normal-case tracking-normal",children:["Viewing: ",T.title]}),g&&y.jsx("span",{className:"text-blue-300 normal-case tracking-normal",children:g})]}),y.jsxs("div",{className:"relative flex flex-wrap items-center gap-2",children:[y.jsx("button",{onClick:Ee,className:"px-3 py-2 rounded-md text-sm font-semibold transition-colors bg-gray-800 hover:bg-gray-700 text-gray-200",children:"New Conversation"}),y.jsx("button",{onClick:()=>K(z=>!z),disabled:me.length===0&&!B,className:`px-3 py-2 rounded-md text-sm font-semibold transition-colors ${me.length===0&&!B?"bg-gray-700 text-gray-500 cursor-not-allowed":B?"bg-emerald-600 text-white":"bg-gray-800 hover:bg-gray-700 text-gray-200"}`,children:me.length>0?`Context (${me.length})`:"Context"}),y.jsx("button",{onClick:ue,className:`px-3 py-2 rounded-md text-sm font-semibold transition-colors ${D?"bg-purple-600 text-white":"bg-gray-800 hover:bg-gray-700 text-gray-200"}`,children:D?"Close Saved Threads":"Open Saved Threads"}),y.jsx("button",{onClick:V,disabled:p||e.length===0,className:`px-4 py-2 rounded-md text-sm font-semibold transition-colors ${e.length===0?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-500 text-white"} ${p?"opacity-80 cursor-wait":""}`,children:p?"Archiving":"Archive Conversation"}),D&&y.jsxs("div",{className:"absolute right-0 top-full mt-2 w-96 max-h-80 overflow-y-auto bg-[#1b1d1f] border border-gray-700 rounded-lg shadow-xl p-3",children:[y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[y.jsx("h3",{className:"text-sm font-semibold text-gray-200",children:"Saved Threads"}),y.jsx("button",{onClick:()=>M(!1),className:"text-xs text-gray-400 hover:text-gray-200",children:"Close"})]}),U?y.jsx("div",{className:"text-sm text-gray-400 py-6 text-center",children:"Loading saved conversations"}):k.length===0?y.jsx("div",{className:"text-sm text-gray-500 py-6 text-center",children:"No archived threads yet. Archive a conversation to revisit it here."}):y.jsx("div",{className:"space-y-2",children:k.map(z=>y.jsxs("button",{onClick:()=>Me(z.id),className:"w-full text-left bg-[#232527] hover:bg-[#2b2d30] border border-gray-700/70 rounded-md p-3 transition-colors",children:[y.jsxs("div",{className:"flex items-center justify-between gap-2",children:[y.jsx("span",{className:"text-sm font-semibold text-gray-100",children:z.title||"Conversation Thread"}),y.jsx("span",{className:"text-xs text-gray-500",children:cr(new Date(z.updatedAt||z.createdAt),"MMM d, yyyy h:mm a")})]}),z.summary&&y.jsxs("p",{className:"mt-2 text-xs text-gray-400 leading-relaxed",children:[z.summary.slice(0,180),z.summary.length>180?"":""]}),z.tags&&z.tags.length>0&&y.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:z.tags.slice(0,4).map(J=>y.jsx("span",{className:"text-[10px] uppercase tracking-wide bg-gray-800 text-gray-300 px-2 py-0.5 rounded-full",children:J},J))})]},z.id))})]})]})]}),B&&y.jsxs("div",{className:"mt-3 bg-[#1b1d1f] border border-emerald-700/50 rounded-lg p-4 space-y-3",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h3",{className:"text-sm font-semibold text-emerald-200 uppercase tracking-wider",children:"Injected Context Memories"}),y.jsx("span",{className:"text-xs text-gray-500",children:"glass box mode"})]}),me.length===0?y.jsx("p",{className:"text-xs text-gray-400",children:"No contextual memories were pulled for this turn."}):y.jsx("ul",{className:"space-y-3 text-sm text-gray-200",children:me.map(z=>y.jsxs("li",{className:"border border-emerald-500/30 rounded-md p-3 bg-[#111315]",children:[y.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-2",children:[y.jsx("span",{children:new Date(z.timestamp).toLocaleString()}),y.jsxs("span",{className:"text-emerald-300 font-semibold",children:["Relevance ",z.relevance]})]}),y.jsx("div",{className:"text-gray-100 text-sm font-semibold mb-1",children:z.summary}),y.jsx("div",{className:"flex flex-wrap gap-2 text-[10px] uppercase tracking-wide text-emerald-200",children:z.tags.map(J=>y.jsxs("a",{href:`#/graph?tag=${encodeURIComponent(J)}`,className:"px-2 py-0.5 bg-emerald-500/10 border border-emerald-500/30 rounded-full hover:bg-emerald-500/20",children:["#",J]},`${z.id}-${J}`))})]},z.id??z.timestamp))})]})]}),e.length===0&&!n?y.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-500",children:[y.jsxs("div",{className:"flex items-center justify-center gap-3 text-3xl font-bold text-gray-300",children:[y.jsx(Mh,{className:"w-9 h-9"}),y.jsx("h1",{children:"Sylvia"})]}),y.jsx("p",{className:"mt-2",children:"Start a conversation below."}),y.jsxs("div",{className:"flex flex-wrap gap-2 mt-8",children:[y.jsx(Hp,{text:"Explain quantum computing in simple terms",hasIcon:!0}),y.jsx(Hp,{text:"What are some tips for better sleep?"}),y.jsx(Hp,{text:"Draft an email to my team about the project update"})]})]}):e.map(z=>y.jsx(wL,{message:z},z.id)),n&&e.length>0&&y.jsxs("div",{className:"flex items-center gap-4 p-4",children:[y.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center bg-blue-600 animate-pulse"}),y.jsx("div",{className:"w-24 h-4 bg-gray-700 rounded-md animate-pulse"})]}),y.jsx("div",{ref:ce})]}),y.jsx(rE,{onSendMessage:Qe,isLoading:n,performers:a,activePerformerIds:u,onTogglePerformer:Pe,isCoreAgentMuted:G,onToggleCoreAgent:()=>Y(z=>!z)})]})},XU=[{label:"A+",value:10},{label:"A",value:9},{label:"A-",value:8},{label:"B+",value:7},{label:"B",value:6},{label:"B-",value:5},{label:"C",value:4},{label:"D",value:3},{label:"F",value:1}],QU=({memory:e,onUpdate:t,onDelete:n})=>{const[i,a]=H.useState(!1),[s,u]=H.useState(!1),[d,p]=H.useState(e.summary),[f,g]=H.useState(e.tags.join(", ")),[b,T]=H.useState(e.relevance),E=H.useMemo(()=>f.split(",").map(M=>M.trim()).filter(M=>M.length>0),[f]),k=e.conversation.split(`

`).map((M,U)=>{const O=M.split(":"),se=O[0],Q=O.slice(1).join(":").trim();return y.jsxs("p",{className:"mb-2",children:[y.jsxs("span",{className:`font-semibold ${se==="User"?"text-purple-300":"text-blue-300"}`,children:[se,":"]}),y.jsx("span",{className:"ml-2",children:Q})]},U)}),I=()=>{e.id&&(t({...e,summary:d.trim()||e.summary,tags:E,relevance:b}),u(!1))},D=()=>{!e.id||!window.confirm("Delete this memory?")||n(e.id)};return y.jsxs("div",{className:"bg-[#1e1f20] rounded-lg p-6 border border-gray-700 hover:border-blue-500 transition-all duration-300 flex flex-col gap-4",children:[y.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s?y.jsx("textarea",{value:d,onChange:M=>p(M.target.value),className:"flex-1 bg-[#26282B] text-gray-200 rounded-lg px-3 py-2 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3}):y.jsx("p",{className:"text-gray-300 flex-1",children:e.summary}),y.jsx("div",{className:"flex items-center gap-2",children:s?y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:I,className:"p-2 rounded-md bg-blue-600 hover:bg-blue-500 text-white",children:y.jsx(QC,{})}),y.jsx("button",{onClick:()=>{p(e.summary),g(e.tags.join(", ")),T(e.relevance),u(!1)},className:"p-2 rounded-md bg-gray-700 hover:bg-gray-600 text-gray-200",children:y.jsx(WC,{})})]}):y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:()=>u(!0),className:"p-2 rounded-md bg-gray-700 hover:bg-gray-600 text-gray-200",children:y.jsx(XC,{})}),y.jsx("button",{onClick:D,className:"p-2 rounded-md bg-red-600 hover:bg-red-500 text-white",children:y.jsx(ff,{})})]})})]}),y.jsx("div",{className:"flex flex-wrap gap-2",children:s?y.jsx("input",{value:f,onChange:M=>g(M.target.value),placeholder:"Tags (comma separated)",className:"w-full bg-[#26282B] text-gray-200 rounded-lg px-3 py-2 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"}):e.tags.map((M,U)=>y.jsxs("a",{href:`#/graph?tag=${encodeURIComponent(M)}`,className:"bg-gray-700 text-blue-300 text-xs font-medium px-2.5 py-1 rounded-full hover:bg-blue-600 hover:text-white transition-colors",children:["#",M]},U))}),i&&y.jsxs("div",{className:"mb-4 mt-2 p-4 bg-black/20 rounded-lg max-h-60 overflow-y-auto",children:[y.jsx("h4",{className:"text-sm font-semibold text-gray-400 mb-2",children:"Conversation Snippet"}),y.jsx("div",{className:"text-sm text-gray-400",children:k})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 pt-3 border-t border-gray-700/50",children:[y.jsxs("button",{onClick:()=>a(!i),className:"text-blue-400 hover:text-blue-300 font-semibold",children:[i?"Hide":"View"," Conversation"]}),y.jsxs("span",{className:`font-bold ${b>7?"text-green-400":b>4?"text-yellow-400":"text-red-400"}`,children:["Relevance: ",s?b:e.relevance,"/10"]})]}),s&&y.jsxs("div",{className:"space-y-3",children:[y.jsx("div",{className:"flex flex-wrap gap-2",children:XU.map(M=>y.jsx("button",{onClick:()=>T(M.value),className:`px-2 py-1 rounded-md text-xs font-semibold border ${b===M.value?"bg-blue-600 border-blue-400 text-white":"bg-[#26282B] border-gray-700 text-gray-200 hover:bg-gray-700"}`,children:M.label},M.label))}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase tracking-wider text-gray-500 mb-1",children:"Fine Tune"}),y.jsx("input",{type:"range",min:0,max:10,value:b,onChange:M=>T(Number(M.target.value)),className:"w-full"})]})]})]})]})},WU=()=>{const[e,t]=H.useState([]),[n,i]=H.useState(!0),[a,s]=H.useState("timestamp"),[u,d]=H.useState(""),[p,f]=H.useState(null);H.useEffect(()=>{const D=async()=>{try{const U=await iu();t(U)}catch(U){console.error("Failed to fetch memories:",U)}finally{i(!1)}};D();const M=()=>D();return window.addEventListener("memories-updated",M),()=>{window.removeEventListener("memories-updated",M)}},[]);const g=async()=>{i(!0);try{const D=await iu();t(D)}catch(D){console.error("Failed to refresh memories:",D)}finally{i(!1)}},b=H.useMemo(()=>e.filter(M=>{if(!u)return!0;const U=u.toLowerCase(),O=M.summary.toLowerCase().includes(U),se=M.tags.some(Q=>Q.toLowerCase().includes(U));return O||se}).sort((M,U)=>a==="relevance"?U.relevance-M.relevance:U.timestamp-M.timestamp),[e,a,u]),T=({value:D,label:M})=>y.jsx("button",{onClick:()=>s(D),className:`px-4 py-2 rounded-md transition-colors text-sm font-medium ${a===D?"bg-blue-600 text-white":"bg-[#1e1f20] hover:bg-gray-700 text-gray-300"}`,children:M}),E=async D=>{try{await w4(D),t(M=>M.map(U=>U.id===D.id?D:U)),f("Memory updated.")}catch(M){console.error("Failed to update memory:",M),f("Could not update memory.")}finally{setTimeout(()=>f(null),3e3)}},k=async D=>{try{await S4(D),t(M=>M.filter(U=>U.id!==D)),f("Memory deleted.")}catch(M){console.error("Failed to delete memory:",M),f("Could not delete memory.")}finally{setTimeout(()=>f(null),3e3)}},I=async()=>{if(window.confirm("Clear all stored memories?"))try{await T4(),t([]),f("All memories cleared.")}catch(M){console.error("Failed to clear memories:",M),f("Could not clear memories.")}finally{setTimeout(()=>f(null),3e3)}};return y.jsxs("div",{className:"p-8",children:[y.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-8",children:[y.jsx("h1",{className:"text-4xl font-bold text-gray-200",children:"Agent Memory"}),y.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-400",children:[p&&y.jsx("span",{className:"text-blue-300",children:p}),y.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-3 py-2 rounded-md border border-gray-600 bg-[#1e1f20] text-gray-300 hover:bg-gray-700",children:[y.jsx(tu,{className:"h-4 w-4"})," Refresh"]}),y.jsxs("button",{onClick:I,className:"flex items-center gap-2 px-3 py-2 rounded-md border border-red-600/50 text-red-200 bg-red-900/20 hover:bg-red-900/40",children:[y.jsx(ff,{className:"h-4 w-4"})," Clear All"]})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none",children:y.jsx(Lh,{className:"w-5 h-5"})}),y.jsx("input",{type:"text",placeholder:"Search memories...",value:u,onChange:D=>d(D.target.value),className:"bg-[#2a2b2c] text-gray-300 rounded-lg pl-10 pr-4 py-2 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),y.jsxs("div",{className:"flex items-center gap-2 p-1 bg-gray-800 rounded-lg",children:[y.jsx(T,{value:"timestamp",label:"Most Recent"}),y.jsx(T,{value:"relevance",label:"Most Relevant"})]})]})]}),n?y.jsx("p",{className:"text-gray-400",children:"Loading memories..."}):b.length===0?y.jsx("div",{className:"text-center py-16",children:e.length===0?y.jsxs(y.Fragment,{children:[y.jsx("p",{className:"text-gray-400 text-lg",children:"No memories stored yet."}),y.jsx("p",{className:"text-gray-500",children:"Start a conversation to build the agent's knowledge base."})]}):y.jsxs(y.Fragment,{children:[y.jsxs("p",{className:"text-gray-400 text-lg",children:['No memories found for "',u,'".']}),y.jsx("p",{className:"text-gray-500",children:"Try searching with different keywords."})]})}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(D=>y.jsx(QU,{memory:D,onUpdate:E,onDelete:M=>k(M)},D.id))})]})},ZU=({date:e,entry:t,onClose:n,onSave:i})=>{const[a,s]=H.useState(""),[u,d]=H.useState(!1),p=cr(e,"yyyy-MM-dd");H.useEffect(()=>{s((t==null?void 0:t.content)||"")},[t]);const f=async()=>{d(!0);const g={date:p,content:a};try{await lm(g),i(g)}catch(b){console.error("Failed to save journal entry:",b)}finally{d(!1)}};return y.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:n,children:y.jsxs("div",{className:"bg-[#1e1f20] rounded-lg shadow-xl w-full max-w-2xl border border-gray-700 p-8",onClick:g=>g.stopPropagation(),children:[y.jsxs("h2",{className:"text-2xl font-bold text-gray-200 mb-2",children:["Journal Entry for ",cr(e,"MMMM d, yyyy")]}),y.jsx("p",{className:"text-gray-400 mb-6",children:"This entry will be added to the agent's long-term temporal context."}),y.jsx("textarea",{value:a,onChange:g=>s(g.target.value),placeholder:"Write about key events, insights, or instructions for the future...",className:"w-full h-64 bg-[#2a2b2c] text-gray-300 rounded-lg p-4 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-y"}),y.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[y.jsx("button",{onClick:n,className:"px-4 py-2 bg-gray-600 text-white font-semibold rounded-lg hover:bg-gray-700 transition-colors",children:"Cancel"}),y.jsx("button",{onClick:f,disabled:u,className:"px-6 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors disabled:bg-blue-800 disabled:cursor-not-allowed",children:u?"Saving...":"Save Entry"})]})]})})},eO=()=>{const[e,t]=H.useState(new Date),[n,i]=H.useState(new Map),[a,s]=H.useState(null),[u,d]=H.useState(!0),p=async()=>{try{const D=await am(),M=new Map(D.map(U=>[U.date,U]));i(M)}catch(D){console.error("Failed to fetch journal entries:",D)}finally{d(!1)}};H.useEffect(()=>{p()},[]);const f=H.useMemo(()=>OL(e),[e]),g=H.useMemo(()=>kS(e),[e]),b=H.useMemo(()=>UL({start:Al(f),end:zL(g)}),[f,g]),T=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],E=D=>{s(D)},k=()=>{s(null)},I=D=>{p(),s(null)};return u?y.jsx("div",{className:"p-8 text-center text-gray-400",children:"Loading Calendar..."}):y.jsxs("div",{className:"p-8",children:[y.jsxs("div",{className:"flex justify-between items-center mb-8",children:[y.jsx("h1",{className:"text-4xl font-bold text-gray-200",children:"Temporal Journal"}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("button",{onClick:()=>t(zU(e)),className:"p-2 rounded-full hover:bg-gray-700/50",children:y.jsx(YC,{})}),y.jsx("h2",{className:"text-2xl font-semibold text-gray-300 w-48 text-center",children:cr(e,"MMMM yyyy")}),y.jsx("button",{onClick:()=>t(CS(e,1)),className:"p-2 rounded-full hover:bg-gray-700/50",children:y.jsx(KC,{})})]})]}),y.jsxs("div",{className:"grid grid-cols-7 gap-px bg-gray-700 border border-gray-700 rounded-lg overflow-hidden",children:[T.map(D=>y.jsx("div",{className:"text-center font-medium text-xs text-gray-400 py-2 bg-[#1e1f20]",children:D},D)),b.map(D=>{const M=cr(D,"yyyy-MM-dd"),U=n.has(M),O=D.getMonth()===e.getMonth();return y.jsxs("div",{onClick:()=>E(D),className:`p-2 h-32 flex flex-col bg-[#1e1f20] hover:bg-gray-800 transition-colors cursor-pointer relative ${O?"":"text-gray-600"}`,children:[y.jsx("span",{className:`font-semibold ${BU(D)?"bg-blue-600 text-white rounded-full w-7 h-7 flex items-center justify-center":""}`,children:cr(D,"d")}),U&&y.jsx("div",{className:"absolute bottom-2 left-2 w-2 h-2 bg-blue-400 rounded-full",title:"Entry exists"})]},D.toString())})]}),a&&y.jsx(ZU,{date:a,entry:n.get(cr(a,"yyyy-MM-dd")),onClose:k,onSave:I})]})},tO=[{key:"preflection",label:"Preflection",description:"Show the reasoning primer before the agent responds."},{key:"monologue",label:"Internal Monologue",description:"Display the agents inner voice when available."},{key:"stageDirections",label:"Stage Directions",description:"Surface stage directions or situational cues."},{key:"memory",label:"Memory",description:"Reveal saved memory summaries and tags."},{key:"tasks",label:"Task List",description:"Show generated task lists for the response."},{key:"audit",label:"Task Audit",description:"Show completion audit for generated tasks."},{key:"postProcessing",label:"Post-processing",description:"Expose sentiment, subtext, and other post-processing callouts."}],eb=[{id:"google",title:"Google Gemini",description:"Use Gemini via Google AI Studio.",apiKeyField:"googleApiKey",modelField:"googleModel",models:hu,helperText:"Create a Gemini API key in Google AI Studio and paste it here."},{id:"openai",title:"OpenAI",description:"Use OpenAI chat completions.",apiKeyField:"openaiApiKey",modelField:"openaiModel",models:mu,helperText:"Use a standard OpenAI API key with access to the selected model."},{id:"openrouter",title:"OpenRouter",description:"Route through OpenRouter.io.",apiKeyField:"openRouterApiKey",modelField:"openRouterModel",models:Sf,helperText:"Generate an OpenRouter API key and select any supported upstream model."}],nO=()=>{const[e,t]=H.useState(()=>localStorage.getItem("systemInstruction")||""),[n,i]=H.useState(()=>Wr()),[a,s]=H.useState(!1),[u,d]=H.useState(!1),p=()=>{localStorage.setItem("systemInstruction",e),s(!0),setTimeout(()=>s(!1),3e3)},f=k=>{i(I=>({...I,provider:k}))},g=(k,I)=>{i(D=>({...D,[k]:I}))},b=(k,I)=>{i(D=>({...D,[k]:I}))},T=k=>{i(I=>({...I,admonitionVisibility:{...I.admonitionVisibility,[k]:!I.admonitionVisibility[k]}}))},E=()=>{z4(n),d(!0),setTimeout(()=>d(!1),3e3)};return y.jsxs("div",{className:"p-8 max-w-3xl mx-auto",children:[y.jsx("h1",{className:"text-4xl font-bold text-gray-200 mb-8",children:"Settings"}),y.jsxs("div",{className:"space-y-8",children:[y.jsxs("div",{className:"bg-[#1e1f20] p-6 rounded-lg border border-gray-700",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-200",children:"Custom System Instruction"}),y.jsx("p",{className:"text-sm text-gray-400 mt-1 mb-4",children:"Define the base behavior and personality for the agent. This will be used in every conversation."}),y.jsx("textarea",{value:e,onChange:k=>t(k.target.value),placeholder:"Define the agent's core personality. e.g., 'You are a historian specializing in ancient Rome.' The agent will automatically be instructed on how to use its memory systems.",className:"w-full h-32 bg-[#2a2b2c] text-gray-300 rounded-lg p-3 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-y"}),y.jsx("button",{onClick:p,className:"mt-4 px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors",children:"Save Instruction"}),a&&y.jsx("p",{className:"mt-2 text-sm text-green-400",children:"Instruction saved."})]}),y.jsxs("div",{className:"bg-[#1e1f20] p-6 rounded-lg border border-gray-700",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-200",children:"AI Provider Configuration"}),y.jsx("p",{className:"text-sm text-gray-400 mt-1 mb-4",children:"Choose which provider to use at runtime and configure API keys and default models. All keys are stored locally in your browser so you can bring your own credentials."}),y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Active Provider"}),y.jsx("select",{value:n.provider,onChange:k=>f(k.target.value),className:"w-full bg-[#2a2b2c] text-gray-300 rounded-lg p-3 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6",children:eb.map(k=>y.jsx("option",{value:k.id,children:k.title},k.id))}),y.jsx("div",{className:"space-y-6",children:eb.map(k=>{const I=n.provider===k.id,D=n[k.apiKeyField],M=n[k.modelField];return y.jsxs("div",{className:`p-4 rounded-lg border ${I?"border-blue-500 bg-blue-500/10":"border-gray-700 bg-[#1a1b1c]"}`,children:[y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[y.jsxs("div",{children:[y.jsx("h4",{className:"text-md font-semibold text-gray-200",children:k.title}),y.jsx("p",{className:"text-sm text-gray-400",children:k.description})]}),I&&y.jsx("span",{className:"text-xs uppercase tracking-wide text-blue-300 font-semibold",children:"Active"})]}),y.jsx("label",{className:"block text-xs font-medium text-gray-400 uppercase mb-1",children:"API Key"}),y.jsx("input",{type:"password",value:D,onChange:U=>b(k.apiKeyField,U.target.value),placeholder:"Enter API key",className:"w-full bg-[#2a2b2c] text-gray-300 rounded-lg p-3 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 mb-3"}),y.jsx("p",{className:"text-xs text-gray-500 mb-4",children:k.helperText}),y.jsx("label",{className:"block text-xs font-medium text-gray-400 uppercase mb-1",children:"Default Model"}),y.jsx("select",{value:M,onChange:U=>g(k.modelField,U.target.value),className:"w-full bg-[#2a2b2c] text-gray-300 rounded-lg p-3 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:k.models.map(U=>y.jsx("option",{value:U,children:U},U))})]},k.id)})}),y.jsxs("div",{className:"bg-[#1e1f20] p-6 rounded-lg border border-gray-700",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-200",children:"Transparency Controls"}),y.jsx("p",{className:"text-sm text-gray-400 mt-1 mb-4",children:"Choose which markdown callouts (admonitions) appear in the chat transcript when the agent responds."}),y.jsx("div",{className:"space-y-3",children:tO.map(k=>y.jsxs("label",{className:"flex items-start gap-3 bg-[#161719] border border-gray-700 rounded-lg p-3 hover:border-blue-500/40 transition-colors",children:[y.jsx("input",{type:"checkbox",className:"mt-1 h-4 w-4 text-blue-500 focus:ring-blue-500",checked:n.admonitionVisibility[k.key],onChange:()=>T(k.key)}),y.jsxs("div",{children:[y.jsx("div",{className:"text-sm font-semibold text-gray-200",children:k.label}),y.jsx("p",{className:"text-xs text-gray-500",children:k.description})]})]},k.key))})]}),y.jsx("button",{onClick:E,className:"mt-6 px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors",children:"Save AI Settings"}),u&&y.jsx("p",{className:"mt-2 text-sm text-green-400",children:"AI settings saved."})]})]})]})},rO=e=>{const t=new Map,n=[];return e.forEach(i=>{const a=i.summary.length>80?`${i.summary.slice(0,77)}`:i.summary,s=i.id?`Memory #${i.id}`:`Memory ${new Date(i.timestamp).toLocaleString()}`;n.push({name:s,relationships:{summary:[a],tags:i.tags}}),i.tags.forEach((u,d,p)=>{const f=u.trim();if(!f)return;t.has(f)||t.set(f,{name:f,relationships:{memories:[],co_occurs_with:[]}});const g=t.get(f),b=g.relationships.memories||[];b.includes(s)||(g.relationships.memories=[...b,s]),p.forEach(T=>{const E=T.trim();if(!E||E===f)return;const k=g.relationships.co_occurs_with||[];k.includes(E)||(g.relationships.co_occurs_with=[...k,E])})})}),[...Array.from(t.values()),...n]},iO=()=>{var D;const[e,t]=H.useState([]),[n,i]=H.useState([]),[a,s]=H.useState(!0),[u,d]=H.useState(""),[p,f]=H.useState(null),g=async()=>{s(!0);try{const[M,U,O]=await Promise.all([iu(),sm(),cS()]),Q=[...rO(M),...U].reduce((Y,me)=>{const j=Y.get(me.name);if(!j)Y.set(me.name,me);else{const B={...j.relationships};Object.entries(me.relationships||{}).forEach(([K,ce])=>{const xe=new Set([...B[K]||[],...ce||[]]);B[K]=Array.from(xe)}),Y.set(me.name,{...j,relationships:B})}return Y},new Map),G=Array.from(Q.values()).sort((Y,me)=>Y.name.localeCompare(me.name));t(G),i(O)}catch(M){console.error("Failed to build knowledge graph from memories:",M)}finally{s(!1)}};H.useEffect(()=>{g();const M=()=>g();return window.addEventListener("memories-updated",M),window.addEventListener("performer-interactions-updated",M),()=>{window.removeEventListener("memories-updated",M),window.removeEventListener("performer-interactions-updated",M)}},[]);const b=async()=>{if(window.confirm("Clear all knowledge graph nodes? This will remove stored relationships."))try{await C4(),await g()}catch(U){console.error("Failed to clear knowledge graph:",U)}},T=async()=>{if(window.confirm("Run the knowledge graph builder? This may use additional LLM calls."))try{const U=await iu();for(const O of U)try{await vL(O.conversation,{conversationId:`memory-${O.id??O.timestamp}`,timestamp:O.timestamp,tags:O.tags})}catch(se){console.warn("Failed to enrich knowledge graph for memory",O.id,se)}await g()}catch(U){console.error("Failed to rebuild knowledge graph:",U)}},E=H.useMemo(()=>{if(!u.trim())return e;const M=u.toLowerCase();return e.filter(U=>U.name.toLowerCase().includes(M)?!0:Object.entries(U.relationships||{}).some(([O,se])=>O.toLowerCase().includes(M)?!0:(se||[]).some(Q=>Q.toLowerCase().includes(M))))},[e,u]);H.useEffect(()=>{const U=new URLSearchParams(window.location.hash.split("?")[1]||window.location.search.slice(1)).get("tag");if(U){const O=E.find(se=>se.name.toLowerCase()===U.toLowerCase());O&&f(O)}},[E]);const k=M=>{f(M)},I=M=>{const U=e.find(O=>O.name===M);U&&f(U)};return y.jsxs("div",{className:"p-8 flex flex-col h-full gap-6",children:[y.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-4xl font-bold text-gray-200",children:"Knowledge Graph"}),y.jsx("p",{className:"text-sm text-gray-400",children:"Derived from Sylvia's saved memories. Tags become entities, co-occurring tags form relationships, and each memory node surfaces its tags."})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-3 py-2 rounded-md border border-gray-600 bg-[#1e1f20] text-gray-300 hover:bg-gray-700 text-sm",children:[y.jsx(tu,{className:"h-4 w-4"})," Refresh"]}),y.jsxs("button",{onClick:T,className:"flex items-center gap-2 px-3 py-2 rounded-md border border-blue-600 bg-blue-900/40 text-blue-200 hover:bg-blue-800/50 text-sm",children:[y.jsx(tu,{className:"h-4 w-4"})," Rebuild with LLM"]}),y.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-3 py-2 rounded-md border border-red-600 bg-red-900/40 text-red-200 hover:bg-red-800/50 text-sm",children:[y.jsx(ff,{className:"h-4 w-4"})," Clear Stored Graph"]})]})]}),y.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-8 overflow-hidden",children:[y.jsxs("div",{className:"md:col-span-1 bg-[#1e1f20] rounded-lg border border-gray-700 p-4 flex flex-col overflow-hidden",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[y.jsxs("div",{className:"relative flex-1",children:[y.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none",children:y.jsx(Lh,{className:"w-4 h-4"})}),y.jsx("input",{value:u,onChange:M=>d(M.target.value),placeholder:"Search tags or memories",className:"w-full bg-[#2a2b2c] text-gray-300 rounded-lg pl-9 pr-3 py-2 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),y.jsxs("span",{className:"text-xs text-gray-500",children:[E.length," / ",e.length]})]}),y.jsx("div",{className:"flex-1 overflow-y-auto",children:a?y.jsx("p",{className:"text-gray-400",children:"Building graph"}):E.length===0?y.jsx("p",{className:"text-gray-500",children:"No entities found. Save memories with tags to populate the graph."}):y.jsx("ul",{className:"space-y-2",children:E.map(M=>y.jsx("li",{children:y.jsx("button",{onClick:()=>k(M),className:`w-full text-left px-3 py-2 rounded-md transition-colors ${(p==null?void 0:p.name)===M.name?"bg-blue-600 text-white":"hover:bg-gray-700/50"}`,children:M.name})},M.name))})})]}),y.jsx("div",{className:"md:col-span-2 bg-[#1e1f20] border border-gray-700 rounded-lg p-6 overflow-y-auto",children:p?y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-bold text-blue-300 break-words",children:p.name}),y.jsx("p",{className:"text-xs text-gray-500",children:(D=p.relationships.summary)!=null&&D[0]?"Memory snippet":"Tag connections"})]}),y.jsx("div",{className:"space-y-4",children:Object.entries(p.relationships||{}).map(([M,U])=>{if(!U||U.length===0)return null;const O=M.replace(/_/g," ");return y.jsxs("div",{children:[y.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-2",children:O}),y.jsx("ul",{className:"space-y-2",children:U.map(se=>y.jsx("li",{className:"pl-3 border-l border-gray-700",children:M==="summary"?y.jsx("span",{className:"text-gray-300",children:se}):y.jsx("button",{onClick:()=>I(se),className:"text-gray-300 hover:text-blue-400 hover:underline text-left transition-colors",children:se})},se))})]},M)})})]}):y.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Select a tag or memory on the left to explore its relationships."})})]})]})},oO=()=>{var G;const[e,t]=H.useState([]),[n,i]=H.useState(null),[a,s]=H.useState(null),[u,d]=H.useState(""),[p,f]=H.useState(!0),[g,b]=H.useState(!1),[T,E]=H.useState(null),k=async()=>{try{const me=(await rS()).sort((j,B)=>B.updatedAt-j.updatedAt);if(t(me),!n&&me.length>0)D(me[0].id,me[0]);else if(n){const j=me.find(B=>B.id===n);j&&D(j.id,j)}}catch(Y){console.error("Failed to load conversation threads:",Y)}finally{f(!1)}};H.useEffect(()=>{k()},[]);const I=H.useMemo(()=>{if(!u.trim())return e;const Y=u.toLowerCase();return e.filter(me=>{var ce,xe,_e;const j=(ce=me.title)==null?void 0:ce.toLowerCase().includes(Y),B=(xe=me.tags)==null?void 0:xe.some(Pe=>Pe.toLowerCase().includes(Y)),K=(_e=me.summary)==null?void 0:_e.toLowerCase().includes(Y);return j||B||K})},[e,u]),D=(Y,me)=>{var B;const j=me||e.find(K=>K.id===Y);j&&(i(Y),s({title:j.title||"",summary:j.summary||"",tags:((B=j.tags)==null?void 0:B.join(", "))||"",journalNote:j.journalNote||""}))},M=(Y,me)=>{s(j=>j&&{...j,[Y]:me})},U=async()=>{if(!n||!a)return;const Y=e.find(me=>me.id===n);if(Y){b(!0);try{const me={...Y,title:a.title.trim()||Y.title,summary:a.summary.trim(),tags:a.tags.split(",").map(j=>j.trim()).filter(j=>j.length>0),journalNote:a.journalNote.trim(),updatedAt:Date.now()};await iS(me),E("Thread metadata saved."),await k()}catch(me){console.error("Failed to save thread metadata:",me),E("Unable to save changes. Check console for details.")}finally{b(!1),setTimeout(()=>E(null),4e3)}}},O=async()=>{if(!(!n||!window.confirm("Delete this conversation archive? This cannot be undone.")))try{await A4(n),E("Thread deleted."),i(null),s(null),await k()}catch(me){console.error("Failed to delete thread:",me),E("Could not delete thread.")}finally{setTimeout(()=>E(null),3e3)}},se=async()=>{if(!n||!a)return;const Y=e.find(me=>me.id===n);if(Y)try{const me=Y.journalDate||cr(new Date(Y.createdAt),"yyyy-MM-dd"),j=await nS(me),B=`Conversation: ${a.title||Y.title}`,K=a.journalNote||Y.journalNote||a.summary||Y.summary,ce=j!=null&&j.content?`${j.content.trim()}

${B}
${K}`:`${B}
${K}`;await lm({date:me,content:ce}),E("Journal entry synced.")}catch(me){console.error("Failed to sync journal entry:",me),E("Could not write to the temporal journal.")}finally{setTimeout(()=>E(null),3e3)}},Q=n?e.find(Y=>Y.id===n):null;return y.jsxs("div",{className:"p-8 h-full flex flex-col gap-6 overflow-hidden",children:[y.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-4xl font-bold text-gray-100",children:"Conversation Threads"}),y.jsx("p",{className:"text-gray-400 text-sm",children:"Review archived conversations, add high-level metadata, and push curated summaries into the temporal journal."})]}),y.jsx("div",{className:"flex items-center gap-3 text-sm text-gray-400",children:T&&y.jsx("span",{className:"text-blue-300",children:T})})]}),y.jsxs("div",{className:"flex flex-col md:flex-row gap-6 flex-1 overflow-hidden",children:[y.jsxs("div",{className:"md:w-72 flex-shrink-0 bg-[#1e1f20] border border-gray-700 rounded-lg p-4 flex flex-col overflow-hidden",children:[y.jsx("div",{className:"mb-4",children:y.jsx("input",{type:"text",value:u,onChange:Y=>d(Y.target.value),placeholder:"Search threads...",className:"w-full bg-[#2a2b2c] text-gray-300 rounded-lg px-3 py-2 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})}),y.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-1",children:p?y.jsx("p",{className:"text-gray-500 text-sm",children:"Loading threads"}):I.length===0?y.jsx("p",{className:"text-gray-500 text-sm",children:"No archived conversations yet."}):I.map(Y=>y.jsxs("button",{onClick:()=>D(Y.id,Y),className:`w-full text-left px-3 py-2 rounded-md transition-colors text-sm ${Y.id===n?"bg-blue-600 text-white":"bg-[#2a2b2c] hover:bg-gray-700 text-gray-300"}`,children:[y.jsx("div",{className:"font-semibold truncate",children:Y.title||"Untitled Conversation"}),y.jsx("div",{className:"text-xs text-gray-400 mt-1",children:cr(new Date(Y.updatedAt),"MMM d, yyyy  HH:mm")})]},Y.id))})]}),y.jsx("div",{className:"flex-1 bg-[#1e1f20] border border-gray-700 rounded-lg p-6 overflow-hidden flex flex-col",children:Q&&a?y.jsxs("div",{className:"flex-1 flex flex-col gap-6 overflow-hidden",children:[y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-semibold text-gray-400 uppercase mb-2",children:"Title"}),y.jsx("input",{type:"text",value:a.title,onChange:Y=>M("title",Y.target.value),className:"w-full bg-[#2a2b2c] text-gray-200 rounded-lg px-3 py-2 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-semibold text-gray-400 uppercase mb-2",children:"Summary"}),y.jsx("textarea",{value:a.summary,onChange:Y=>M("summary",Y.target.value),className:"w-full h-32 bg-[#2a2b2c] text-gray-200 rounded-lg px-3 py-2 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-semibold text-gray-400 uppercase mb-2",children:"Tags (comma separated)"}),y.jsx("input",{type:"text",value:a.tags,onChange:Y=>M("tags",Y.target.value),className:"w-full bg-[#2a2b2c] text-gray-200 rounded-lg px-3 py-2 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-semibold text-gray-400 uppercase mb-2",children:"Journal Note"}),y.jsx("textarea",{value:a.journalNote,onChange:Y=>M("journalNote",Y.target.value),className:"w-full h-32 bg-[#2a2b2c] text-gray-200 rounded-lg px-3 py-2 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"}),y.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["When you sync, this note is appended to the temporal journal for ",Q.journalDate||cr(new Date(Q.createdAt),"MMM d, yyyy"),"."]})]}),y.jsxs("div",{className:"bg-[#111214] border border-gray-700 rounded-lg p-4 h-40 overflow-y-auto",children:[y.jsx("h4",{className:"text-xs font-semibold text-gray-400 uppercase mb-2",children:"Quick Preview"}),y.jsx(ma,{remarkPlugins:[ga],className:"prose prose-invert prose-sm max-w-none text-gray-300",children:a.summary||"_No summary provided._"})]})]})]}),y.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[y.jsx("button",{onClick:U,disabled:g,className:`px-4 py-2 rounded-md text-sm font-semibold transition-colors ${g?"bg-blue-700 cursor-wait":"bg-blue-600 hover:bg-blue-500"} text-white`,children:g?"Saving":"Save Metadata"}),y.jsx("button",{onClick:se,className:"px-4 py-2 rounded-md text-sm font-semibold transition-colors bg-purple-600 hover:bg-purple-500 text-white",children:"Sync to Journal"}),y.jsx("button",{onClick:O,className:"px-4 py-2 rounded-md text-sm font-semibold transition-colors bg-red-600 hover:bg-red-500 text-white ml-auto",children:"Delete Thread"})]}),y.jsxs("div",{className:"flex-1 bg-[#141517] border border-gray-800 rounded-lg p-4 overflow-y-auto",children:[y.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-3",children:"Conversation Transcript"}),y.jsx("div",{className:"space-y-3 text-sm",children:(G=Q.messages)==null?void 0:G.map(Y=>y.jsxs("div",{className:"p-3 rounded-lg border border-gray-800 bg-[#1d1f22]",children:[y.jsx("div",{className:"text-xs uppercase tracking-wider text-gray-500 mb-1",children:Y.role==="user"?"User":"Agent"}),y.jsx(ma,{remarkPlugins:[ga],className:"prose prose-invert prose-sm max-w-none text-gray-200",children:Y.content})]},Y.id))})]})]}):y.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:p?"Loading conversations":"Select a conversation thread to review its details."})})]})]})},tb=e=>e.startsWith("A")?"bg-emerald-600/20 text-emerald-300 border-emerald-500/40":e.startsWith("B")?"bg-blue-600/20 text-blue-300 border-blue-500/40":e.startsWith("C")?"bg-yellow-600/20 text-yellow-300 border-yellow-500/40":e.startsWith("D")?"bg-orange-600/20 text-orange-300 border-orange-500/40":"bg-red-600/20 text-red-300 border-red-500/40",aO=()=>{var M;const[e,t]=H.useState([]),[n,i]=H.useState(null),[a,s]=H.useState(""),[u,d]=H.useState("all"),[p,f]=H.useState(!0),[g,b]=H.useState(null),T=async()=>{try{const O=(await oS()).sort((se,Q)=>Q.updatedAt-se.updatedAt);t(O),!n&&O.length>0&&i(O[0].id)}catch(U){console.error("Failed to load HRMR ratings:",U)}finally{f(!1)}};H.useEffect(()=>{T()},[]);const E=H.useMemo(()=>{const U=a.toLowerCase();return e.filter(O=>{var G;const se=u==="all"||O.grade===u,Q=!U||O.agentResponse.toLowerCase().includes(U)||O.grade.toLowerCase().includes(U)||((G=O.modulesUsed)==null?void 0:G.some(Y=>Y.toLowerCase().includes(U)));return se&&Q})},[e,a,u]),k=n?e.find(U=>U.id===n):null,I=async(U,O)=>{try{await aS({...U,grade:O,updatedAt:Date.now()}),b("Rating updated."),await T()}catch(se){console.error("Failed to update grade:",se),b("Could not update grade.")}finally{setTimeout(()=>b(null),3e3)}},D=async U=>{if(window.confirm("Delete this rating?"))try{await lS(U.id),b("Rating removed."),n===U.id&&i(null),await T()}catch(se){console.error("Failed to delete rating:",se),b("Could not delete rating.")}finally{setTimeout(()=>b(null),3e3)}};return y.jsxs("div",{className:"p-8 h-full flex flex-col gap-6 overflow-hidden",children:[y.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-4xl font-bold text-gray-100",children:"HRMR Observatory"}),y.jsx("p",{className:"text-gray-400 text-sm",children:"Grade agent responses to teach Sylvia your preferred behavior patterns. Use these scores to curate a reinforcement profile."})]}),g&&y.jsx("span",{className:"text-sm text-blue-300",children:g})]}),y.jsxs("div",{className:"flex flex-col md:flex-row gap-6 flex-1 overflow-hidden",children:[y.jsxs("div",{className:"md:w-72 flex-shrink-0 bg-[#1e1f20] border border-gray-700 rounded-lg p-4 flex flex-col overflow-hidden",children:[y.jsxs("div",{className:"space-y-3 mb-4",children:[y.jsx("input",{type:"text",value:a,onChange:U=>s(U.target.value),placeholder:"Search responses...",className:"w-full bg-[#2a2b2c] text-gray-300 rounded-lg px-3 py-2 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"}),y.jsxs("select",{value:u,onChange:U=>d(U.target.value),className:"w-full bg-[#2a2b2c] text-gray-300 rounded-lg px-3 py-2 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:[y.jsx("option",{value:"all",children:"All grades"}),sh.map(U=>y.jsx("option",{value:U,children:U},U))]})]}),y.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-1",children:p?y.jsx("p",{className:"text-gray-500 text-sm",children:"Loading ratings"}):E.length===0?y.jsx("p",{className:"text-gray-500 text-sm",children:"No ratings yet. Grade a response from the chat page to get started."}):E.map(U=>y.jsxs("button",{onClick:()=>i(U.id),className:`w-full text-left px-3 py-2 rounded-md transition-colors text-sm border ${U.id===n?"bg-blue-600 text-white border-blue-500":"bg-[#2a2b2c] hover:bg-gray-700 text-gray-300 border-gray-700"}`,children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full border ${tb(U.grade)}`,children:U.grade}),y.jsx("span",{className:"text-xs text-gray-400 ml-2",children:cr(U.updatedAt,"MMM d, yyyy")})]}),y.jsx("div",{className:"mt-2 text-xs text-gray-400 line-clamp-2",children:U.agentResponse})]},U.id))})]}),y.jsx("div",{className:"flex-1 bg-[#1e1f20] border border-gray-700 rounded-lg p-6 overflow-hidden",children:k?y.jsxs("div",{className:"h-full flex flex-col gap-4 overflow-hidden",children:[y.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[y.jsx("span",{className:`text-sm font-semibold px-3 py-1 rounded-full border ${tb(k.grade)}`,children:k.grade}),y.jsxs("span",{className:"text-xs text-gray-400",children:["Updated ",cr(k.updatedAt,"MMM d, yyyy  HH:mm")]}),y.jsx("div",{className:"flex items-center gap-2 ml-auto",children:sh.map(U=>y.jsx("button",{onClick:()=>I(k,U),className:`px-2 py-1 rounded-md text-xs font-semibold border transition-colors ${k.grade===U?"bg-blue-600 border-blue-400 text-white":"bg-[#26282B] border-gray-700 text-gray-200 hover:bg-gray-700/60"}`,children:U},U))})]}),y.jsx("div",{className:"flex-1 overflow-y-auto border border-gray-700 rounded-lg bg-[#141517] p-4",children:y.jsx(ma,{remarkPlugins:[ga],className:"prose prose-invert prose-sm max-w-none text-gray-100",children:k.agentResponse})}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[k.preflection&&y.jsxs("div",{className:"border border-gray-700 rounded-lg p-4 bg-[#141517]",children:[y.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-gray-400 mb-2",children:"Preflection"}),y.jsx("p",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:k.preflection})]}),k.internalMonologue&&y.jsxs("div",{className:"border border-purple-600/40 rounded-lg p-4 bg-purple-900/10",children:[y.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-purple-300 mb-2",children:"Internal Monologue"}),y.jsx("p",{className:"text-sm text-purple-100 whitespace-pre-wrap",children:k.internalMonologue})]}),k.stageDirections&&y.jsxs("div",{className:"border border-yellow-600/40 rounded-lg p-4 bg-yellow-900/10",children:[y.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-yellow-300 mb-2",children:"Stage Directions"}),y.jsx("p",{className:"text-sm text-yellow-100 whitespace-pre-wrap",children:k.stageDirections})]}),k.memorySummary&&y.jsxs("div",{className:"border border-blue-600/40 rounded-lg p-4 bg-blue-900/10",children:[y.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-blue-300 mb-2",children:"Memory Summary"}),y.jsx("p",{className:"text-sm text-blue-100 whitespace-pre-wrap",children:k.memorySummary})]}),k.tasks&&k.tasks.length>0&&y.jsxs("div",{className:"border border-green-600/40 rounded-lg p-4 bg-green-900/10",children:[y.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-green-300 mb-2",children:"Tasks"}),y.jsx("ul",{className:"text-sm text-green-100 space-y-1 list-disc list-inside",children:k.tasks.map(U=>y.jsx("li",{children:U.description},U.id))})]})]}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("div",{className:"flex flex-wrap gap-2",children:(M=k.modulesUsed)==null?void 0:M.map(U=>y.jsx("span",{className:"text-[10px] uppercase tracking-wider bg-blue-900/30 text-blue-200 px-2 py-0.5 rounded-full border border-blue-600/30",children:U},U))}),y.jsx("button",{onClick:()=>D(k),className:"px-4 py-2 rounded-md text-sm font-semibold transition-colors bg-red-600 hover:bg-red-500 text-white",children:"Delete Rating"})]})]}):y.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:p?"Loading ratings":"Select a rating to inspect details."})})]})]})},nb={google:hu,openai:mu,openrouter:Sf},DS=[{id:"stage",label:"Stagecraft",Icon:El},{id:"monologue",label:"Monologue",Icon:Gc},{id:"spatial",label:"Spatial",Icon:Rh},{id:"temporal",label:"Temporal",Icon:Dh},{id:"bias",label:"Bias",Icon:Ih},{id:"history",label:"History",Icon:Ph},{id:"insight",label:"Insight",Icon:sf},{id:"reasoning",label:"Reason",Icon:uf},{id:"evaluator",label:"Evaluator",Icon:uu}],lO=[{key:"usePreflection",label:"Preflection"},{key:"useMemory",label:"Memory Capture"},{key:"useStageDirections",label:"Stage Directions"},{key:"useMonologue",label:"Internal Monologue"},{key:"usePromptRewrite",label:"Prompt Rewrite"},{key:"useTaskList",label:"Task List"},{key:"useAudit",label:"Task Audit"}],er={usePreflection:!0,useMemory:!0,useTaskList:!1,useAudit:!1,useStageDirections:!1,useMonologue:!1,usePromptRewrite:!1},Jp={name:"",description:"",icon:"stage",provider:"google",model:hu[0],apiKey:"",prompt:"",memoryEnabled:!0,...er,roleDescription:"",intrigueLevel:50},sO=DS.reduce((e,t)=>(e[t.id]=t.Icon,e),{}),uO=()=>{var me;const[e,t]=H.useState([]),[n,i]=H.useState(Jp),[a,s]=H.useState(null),[u,d]=H.useState(!1),[p,f]=H.useState(null),[g,b]=H.useState([]),[T,E]=H.useState(!1),[k,I]=H.useState(null),D=async()=>{var j,B,K,ce,xe,_e,Pe;try{const Ee=(await um()).sort((Me,Qe)=>Me.name.localeCompare(Qe.name));if(t(Ee),a){const Me=Ee.find(Qe=>Qe.id===a);Me||(s(null),i(Jp),b([])),Me&&(i({id:Me.id,name:Me.name,description:Me.description||"",icon:Me.icon||"stage",provider:Me.provider,model:Me.model,apiKey:Me.apiKey,prompt:Me.prompt,memoryEnabled:Me.memoryEnabled!==!1,usePreflection:((j=Me.featureOverrides)==null?void 0:j.usePreflection)??er.usePreflection,useMemory:((B=Me.featureOverrides)==null?void 0:B.useMemory)??er.useMemory,useTaskList:((K=Me.featureOverrides)==null?void 0:K.useTaskList)??er.useTaskList,useAudit:((ce=Me.featureOverrides)==null?void 0:ce.useAudit)??er.useAudit,useStageDirections:((xe=Me.featureOverrides)==null?void 0:xe.useStageDirections)??er.useStageDirections,useMonologue:((_e=Me.featureOverrides)==null?void 0:_e.useMonologue)??er.useMonologue,usePromptRewrite:((Pe=Me.featureOverrides)==null?void 0:Pe.usePromptRewrite)??er.usePromptRewrite,roleDescription:Me.roleDescription||"",intrigueLevel:Me.intrigueLevel??50}),M(Me.id))}}catch(ue){console.error("Failed to load performers:",ue)}},M=async j=>{E(!0);try{const B=await uS(j,8);b(B)}catch(B){console.error("Failed to load performer memories:",B),I("Unable to load memory timeline."),setTimeout(()=>I(null),3e3)}finally{E(!1)}};H.useEffect(()=>{D()},[]),H.useEffect(()=>{a?M(a):b([])},[a]),H.useEffect(()=>{const j=B=>{const K=B==null?void 0:B.detail;if(!K){a&&M(a);return}(!K.performerId||K.performerId===a)&&a&&M(a)};return window.addEventListener("performer-memories-updated",j),()=>{window.removeEventListener("performer-memories-updated",j)}},[a]);const U=j=>{var B,K,ce,xe,_e,Pe,ue;s(j.id),i({id:j.id,name:j.name,description:j.description||"",icon:j.icon||"stage",provider:j.provider,model:j.model,apiKey:j.apiKey,prompt:j.prompt,memoryEnabled:j.memoryEnabled!==!1,usePreflection:((B=j.featureOverrides)==null?void 0:B.usePreflection)??er.usePreflection,useMemory:((K=j.featureOverrides)==null?void 0:K.useMemory)??er.useMemory,useTaskList:((ce=j.featureOverrides)==null?void 0:ce.useTaskList)??er.useTaskList,useAudit:((xe=j.featureOverrides)==null?void 0:xe.useAudit)??er.useAudit,useStageDirections:((_e=j.featureOverrides)==null?void 0:_e.useStageDirections)??er.useStageDirections,useMonologue:((Pe=j.featureOverrides)==null?void 0:Pe.useMonologue)??er.useMonologue,usePromptRewrite:((ue=j.featureOverrides)==null?void 0:ue.usePromptRewrite)??er.usePromptRewrite,roleDescription:j.roleDescription||"",intrigueLevel:j.intrigueLevel??50})},O=(j,B)=>{i(K=>{const ce={...K,[j]:B};if(j==="provider"){const xe=nb[B];xe&&xe.length>0&&(ce.model=xe[0])}return j==="useTaskList"&&B===!1&&(ce.useAudit=!1),ce})},se=async()=>{var j;if(!n.name.trim()){f("Name is required.");return}d(!0);try{const B=Date.now(),K={id:n.id||`performer-${B}`,name:n.name.trim(),description:n.description.trim(),icon:n.icon,provider:n.provider,model:n.model,apiKey:n.apiKey.trim(),prompt:n.prompt,memoryEnabled:n.memoryEnabled,featureOverrides:{usePreflection:n.usePreflection,useMemory:n.useMemory,useTaskList:n.useTaskList,useAudit:n.useAudit,useStageDirections:n.useStageDirections,useMonologue:n.useMonologue,usePromptRewrite:n.usePromptRewrite},roleDescription:n.roleDescription.trim(),intrigueLevel:n.intrigueLevel,createdAt:n.id&&((j=e.find(ce=>ce.id===n.id))==null?void 0:j.createdAt)||B,updatedAt:B};await sS(K),f("Performer saved."),s(K.id),await D()}catch(B){console.error("Failed to save performer:",B),f("Could not save performer.")}finally{d(!1),setTimeout(()=>f(null),3e3)}},Q=()=>{s(null),i(Jp),b([]),I(null)},G=async j=>{if(window.confirm(`Delete performer "${j.name}"?`))try{await N4(j.id),f("Performer deleted."),await D(),Q()}catch(K){console.error("Failed to delete performer:",K),f("Could not delete performer.")}finally{setTimeout(()=>f(null),3e3)}},Y=async()=>{if(!(!a||!window.confirm("Clear this performer's memory timeline? This cannot be undone.")))try{await R4(a),I("Performer memory cleared."),await M(a)}catch(B){console.error("Failed to clear performer memories:",B),I("Could not clear performer memory.")}finally{setTimeout(()=>I(null),3e3)}};return y.jsxs("div",{className:"p-8 h-full flex flex-col gap-6 overflow-hidden",children:[y.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-4xl font-bold text-gray-100",children:"Performers"}),y.jsx("p",{className:"text-gray-400 text-sm max-w-2xl",children:"Spin up auxiliary personas with their own models, prompts, and memories. Toggle them in chat to add their perspective alongside Sylvia like a boardroom task force."})]}),y.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-400",children:[p&&y.jsx("span",{className:"text-blue-300",children:p}),y.jsx("button",{onClick:Q,className:"px-3 py-2 rounded-md bg-gray-800 hover:bg-gray-700 text-gray-100 border border-gray-600",children:"New Performer"})]})]}),y.jsxs("div",{className:"flex flex-col md:flex-row gap-6 flex-1 overflow-hidden",children:[y.jsxs("div",{className:"md:w-80 flex-shrink-0 bg-[#1e1f20] border border-gray-700 rounded-lg p-4 flex flex-col overflow-hidden",children:[y.jsx("div",{className:"text-xs uppercase tracking-wider text-gray-500 mb-3",children:"Roster"}),y.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-1",children:e.length===0?y.jsx("p",{className:"text-gray-500 text-sm",children:"No performers yet. Create one to begin."}):e.map(j=>y.jsx("button",{onClick:()=>U(j),className:`w-full text-left px-3 py-2 rounded-md transition-colors text-sm border ${j.id===a?"bg-blue-600 text-white border-blue-500":"bg-[#2a2b2c] hover:bg-gray-700 text-gray-300 border-gray-700"}`,children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-lg",children:(()=>{const B=sO[j.icon||"stage"];return B?y.jsx(B,{className:"h-5 w-5"}):j.icon||""})()}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("div",{className:"font-semibold truncate",children:j.name}),y.jsxs("div",{className:"text-xs text-gray-400 truncate",children:[j.provider.toUpperCase(),"  ",j.model]})]})]})},j.id))})]}),y.jsxs("div",{className:"flex-1 bg-[#1e1f20] border border-gray-700 rounded-lg p-6 overflow-y-auto",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-semibold text-gray-400 uppercase mb-1",children:"Display Icon"}),y.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-2",children:DS.map(({id:j,label:B,Icon:K})=>y.jsxs("button",{type:"button",onClick:()=>O("icon",j),className:`flex flex-col items-center gap-1 py-2 rounded-lg border text-xs transition-colors ${n.icon===j?"border-blue-500 bg-blue-600/20 text-blue-200":"border-gray-700 bg-[#2a2b2c] text-gray-300 hover:bg-gray-700"}`,children:[y.jsx(K,{className:"h-5 w-5"}),y.jsx("span",{className:"truncate max-w-[80px]",children:B})]},j))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-semibold text-gray-400 uppercase mb-1",children:"Name"}),y.jsx("input",{type:"text",value:n.name,onChange:j=>O("name",j.target.value),placeholder:"e.g., Sylvia // Strategist",className:"w-full bg-[#2a2b2c] text-gray-200 rounded-lg px-3 py-2 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),y.jsxs("div",{className:"md:col-span-2",children:[y.jsx("label",{className:"block text-xs font-semibold text-gray-400 uppercase mb-1",children:"Description"}),y.jsx("textarea",{value:n.description,onChange:j=>O("description",j.target.value),className:"w-full h-20 bg-[#2a2b2c] text-gray-200 rounded-lg px-3 py-2 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),y.jsxs("div",{className:"md:col-span-2",children:[y.jsx("label",{className:"block text-xs font-semibold text-gray-400 uppercase mb-1",children:"Role Description"}),y.jsx("textarea",{value:n.roleDescription,onChange:j=>O("roleDescription",j.target.value),className:"w-full h-24 bg-[#2a2b2c] text-gray-200 rounded-lg px-3 py-2 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Define this performers seat at the table."})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-semibold text-gray-400 uppercase mb-1",children:"Intrigue Level"}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("input",{type:"range",min:0,max:100,value:n.intrigueLevel,onChange:j=>O("intrigueLevel",Number(j.target.value)),className:"flex-1"}),y.jsx("span",{className:"text-sm text-gray-300 w-10 text-right",children:n.intrigueLevel})]}),y.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Higher intrigue influences drama tagging and storyline arcs."})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-semibold text-gray-400 uppercase mb-1",children:"Provider"}),y.jsx("select",{value:n.provider,onChange:j=>O("provider",j.target.value),className:"w-full bg-[#2a2b2c] text-gray-200 rounded-lg px-3 py-2 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:fm.map(j=>y.jsx("option",{value:j,children:j.toUpperCase()},j))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-semibold text-gray-400 uppercase mb-1",children:"Model"}),y.jsx("select",{value:n.model,onChange:j=>O("model",j.target.value),className:"w-full bg-[#2a2b2c] text-gray-200 rounded-lg px-3 py-2 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:(me=nb[n.provider])==null?void 0:me.map(j=>y.jsx("option",{value:j,children:j},j))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-semibold text-gray-400 uppercase mb-1",children:"API Key"}),y.jsx("input",{type:"password",value:n.apiKey,onChange:j=>O("apiKey",j.target.value),placeholder:`Override ${n.provider.toUpperCase()} key`,className:"w-full bg-[#2a2b2c] text-gray-200 rounded-lg px-3 py-2 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"}),y.jsxs("p",{className:"text-[11px] text-gray-500 mt-1",children:["Stored locally only. Leave blank to reuse the global ",n.provider.toUpperCase()," key from Settings."]})]}),y.jsxs("div",{className:"md:col-span-2",children:[y.jsx("label",{className:"block text-xs font-semibold text-gray-400 uppercase mb-1",children:"Primed Prompt"}),y.jsx("textarea",{value:n.prompt,onChange:j=>O("prompt",j.target.value),placeholder:"Define the performer's behavior",className:"w-full h-40 bg-[#2a2b2c] text-gray-200 rounded-lg px-3 py-2 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),y.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{className:"bg-[#141517] border border-gray-700 rounded-lg p-4",children:[y.jsxs("div",{className:"mb-3",children:[y.jsx("span",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Feature Toggles"}),y.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Choose which modules this performer always enables during their turn."})]}),y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm text-gray-200",children:lO.map(j=>{const B=j.key==="useAudit"&&!n.useTaskList;return y.jsxs("label",{className:`flex items-center gap-2 ${B?"opacity-60":""}`,children:[y.jsx("input",{type:"checkbox",className:"w-4 h-4",checked:!!n[j.key],disabled:B,onChange:K=>O(j.key,B?!1:K.target.checked)}),y.jsx("span",{children:j.label})]},j.key)})})]}),y.jsxs("div",{className:"bg-[#141517] border border-gray-700 rounded-lg p-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("label",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Boardroom Memory"}),y.jsxs("label",{className:"inline-flex items-center gap-2 text-xs text-gray-300",children:[y.jsx("span",{children:n.memoryEnabled?"Enabled":"Disabled"}),y.jsx("input",{type:"checkbox",className:"w-4 h-4",checked:n.memoryEnabled,onChange:j=>O("memoryEnabled",j.target.checked)})]})]}),y.jsx("p",{className:"text-[11px] text-gray-500 mt-3",children:"When enabled, this performer maintains a lightweight memory log that informs future turns. Disable if you want purely in-the-moment responses."})]}),y.jsxs("div",{className:"bg-[#141517] border border-gray-700 rounded-lg p-4 flex flex-col",children:[y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[y.jsx("span",{className:"text-xs font-semibold uppercase text-gray-400",children:"Recent Memory Timeline"}),y.jsx("button",{onClick:Y,disabled:!a||g.length===0,className:`text-[11px] px-2 py-1 rounded-md border transition-colors ${!a||g.length===0?"border-gray-700 text-gray-600 cursor-not-allowed":"border-red-500 text-red-300 hover:bg-red-500/20"}`,children:"Clear"})]}),y.jsx("div",{className:"flex-1 overflow-y-auto border border-gray-800 rounded-md bg-[#111214] p-3 space-y-3 text-sm",children:T?y.jsx("div",{className:"text-gray-500 text-xs text-center",children:"Loading memory snippets"}):g.length===0?y.jsx("div",{className:"text-gray-600 text-xs text-center",children:a?"No memories captured yet.":"Select a performer to view their memory timeline."}):g.map(j=>{var B;return y.jsxs("div",{className:"border border-gray-800 rounded-md p-3 bg-[#18191b]",children:[y.jsxs("div",{className:"flex items-center justify-between text-[11px] text-gray-400 mb-1",children:[y.jsx("span",{children:new Date(j.timestamp).toLocaleString()}),y.jsxs("span",{className:"uppercase tracking-wide text-gray-500",children:["Relevance ",j.relevance]})]}),y.jsx("div",{className:"text-gray-200 text-sm font-semibold mb-1",children:j.summary}),(B=j.tags)!=null&&B.length?y.jsx("div",{className:"flex flex-wrap gap-1 text-[10px] text-blue-300",children:j.tags.slice(0,6).map(K=>y.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-blue-500/10 border border-blue-500/30",children:["#",K.replace(/\s+/g,"-")]},`${j.timestamp}-${K}`))}):null,y.jsx("p",{className:"text-[11px] text-gray-400 mt-2 whitespace-pre-wrap",children:j.transcriptSnippet})]},j.id||j.timestamp)})}),k&&y.jsx("div",{className:"text-[11px] text-blue-300 mt-2 text-right",children:k})]})]}),y.jsxs("div",{className:"mt-6 flex items-center gap-3",children:[y.jsx("button",{onClick:se,disabled:u,className:`px-4 py-2 rounded-md text-sm font-semibold transition-colors ${u?"bg-blue-700 cursor-wait":"bg-blue-600 hover:bg-blue-500"} text-white`,children:u?"Saving":"Save Performer"}),n.id&&y.jsx("button",{onClick:()=>{const j=e.find(B=>B.id===n.id);j&&G(j)},className:"px-4 py-2 rounded-md text-sm font-semibold transition-colors bg-red-600 hover:bg-red-500 text-white",children:"Delete"})]})]})]})]})},cO="chatHistory",fO={"A+":10,A:9,"A-":8,"B+":7,B:6,"B-":5,"C+":4.5,C:4,"C-":3.5,"D+":3,D:2,"D-":1.5,F:0},dO=e=>{if(!e)return"";const t=typeof e=="number"?e:Number(e);return Number.isNaN(t)?"":new Date(t).toLocaleString()},pO=()=>{const[e,t]=H.useState([]),[n,i]=H.useState([]),[a,s]=H.useState(""),[u,d]=H.useState("all"),[p,f]=H.useState("all"),[g,b]=H.useState(null),T=()=>{try{const Q=window.localStorage.getItem(cO);if(Q){const G=JSON.parse(Q);Array.isArray(G)&&t(G)}}catch(Q){console.error("Failed to parse chat history:",Q),b("Unable to load recent conversation."),setTimeout(()=>b(null),3e3)}},E=async()=>{try{const Q=await oS();i(Q)}catch(Q){console.error("Failed to load HRMR ratings:",Q)}};H.useEffect(()=>{T(),E()},[]);const k=H.useMemo(()=>{const Q=new Map;return n.forEach(G=>{Q.set(G.messageId,G)}),Q},[n]),I=H.useMemo(()=>{const Q=new Map;return e.forEach(G=>{G.performerId&&Q.set(G.performerId,{name:G.performerName||"Performer",icon:G.performerIcon})}),Array.from(Q.entries()).map(([G,Y])=>({id:G,...Y}))},[e]),D=H.useMemo(()=>e.filter(Q=>{var K,ce,xe;if(u!=="all"&&Q.role!==u||p==="core"&&Q.performerId||p!=="all"&&p!=="core"&&Q.performerId!==p)return!1;if(!a.trim())return!0;const G=a.toLowerCase(),Y=((K=Q.content)==null?void 0:K.toLowerCase())||"",me=((ce=Q.performerName)==null?void 0:ce.toLowerCase())||"",j=k.get(Q.id),B=((xe=j==null?void 0:j.modulesUsed)==null?void 0:xe.join(" ").toLowerCase())||"";return Y.includes(G)||me.includes(G)||B.includes(G)}),[e,u,p,a,k]),M=n.filter(Q=>!!Q.grade),U=M.length?M.reduce((Q,G)=>Q+(fO[G.grade]??0),0)/M.length:0,O=H.useMemo(()=>{const Q={};return n.forEach(Y=>{var me;(me=Y.modulesUsed)==null||me.forEach(j=>{Q[j]=(Q[j]||0)+1})}),Object.entries(Q).sort((Y,me)=>me[1]-Y[1]).slice(0,6)},[n]),se=()=>{T(),E(),b("Timeline refreshed."),setTimeout(()=>b(null),2e3)};return y.jsxs("div",{className:"p-8 flex flex-col gap-6 h-full overflow-hidden",children:[y.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-4xl font-bold text-gray-100",children:"Performance Studio"}),y.jsx("p",{className:"text-sm text-gray-400",children:"Trace every turn, performer cameo, and HRMR grade to tune Sylvia's craft."})]}),y.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-400",children:[g&&y.jsx("span",{className:"text-blue-300",children:g}),y.jsxs("button",{onClick:se,className:"flex items-center gap-2 px-3 py-2 rounded-md border border-gray-600 bg-[#1e1f20] text-gray-300 hover:bg-gray-700",children:[y.jsx(tu,{className:"h-4 w-4"})," Refresh"]})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[y.jsxs("div",{className:"bg-[#1e1f20] border border-gray-700 rounded-lg p-4",children:[y.jsx("p",{className:"text-xs uppercase tracking-wider text-gray-500",children:"Overview"}),y.jsxs("div",{className:"mt-3 space-y-2 text-sm text-gray-300",children:[y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{children:"Total turns"}),y.jsx("span",{children:e.length})]}),y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{children:"Agent replies"}),y.jsx("span",{children:e.filter(Q=>Q.role==="agent").length})]}),y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{children:"Performers engaged"}),y.jsx("span",{children:I.length})]}),y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{children:"Avg. HRMR score"}),y.jsx("span",{children:U.toFixed(2)})]})]})]}),y.jsxs("div",{className:"bg-[#1e1f20] border border-gray-700 rounded-lg p-4",children:[y.jsx("p",{className:"text-xs uppercase tracking-wider text-gray-500",children:"Top Modules"}),y.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:O.length===0?y.jsx("span",{className:"text-sm text-gray-500",children:"No module telemetry yet."}):O.map(([Q,G])=>y.jsxs("span",{className:"px-3 py-1 rounded-full text-xs bg-blue-900/20 border border-blue-600/40 text-blue-200",children:[Q,"  ",G]},Q))})]}),y.jsxs("div",{className:"bg-[#1e1f20] border border-gray-700 rounded-lg p-4",children:[y.jsx("p",{className:"text-xs uppercase tracking-wider text-gray-500",children:"Filters"}),y.jsxs("div",{className:"mt-3 space-y-3 text-sm",children:[y.jsxs("div",{className:"flex gap-2",children:[y.jsxs("select",{value:u,onChange:Q=>d(Q.target.value),className:"flex-1 bg-[#2a2b2c] text-gray-200 rounded-lg px-3 py-2 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[y.jsx("option",{value:"all",children:"All Roles"}),y.jsx("option",{value:"user",children:"User Only"}),y.jsx("option",{value:"agent",children:"Agent Only"})]}),y.jsxs("select",{value:p,onChange:Q=>f(Q.target.value),className:"flex-1 bg-[#2a2b2c] text-gray-200 rounded-lg px-3 py-2 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[y.jsx("option",{value:"all",children:"All Performers"}),y.jsx("option",{value:"core",children:"Sylvia Core"}),I.map(Q=>y.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none",children:y.jsx(Lh,{className:"w-4 h-4"})}),y.jsx("input",{value:a,onChange:Q=>s(Q.target.value),placeholder:"Search transcript, modules, grades",className:"w-full bg-[#2a2b2c] text-gray-200 rounded-lg pl-9 pr-3 py-2 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]}),y.jsx("div",{className:"flex-1 overflow-y-auto",children:D.length===0?y.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:"No timeline events found for the current filters."}):y.jsx("ol",{className:"space-y-4",children:D.map((Q,G)=>{const Y=k.get(Q.id),me=dO(Q.timestamp||Q.id),j=Q.role==="agent",B=Q.performerId?y.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 rounded-full text-xs border border-purple-500 text-purple-200 bg-purple-900/30",children:[y.jsx(El,{className:"h-3 w-3"}),Q.performerName||"Performer"]}):y.jsx("span",{className:"flex items-center gap-1 px-2 py-0.5 rounded-full text-xs border border-gray-600 text-gray-300 bg-gray-800/40",children:"Core Agent"});return y.jsxs("li",{className:"bg-[#1e1f20] border border-gray-700 rounded-lg p-5 shadow-sm",children:[y.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[y.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[y.jsx("span",{className:`uppercase tracking-wider font-semibold ${j?"text-blue-300":"text-purple-300"}`,children:j?"Agent":"User"}),B,y.jsx("span",{className:"text-gray-500",children:me})]}),Y&&y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("span",{className:"flex items-center gap-1 px-3 py-1 rounded-full text-xs bg-blue-900/30 border border-blue-600/40 text-blue-200",children:[y.jsx(uu,{className:"h-3 w-3"})," ",Y.grade]}),Y.modulesUsed&&Y.modulesUsed.length>0&&y.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[y.jsx(sf,{className:"h-3 w-3"}),Y.modulesUsed.join(", ")]})]})]}),y.jsx("div",{className:"mt-3 prose prose-invert prose-sm max-w-none text-gray-200",children:y.jsx(ma,{remarkPlugins:[ga],children:Q.content})}),(Y==null?void 0:Y.journalNote)&&y.jsxs("div",{className:"mt-3 p-3 bg-[#111214] border border-gray-700 rounded-lg text-xs text-gray-300",children:[y.jsx("p",{className:"uppercase tracking-wider text-gray-500 mb-1",children:"Journal Note"}),y.jsx("p",{children:Y.journalNote})]}),(Y==null?void 0:Y.summary)&&y.jsxs("div",{className:"mt-3 p-3 bg-[#111214] border border-gray-700 rounded-lg text-xs text-gray-300",children:[y.jsx("p",{className:"uppercase tracking-wider text-gray-500 mb-1",children:"Response Summary"}),y.jsx("p",{children:Y.summary})]})]},`${Q.id}-${G}`)})})})]})},rb="memoryOnboardingSettings",ib={provider:"openai",model:mu[0],chunkSize:2200,overlap:200,apiKeys:[]},hO={google:hu,openai:mu,openrouter:Sf},mO=(e,t,n)=>{const i=[],a=e.replace(/\r\n/g,`
`);if(t<=0)return i;let s=0;const u=Math.max(1,t-Math.max(0,Math.min(n,t-1)));for(;s<a.length;){const d=Math.min(a.length,s+t),p=a.slice(s,d).trim();if(p&&i.push(p),d>=a.length)break;s+=u}return i},gO=()=>{const[e,t]=H.useState(ib),[n,i]=H.useState(""),[a,s]=H.useState(!1),[u,d]=H.useState([]),[p,f]=H.useState(null);H.useEffect(()=>{try{const D=window.localStorage.getItem(rb);if(D){const M=JSON.parse(D);M&&typeof M=="object"&&t({...ib,...M})}}catch(D){console.error("Failed to load onboarding settings:",D)}},[]),H.useEffect(()=>{window.localStorage.setItem(rb,JSON.stringify(e))},[e]);const g=hO[e.provider]||[];H.useEffect(()=>{g.includes(e.model)||t(D=>({...D,model:g[0]||D.model}))},[e.provider]);const b=async D=>{const M=await D.text();i(U=>U?`${U}

${M}`:M)},T=D=>{D.preventDefault();const M=D.dataTransfer.files[0];M&&b(M)},E=H.useMemo(()=>n.trim()?mO(n,e.chunkSize,e.overlap):[],[n,e.chunkSize,e.overlap]),k=async()=>{if(!E.length){f("Add text or upload a file before processing.");return}const D=e.apiKeys.map(U=>U.trim()).filter(Boolean);if((e.provider==="openai"||e.provider==="openrouter")&&D.length===0){f("Add at least one API key for the selected provider.");return}s(!0),f(null);const M=E.map((U,O)=>({index:O,total:E.length,status:"pending"}));d(M);try{const U=(D.length>0?D:[void 0]).map((O,se)=>(async()=>{for(let Q=se;Q<E.length;Q+=D.length>0?D.length:1){d(Y=>Y.map(me=>me.index===Q?{...me,status:"running"}:me));const G=E[Q];try{const Y=await lL(G,{provider:e.provider,model:e.model,apiKey:O,temperature:.15});let me=null;try{me=await sL(Y.summary,{provider:e.provider,model:e.model,apiKey:O,temperature:.1})}catch(j){console.warn("Memory evaluation failed:",j)}await tS({timestamp:Date.now(),summary:Y.summary,tags:Y.tags,conversation:G,relevance:Math.max(0,Math.min(10,Math.round((me==null?void 0:me.finalScore)??Y.relevance)))}),d(j=>j.map(B=>B.index===Q?{...B,status:"completed",summary:Y.summary,evaluation:me||void 0}:B))}catch(Y){console.error("Failed to process chunk:",Y),d(me=>me.map(j=>j.index===Q?{...j,status:"error",error:Y.message}:j))}}})());await Promise.all(U),f("Onboarding complete. Memories saved.")}finally{s(!1),setTimeout(()=>f(null),4e3)}},I=()=>{i(""),d([]),f(null)};return y.jsxs("div",{className:"p-8 flex flex-col gap-6 h-full",children:[y.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-4xl font-bold text-gray-100",children:"Memory Onboarding"}),y.jsx("p",{className:"text-sm text-gray-400",children:"Split long docs across multiple API keys, auto-summarize each chunk, and store them as ranked memories in seconds."})]}),y.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-400",children:[p&&y.jsx("span",{className:"text-blue-300",children:p}),y.jsxs("button",{onClick:I,className:"flex items-center gap-2 px-3 py-2 rounded-md border border-gray-600 bg-[#1e1f20] text-gray-300 hover:bg-gray-700",children:[y.jsx(ff,{className:"h-4 w-4"})," Clear input"]})]})]}),y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[y.jsxs("div",{className:"lg:col-span-2 bg-[#1e1f20] border border-gray-700 rounded-lg p-6",children:[y.jsx("label",{className:"block text-xs uppercase tracking-wider text-gray-500 mb-2",children:"Source Text"}),y.jsx("div",{onDrop:T,onDragOver:D=>D.preventDefault(),className:"border border-dashed border-gray-600 rounded-lg p-4 bg-[#141517] text-sm text-gray-400 mb-3",children:"Drag & drop .txt or .md files here, or paste text below."}),y.jsx("textarea",{value:n,onChange:D=>i(D.target.value),rows:12,placeholder:"Paste source material here...",className:"w-full bg-[#2a2b2c] text-gray-200 rounded-lg px-3 py-2 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"}),y.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Chunks prepared: ",E.length]})]}),y.jsxs("div",{className:"bg-[#1e1f20] border border-gray-700 rounded-lg p-6 space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase tracking-wider text-gray-500 mb-1",children:"Provider"}),y.jsx("select",{value:e.provider,onChange:D=>t(M=>({...M,provider:D.target.value})),className:"w-full bg-[#2a2b2c] text-gray-200 rounded-lg px-3 py-2 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:fm.map(D=>y.jsx("option",{value:D,children:D.toUpperCase()},D))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase tracking-wider text-gray-500 mb-1",children:"Model"}),y.jsx("select",{value:e.model,onChange:D=>t(M=>({...M,model:D.target.value})),className:"w-full bg-[#2a2b2c] text-gray-200 rounded-lg px-3 py-2 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:g.map(D=>y.jsx("option",{value:D,children:D},D))})]}),(e.provider==="openai"||e.provider==="openrouter")&&y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase tracking-wider text-gray-500 mb-1",children:"API Keys (one per line)"}),y.jsx("textarea",{value:e.apiKeys.join(`
`),onChange:D=>t(M=>({...M,apiKeys:D.target.value.split(`
`).map(U=>U.trim()).filter(Boolean)})),rows:4,className:"w-full bg-[#2a2b2c] text-gray-200 rounded-lg px-3 py-2 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"sk-..."}),y.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Keys stay local in your browser. They are rotated across chunks for parallel ingestion."})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase tracking-wider text-gray-500 mb-1",children:"Chunk Size (characters)"}),y.jsx("input",{type:"number",min:200,max:8e3,value:e.chunkSize,onChange:D=>t(M=>({...M,chunkSize:Number(D.target.value)})),className:"w-full bg-[#2a2b2c] text-gray-200 rounded-lg px-3 py-2 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase tracking-wider text-gray-500 mb-1",children:"Overlap"}),y.jsx("input",{type:"number",min:0,max:4e3,value:e.overlap,onChange:D=>t(M=>({...M,overlap:Number(D.target.value)})),className:"w-full bg-[#2a2b2c] text-gray-200 rounded-lg px-3 py-2 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),y.jsx("button",{onClick:k,disabled:a||E.length===0,className:`w-full flex items-center justify-center gap-2 px-4 py-2 rounded-md text-sm font-semibold ${a||E.length===0?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-500 text-white"}`,children:a?"Onboarding...":"Start Onboarding"}),y.jsx("p",{className:"text-[11px] text-gray-500",children:"Chunks are stored as memories with AI-generated summaries and relevance grades."})]})]}),y.jsxs("div",{className:"flex-1 bg-[#1e1f20] border border-gray-700 rounded-lg p-6 overflow-y-auto",children:[y.jsx("h2",{className:"text-lg font-semibold text-gray-200 mb-4",children:"Progress"}),u.length===0?y.jsx("p",{className:"text-gray-500 text-sm",children:"Queue memories to see real-time onboarding progress."}):y.jsx("ul",{className:"space-y-3 text-sm",children:u.map(D=>y.jsxs("li",{className:`rounded-lg border px-4 py-3 ${D.status==="completed"?"border-green-600/40 bg-green-900/10 text-green-200":D.status==="error"?"border-red-600/40 bg-red-900/10 text-red-200":D.status==="running"?"border-blue-600/40 bg-blue-900/10 text-blue-200":"border-gray-700 bg-[#141517] text-gray-300"}`,children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("span",{children:["Chunk ",D.index+1," / ",D.total]}),y.jsx("span",{className:"uppercase tracking-wider text-xs",children:D.status})]}),D.summary&&y.jsxs("div",{className:"mt-2 space-y-2",children:[y.jsx("p",{className:"text-xs text-gray-200",children:D.summary}),D.evaluation&&y.jsxs("div",{className:"rounded-md border border-blue-600/40 bg-blue-900/10 p-2 text-[11px] text-blue-100 space-y-1",children:[y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{children:"Final"}),y.jsx("span",{children:D.evaluation.finalScore.toFixed(1)})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[y.jsxs("span",{children:["Novelty: ",D.evaluation.dimensions.novelty.toFixed(1)]}),y.jsxs("span",{children:["Coaching: ",D.evaluation.dimensions.coachingValue.toFixed(1)]}),y.jsxs("span",{children:["Operational: ",D.evaluation.dimensions.operationalImpact.toFixed(1)]}),y.jsxs("span",{children:["Emotional: ",D.evaluation.dimensions.emotionalSignal.toFixed(1)]})]}),y.jsx("p",{className:"text-blue-200/80",children:D.evaluation.justification})]})]}),D.error&&y.jsx("p",{className:"mt-2 text-xs text-red-200",children:D.error})]},D.index))})]})]})},yO="user",vO="sylvia",xO={usePreflection:"Preflection",useMemory:"Memory",useTaskList:"Tasking",useAudit:"Audit",useStageDirections:"Stage",useMonologue:"Monologue",usePromptRewrite:"Rewrite"},bO={usePreflection:!0,useMemory:!0,useTaskList:!1,useAudit:!1,useStageDirections:!1,useMonologue:!1,usePromptRewrite:!1},wO=()=>{const[e,t]=H.useState([]),[n,i]=H.useState([]),[a,s]=H.useState([]),[u,d]=H.useState([]),[p,f]=H.useState(null),[g,b]=H.useState(!0),[T,E]=H.useState(!1),[k,I]=H.useState(null),D=async()=>{b(!0);try{const[K,ce,xe,_e]=await Promise.all([um(),I4(),P4(),cS()]),Pe=K.sort((ue,Ee)=>ue.name.localeCompare(Ee.name));t(Pe),i(ce.sort((ue,Ee)=>Ee.timestamp-ue.timestamp)),s(xe),d(_e)}catch(K){console.error("Failed to load team interactions:",K)}finally{b(!1)}};H.useEffect(()=>{D()},[]),H.useEffect(()=>{const K=()=>{D()};return window.addEventListener("performers-updated",K),window.addEventListener("performer-interactions-updated",K),()=>{window.removeEventListener("performers-updated",K),window.removeEventListener("performer-interactions-updated",K)}},[]);const M=H.useMemo(()=>{const K=new Map;return e.forEach(ce=>K.set(ce.id,{total:0,lastSeen:null})),n.forEach(ce=>{if(K.has(ce.speakerId)){const xe=K.get(ce.speakerId);xe.total+=1,xe.lastSeen=xe.lastSeen?Math.max(xe.lastSeen,ce.timestamp):ce.timestamp}ce.targetIds.forEach(xe=>{if(K.has(xe)){const _e=K.get(xe);_e.total+=1,_e.lastSeen=_e.lastSeen?Math.max(_e.lastSeen,ce.timestamp):ce.timestamp}})}),K},[e,n]),U=H.useMemo(()=>p?n.filter(K=>K.speakerId===p||K.targetIds.includes(p)).slice(0,25):[],[n,p]),O=H.useMemo(()=>a.filter(K=>K.participants.length===2).map(K=>({summary:K,label:K.participants.map(ce=>SO(ce,e)).join("  "),chemistry:K.totalInteractions>0&&K.sentimentSum!==0?K.sentimentSum/K.totalInteractions:null})).sort((K,ce)=>ce.summary.totalInteractions-K.summary.totalInteractions).slice(0,12),[a,e]),se=H.useMemo(()=>n.slice(0,15),[n]),Q=p&&e.find(K=>K.id===p)||null,[G,Y]=H.useState(""),[me,j]=H.useState(50);H.useEffect(()=>{Q?(Y(Q.roleDescription||""),j(Q.intrigueLevel??50)):(Y(""),j(50))},[p,Q==null?void 0:Q.roleDescription,Q==null?void 0:Q.intrigueLevel]);const B=async()=>{if(Q){E(!0);try{const K={...Q,roleDescription:G.trim(),intrigueLevel:me};await sS(K),I("Story settings saved."),await D()}catch(K){console.error("Failed to save performer meta:",K),I("Unable to save story settings.")}finally{E(!1),setTimeout(()=>I(null),3e3)}}};return y.jsxs("div",{className:"p-8 space-y-8",children:[y.jsxs("header",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-4xl font-bold text-gray-100",children:"Team Interactions"}),y.jsx("p",{className:"text-gray-400 max-w-3xl mt-2",children:"Observe how Sylvia and her performers collaborate, clash, and co-create. Track chemistry, spotlight intrigue, and tune the boardroom dynamic to fit your brands story."})]}),y.jsxs("div",{className:"text-right",children:[y.jsxs("div",{className:"text-sm text-gray-500",children:["Updated ",g?"":Ys(new Date,{addSuffix:!0})]}),y.jsx("div",{className:"text-2xl font-semibold text-blue-200",children:n.length}),y.jsx("div",{className:"text-xs uppercase tracking-wider text-gray-400",children:"Total Interaction Events"}),k&&y.jsx("div",{className:"text-xs text-blue-300 mt-1",children:k})]})]}),y.jsxs("section",{className:"bg-[#1e1f20] border border-gray-700 rounded-xl p-6",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsx("h2",{className:"text-2xl font-semibold text-gray-100",children:"Performer Roster"}),y.jsx("div",{className:"text-sm text-gray-500",children:"Click a performer to view their interaction trail"})]}),y.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 xl:grid-cols-3",children:[e.map(K=>{const ce=M.get(K.id)||{total:0,lastSeen:null},xe={...bO,...K.featureOverrides||{}},_e=Object.entries(xe).filter(([Pe,ue])=>ue).map(([Pe])=>xO[Pe]);return y.jsxs("button",{onClick:()=>f(Pe=>Pe===K.id?null:K.id),className:`text-left bg-[#161719] border rounded-lg p-4 transition-colors ${p===K.id?"border-blue-500 shadow-lg shadow-blue-500/20":"border-gray-700 hover:border-gray-500"}`,children:[y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[y.jsx("div",{className:"text-lg font-semibold text-gray-100",children:K.name}),y.jsx("span",{className:"text-xs uppercase tracking-widest text-gray-500",children:K.provider})]}),K.description&&y.jsx("p",{className:"text-sm text-gray-400 mb-3 line-clamp-2",children:K.description}),y.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-300 mb-3",children:[y.jsx("span",{className:"font-semibold",children:ce.total}),y.jsx("span",{className:"text-gray-500",children:"touchpoints"}),y.jsx("span",{className:"text-xs text-gray-500",children:ce.lastSeen?`last seen ${Ys(ce.lastSeen,{addSuffix:!0})}`:"no activity yet"})]}),K.roleDescription&&y.jsx("p",{className:"text-xs text-gray-400 mb-2",children:K.roleDescription}),y.jsx("div",{className:"flex flex-wrap gap-1 text-[10px] uppercase tracking-wide text-blue-200",children:_e.length>0?_e.map(Pe=>y.jsx("span",{className:"px-2 py-0.5 rounded-full bg-blue-500/10 border border-blue-500/30",children:Pe},Pe)):y.jsx("span",{className:"text-gray-500",children:"No features enabled"})})]},K.id)}),e.length===0&&y.jsx("div",{className:"col-span-full text-center text-gray-500 py-8",children:"No performers yet. Add one to start the ensemble."})]})]}),y.jsxs("section",{className:"bg-[#1e1f20] border border-gray-700 rounded-xl p-6",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsx("h2",{className:"text-2xl font-semibold text-gray-100",children:"Chemistry Matrix"}),y.jsx("div",{className:"text-sm text-gray-500",children:"Top active relationships across the boardroom"})]}),y.jsxs("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-3",children:[O.length===0&&y.jsx("div",{className:"text-gray-500 text-sm col-span-full",children:"No shared interactions yet. Engage a performer to spark the chemistry."}),O.map(({summary:K,label:ce,chemistry:xe})=>y.jsxs("div",{className:"bg-[#141517] border border-gray-700 rounded-lg p-4 flex flex-col gap-2",children:[y.jsx("div",{className:"text-sm font-semibold text-gray-200",children:ce}),y.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400",children:[y.jsxs("span",{children:[K.totalInteractions," exchanges"]}),y.jsxs("span",{children:["Last ",Ys(K.lastInteraction,{addSuffix:!0})]})]}),y.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-300",children:[y.jsxs("div",{children:[y.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-widest",children:"Chemistry"}),y.jsx("div",{className:"text-lg font-semibold text-blue-200",children:typeof xe=="number"?xe.toFixed(2):""})]}),y.jsxs("div",{children:[y.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-widest",children:"Intrigue"}),y.jsx("div",{className:"text-lg font-semibold text-amber-300",children:K.intrigueCount})]})]}),K.tags.length>0&&y.jsx("div",{className:"flex flex-wrap gap-1 text-[10px] uppercase tracking-wide text-amber-200",children:K.tags.slice(0,6).map(_e=>y.jsx("span",{className:"px-2 py-0.5 rounded-full bg-amber-500/10 border border-amber-400/30",children:_e},`${K.pairKey}-${_e}`))})]},K.pairKey))]})]}),y.jsxs("section",{className:"grid gap-6 lg:grid-cols-3",children:[y.jsxs("div",{className:"bg-[#1e1f20] border border-gray-700 rounded-xl p-6 lg:col-span-2",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsx("h2",{className:"text-2xl font-semibold text-gray-100",children:"Recent Boardroom Moments"}),y.jsx("div",{className:"text-sm text-gray-500",children:"Latest 15 interaction events"})]}),y.jsxs("div",{className:"space-y-3 max-h-[28rem] overflow-y-auto pr-2",children:[se.length===0&&y.jsx("div",{className:"text-gray-500 text-sm",children:"Fire up a conversation to populate the timeline."}),se.map(K=>{var ce;return y.jsxs("article",{className:"bg-[#141517] border border-gray-700 rounded-lg p-4",children:[y.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-2",children:[y.jsx("span",{children:Ys(K.timestamp,{addSuffix:!0})}),y.jsx("span",{children:K.conversationId})]}),y.jsxs("div",{className:"text-sm text-gray-200 font-semibold",children:[K.speakerName,"  ",K.targetNames.join(", ")]}),y.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Message ID: ",K.messageId]}),(ce=K.narrativeTags)!=null&&ce.length?y.jsx("div",{className:"flex flex-wrap gap-1 mt-2 text-[10px] uppercase tracking-wide text-purple-200",children:K.narrativeTags.map(xe=>y.jsx("span",{className:"px-2 py-0.5 rounded-full bg-purple-500/10 border border-purple-400/30",children:xe},`${K.id}-${xe}`))}):null]},K.id)})]})]}),y.jsxs("div",{className:"bg-[#1e1f20] border border-gray-700 rounded-xl p-6",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsx("h2",{className:"text-xl font-semibold text-gray-100",children:"Spotlight"}),y.jsx("div",{className:"text-sm text-gray-500",children:p?"Focused performer timeline":"Select a performer above"})]}),y.jsxs("div",{className:"space-y-3 max-h-[28rem] overflow-y-auto pr-2",children:[p&&U.length===0&&y.jsx("div",{className:"text-gray-500 text-sm",children:"No interactions recorded yet for this performer."}),p==null&&y.jsx("div",{className:"text-gray-500 text-sm",children:"Tap a performer card to explore their network."}),U.map(K=>{var ce;return y.jsxs("article",{className:"bg-[#141517] border border-gray-700 rounded-lg p-3",children:[y.jsxs("div",{className:"flex items-center justify-between text-[11px] text-gray-500 mb-1",children:[y.jsx("span",{children:Ys(K.timestamp,{addSuffix:!0})}),y.jsx("span",{children:K.speakerName})]}),y.jsxs("div",{className:"text-sm text-gray-200",children:[K.speakerName,"  ",K.targetNames.join(", ")]}),typeof K.sentiment=="number"&&y.jsxs("div",{className:"text-[11px] text-gray-500 mt-1",children:["Sentiment: ",K.sentiment.toFixed(2)]}),(ce=K.narrativeTags)!=null&&ce.length?y.jsx("div",{className:"flex flex-wrap gap-1 mt-1 text-[10px] uppercase tracking-wide text-purple-200",children:K.narrativeTags.map(xe=>y.jsx("span",{className:"px-2 py-0.5 rounded-full bg-purple-500/10 border border-purple-400/30",children:xe},`${K.id}-${xe}`))}):null]},K.id)})]}),Q&&y.jsxs("div",{className:"mt-4 space-y-3 bg-[#161719] border border-gray-700 rounded-lg p-4",children:[y.jsx("h3",{className:"text-sm font-semibold text-gray-200",children:"Narrative Controls"}),y.jsxs("div",{children:[y.jsx("label",{className:"text-xs uppercase tracking-wider text-gray-500 mb-1 block",children:"Role Description"}),y.jsx("textarea",{value:G,onChange:K=>Y(K.target.value),className:"w-full h-24 bg-[#1e1f20] text-gray-200 rounded-lg px-3 py-2 border border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"text-xs uppercase tracking-wider text-gray-500 mb-1 block",children:["Intrigue Level (",me,")"]}),y.jsx("input",{type:"range",min:0,max:100,value:me,onChange:K=>j(Number(K.target.value)),className:"w-full"})]}),y.jsx("button",{onClick:B,disabled:T,className:`px-3 py-2 rounded-md text-sm font-semibold transition-colors ${T?"bg-blue-700 cursor-wait text-white":"bg-blue-600 hover:bg-blue-500 text-white"}`,children:T?"Saving":"Save Narrative Settings"})]})]})]}),y.jsxs("section",{className:"bg-[#1e1f20] border border-gray-700 rounded-xl p-6",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsx("h2",{className:"text-2xl font-semibold text-gray-100",children:"Tag Influence Board"}),y.jsx("div",{className:"text-sm text-gray-500",children:"Weighted by memory relevance & knowledge graph references"})]}),y.jsxs("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-3",children:[u.length===0&&y.jsx("div",{className:"text-gray-500 text-sm",children:"No tag activity yet. Capture memories or knowledge to populate scores."}),u.slice(0,12).map(K=>y.jsxs("div",{className:"bg-[#141517] border border-gray-700 rounded-lg p-4",children:[y.jsxs("div",{className:"text-lg font-semibold text-gray-100",children:["#",K.tag]}),y.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-300 mt-2",children:[y.jsxs("div",{children:[y.jsx("div",{className:"text-xs uppercase tracking-widest text-gray-500",children:"Score"}),y.jsx("div",{className:"text-xl font-semibold text-blue-200",children:K.score.toFixed(2)})]}),y.jsxs("div",{children:[y.jsx("div",{className:"text-xs uppercase tracking-widest text-gray-500",children:"Memories"}),y.jsx("div",{className:"text-sm text-gray-200",children:K.memoryCount})]}),y.jsxs("div",{children:[y.jsx("div",{className:"text-xs uppercase tracking-widest text-gray-500",children:"Knowledge Links"}),y.jsx("div",{className:"text-sm text-gray-200",children:K.knowledgeCount})]})]})]},K.tag))]})]})]})},SO=(e,t)=>{var n;return e===yO?"User":e===vO?"Sylvia":((n=t.find(i=>i.id===e))==null?void 0:n.name)||"Collaborator"},TO=()=>y.jsx(SC,{children:y.jsxs("div",{className:"flex h-screen bg-[#26282B] text-white",children:[y.jsx(eE,{}),y.jsx("main",{className:"flex-1 overflow-y-auto",children:y.jsxs(Z1,{children:[y.jsx(zr,{path:"/",element:y.jsx($U,{})}),y.jsx(zr,{path:"/memory",element:y.jsx(WU,{})}),y.jsx(zr,{path:"/journal",element:y.jsx(eO,{})}),y.jsx(zr,{path:"/graph",element:y.jsx(iO,{})}),y.jsx(zr,{path:"/threads",element:y.jsx(oO,{})}),y.jsx(zr,{path:"/hrmr",element:y.jsx(aO,{})}),y.jsx(zr,{path:"/performers",element:y.jsx(uO,{})}),y.jsx(zr,{path:"/team",element:y.jsx(wO,{})}),y.jsx(zr,{path:"/performance",element:y.jsx(pO,{})}),y.jsx(zr,{path:"/memory-onboarding",element:y.jsx(gO,{})}),y.jsx(zr,{path:"/settings",element:y.jsx(nO,{})})]})})]})}),IS=document.getElementById("root");if(!IS)throw new Error("Could not find root element to mount to");const CO=s1.createRoot(IS);CO.render(y.jsx(e1.StrictMode,{children:y.jsx(TO,{})}));
